!function(angular){"use strict";var mi=angular.module("maya",["ngRoute","ngResource","ngSanitize","ngCookies","config","company","reports","security",,"account","etf","foreignetf","foreignetfManager","fund","hedgefund","issuance","corpactions","sitemap","LocalStorageModule","m.services","m.notification","m.sharedDirective","m.sharedGrid","m.sharedCharts","m.dataStorage","ui.bootstrap.datepicker","ui.bootstrap","indices","brantwills.paging","ui.bootstrap","ui.odometer","ngAnimate","toaster","slick","angular-cache","blockUI","ng-breadcrumbs","vcRecaptcha","angucomplete-alt","angulartics","angulartics.google.analytics","vs-repeat","oc.lazyLoad","angular-click-outside","dibari.angular-ellipsis","pascalprecht.translate","asyncFilter","tmh.dynamicLocale","auth0.auth0"]).constant("mGeneralSetting",{allreadySendRequest:!1,Page:{BreakingAnnouncement:"breakingannouncement",Company:"company",ETNs:"etn",Fund:"fund",Tase:"tase",Shareholders:"shareholders",Prospectus:"prospectus",DraftProspectus:"draftprospectus",AssemblyVotes:"assemblyvotes"},PageActionType:{ViewPage:1,Search:2,SearchPaging:3},ModalType:{SendMail:"sendMail",PopUpMessage:"popUpMessage",PopUpDownload:"popUpDownload",TradeData:"tradeData",Register:"register",UpdateAccount:"updateaccount",ResetPwd:"resetPwd",UnsubscribeForm:"unsubscribeForm",UnsubscribeEmail:"unsubscribeEmail",ErrorDialog:"errorDialog",OkCancelDialog:"okCancelDialog",InputDialog:"inputDialog",AdvancedFilter:"advancedFilter",AlertSettingDialog:"alertSettingDialog"},Action:{RemoveFavorite:1,AddFavorite:2},Lang:"he-IL",LangStates:{English:"en-US",Hebrew:"he-IL"},DefaultPageSize:30,ReportPageSize:30,CheckFrequencyUpate:30,issuanceInterval:4e4,MaximumExportLimit:2e3,GridStates:{None:0,Add:1,Edit:2},FundProps:{IsUnrestrictedFund:"bUF",IsLeveragedFund:"bLF",IsImitatingFund:"bIF",IsInvertedExposureFund:"bIEF",IsRegularDatesFund:"bRDF",IsFundsDenominated:"bFD",IsForeignInvestmentFund:"bFIF",IsTaxFreeForForeignInvestment:"bTFFI",IsBankPortfolioTracking:"bBPT",IsKosherFund:"bKF"}}).config(function($logProvider,$httpProvider,$ocLazyLoadProvider,ngConfigSetting){$logProvider.debugEnabled(ngConfigSetting.isInDebugMode),$httpProvider.defaults.headers.common["X-Maya-With"]="allow",$httpProvider.defaults.headers.common["Accept-Language"]="he-IL"}).config(function($analyticsProvider){window.ga&&(window.ga("set","userId",localStorage.uauid),console.log("analiticsProvider user id -> "+localStorage.uauid))}).config(function(blockUIConfig,mGeneralSetting){blockUIConfig.autoBlock=!1,mGeneralSetting.Lang=0<window.location.href.indexOf("/en")?mGeneralSetting.LangStates.English:mGeneralSetting.LangStates.Hebrew,blockUIConfig.message=mGeneralSetting.LangStates.English==mGeneralSetting.Lang?"...Loading":"טוען ...",blockUIConfig.delay=500}).config(function(toasterConfig){angular.extend(toasterConfig,{autoDismiss:!1,maxOpened:3,newestOnTop:!1,preventDuplicates:!1,preventOpenDuplicates:!1,target:"body",progressBar:!0,closeButton:!1,allowHtml:!0,timeOut:3e4,positionClass:"toast-bottom-right"})}).config(function(localStorageServiceProvider){localStorageServiceProvider.setPrefix("MayaApp")}).config(function(toasterConfig){toasterConfig.closeButton=!0}).config(function(tmhDynamicLocaleProvider,ngConfigSetting){var localeURL=ngConfigSetting.mayaLocaleBaseUrl;tmhDynamicLocaleProvider.localeLocationPattern(localeURL+"angular-locale_{{locale}}.js")}).config(function(angularAuth0Provider,ngConfigSetting,mGeneralSetting){angularAuth0Provider.init({clientID:ngConfigSetting.auth0AngClientId,domain:ngConfigSetting.auth0CustomDomain,responseType:"token",audience:ngConfigSetting.auth0Audience,redirectUri:mGeneralSetting.Lang==mGeneralSetting.LangStates.English?ngConfigSetting.auth0EngRedirectUri:ngConfigSetting.auth0RedirectUri,scope:"openid profile email",lang:"en",taseLang:"en"})}).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("httpErrorResponseInterceptor"),$httpProvider.interceptors.push("preventTemplateCacheInterceptor"),$httpProvider.interceptors.push("auth0Interceptor")}]).factory("preventTemplateCacheInterceptor",["$injector",function($injector){var buildversion_build=document.getElementById("version").content;return{request:function(config){return-1!==config.url.indexOf("src")&&-1!==config.url.indexOf(".html")&&(config.url=config.url+"?v="+buildversion_build),config}}}]).factory("httpErrorResponseInterceptor",["$q","$location",function($q,$location){return{response:function(responseData){return responseData},responseError:function(response){switch(response.status){case 401:-1<$location.path().indexOf("/en")?$location.path("/en"):$location.path("/");break;case 404:-1<$location.path().indexOf("/reports/details/")?-1<$location.path().indexOf("/en")?$location.path("/en/reports404"):$location.path("/reports404"):-1<$location.path().indexOf("/en")?$location.path("/en/404"):$location.path("/404");break;default:console.log(" general error ->"+response.status+"  and ->"+response.statusText)}return $q.reject(response)}}}]).config(function($routeProvider,$locationProvider){$routeProvider.when("/en",{notify:{frq:30},templateUrl:"src/reports/home.html",label:"reports",caseInsensitiveMatch:!0,resolve:{load:function($location){$location.path("/en/reports/company")}}}).when("/company/:id/:view?",{templateUrl:"src/company/company-data.html",reloadOnSearch:!1,resolve:{load:function($ocLazyLoad,ngConfigSetting){return $ocLazyLoad.load({name:"sbCompany",files:ngConfigSetting.lazyLoadConfig.sbCompany})}}}).when("/en/company/:id/:view?",{templateUrl:"src/company/company-data.html",reloadOnSearch:!1,resolve:{load:function($ocLazyLoad,ngConfigSetting){return $ocLazyLoad.load({name:"sbCompany",files:ngConfigSetting.lazyLoadConfig.sbCompany})}}}).when("/fund/:id/:view?",{templateUrl:"src/fund/fundview.html",reloadOnSearch:!1,resolve:{load:function($ocLazyLoad,ngConfigSetting){return $ocLazyLoad.load({name:"sbChart",files:ngConfigSetting.lazyLoadConfig.sbFund})}}}).when("/hedgefund/:id/:view?",{templateUrl:"src/hedgefund/fundview.html",reloadOnSearch:!1,resolve:{load:function($ocLazyLoad,ngConfigSetting){return $ocLazyLoad.load({name:"sbChart",files:ngConfigSetting.lazyLoadConfig.sbFund})}}}).when("/etf/:id/:view?/:type?",{templateUrl:"src/etf/detail.html",label:"etf",reloadOnSearch:!1,resolve:{load:function($ocLazyLoad,ngConfigSetting){return $ocLazyLoad.load({name:"sbChart",files:ngConfigSetting.lazyLoadConfig.sbFund})}}}).when("/foreignetf/:id/:view?/:type?",{templateUrl:"src/foreignetf/detail.html",label:"foreignetf",reloadOnSearch:!1,resolve:{load:function($ocLazyLoad,ngConfigSetting){return $ocLazyLoad.load({name:"sbChart",files:ngConfigSetting.lazyLoadConfig.sbFund})}}}).when("/foreignetfmanager/:id/:view?",{templateUrl:"src/foreignetfmanager/details.html",label:"foreignetfManager",reloadOnSearch:!1}).when("/en/404",{templateUrl:"src/shared/404Page.html",reloadOnSearch:!1}).when("/404",{templateUrl:"src/shared/404Page.html",reloadOnSearch:!1}).when("/en/reports404",{templateUrl:"src/reports/report404Page.html",reloadOnSearch:!1}).when("/reports404",{templateUrl:"src/reports/report404Page.html",reloadOnSearch:!1}).when("/issuance",{templateUrl:"src/issuance/issuance.html",label:"issuance",reloadOnSearch:!1}).when("/en/issuance",{templateUrl:"src/issuance/issuance.html",label:"issuance",reloadOnSearch:!1}).when("/fundmanager/:id/:view?",{templateUrl:"src/fund/manager.html",reloadOnSearch:!1}).when("/fundmanager/:id/asset/:assetId",{templateUrl:"src/fund/asset.html"}).when("/funds",{templateUrl:"src/fund/funds-data.html",label:"fundsdata",reloadOnSearch:!1}).when("/reports/finance/:year/:period/:entity?",{templateUrl:"src/reports/financebyperiod.html",label:"financebyperiod"}).when("/reports/finance",{templateUrl:"src/reports/financebyperiod.html",label:"financebyperiod",reloadOnSearch:!1}).when("/en/reports/finance",{templateUrl:"src/reports/financebyperiod.html",label:"financebyperiod",reloadOnSearch:!1}).when("/en/reports/details/:id/:ftype?/:fnum?/:cid?",{templateUrl:"src/reports/details.html",label:"company",reloadOnSearch:!1}).when("/reports/details/:id/:ftype?/:fnum?/:cid?",{templateUrl:"src/reports/details.html",label:"company",reloadOnSearch:!1}).when("/reports/:view/:page?",{notify:{frq:30},templateUrl:"src/reports/home.html",label:"reports",reloadOnSearch:!1}).when("/en/reports/:view/:page?",{notify:{frq:30},templateUrl:"src/reports/home.html",label:"reports",resolve:{IsAuth:function($route,$location,AccountProxy,ngConfigSetting){!$route.current.params.view||"favorites"!=$route.current.params.view&&"mymessages"!=$route.current.params.view||AccountProxy.authentication.isAuth||$location.path("/")}},reloadOnSearch:!1}).when("/en/reports/:view",{notify:{frq:30},templateUrl:"src/reports/home.html",label:"reports",resolve:{load:function($location,$route){var view=$route.current.params.view,inList=!1;["breakingannouncement","company","tase"].forEach(function(item){item!==view||(inList=!0)}),inList||$location.path("/en")}}}).when("/reports/:view/:search",{notify:{frq:30},templateUrl:"src/reports/home.html",label:"reports"}).when("/en/reports/:view/:search",{notify:{frq:30},templateUrl:"src/reports/home.html",label:"reports"}).when("/report/:id",{templateUrl:"src/reports/message.html"}).when("/bursa/report.asp?:report__cd/:Type?/:CompCd?",{resolve:{load:function($location,$route){var url="reports/details/",arrrpt=$route.current.params.report_cd.split("-");url+=arrrpt[0],1<arrrpt.length&&(url+="/2/"+parseInt(arrrpt[1])),$location.url(url)}}}).when("/",{notify:{frq:10},templateUrl:"src/reports/home.html",label:"reports",resolve:{setTitle:function(TitleService,mGeneralSetting,mayauthService,$location,$controller){TitleService.setTitle(globalTrans[mGeneralSetting.Lang].mayaStrings.MayaMainPageTitle)}},reloadOnSearch:!1}).when("/search",{templateUrl:"src/reports/search.html",label:"",reloadOnSearch:!1}).when("/en/search",{templateUrl:"src/reports/search.html",label:"",reloadOnSearch:!1}).when("/corporateactions/:view",{notify:{name:"corporateactions",frq:30},templateUrl:"src/corpactions/view.html",label:"corporateactions",reloadOnSearch:!1}).when("/en/corporateactions/:view",{notify:{name:"corporateactions",frq:30},templateUrl:"src/corpactions/view.html",label:"corporateactions",reloadOnSearch:!1}).when("/login",{notify:{frq:30},templateUrl:"src/reports/home.html",label:"reports",resolve:{isLoggedIn:function($controller){$controller("AccountCtrl").showHidePopUp()}},reloadOnSearch:!1}).when("/register",{notify:{frq:30},templateUrl:"src/reports/home.html",label:"reports",resolve:{isLoggedIn:function($controller){$controller("AccountCtrl").openRegister()}},reloadOnSearch:!1}).when("/account/loginredirect",{template:" ",resolve:{isLoggedIn:function($controller,mayauthService){localStorage.setItem("Language","he"),console.log("heb loginredirect route")}}}).when("/en/account/loginredirect",{template:" ",resolve:{isLoggedIn:function($controller,mayauthService){localStorage.setItem("Language","en"),console.log("eng loginredirect route")}}}).when("/account/emailverifyredirect",{template:" ",resolve:{isLoggedIn:function($controller,mayauthService){console.log("heb emailverify redirect route"),mayauthService.login()}}}).when("/en/account/emailverifyredirect",{template:" ",resolve:{isLoggedIn:function($controller,mayauthService){console.log("eng emailverify redirect route"),mayauthService.login()}}}).when("/account/notification",{templateUrl:"src/account/notification.html",resolve:{isLoggedIn:function($controller,mayauthService){},load:function($ocLazyLoad,ngConfigSetting){return $ocLazyLoad.load({name:"sbNot",files:ngConfigSetting.lazyLoadConfig.sbNot})}}}).when("/account/termofuse",{templateUrl:"src/account/termofuse.html"}).when("/about/sitemap",{templateUrl:"src/about/sitemap.html"}).when("/en/about/sitemap",{templateUrl:"src/about/sitemap.html"}).when("/account/confirmemail/:status",{templateUrl:"src/account/confirm-email.html"}).when("/account/unsubscribeform",{resolve:{open:function($route,$window,modalService,uibPopUpService,mGeneralSetting,ngConfigSetting){modalService.open(mGeneralSetting.ModalType.UnsubscribeForm,{}).then(function(response){if(response)uibPopUpService.open(mGeneralSetting.ModalType.PopUpMessage,{message:response.message,title:response.title}).result.then(function(){$window.location.href=ngConfigSetting.virDir});else{var defer=$q.defer();$timeout(function(){return defer.resolve()},0).then(function(){$window.location.href=ngConfigSetting.virDir})}})}}}).when("/account/unsubscribe",{resolve:{open:function($route,$window,modalService,mGeneralSetting,ngConfigSetting){modalService.open(mGeneralSetting.ModalType.UnsubscribeEmail,{token:$route.current.params.token,email:""}).then(function(){$window.location.href=ngConfigSetting.virDir})}}}).when("/account/resetpassword",{templateUrl:"src/reports/home.html",label:"reports",resolve:{isReady:function($log,$window,modalService,uibPopUpService,mGeneralSetting,ngConfigSetting,dataStorage,RecaptchaService,$q,$timeout){RecaptchaService.initKey(),modalService.open(mGeneralSetting.ModalType.ResetPwd,{}).then(function(response){if($log.debug("Reset Pwd message response"),response)uibPopUpService.open(mGeneralSetting.ModalType.PopUpMessage,{message:response.message,title:response.title}).result.then(function(){$window.location.href=ngConfigSetting.virDir});else{var defer=$q.defer();$timeout(function(){return defer.resolve()},0).then(function(){$window.location.href=ngConfigSetting.virDir})}},function(error){$log.debug("Reset Pwd message reject"),modalService.open(mGeneralSetting.ModalType.PopUpMessage,{message:error.message,title:error.title}).then(function(){$window.location.href=ngConfigSetting.virDir})})}}}).otherwise({redirectTo:"/"}),$locationProvider.html5Mode({enabled:!0,requireBase:!0})});window.location;mi.constant("ngAuthSettings",{apiServiceBaseUri:"",loginExpirationDays:20}),mi.constant("mMimeTypeSettings",{FileType:{CSV:"text/csv",TSV:"text/tsv",XLS:"application/vnd.ms-excel"}}),mi.constant("vChartConfigInfo",{IsOneDay:!0,DefaultPeriod:"day",StartHour:"09:00",EndHour:"18:00",IsEng:!1}),mi.run(function(MayaSearchService,filterService){MayaSearchService.init(),filterService.initFilter()}),mi.filter("highlight",function($sce){return function(text,phrase){if(phrase){var pattern='<i class="highlighted">$1</i>';(phrase=(phrase=phrase.replace(")","")).replace("(","")).split(" ").forEach(function(ph){-1<pattern.indexOf(ph)||(text=text.replace(new RegExp("("+ph+")","gi"),pattern))})}$sce.trustAsHtml(text);return $sce.trustAsHtml(text)}}),mi.run(["$route","$rootScope","$location","$translate","$http","mGeneralSetting","changeLangFactory","tmhDynamicLocale","ngConfigSetting",function($route,$rootScope,$location,$translate,$http,mGeneralSetting,changeLangFactory,tmhDynamicLocale,ngConfigSetting){var original=$location.path;$location.path=function(path,reload){if(!1===reload)var lastRoute=$route.current,un=$rootScope.$on("$locationChangeSuccess",function(){$route.current=lastRoute,un()});return original.apply($location,[path])},$rootScope.$on("$locationChangeStart",function(event,next,current){var langChanged=!1,url=document.createElement("a");url.setAttribute("href",next);var pathname=url.pathname;"/"!=pathname.substring(0,1)&&(pathname="/"+pathname);var lang=0==pathname.indexOf(ngConfigSetting.englishHostName)?"en-US":"he-IL";$http.defaults.headers.common["Accept-Language"]=lang,$translate.use()||(tmhDynamicLocale.set(lang.toLocaleLowerCase()),langChanged=!0,$translate.use(lang),mGeneralSetting.Lang=lang),langChanged&&changeLangFactory.invoke(),url=null})}]),mi.config(function($translateProvider,mGeneralSetting){$translateProvider.directivePriority(100),$translateProvider.translations("en-US",globalTrans["en-US"]),$translateProvider.translations("he-IL",globalTrans["he-IL"])})}(angular);
!function(angular){"use strict";angular.module("config",[]).constant("ngConfigSetting",{virDir:"/",isInDebugMode:!1,socketEnabled:!1,domain:location.protocol+"//mayaapi.tase.co.il",api:location.protocol+"//mayaapi.tase.co.il/api/",backupApi:"api/",data:location.protocol+"//mayaapi.tase.co.il/data/",clientdata:"/data/",englishHostName:"/en",logoUrl:"https://mayafiles.tase.co.il/logos/",mayaServiceUrl:location.protocol+"//mayaservice.tase.co.il",vChartDataBaseUrl:"https://info.tase.co.il/_layouts/tase/Handlers/ChartsDataHandler.ashx",vChartDataBaseUrl2:"https://api.tase.co.il/api/ChartData/ChartData/",apiRecaptchaClientKey:"6LcoeyQTAAAAALUoCGF5-9FskWIwpyc6T0WRkerS",mayaFilesBaseUrl:"mayafiles.tase.co.il",mayaLocaleBaseUrl:"content/js/",myTaseLink:"https://my.tase.co.il",taseInfoLink:"https://info.tase.co.il",auth0Audience:"taseapis",auth0RedirectUri:"https://maya.tase.co.il/account/loginredirect",auth0EngRedirectUri:"https://maya.tase.co.il/en/account/loginredirect",auth0AngClientId:"UBO5RtEOsQVLwCXFLnFfu4kG54ZmawOf",auth0CustomDomain:"account.tase.co.il",getLegendURL:function(){return location.protocol+"//"+this.mayaFilesBaseUrl+"/docs/LegendOfFund.xls"},lazyLoadConfig:{sbCompany:["content/js/angular-scroll.js","content/js/angular-chart.js","content/css/angular-chart.css"],sbFund:["content/js/angular-chart.js","content/css/angular-chart.css"],sbNot:["content/css/notifications.css"]}})}(angular),function(i,s,o,r,a,m){i.GoogleAnalyticsObject=r,i.ga=i.ga||function(){(i.ga.q=i.ga.q||[]).push(arguments)},i.ga.l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",m.parentNode.insertBefore(a,m)}(window,document,"script","ga"),ga("create","UA-705750-2","auto");
!function(angular){"use strict";angular.module("m.dataStorage",[]).factory("dataStorage",function($interval,_){return{add:function(o,Type){var c=new Type(o);return this.data.push(c),c},filter:function(type,predicat){return _.filter(this.data,predicat)}}})}(angular);
!function(angular){"use strict";var mi=angular.module("company",[]);function CompanyCtrl($scope,$routeParams,$location,companyProxy,dataStorage,Company,_,jsonService,BaseCtrl,TitleService,MetaTagService,mGeneralSetting,utility){this._Company=Company,this._CompanyProxy=companyProxy,this._TitleService=TitleService,this._MetaTagService=MetaTagService,this._dataStorage=dataStorage,this._$location=$location,this._ld=_,this._jsonService=jsonService,this.companyId=$routeParams.id,this.company="",this.exportKeyArgs=[$routeParams.id],this.isShow=!1,this.isGetCompany=!1,this.changeDirection=0,this.pageSize=100,this.includeInInd=[],this.tabPage=this.setTabByParam($routeParams.view),this.pagePart="",this._mGeneralSetting=mGeneralSetting,this.isEng=mGeneralSetting.Lang===mGeneralSetting.LangStates.English,this.tableSecurityHeader="",this.tableIndexHeader="",this.tableManagementAndSeniorExecutivesHeader=globalTrans[mGeneralSetting.Lang].grid.companyManagmentTpl.Title,this.tableFinanceHeader=globalTrans[mGeneralSetting.Lang].companyDetails.finData,this.securitySortType="Name",this.indicesSortType="",this.shareHolderSortType="",this.managementAndSeniorExecutivesSortType="",this.company={financeReports:null},this.finrepGridTemplate="src/templates/company-fin-reports.html",this._utility=utility;this.piecolorArray=["#e0961b","#239acf","#579060"];this.pieoptions={chart:{type:"pieChart",height:300,width:300,x:function(d){return d.Percentage+"%"},y:function(d){return d.Percentage},showValues:!0,valueFormat:function(d){return d3.format(",.2f")(d)},transitionDuration:500,legendPosition:"bottom",pieLabelsOutside:!1,labelType:"key",showLegend:!1,color:function(d,i){return this.piecolorArray[i]}.bind(this),tooltipContent:function(key,x,y,e,graph){return"<p>"+key+"</p>"}}},this.formatDimention=function(item){var num=parseFloat(item),css="";return num<0?css={color:"red"}:0<num&&(css={color:"green"}),css},this.rowMute=function(item){var css="";return 0<parseInt(item)&&(css="text-muted"),css},this.companyIndicator=function(item){var strInd="";return""!=item&&(strInd="("+item+")"),strInd},this.finrepColumnDefinition=[],this.finrepGridSubTitle="",this.shTableColumnDefinition=[],this.checkSecurityTypeContainValue=function(arr,indx){return arr.SecurityType&&-1!==[1,2,3,7,9,11,12,13,14].indexOf(arr.SecurityType)},this.tabsHeader=[{key:1,title:"מניות והמירים בלבד",filter:this.checkSecurityTypeContainValue,isActive:1},{key:2,title:"כל ניירות הערך",filter:"",isActive:0}],$scope.$on("$routeUpdate",function(){var param=$location.search();param&&param.view?this.tabPage=param.view:this.tabPage="details"}.bind(this)),BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype),Object.defineProperty(this,"PageInfo",{get:function(){return dataStorage.reports.pageInfo}})}function tradeDataCtrl($uibModalInstance,$routeParams,dataStorage,companyProxy,etfProxy,modalService,id,type){this.$uibModalInstance=$uibModalInstance,this._proxy=2==type?etfProxy:companyProxy,this.data={},this._modalService=modalService,this.id=id,this.changeFormatted="",this.pageUrl=2==type?"etf":"company",this.load(type)}function CompanyEntityFactory(proxy,$q,storage){function Company(id){this.id=id,this.shareHolders=[],this.companyDetails={},this.securities=[],this.indices=[],this.management=[],this.financeReports={},this.tradeData={}}return Company.prototype.getShareHolders=function(){return proxy.getShareHolders(this.id).then(function(data){this.shareHolders=data}.bind(this))},Company.prototype.getCompanyDetails=function(){return proxy.getCompanyDetails(this.id).then(function(data){this.companyDetails=data}.bind(this))},Company.prototype.getSecurities=function(){return proxy.getSecurities(this.id).then(function(data){this.securities=data}.bind(this))},Company.prototype.getIndices=function(){return proxy.getIndices(this.id).then(function(data){this.indices=data}.bind(this))},Company.prototype.getManagementAndSeniorExecutives=function(){return proxy.getManagementAndSeniorExecutives(this.id).then(function(data){this.management=data}.bind(this))},Company.prototype.getFinanceReports=function(){return proxy.getFinanceReports(this.id).then(function(data){this.financeReports=data}.bind(this))},Company.prototype.getTradeData=function(){return proxy.getTradeData(this.id).then(function(data){this.tradeData=data}.bind(this))},Company.prototype.load=function(){var defer=$q.defer(),company=storage.companies.getById(this.id);return null==company?$q.all([this.getCompanyDetails(),this.getShareHolders(),this.getSecurities(),this.getIndices(),this.getManagementAndSeniorExecutives(),this.getFinanceReports(),this.getTradeData()]).then(function(c){angular.extend(this,c),storage.companies.add(this),defer.resolve(this)}.bind(this)):(angular.extend(this,company),defer.resolve(this)),defer.promise},Company.prototype.loadAll=function(){return proxy.getAllCompanyDetails(this.id).then(function(data){return this.companyDetails=data.CompanyDetails,this.companyDetails.MetaTag=data.MetaTag,this.securities=data.SecuritiesList,this.indices=data.IndicesList,this.shareHolders=data.ShareHolders,this.management=data.ManagementDetails,this}.bind(this))},Company}mi.directive("setHref",function(ngConfigSetting,$routeParams){return{restrict:"A",link:function(scope,elem,attr){var href="company/"+$routeParams.id+"?view="+attr.setHref;elem.attr("href",href)}}}),mi.controller("CompanyCtrl",CompanyCtrl),mi.filter("formatYesNo",function(){return function(item){return 1==item?"כן":0==item?"לא":"-"}}),mi.filter("formatIFRS",function(){return function(item){if(item)return"IFRS"}}),CompanyCtrl.prototype.getIncludeIndices=function(){this.company.tradeData&&this.company.securities.Securities&&(this.includeInInd=this._ld.result(this._ld.find(this.company.securities.Securities,"SecurityId",Number(this.company.tradeData.SecurityId)),"IndicesWeight"))},CompanyCtrl.prototype.setShareFilter=function(tbname){if("all"==(this.sharetabPage=tbname))this.shdata=angular.copy(this.company.shareHolders.ShareHoldersList);else{var newData=[];this.shdata.forEach(function(arr){arr.SecurityType&&-1!==[1,2,3,7,9,11,12,13,14].indexOf(arr.SecurityType)&&newData.push(arr)}),this.shdata=newData}},CompanyCtrl.prototype.changeTabTo=function(view){this._$location.$$search.q&&delete this._$location.$$search.q,this._$location.search("view",view)},CompanyCtrl.prototype.setTabByParam=function(view){var tabs="events,details,reports,companyAnalysis,finance".split(",");return view&&-1!=tabs.indexOf(view)?view:"details"},CompanyCtrl.prototype.setTitle=function(view){this._TitleService.setTitle(this.company.companyDetails.CompanyLongName,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitleShort)},CompanyCtrl.prototype.checkSign=function(change){if(change){var num=parseFloat(change);return num<0?-1:0<num?1:0}},CompanyCtrl.prototype.changeWithSign=function(change){var num=parseFloat(change),abs_ch=Math.abs(change);return num<0?abs_ch+"% -":0<num?abs_ch+"% +":abs_ch+"% "},CompanyCtrl.prototype.getCompanyDetails=function(){var proxy=this._CompanyProxy,id=+this.companyId;this._dataStorage,this._Company;this.securitiesTableColumnDefinition=angular.copy(this._jsonService.getTemplateByTemplateName("CompanySecuritiesTpl")),this.tableSecurityHeader=globalTrans[this._mGeneralSetting.Lang].companyDetails.securitiesTitle,this.managementTableColumnDefinition=angular.copy(this._jsonService.getTemplateByTemplateName("CompanyManagementTpl")),this.mngGridSubTitle=globalTrans[this._mGeneralSetting.Lang].grid.companyManagmentTpl.subTitle,this.shTableColumnDefinition=angular.copy(this._jsonService.getTemplateByTemplateName("CompanyShareHoldersTpl")),this.indTableColumnDefinition=this._jsonService.getTemplateByTemplateName("CompanyIndicesTpl"),this.tableIndexHeader=this.indTableColumnDefinition.GridTitle,proxy.getAllCompanyDetails(id).then(function(company){this.company.companyDetails=company.CompanyDetails,this.company.companyDetails.MetaTag=company.MetaTag,this.company.securities=company.SecuritiesList,this.isEng&&this.company.securities.Securities.forEach(function(item){item.IsEng=!0}),this.company.indices=company.IndicesList,this.company.shareHolders=company.ShareHolders,this.company.management=company.ManagementDetails,this.company.ControllerHolders=company.ControllerHolders,this.getFinanceReports(),this.getTradeData(),this.logoURL=this._utility.getLogo(company.CompanyDetails.CompanyId),this._TitleService.setTitle(this.company.companyDetails.CompanyLongName,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitleShort),this._MetaTagService.setMetaTag({title:document.title,description:this.company.companyDetails.MetaTag.Description,keywords:this.company.companyDetails.MetaTag.Keywords}),this.setTableTitle(this.company.companyDetails.CompanyLongName),this.FinReportIndicator=this.company.companyDetails.FinReportInd,this.getIncludeIndices(),this.setBreadCrumbs(),this.shCorrectionDate=this.company.shareHolders.CorrectionDate,this.shTableColumnDefinition.Toolbar.Info.Text=this.company.shareHolders.Remark,this.securitiesTableColumnDefinition.Toolbar.Info.Text=this.company.securities.Remark,this.securitiesSubTitle=this.company.securities.TradeDate,this.shdata=angular.copy(this.company.shareHolders.ShareHoldersList),this.setShareFilter("onlystock")}.bind(this))},CompanyCtrl.prototype.setTableTitle=function(companyName){this.securitiesTableColumnDefinition.GridTitle+=" לחברת "+companyName,this.managementTableColumnDefinition.GridTitle+=" לחברת "+companyName,this.shTableColumnDefinition.GridTitle+=" לחברת "+companyName},CompanyCtrl.prototype.setFinRepGridHeaders=function(){this.finrepColumnDefinition=angular.copy(this._jsonService.getTemplateByTemplateName("CompanyFinanceReports")),this.finrepColumnDefinition&&0<this.finrepColumnDefinition.ColumnItems.length&&this.company.financeReports&&(this.finrepColumnDefinition.ColumnItems[1].title=this.company.financeReports.CurrentPeriod.Title,this.finrepColumnDefinition.ColumnItems[1].IFRS=this.company.financeReports.CurrentPeriod.IFRS,this.finrepColumnDefinition.ColumnItems[2].title=this.company.financeReports.PreviousPeriod.Title,this.finrepColumnDefinition.ColumnItems[2].IFRS=this.company.financeReports.PreviousPeriod.IFRS,this.finrepColumnDefinition.ColumnItems[3].title=this.company.financeReports.PreviousYear.Title,this.finrepColumnDefinition.ColumnItems[3].IFRS=this.company.financeReports.PreviousYear.IFRS,this.company.financeReports.IsPeriod||(this.finrepColumnDefinition.ColumnItems[1].className="tableCol wcol_2",this.finrepColumnDefinition.ColumnItems[3].className="tableCol wcol_4",this.finrepColumnDefinition.ColumnItems.splice(2,1),this.finrepGridTemplate="src/templates/company-endyear-fin-reports.html")),this.finrepGridSubTitle=" ("+globalTrans[this._mGeneralSetting.Lang].mayaStrings.InThousandsNIS+")",this.company.financeReports&&0<this.company.financeReports.LastReports.length?(this.finrepColumnDefinition.GridTitle+=" לחברת "+this.company.companyDetails.CompanyLongName,this.finrepColumnDefinition.Toolbar.LastFundManagerReport.Display=!0,this.finrepColumnDefinition.Toolbar.LastFRpts={},this.finrepColumnDefinition.Toolbar.LastFRpts.Reports=this.company.financeReports.LastReports,this.finrepColumnDefinition.Toolbar.LastFRpts.Title=this.company.financeReports.CompanyShortName+" - "+globalTrans[this._mGeneralSetting.Lang].mayaStrings.LastFinanceRptsTitle):this.finrepColumnDefinition.Toolbar.LastFundManagerReport.Display=!1},CompanyCtrl.prototype.getFinanceReports=function(){this.company?this._CompanyProxy.getFinanceReports(this.companyId).then(function(data){this.company.financeReports=data,this.setFinRepGridHeaders()}.bind(this)):this._dataStorage.companies.add(this.companyId).load().then(function(company){this.company=company,this.setFinRepGridHeaders()}.bind(this))},CompanyCtrl.prototype.getTradeData=function(){this.company?this._CompanyProxy.getTradeData(this.companyId).then(function(data){this.company.tradeData=data,this.company.tradeData&&(this.changeDirection=this.checkSign(this.company.tradeData.PercentageChange),this.getIncludeIndices())}.bind(this)):this._dataStorage.companies.add(this.companyId).load().then(function(company){this.company=company,this.setFinRepGridHeaders()}.bind(this))},CompanyCtrl.prototype.setSecuritiesGridRemark=function(){},CompanyCtrl.prototype.setBreadCrumbs=function(){this.BaseCtrl.pushBreadcrumbs({id:1,label:globalTrans[this._mGeneralSetting.Lang].mainMenu.companyDetail,url:""}),this.BaseCtrl.pushBreadcrumbs({id:2,label:this.company.companyDetails.CompanyLongName,url:""})},mi.controller("tradeDataCtrl",tradeDataCtrl),tradeDataCtrl.prototype.load=function(type){this._proxy.getTradeData(this.id).then(function(data){this.data=data,this.SetChangeWithSign(this.data.PercentageChange)}.bind(this))},tradeDataCtrl.prototype.close=function(){this.$uibModalInstance.close()},tradeDataCtrl.prototype.setColor=function(change){var num=parseFloat(change);return isNaN(change)?void 0:num<0?"changeValue stockDown":0<num?"changeValue stockUp":"stockStable"},tradeDataCtrl.prototype.setMarketTrend=function(change){var num=parseFloat(change);return num<0?"mf mf-arrow_down_i":0<num?"mf mf-arrow_up_i":""},tradeDataCtrl.prototype.SetChangeWithSign=function(change){var num=parseFloat(change),abs_ch=Math.abs(change);this.changeFormatted=0==num?"0%":num<0?"-"+abs_ch+"%":0<num?"+"+abs_ch+"%":abs_ch+"%"},mi.factory("Company",CompanyEntityFactory),CompanyEntityFactory.$inject=["companyProxy","$q","dataStorage"],mi.factory("companyProxy",function($http,$log,$q,ngAuthSettings,mMimeTypeSettings,ngConfigSetting){function CompanyProxy(){}return CompanyProxy.prototype.getAllCompanyDetails=function(id){var defer=$q.defer();return $log.debug("CompanyProxy.getAllCompanyDetails("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"company/alldetails",params:{companyId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},CompanyProxy.prototype.getCompanyDetails=function(id){var defer=$q.defer();return $log.debug("CompanyProxy.getCompany("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"company/details",params:{companyId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},CompanyProxy.prototype.getSecurities=function(id){var defer=$q.defer();return $log.debug("CompanyProxy.getSecurities("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"company/securitieslist",params:{companyId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},CompanyProxy.prototype.getFileSecurities=function(id,fileType){var defer=$q.defer();return $log.debug("CompanyProxy.getFileSecurities("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/securitieslist?companyId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},CompanyProxy.prototype.getIndices=function(id){var defer=$q.defer();return $log.debug("CompanyProxy.getIndices("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"company/indexweight",params:{companyId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},CompanyProxy.prototype.getFileIndices=function(id,fileType){var defer=$q.defer();return $log.debug("CompanyProxy.getFileIndices("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/companyindexweight?companyId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},CompanyProxy.prototype.getShareHolders=function(id){var defer=$q.defer();return $log.debug("CompanyProxy.getShareHolders("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"company/shareholders",params:{companyId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},CompanyProxy.prototype.getFileShareHolders=function(id,fileType){var defer=$q.defer();return $log.debug("CompanyProxy.getFileShareHolders("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/companyshareholders?companyId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},CompanyProxy.prototype.getManagementAndSeniorExecutives=function(id){var defer=$q.defer();return $log.debug("CompanyProxy.getManagementAndSeniorExecutives("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"company/managementandseniorexecutives",params:{companyId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},CompanyProxy.prototype.getFileManagementAndSeniorExecutives=function(id,fileType){var defer=$q.defer();return $log.debug("CompanyProxy.getFileManagementAndSeniorExecutives("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/companymanagement?companyId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},CompanyProxy.prototype.getFinanceReports=function(id){var defer=$q.defer();return $log.debug("CompanyProxy.getFinanceReports("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"company/financereports",params:{companyId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},CompanyProxy.prototype.getFileFinanceReports=function(id,fileType){var defer=$q.defer();return $log.debug("CompanyProxy.getFileFinanceReports("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/companyfinancereport?companyId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},CompanyProxy.prototype.getTradeData=function(id){var defer=$q.defer();return $log.debug("CompanyProxy.getTradeData("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"company/tradedata",params:{companyId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},new CompanyProxy}),mi.run(function(Company,dataStorage){dataStorage.companies={data:[],add:function(id){return dataStorage.add.call(this,id,Company)},find:function(predicat){return dataStorage.find.call(this,predicat,Company)},isExists:function(id){return this.data.forEach(function(company){if(company.id==id)return!0}),!1},getById:function(id){return this.data.forEach(function(company){if(company.id==id)return company}),null}},dataStorage.tradedata={data:[],add:function(id){return dataStorage.add.call(this,id)},find:function(predicat){return dataStorage.find.call(this,predicat)},isExists:function(id){return this.data.forEach(function(tradedata){if(tradedata.id==id)return!0}),!1},getById:function(id){return this.data.forEach(function(tradedata){if(tradedata.id==id)return tradedata}),null}}}),mi.directive("shareholders",function(){return{templateUrl:"src/company/directives/views/shareHolders.html"}}),mi.directive("companyDetailsNavigator",function(){return{restirct:"EA",controller:CompanyCtrl,bindToController:!0,controllerAs:"vm",link:function(scope,element,attr){scope.vm;scope.$watch("vm.pagePart",function(newValue,oldValue){if(""!=newValue);})}}}),mi.directive("fixedCompanyHeader",function(){return{restirct:"EA",link:function(scope,element,attr){$(window).scroll(function(){var sticky=$(".companyHeader");155<=$(window).scrollTop()?sticky.addClass("fixedHeader"):sticky.removeClass("fixedHeader")})}}}),mi.directive("shareHoldersPie",function(){function shareHoldersPieCtrl(){this.data=[],this.labels=[],this.piecolorArray=["#e0961b","#239acf","#579060"],this.pieOptions={tooltipTemplate:"<% if (value>0)%><%= value %>%"}}return shareHoldersPieCtrl.prototype.init=function(){this.data[0]=this.shdata[0].Percentage,this.data[1]=this.shdata[1].Percentage,this.data[2]=this.shdata[2].Percentage,this.labels[0]=this.shdata[0].HolderName,this.labels[1]=this.shdata[1].HolderName,this.labels[2]=this.shdata[2].HolderName},{restirct:"EA",scope:{shdata:"="},controller:shareHoldersPieCtrl,bindToController:!0,controllerAs:"shpCtrl",templateUrl:"src/company/directives/views/pie.html",link:function(scope,element,attr){var ctrl=scope.shpCtrl;scope.$watchCollection("shpCtrl.shdata",function(){ctrl.shdata&&ctrl.init()})}}}),mi.directive("moreCompanyDescription",function($timeout,$log){return{restirct:"A",link:function(scope,element,attr){$timeout(function(){var expandEl=element.find(".expandCD");element[0].offsetWidth<element[0].scrollWidth&&expandEl.addClass("show")},1e3)}}}),mi.directive("showChartButton",function($timeout){return{restirct:"EA",scope:{showButton:"="},link:function(scope,element,attr){scope.$watch("showButton",function(newValue,oldValue){newValue?(console.log("remove show"),element.removeClass("show")):$timeout(function(){element.addClass("show")},200)})}}}),mi.directive("chartTimeScale",function($timeout){return{restirct:"EA",scope:{bloading:"="},link:function(scope,element,attr){scope.$watch("bloading",function(newValue,oldValue){newValue?element.removeClass("show"):$timeout(function(){element.addClass("show")},200)})}}}),mi.directive("scrollCheck",function(){return{restirct:"EA",link:function(scope,element,attr){element.on("click",function(){var pos=0,location=angular.element(document.getElementById("securitiesSection"));if(155<$(document).scrollTop().valueOf())pos=location.offset().top-155;else pos=location.offset().top-300;$("body").animate({scrollTop:pos},"slow")})}}}),mi.directive("scrollToCompanyPart",function(){return{restrict:"EA",link:function(scope,element,attr){element.bind("click",function(event){var location=angular.element(document.getElementById(attr.scrollToCompanyPart)),pos=location.offset().top;991<$(window).width()&&(pos=155<$(document).scrollTop().valueOf()?location.offset().top-150:location.offset().top-300);$("html,body").animate({scrollTop:pos},"slow")})}}}),mi.directive("scrollToAnchor",function($log,$location,$anchorScroll){return{link:function(scope,element,attr){element.bind("click",function(event){var location=attr.scrollToAnchor;$location.hash(location),$anchorScroll()})}}}),mi.directive("beforAndAfterPrint",function(){return{link:function(){function beforePrint(){var original=$(".companyHeader").first();original.hide();var newElem=original.clone();original.addClass("removedBeforePrint"),newElem.addClass("insertedBeforePrint"),newElem.css("position","static"),newElem.insertBefore(original),newElem.show()}function afterPrint(){$(".insertedBeforePrint").remove(),$(".removedBeforePrint").show()}window.matchMedia&&window.matchMedia("print").addListener(function(mql){mql.matches?beforePrint():afterPrint()});window.onbeforeprint=beforePrint,window.onafterprint=afterPrint}}})}(angular);
!function(angular){"use strict";var mi=angular.module("reports",[]);function ReportDetailsCtrl($scope,$window,$location,reportProxy,companyProxy,FavoritesService,localStorageService,$routeParams,$analytics,dataStorage,$sce,breadcrumbs,_,BaseCtrl,blockUI,ngConfigSetting,modalService,mGeneralSetting,Post,postingMayaService,mayaMenuService,$uibModal,TitleService,MetaTagService,browserDetectionService,utility){this._mayaFilesBaseUrl=ngConfigSetting.mayaFilesBaseUrl,this.legendURL=ngConfigSetting.getLegendURL(),this._ReportProxy=reportProxy,this.$window=$window,this.$location=$location,this._MetaTagService=MetaTagService,this._TitleService=TitleService,this._CompanyProxy=companyProxy,this._favService=FavoritesService,this._modalService=modalService,this._mGeneralSetting=mGeneralSetting,this._mayaMenuService=mayaMenuService,this._lstorage=localStorageService,this._dataStorage=dataStorage,this._$uibModal=$uibModal,this.$analytics=$analytics,this._postingMayaService=postingMayaService,this._blockUI=blockUI,this._mModalType=mGeneralSetting.ModalType,this._=_,this.reportDetails={},this.id=$routeParams.id,this.filetype=$routeParams.ftype||0,this.filenum=$routeParams.fnum||0,this.compId=$routeParams.cid||null,this.iframeSrs="",this.isFullScreen=!1,this.currFileInd=0,this.cTradeData={},this._sce=$sce,this.currentPage=1,this.isFavorite=!1,this.busy=!0,this.BoxOpened=[],this.totalPages=0,this._Post=Post,this._scope=$scope,this.utility=utility,this.isEng=this._mGeneralSetting.Lang==this._mGeneralSetting.LangStates.English,this._browserDetectionService=browserDetectionService,$scope.$on("maya-event.setFavorite",function(){this.isFavorite=-1<this._favService.fav.indexOf(parseInt(this.id))}.bind(this)),BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype)}function FinanceByPeriodCtrl($scope,reportProxy,$location,dataStorage,jsonService,TitleService,MetaTagService,mGeneralSetting,blockUI,sharedScrollFactory,modalService){this._mGeneralSetting=mGeneralSetting,this._modalService=modalService,this._ReportProxy=reportProxy,this._dataStorage=dataStorage,this._jsonService=jsonService,this._location=$location,this.companyFinanceList={},this.financeTableColumnDefinition=[],this.isEng=mGeneralSetting.Lang===mGeneralSetting.LangStates.English,this.tableFinanceHeader=this.isEng?this.financeTableColumnDefinition.GridTitleEng:this.financeTableColumnDefinition.GridTitle,this.sortType="PubDate",this.sortReverse=!0,this._TitleService=TitleService,this._MetaTagService=MetaTagService,this.pageSize=mGeneralSetting.ReportPageSize,this.blockUI=blockUI,this.currentPage=1,this.sharedScrollFactory=sharedScrollFactory,$scope.$on("$routeUpdate",function(){var param=$location.search();param&&param.q?(blockUI.start(),this.collectURLParamters(param.q),this.filter()):this.init()}.bind(this))}function ReportEntityFactory(proxy,$q,storage,favProxy){function Report(o){this.page=o.page,this.pageInfo=o.pageInfo,this.id=o.id,this.reports=[]}return Report.prototype.load=function(){return this.pageInfo.proxyfunc.call(this,this.page,this.id).then(function(data){return this.reports=data,angular.extend({},{data:data})}.bind(this))},Report}function ReportDetailsEntityFactory(proxy,companyProxy,$q,storage){function ReportDetails(id){this.id=id,this.data={}}return ReportDetails.prototype.getReportDetails=function(){proxy.getReportDetails(this.id,this.compId).then(function(data){this.data=data}.bind(this))},ReportDetails.prototype.getCompanyTradeData=function(companyid){companyProxy.getTradeData(companyid).then(function(data){return angular.extend(this,data),this}.bind(this))},ReportDetails.prototype.load=function(compId){return proxy.getReportDetails(this.id,compId).then(function(data){return angular.extend(this,data),this}.bind(this))},ReportDetails}function CompanyFinanceReportEntityFactory(proxy,$q,storage){function CompanyFinanceReport(o){(this.parms=o).hasOwnProperty("year")&&o.hasOwnProperty("period")&&(this.year=o.year,this.period=o.period),this.companyFinanceReports=[]}return CompanyFinanceReport.prototype.load=function(){return proxy.getCompanyFinanceReport(this.parms).then(function(data){return this.companyFinanceReports=data,angular.extend({},{data:data})}.bind(this))},CompanyFinanceReport}function filterAdvancedCtrl($uibModalInstance,$window,$timeout,filterService,_,items,eventParent,mGeneralSetting){this.$uibModalInstance=$uibModalInstance,this._=_,this.selectedFilters=[],this.isEng=mGeneralSetting.LangStates.English===mGeneralSetting.Lang;var selectedId,data=_.filter(filterService.filterMetadata[0].DataList,{VFType:8});if(data.forEach(function(item){item.childrens||(item.childrens=_.filter(filterService.filterMetadata[0].DataList,function(child){if(child.ParentCd==item.Cd)return child.Parent=item,!0}));var itemParent=_.first(_.filter(items,{cd:item.Cd}));item.IsSelected=itemParent.isSelected,item.childrens.forEach(function(child){if(1==item.IsSelected){if(0<itemParent.childrens.length){var itemChild=_.first(_.filter(itemParent.childrens,{Cd:child.Cd}));child.IsSelected=!!itemChild}else child.IsSelected=!0;1==child.IsSelected&&this.onChangeSelection(child)}else child.IsSelected=!1}.bind(this))}.bind(this)),this.data=data,eventParent)selectedId=_.findIndex(data,{Cd:eventParent.cd});else{var idx=_.findIndex(data,{IsSelected:!0});selectedId=-1<idx?idx:0}this.selectedFilter=data[selectedId],$timeout(function(){var element=$window.document.getElementById("fp-"+this.selectedFilter.Cd);element&&element.focus()}.bind(this),500),Object.defineProperty(this,"filterMetadata",{get:function(){return filterService.filterMetadata[0]}}),Object.defineProperty(this,"filters",{get:function(){return data}}),Object.defineProperty(this,"eventField",{get:function(){return mGeneralSetting.Lang===mGeneralSetting.LangStates.English?"EngDesc":"Desc"}})}mi.controller("ReportCtrl",function ReportCtrlFactory(reportProxy,FavoritesProxy,$log,$location,$timeout,notifyProxy,dataStorage,$routeParams,$rootScope,$scope,$q,$window,mGeneralSetting,_,breadcrumbs,ngConfigSetting,filterService,toaster,MetaTagService,TitleService,uibPopUpService,blockUI,utility,sharedScrollFactory){function ReportCtrl($scope){notifyProxy.onNotify(function(data){if(this.title=data.Title,this.setLogos(data.Reports),this.setLogos(data.ChangedReports),this.tradeActiveDay!=data.TradeActiveDay){this.tradeActiveDay=data.TradeActiveDay;for(var i=this.reports.length-1;0<=i;i--)data.LastTrade>this.reports[i].PubDate&&this.reports.splice(i,1);this.total=this.reports.length}angular.forEach(data.Reports,function(report){if(0<this.reports.length&&report.PubDate>this.reports[this.reports.length-1].PubDate){var found=_.findIndex(this.reports,{RptCode:report.RptCode});-1<found?(this.reports.splice(found,1),this.reports.splice(found,0,report)):(this.total=parseInt(this.total)+1,found=_.findIndex(this.reports,function(o){return _.lt(o.PubDate,report.PubDate)}),this.reports.splice(found,0,report),this.total>this.pageSize&&this.reports.pop())}0==this.reports.length&&(this.total=parseInt(this.total)+1,this.reports.splice(0,0,report))}.bind(this)),angular.forEach(data.ChangedReports,function(report){if(0<this.reports.length&&report.PubDate>this.reports[this.reports.length-1].PubDate){var found=_.findIndex(this.reports,{RptCode:report.RptCode});-1<found?(this.reports.splice(found,1),this.reports.splice(found,0,report)):(this.total=parseInt(this.total)+1,found=_.findIndex(this.reports,function(o){return _.lt(o.PubDate,report.PubDate)}),this.reports.splice(found,0,report),this.total>this.pageSize&&this.reports.pop())}0==this.reports.length&&(this.total=parseInt(this.total)+1,this.reports.splice(0,0,report))}.bind(this))}.bind(this)),this.$ngConfigSetting=ngConfigSetting,this.breadcrumbs=breadcrumbs,this._mGeneralSetting=mGeneralSetting,this.$location=$location,this._locationpath=$location.path(),this._ld=_,this._ReportProxy=reportProxy,this._FavAccountProxy=FavoritesProxy,this._dataStorage=dataStorage,this.title="",this.iconTitle=null,this.reports=[],this.filterCounter=[],this.isTickBoxOpen=!1,this.viewpage=$routeParams.view,this.id=$routeParams.id,this.search=$routeParams.search,this.reportsEntity=[],this.relatedReports={},this.isShow=!1,this.isRelatedLoaded=!1,this.busy=!0,this.pressSearch=!1,this.currentPage=$routeParams.page||1,this.currentreport,this.filterPromise,this.pageSize=mGeneralSetting.ReportPageSize,this.page=1,this.total=0,this.showPrevNext=!0,this.hideIfEmpty=!0,this.showBreadCrumbs=!0,this.addResults=!1,this.headerInfo={},this.isEng=this._mGeneralSetting.Lang==this._mGeneralSetting.LangStates.English,$scope.$on("$routeUpdate",function(){var param=$location.search();param&&param.q?(blockUI.start(),this.collectURLParamters(param.q),this.setBreadCrumbs(param),this.pressSearch=!0,this.filter()):(this.currentPage=param&&param.page?parseInt(param.page):1,this.pressSearch=!1,this.initReportsByParam())}.bind(this)),$rootScope.$on("maya-event.logout",function(){"favorites"==$routeParams.view&&($window.location.href=ngConfigSetting.virDir)}.bind(this))}ReportCtrl.prototype.setDefaultParameters=function(viewType){this._dataStorage;this.filterItems={DateFrom:(new Date).addMonths(-6),DateTo:new Date,IsBreakingAnnouncement:!1,IsTradeHalt:!1,IsForTaseMember:!1,IsSpecificFund:!1,QOpt:1,events:{},subevents:{}},this.filterPromise=filterService.setData(viewType).then(function(){if(this.filterItems.eventsData=[],0<filterService.filterMetadata.length){var data=_.filter(filterService.filterMetadata[0].DataList,{VFType:8});data.forEach(function(item){this.filterItems.eventsData.push({cd:item.Cd,title:this._mGeneralSetting.Lang===this._mGeneralSetting.LangStates.English?item.EngDesc:item.Desc,isSelected:!1,expanded:!1,vfType:item.VFType,childrens:[],subevents:_.filter(filterService.filterMetadata[0].DataList,{ParentCd:item.Cd}),total:_.filter(filterService.filterMetadata[0].DataList,{ParentCd:item.Cd}).length})}.bind(this))}}.bind(this))};ReportCtrl.prototype.onFilterChange=function(page){notifyProxy.stop(),0==this.pressSearch&&(parseInt(this.pageView)<=4||25==this.pageView)?(this.currentPage=page||1,0==this.addResults?this.$location.search()&&this.$location.search().q?(this.filterItems.Page=page||1,this.saveSearchLocation(this.pressSearch)):this.$location.search("page",this.currentPage):this.$location.search()&&this.$location.search().q?(this.filterItems.Page=page||1,this.saveSearchLocation(this.pressSearch)):(this.pressSearch=!1,this.initReportsByParam())):(this.filterItems.Page=page||1,this.saveSearchLocation(this.pressSearch))};ReportCtrl.prototype.saveSearchLocation=function(){var params=this.filterItems,p={};for(var pi in params)"eventsData"==pi?(p.events=[],p.subevents=[],params[pi].forEach(function(parent){parent.isSelected&&(p.events.push(parent.cd),parent.childrens.forEach(function(child){child.IsSelected&&p.subevents.push(child.Cd)}),0==parent.childrens.length&&parent.subevents.forEach(function(child){child.IsSelected&&p.subevents.push(child.Cd)}))})):(null==params[pi]||null==params[pi]||"object"==typeof params[pi]&&0==Object.keys(params[pi]).length||!1===params[pi])&&!angular.isDate(params[pi])||(p[pi]=params[pi]);params.Q||(delete p.Q,delete p.QOpt),this.pageView&&1===this.pageView&&this.pressSearch&&!0===this.pressSearch?(this.filterItems.entity&&(p.curl=1),this.$location.path().indexOf("/en")<0?this.$location.url("reports/company?q="+JSON.stringify(p)):this.$location.url("en/reports/company?q="+JSON.stringify(p))):(p.curl&&delete p.curl,this.$location.search("page",null),this.$location.search("q",JSON.stringify(p)))};ReportCtrl.prototype.filter=function(){this.pressSearch=!0;var proxy=this._ReportProxy,filterSend={Page:this.filterItems.Page,GroupData:[],DateFrom:this.filterItems.DateFrom,DateTo:this.filterItems.DateTo,IsBreakingAnnouncement:1==this.pageView&&!1===this.pressSearch||this.filterItems.IsBreakingAnnouncement,IsTradeHalt:1==this.pageView&&!1===this.pressSearch||this.filterItems.IsTradeHalt,IsForTaseMember:this.filterItems.IsForTaseMember,IsSpecificFund:this.filterItems.IsSpecificFund,ShowLastTradeTime:this.filterItems.ShowLastTradeTime,Form:this.filterItems.form?decodeURIComponent(this.filterItems.form):null,Q:this.filterItems.Q,QOpt:this.filterItems.QOpt,ViewPage:this.pageView};this.headerInfo={},this.filterItems.ShowLastTradeTime=!1,this.filterItems.GroupData=[],this.filterItems.level2&&filterSend.GroupData.push({DataList:[{Cd:this.filterItems.level2,Desc:"",IsSelected:!0,VFType:this.filterItems.level1}]});var tmpevents=[];if(this.filterItems.events&&0<this.filterItems.events.length&&this.filterItems.events.forEach(function(evt){tmpevents.push({Cd:evt,Desc:"",IsSelected:!0,VFType:8})}),0<tmpevents.length&&filterSend.GroupData.push({DataList:tmpevents}),tmpevents=[],this.filterItems.subevents&&0<this.filterItems.subevents.length&&this.filterItems.subevents.forEach(function(evt){tmpevents.push({Cd:evt,Desc:"",IsSelected:!0,VFType:7})}),0<tmpevents.length&&filterSend.GroupData.push({DataList:tmpevents}),this.filterItems.entity&&(filterSend.GroupData.push({DataList:[{Cd:this.filterItems.entity,Desc:"",IsSelected:!0,VFType:this.viewFilterType||15}]}),this.pageInfo&&this.pageInfo.viewType===dataStorage.reports.pageInfo.CompanyAnalysis.viewType&&filterSend.GroupData.push({DataList:[{Cd:255,Desc:"",IsSelected:!0,VFType:7}]})),this.filterItems.fund&&filterSend.GroupData.push({DataList:[{Cd:this.filterItems.fund,Desc:"",IsSelected:!0,VFType:16}]}),this.filterItems.etf&&filterSend.GroupData.push({DataList:[{Cd:this.filterItems.etf,Desc:"",IsSelected:!0,VFType:18}]}),this.filterItems.etn&&filterSend.GroupData.push({DataList:[{Cd:this.filterItems.etn,Desc:"",IsSelected:!0,VFType:16}]}),filterSend.ViewPage==dataStorage.reports.pageInfo.Favorites.viewType){var filterOptionsData={Page:filterSend.Page,DateFrom:filterSend.DateFrom,DateTo:filterSend.DateTo};this._FavAccountProxy.filterUserFavoriteReports(filterOptionsData).then(function(data){this.setLogos(data.Reports),this.setReports(data.Reports),this.page=this.filterItems.Page=filterSend.Page,this.total=0<data.Reports.length?data.TotalPages:0,this.title=data.Title,this.iconTitle=data.Icon,this.busy=!1,blockUI.stop(),sharedScrollFactory.invoke()}.bind(this),function(err){blockUI.stop()})}else if(filterSend.ViewPage==dataStorage.reports.pageInfo.MyMessages.viewType){var search={Page:filterSend.Page,DateFrom:filterSend.DateFrom.toISOString(),DateTo:filterSend.DateTo.toISOString()};this._FavAccountProxy.getUserReports(1,search).then(function(data){this.setLogos(data.Reports),this.setReports(data.Reports),this.page=this.filterItems.Page=filterSend.Page,this.total=0<data.Reports.length?data.TotalPages:0,this.title=data.Title,this.iconTitle=data.Icon,this.busy=!1,blockUI.stop(),sharedScrollFactory.invoke()}.bind(this),function(err){blockUI.stop()})}else proxy.filter(filterSend).then(function(data){this.setLogos(data.Reports),this.setReports(data.Reports),this.page=this.filterItems.Page=filterSend.Page,this.total=0<data.Reports.length?data.TotalPages:0,this.title=data.Title,this.iconTitle=data.Icon,this.busy=!1,this.isTickBoxOpen=!1,TitleService.setTitle(data.Title+"-"+globalTrans[mGeneralSetting.Lang].mayaStrings.ReportTitle,globalTrans[mGeneralSetting.Lang].mayaStrings.MayaSystemTitle),null!==data.MetaTag&&MetaTagService.setMetaTag({title:document.title,description:data.MetaTag.Description,keywords:data.MetaTag.Keywords}),-1<this.$location.url().indexOf("curl")&&$rootScope.$broadcast("maya-event-autocomplete.changeurl"),blockUI.stop(),sharedScrollFactory.invoke()}.bind(this),function(error){error.ModelState&&error.ModelState.IncorrectDateRange&&uibPopUpService.open(mGeneralSetting.ModalType.PopUpMessage,{message:error.ModelState.IncorrectDateRange[0],title:globalTrans[mGeneralSetting.Lang].popUpNoResults.title}),blockUI.stop()}.bind(this))};ReportCtrl.prototype.openRelatedReport=function(id){var proxy=this._ReportProxy;this.relatedReports.hasOwnProperty(id)||proxy.getRelatedReport(id).then(function(data){this.relatedReports[id]=data,this.isRelatedLoaded=!0}.bind(this)),this.isRelatedLoaded=!1};ReportCtrl.prototype.setLogos=function(rep){rep.forEach(function(item){item.UrlLogo=utility.getLogo(item.FormalCompanyData.CompanyId)}.bind(this))};ReportCtrl.prototype.initReportsByParam=function(pageInfo,viewFilterType){this._locationpath.split("/");var dataStorage=this._dataStorage,isHomePage=!1,mGeneralSetting=this._mGeneralSetting;if(blockUI.start(),this.viewFilterType=viewFilterType,pageInfo&&(this.pageView=pageInfo.viewType,this.pageInfo=pageInfo),this.viewpage)for(var item in dataStorage.reports.pageInfo)if(item.toLowerCase()==this.viewpage){pageInfo=dataStorage.reports.pageInfo[item],this.pageView=pageInfo.viewType,this.pageInfo=pageInfo;break}if(this.search)this.viewpage=this.search;else{isHomePage=!this.viewpage;var homePageByLang=this.isEng?dataStorage.reports.pageInfo.Company:dataStorage.reports.pageInfo.BreakingAnnouncement;this.pageView=this.pageView||homePageByLang.viewType,pageInfo=pageInfo||(this.pageInfo?this.pageInfo:homePageByLang)}this.setDefaultParameters(this.pageView);var param=this.$location.search();param&&param.q?this.filterPromise.then(function(){this.collectURLParamters(param.q),this.setBreadCrumbs(param),this.filter()}.bind(this)):dataStorage.reports.add({page:this.currentPage,pageInfo:pageInfo,id:this.id}).load().then(function(rep){this.setLogos(rep.data.Reports),this.setReports(rep.data.Reports),this.filterItems.DateFrom=new Date(rep.data.DateFrom),this.filterItems.DateTo=new Date(rep.data.DateTo),this.page=this.filterItems.Page=this.currentPage,this.total=0<rep.data.Reports.length?rep.data.TotalPages:0,this.title=rep.data.Title,this.tradeActiveDay=rep.data.TradeActiveDay,this.setReportHeaderInfo(this.pageView),this.iconTitle=rep.data.Icon,this.setBreadCrumbs(),this.busy=!1,this.pageView<=4&&1==this.currentPage&&0<rep.data.Reports.length&&(notifyProxy.setMaxReport(rep.data.Reports[0].RptCode),notifyProxy.start({frq:this._mGeneralSetting.CheckFrequencyUpate},this.pageView)),this.id||TitleService.setTitle((isHomePage?globalTrans[mGeneralSetting.Lang].mayaStrings.HomePageTitle:rep.data.Title)+"-"+globalTrans[mGeneralSetting.Lang].mayaStrings.ReportTitle,globalTrans[mGeneralSetting.Lang].mayaStrings.MayaSystemTitle),MetaTagService.setMetaTag({title:document.title,description:isHomePage?globalTrans[mGeneralSetting.Lang].mayaStrings.HomePageDescription:rep.data.MetaTag.Description,keywords:isHomePage?globalTrans[mGeneralSetting.Lang].mayaStrings.HomePageKeywords:rep.data.MetaTag.Keywords}),sharedScrollFactory.invoke(),blockUI.stop()}.bind(this),function(err){$log.info(err),blockUI.stop()})};ReportCtrl.prototype.setReportHeaderInfo=function(viewType){var reportHeaderInfo=globalTrans[this._mGeneralSetting.Lang].ReportHeaderInfo[viewType];reportHeaderInfo&&(this.headerInfo=reportHeaderInfo)};ReportCtrl.prototype.collectURLParamters=function(param){if(this.filterItems=angular.extend(JSON.parse(param),{eventsData:this.filterItems.eventsData}),this.filterItems.QOpt||(this.filterItems.QOpt=1),this.filterItems.DateFrom?this.filterItems.DateFrom=new Date(this.filterItems.DateFrom):this.filterItems.DateFrom=(new Date).addMonths(-6),this.filterItems.DateTo?this.filterItems.DateTo=new Date(this.filterItems.DateTo):this.filterItems.DateTo=new Date,this.filterItems.IsBreakingAnnouncement||(this.filterItems.IsBreakingAnnouncement=!1),this.filterItems.IsTradeHalt||(this.filterItems.IsTradeHalt=!1),this.filterItems.IsForTaseMember||(this.filterItems.IsForTaseMember=!1),this.filterItems.IsSpecificFund||(this.filterItems.IsSpecificFund=!1),this.filterItems.Page=this.filterItems.Page||1,this.id&&(this.filterItems.entity=this.id),this.filterItems.eventsData.forEach(function(parent){parent.isSelected=!1,parent.childrens.length=0}),this.filterItems.events&&this.filterItems.events.forEach(function(evts){var foundEventIndex=this._ld.findIndex(this.filterItems.eventsData,{cd:evts});this.filterItems.eventsData[foundEventIndex].isSelected=!0}.bind(this)),this.filterItems.subevents&&0<this.filterItems.subevents.length){var data=this._ld.filter(filterService.filterMetadata[0].DataList,{VFType:7});this.filterItems.subevents.forEach(function(subevt){var foundElement=this._ld.filter(data,{Cd:subevt});if(0<foundElement.length){foundElement=foundElement[0];var foundEventIndex=this._ld.findIndex(this.filterItems.eventsData,{cd:foundElement.ParentCd});foundElement.IsSelected=!0,this.filterItems.eventsData[foundEventIndex].childrens.push(foundElement),this.filterItems.eventsData[foundEventIndex].isSelected=!0}}.bind(this))}};ReportCtrl.prototype.setBreadCrumbs=function(param){if("/"==this._locationpath)this.showBreadCrumbs=!1;else if(this.pageInfo){var pi=dataStorage.reports.pageInfo;-1<[pi.FundManagerReports.viewType,pi.CompanyReports.viewType,pi.FundReports.viewType,pi.ETFReports.viewType,pi.ForeignETFReports.viewType,pi.CompanyAnalysis.viewType].indexOf(this.pageInfo.viewType)?this.showBreadCrumbs=!1:param&&param.queryType?(this.breadcrumbs.remove(2),this.breadcrumbs.push(2,globalTrans[this._mGeneralSetting.Lang].queryType[param.queryType],"")):this.breadcrumbs.push(1,this.title,"")}else this.breadcrumbs.push(1,this.title,"")};ReportCtrl.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var proxy=this._ReportProxy;proxy.getBreakingAnnouncement(--this.currentPage).then(function(data){for(var i=0;i<data.length;i++)this.reports.push(data[i]);this.busy=!1}.bind(this))}};ReportCtrl.prototype.setReports=function(data){if(this.addResults)for(var i=0;i<data.length;i++)this.reports.push(data[i]);else this.reports=data;this.addResults=!1};ReportCtrl.prototype.loadMore=function(){this.busy||(this.busy=!0,this.addResults=!0,this.filterItems.Page++,this.onFilterChange(this.filterItems.Page))};ReportCtrl.prototype.openReportFile=function(rptCd,type,index){if(7!=type)this._mGeneralSetting.Lang===this._mGeneralSetting.LangStates.English?this._location.path("en/reports/details/"+rptCd+"/"+type+"/"+index):this._location.path("reports/details/"+rptCd+"/"+type+"/"+index);else{this.id;var proxy=this._ReportProxy,utility=this.utility;proxy.downloadTextFileContent(rptCd,"CSV",index).then(function(data){utility.download(data,rptCd+"_"+index,"CSV")}.bind(this))}};ReportCtrl.call(this,$scope,$routeParams);angular.extend(ReportCtrlFactory.prototype,ReportCtrl.prototype)}),mi.controller("ReportSearchCtrl",function ReportSearchCtrlFactory(reportProxy,FavoritesProxy,$location,$timeout,notifyProxy,dataStorage,$routeParams,$scope,$q,mGeneralSetting,_,breadcrumbs,TitleService,MetaTagService,filterService,utility,ngConfigSetting,blockUI,sharedScrollFactory,searchProxy){function ReportSearchCtrl($scope){this.isEng=mGeneralSetting.LangStates.English===mGeneralSetting.Lang,this.breadcrumbs=breadcrumbs,this._TitleService=TitleService,this._MetaTagService=MetaTagService,this._mGeneralSetting=mGeneralSetting,this.$location=$location,this.$ngConfigSetting=ngConfigSetting,this.sharedScrollFactory=sharedScrollFactory,this.blockUI=blockUI,this.utility=utility,this._locationpath=$location.path(),this._ld=_,this._ReportProxy=reportProxy,this._FavAccountProxy=FavoritesProxy,this._dataStorage=dataStorage,this.title="",this.iconTitle=null,this.reports=[],this.filterCounter=[],this.isTickBoxOpen=!1,this.viewpage="search",this.id=$routeParams.q,this.search=$routeParams.search,this.q=$routeParams.q,this.reportsEntity=[],this.relatedReports={},this.isShow=!1,this.isRelatedLoaded=!1,this.busy=!0,this.currentPage=1,this.currentreport,this.filterPromise,this.pageSize=mGeneralSetting.ReportPageSize,this.page=1,this.total=0,this.showPrevNext=!0,this.hideIfEmpty=!0,this.showBreadCrumbs=!0;var that=this;searchProxy.getBranchesTypes().then(function(data){that.branches=data}),$scope.$on("$routeUpdate",function(){var param=$location.search();param&&param.q?(this.collectURLParamters(param.q),this.filter()):this.initReportsByParam()}.bind(this))}ReportSearchCtrl.prototype.setDefaultParameters=function(){this._dataStorage;this.filterItems={DateFrom:(new Date).addMonths(-6),DateTo:new Date},this.filterPromise=filterService.setData(null).then(function(){}.bind(this))};ReportSearchCtrl.prototype.onFilterChange=function(page){notifyProxy.stop(),this.filterItems.Page=page||1,this.saveSearchLocation(),this.filter()};ReportSearchCtrl.prototype.saveSearchLocation=function(){var params=this.filterItems,p={};for(var pi in params)(null==params[pi]||null==params[pi]||"object"==typeof params[pi]&&0==Object.keys(params[pi]).length||!1===params[pi])&&!angular.isDate(params[pi])||(p[pi]=params[pi])};ReportSearchCtrl.prototype.loadMore=function(){this.busy||(this.busy=!0,this.addResults=!0,this.filterItems.Page++,this.onFilterChange(this.filterItems.Page))};ReportSearchCtrl.prototype.setLogos=function(rep){rep.forEach(function(item){var logo=item.FormalCompanyData.CompanyId?this.utility.padLeft(item.FormalCompanyData.CompanyId,6)+".jpg":"default.png";item.UrlLogo=this.$ngConfigSetting.logoUrl+mGeneralSetting.Lang+"/"+logo}.bind(this))};ReportSearchCtrl.prototype.setReports=function(data){if(this.addResults)for(var i=0;i<data.length;i++)this.reports.push(data[i]);else this.reports=data;this.addResults=!1};ReportSearchCtrl.prototype.filter=function(){var proxy=this._ReportProxy,filterSend={Page:this.filterItems.Page,DateFrom:this.filterItems.DateFrom,DateTo:this.filterItems.DateTo,Query:this.filterItems.Query,EventIds:this.filterItems.EventIds,IndicesId:this.filterItems.IndicesId,TimeId:this.filterItems.TimeId,ReturnEvents:this.filterItems.ReturnEvents,BranchId:this.filterItems.BranchId};this.blockUI.start(),proxy.search(filterSend).then(function(data){this.setLogos(data.Reports),this.setReports(data.Reports),!this.filterItems.ReturnEvents&&(this.filterItems.EventIds||this.filterItems.ReturnEvents)||(this.eventsCategories=data.ReportsCategories),this.SearchCompanyDetails=data.SearchCompanyDetails,data.SearchCompanyDetails&&data.SearchCompanyDetails.CompanyId&&(this.SearchCompanyDetails.Logo=utility.getLogo(this.SearchCompanyDetails.CompanyId)),this.page=filterSend.Page,this.filterItems.Page=filterSend.Page,this.total=0<data.Reports.length?data.TotalPages:0,this.title=data.Title,this.iconTitle=data.Icon,this.busy=!1,filterSend.Query&&(this._TitleService.setTitle(globalTrans[mGeneralSetting.Lang].mayaStrings.SearchResult+"-"+filterSend.Query,globalTrans[mGeneralSetting.Lang].mayaStrings.MayaSystemTitleShort),this._MetaTagService.setMetaTag({title:document.title,description:data.MetaTag.Description,keywords:data.MetaTag.Keywords})),this.sharedScrollFactory.invoke(),this.blockUI.stop()}.bind(this),function(err){blockUI.stop()})};ReportSearchCtrl.prototype.openRelatedReport=function(id){var proxy=this._ReportProxy;this.relatedReports.hasOwnProperty(id)||proxy.getRelatedReport(id).then(function(data){this.relatedReports[id]=data,this.isRelatedLoaded=!0}.bind(this)),this.isRelatedLoaded=!1};ReportSearchCtrl.prototype.initReportsByParam=function(view,viewFilterType){this._locationpath.split("/"),this._dataStorage;var mGeneralSetting=this._mGeneralSetting;this.viewFilterType=viewFilterType,this.viewpage=view||this.viewpage,this.search?this.viewpage=this.search:this.viewpage=this.viewpage?this.viewpage:mGeneralSetting.Page.BreakingAnnouncement,this.setDefaultParameters();var param=this.$location.search();this.filterPromise.then(function(){this.collectURLParamters(param.q),this.filter()}.bind(this))};ReportSearchCtrl.prototype.collectURLParamters=function(param){this.filterItems={Query:param},this.filterItems.Page=this.filterItems.Page||1,this.filterItems.DateFrom?this.filterItems.DateFrom=new Date(this.filterItems.DateFrom):this.filterItems.DateFrom=(new Date).addMonths(-6),this.filterItems.DateTo?this.filterItems.DateTo=new Date(this.filterItems.DateTo):this.filterItems.DateTo=new Date};ReportSearchCtrl.prototype.setBreadCrumbs=function(){this.breadcrumbs.push(1,this.title,"")};ReportSearchCtrl.prototype.nextPage=function(){if(!this.busy){this.busy=!0;var proxy=this._ReportProxy;proxy.getBreakingAnnouncement(++this.currentPage).then(function(data){for(var i=0;i<data.length;i++)this.reports.push(data[i]);this.busy=!1}.bind(this))}};ReportSearchCtrl.call(this,$scope,$routeParams);angular.extend(ReportSearchCtrlFactory.prototype,ReportSearchCtrl.prototype)}),mi.controller("ReportDetailsCtrl",ReportDetailsCtrl),mi.controller("FinanceByPeriodCtrl",FinanceByPeriodCtrl),ReportDetailsCtrl.prototype.openModal=function(companyId){this._$modal.open({animation:!0,templateUrl:"src/company/directives/views/trade-data1.html",controller:"ModalCtrl",controllerAs:"trd"}).result.then(function(selectedItem){this._scope.selected=selectedItem},function(){})},ReportDetailsCtrl.prototype.setURLByViewMode=function(){var dataStorage=this._dataStorage;this.reportDetails.ReportDetail.Files.forEach(function(f){991<=this.$window.innerWidth?f.URL=this.isEng?"en/reports/details/"+this.id+"/"+f.Type+"/"+f.Index:"reports/details/"+this.id+"/"+f.Type+"/"+f.Index:f.URL=dataStorage.reports.getPath(this.id,f.Type,f.Index,!0)}.bind(this))},ReportDetailsCtrl.prototype.getReportDetails=function(){var id=this.id,compId=this.compId,dataStorage=this._dataStorage,frmlCompanyNm="",$analytics=this.$analytics;this._blockUI.start(),dataStorage.reportDetails.add(id).load(compId).then(function(repd){this.reportDetails=repd,this.currentPage=repd.CurrentPage,this.totalPages=repd.TotalPages,this.setURLByViewMode(),this.setBreadCrumbs(repd.ViewPage),(null==this.reportDetails.ReportDetail.FormalCompanyData.CompanyName?0:1)&&(frmlCompanyNm=this.reportDetails.ReportDetail.FormalCompanyData.CompanyName+" - ",$analytics.eventTrack("MAYA Report Entrance",{category:this.reportDetails.ReportDetail.FormalCompanyData.CompanyName,label:this.reportDetails.ReportDetail.Subject})),this._TitleService.setTitle(frmlCompanyNm+this.reportDetails.ReportDetail.Subject,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitleShort),this._MetaTagService.setMetaTag({title:document.title,description:repd.MetaTag.Description,keywords:repd.MetaTag.Keywords}),this.isFavorite=this._favService.checkIsFav(this.reportDetails.ReportDetail.RptCode),this.reportDetails.ReportDetail.Files&&0<this.reportDetails.ReportDetail.Files.length&&(0==this.filetype?this.openReport(this.reportDetails.ReportDetail.RptCode,this.reportDetails.ReportDetail.Files[0].Type,0,!1):this.openReport(this.reportDetails.ReportDetail.RptCode,this.filetype,this.filenum,!1)),null!=this.reportDetails.ReportDetail.FormalCompanyData.CompanyId&&this._CompanyProxy.getTradeData(this.reportDetails.ReportDetail.FormalCompanyData.CompanyId).then(function(tdata){angular.extend(this.cTradeData,tdata)}.bind(this)),this.busy=!1,this._blockUI.stop()}.bind(this),function(err){this._blockUI.stop()}.bind(this))},ReportDetailsCtrl.prototype.exportTxtFile=function(type){var id=this.id,proxy=this._ReportProxy,utility=this.utility,blockUI=this._blockUI;blockUI.start(),proxy.downloadTextFileContent(id,type,this.filenum).then(function(data){utility.download(data,id+"_"+this.filenum,type),blockUI.stop()}.bind(this),function(err){blockUI.stop()})},ReportDetailsCtrl.prototype.setBreadCrumbs=function(vp){this._mayaMenuService.menudata[vp.toLowerCase()];globalTrans[this._mGeneralSetting.Lang].mainMenu[vp.toLowerCase()]?this.BaseCtrl.updateBreadcrumbs(2,{id:1,label:globalTrans[this._mGeneralSetting.Lang].mainMenu[vp.toLowerCase()],url:""}):this.BaseCtrl.pushBreadcrumbs({id:1,label:globalTrans[this._mGeneralSetting.Lang].messages,url:"reports/"+this._mGeneralSetting.Page[vp]}),this.BaseCtrl.pushBreadcrumbs({id:3,label:this.reportDetails.ReportDetail.Subject,url:""})},ReportDetailsCtrl.prototype.isSmartPhone=function(){return navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i)},ReportDetailsCtrl.prototype.openReport=function(iRptCd,sType,bNilveId,firstMobileLoad){this.filetype=sType,this.toDispPrint=1==sType;var filePath=this._dataStorage.reports.getPath(iRptCd,sType,bNilveId,firstMobileLoad);(0<window.innerWidth?window.innerWidth:screen.width)<991&&firstMobileLoad&&window.open(arrUrl.join("")),this.iframeSrs=this._sce.trustAsResourceUrl(filePath);for(var i=0;i<this.reportDetails.ReportDetail.Files.length;i++)this.reportDetails.ReportDetail.Files[i].Type==sType&&this.reportDetails.ReportDetail.Files[i].Index==bNilveId&&(this.currFileInd=i)},ReportDetailsCtrl.prototype.PopulateSiblingReports=function(data){var length=this.reportDetails.SiblingReports.length;this.reportDetails.SiblingReports=[];for(var i=0;i<data.length;i++)this.reportDetails.SiblingReports.push(data[i]);if(length>data.length){var oldItemsNum=this.reportDetails.SiblingReports.length-data.length;for(i=data.length-1;oldItemsNum<i;i--)this.reportDetails.SiblingReports.pop()}else{this.reportDetails.SiblingReports=[];for(i=0;i<data.length;i++)this.reportDetails.SiblingReports.push(data[i])}},ReportDetailsCtrl.prototype.nextPage=function(){this.currentPage<=1||this.busy||(this.busy=!0,this._ReportProxy.getSiblingReports(this.reportDetails.ReportDetail.FormalCompanyData.CompanyId,--this.currentPage).then(function(data){this.PopulateSiblingReports(data),this.busy=!1}.bind(this)))},ReportDetailsCtrl.prototype.prevPage=function(){this.busy||(this.busy=!0,this._ReportProxy.getSiblingReports(this.reportDetails.ReportDetail.FormalCompanyData.CompanyId,++this.currentPage).then(function(data){this.PopulateSiblingReports(data),this.busy=!1}.bind(this)))},ReportDetailsCtrl.prototype.SaveToFavorites=function(id){this._favService.SaveToFavorites(id).then(function(isFav){this.isFavorite=isFav}.bind(this))},ReportDetailsCtrl.prototype.shareWhatsapp=function(report,isMobile){var post=new this._Post(report.report,isMobile);this._postingMayaService.shareWhatsapp(post)},ReportDetailsCtrl.prototype.shareTwitter=function(report){var post=new this._Post(report.report);this._postingMayaService.shareTwitter(post)},ReportDetailsCtrl.prototype.SetCollapsed=function(curr){this.BoxOpened.push(curr)},ReportDetailsCtrl.prototype.openSendMailDialog=function(report){var reportUrl=window.location.protocol+"//"+window.location.host,subject=new Array(null!=report.report.FormalCompanyData.CompanyId?report.report.FormalCompanyData.CompanyName:report.report.Companies[0].CompanyEntity.CompanyName+"...",report.report.Subject,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSiteTitle),body=report.report.Subject+"/n/n"+reportUrl+"/"+globalTrans[this._mGeneralSetting.Lang].mayaStrings.ReportPageURL+"/"+report.report.RptCode;escape(subject.join("-")),escape(body);this._modalService.open(this._mModalType.SendMail,{RptCd:report.report.RptCode}).then(function(){console.log("resolve")},function(){console.log("reject")})},ReportDetailsCtrl.prototype.printDocument=function(){var f=document.getElementById("1"),iw=f.contentWindow||f;return iw.focus(),iw.postMessage("print",location.protocol+"//"+this._mayaFilesBaseUrl),!1},ReportDetailsCtrl.prototype.downloadURL=function(url){this._scope.$broadcast("maya-event-downloadFile",url.toString())},ReportDetailsCtrl.prototype.showTradeData=function(entityId,type){if(0!=entityId){this.$analytics;this._$uibModal.open({templateUrl:"src/company/directives/views/trade-data.html",controller:"tradeDataCtrl",controllerAs:"trd",windowClass:"TradingDialogSize",resolve:{id:function(){return entityId},type:function(){return type}.bind(this)}}).result.then(function(){},function(){})}},ReportDetailsCtrl.prototype.createURLParam=function(rptCode,companyId){return this.reportDetails.ReportDetail.FormalCompanyData.CompanyId!==companyId&&this.reportDetails.ReportDetail.FormalCompanyData.CompanyId?rptCode+"/0/0/"+(this.compId||this.reportDetails.ReportDetail.FormalCompanyData.CompanyId):rptCode},FinanceByPeriodCtrl.prototype.init=function(){var dataStorage=this._dataStorage,jsonService=this._jsonService;this.financeTableColumnDefinition=jsonService.getTemplateByTemplateName("FinanceReportTpl"),dataStorage.companyFinance.loadDefaultFinanceParams().then(function(data){var param=this._location.search();param&&param.q?this.collectURLParamters(param.q):this.filterItems={FromYear:angular.copy(dataStorage.companyFinance.defaultFinanceParams.Year),ToYear:angular.copy(dataStorage.companyFinance.defaultFinanceParams.Year),Period:angular.copy(dataStorage.companyFinance.defaultFinanceParams.Period)},this.filter()}.bind(this))},FinanceByPeriodCtrl.prototype.collectURLParamters=function(param){this.filterItems=param?JSON.parse(param):{},this.filterItems.FromYear||(this.filterItems.FromYear=(new Date).getFullYear()),this.filterItems.ToYear||(this.filterItems.ToYear=(new Date).getFullYear()),this.currentPage=1},FinanceByPeriodCtrl.prototype.filter=function(){this.checkYearRange();var dataStorage=this._dataStorage;this.exportKeyArgs=[this.filterItems],dataStorage.companyFinance.add(this.filterItems).load().then(function(cfl){this.companyFinanceList=cfl.data.FinanceCompanyReportByPeriod,this._TitleService.setTitle(cfl.data.Title+"-"+globalTrans[this._mGeneralSetting.Lang].mayaStrings.ReportTitle,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle),this._MetaTagService.setMetaTag({title:cfl.data.Title,description:cfl.data.MetaTag.Description,keywords:cfl.data.MetaTag.Keywords}),this.blockUI.stop(),this.sharedScrollFactory.invoke()}.bind(this),function(err){this.blockUI.stop()}.bind(this))},FinanceByPeriodCtrl.prototype.onFilterChange=function(page){this.checkYearRange(),this.filterItems.hasOwnProperty("EntityId")&&0==this.filterItems.EntityId&&delete this.filterItems.EntityId;var params=this.filterItems,p={};for(var pi in params)null==params[pi]||null==params[pi]||"object"==typeof params[pi]&&0==Object.keys(params[pi]).length||!1===params[pi]||(p[pi]=params[pi]);this._location.search({}),this._location.search("q",JSON.stringify(p))},FinanceByPeriodCtrl.prototype.checkYearRange=function(){!this.filterItems.EntityId&&!this.filterItems.CompanyGroup&&5<this.filterItems.ToYear-this.filterItems.FromYear&&(this.sharedScrollFactory.invoke(),function(){this._modalService.open(this._mGeneralSetting.ModalType.ErrorDialog,{message:globalTrans[this._mGeneralSetting.Lang].mayaStrings.MoreThenYearRange,title:globalTrans[this._mGeneralSetting.Lang].mayaStrings.MoreThenYearRangeTitle})}.apply(this))},FinanceByPeriodCtrl.prototype.onPaging=function(page,sortType,sortReverse){this.sharedScrollFactory.invoke()},mi.directive("mayaExpanderPanel",function($location){function ExpanderPanel($scope){this.box=!1,this.isMainPage=$location.path().length<2,this.location=$location}return ExpanderPanel.prototype.boxClick=function(){this.box=!this.box,this.box?this.mTitle="פתח הודעות":this.mTitle="סגור הודעות"},{restirct:"EA",bindToController:!0,controller:ExpanderPanel,controllerAs:"exP",link:function(scope,element,attr){var ctrl=scope.exP;scope.$on("$routeChangeSuccess",function(){if(ctrl.isMainPage=ctrl.location.path().length<2,ctrl.isMainPage){document.getElementById("homeBlockID");var bl=document.getElementsByClassName("homeBlock")[0];bl&&(bl.style.display="block")}})}}}),mi.directive("minimizeImage",function($compile){return{replace:!0,scope:!1,restrict:"EA",link:function(scope,element,attr){var newImg=angular.element("<img alt='{{exP.mTitle}}' title='{{exP.mTitle}}' ng-src='{{exP.mImg}}' />"),$e=$compile(newImg)(scope);element.replaceWith($e)}}}),mi.factory("Report",ReportEntityFactory),ReportEntityFactory.$inject=["reportProxy","$q","dataStorage","FavoritesProxy"],mi.factory("ReportDetails",ReportDetailsEntityFactory),ReportDetailsEntityFactory.$inject=["reportProxy","companyProxy","$q","dataStorage"],mi.factory("CompanyFinanceReport",CompanyFinanceReportEntityFactory),CompanyFinanceReportEntityFactory.$inject=["reportProxy","$q","dataStorage"],mi.service("reportProxy",function($http,$log,$q,$httpParamSerializerJQLike,ngAuthSettings,mMimeTypeSettings,mayaCacheService,ngConfigSetting,mGeneralSetting){function ReportProxy(){}return ReportProxy.prototype.printSelected=function(rptCodes){var defer=$q.defer();return $log.debug("ReportProxy.printSelected()"),$http({method:"POST",url:ngConfigSetting.api+"report/printSelected",data:angular.toJson(rptCodes)}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getReportDocument=function(rptCd){var defer=$q.defer();return $log.debug("ReportProxy.getReportDocument()"),$http({method:"GET",url:ngConfigSetting.api+"report/contentfile",params:{rptCd:rptCd}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.sendMailReportToFriend=function(dataToSend){var defer=$q.defer();$log.debug("ReportProxy.sendMailReportToFriend()");defer=$q.defer();return $http.post(ngConfigSetting.api+"report/SendReportMailToFriend",dataToSend).success(function(response){defer.resolve(response)}).error(function(err,status){$log.error(err),defer.reject(err)}),defer.promise},ReportProxy.prototype.getEncodedText=function(rptCd,bNilveId){var defer=$q.defer();return $log.debug("ReportProxy.getEncodedText()"),$http.get(ngConfigSetting.api+"report/encodetextfile/"+rptCd+"/"+bNilveId).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.getFilterData=function(rsp){var defer=$q.defer();return $http.get(ngConfigSetting.api+"report/filtermetadata").then(function(res){defer.resolve(res.data.FilterOptionsMetadata)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.getFilterStatCounter=function(fop){var defer=$q.defer();return $log.debug("ReportProxy.getFilterStatCounter()"),$http({method:"POST",url:ngConfigSetting.api+"report/filterstat",data:angular.toJson(fop)}).success(function(data,status,headers,cfg){$log.debug(data),defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.filter=function(fop){var defer=$q.defer();return $log.debug("ReportProxy.filter()"),$http({method:"POST",url:ngConfigSetting.api+"report/filter",data:angular.toJson(fop)}).success(function(data,status,headers,cfg){$log.debug(data),defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(err)}),defer.promise},ReportProxy.prototype.search=function(query){console.log(query);var defer=$q.defer();return $log.debug("ReportProxy.search()"),$http({method:"POST",url:ngConfigSetting.api+"report/search?q="+encodeURIComponent(query.Query),data:angular.toJson(query)}).success(function(data,status,headers,cfg){$log.debug(data),defer.resolve(data)}).error(function(err,status){$log.debug(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.checkForNewReports=function(o){var defer=$q.defer();return $http({method:"GET",url:ngConfigSetting.api+"report/newreport/"+o.view+"/"+o.id}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){defer.reject(status)}),defer.promise},ReportProxy.prototype.getNotifications=function(o){var defer=$q.defer();return $http({method:"POST",url:ngConfigSetting.api+"notification",data:angular.toJson(o)}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){defer.reject(status)}),defer.promise},ReportProxy.prototype.getBreakingAnnouncement=function(page){var defer=$q.defer(),ctrlName="report/breakingannouncement";return 1<parseInt(page)&&(ctrlName+="?page="+page),$log.debug("ReportProxy.getBreakingAnnouncement()"),$http.get(ngConfigSetting.api+ctrlName).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.getSiblingReports=function(rptCd,page){var defer=$q.defer();return $log.debug("ReportProxy.getSiblingReports("+rptCd+")"),$http({method:"GET",url:ngConfigSetting.api+"report/siblingreports",params:{rptCd:rptCd,page:page}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getCompanyReports=function(page){var defer=$q.defer(),ctrlName="report/company";return 1<parseInt(page)&&(ctrlName+="?page="+page),$log.debug("ReportProxy.getCompanyReports()"),$http.get(ngConfigSetting.api+ctrlName).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.getTaseReports=function(page){var defer=$q.defer(),ctrlName="report/tase";return 1<parseInt(page)&&(ctrlName+="?page="+page),$log.debug("ReportProxy.getTaseReports()"),$http.get(ngConfigSetting.api+ctrlName).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.getFundReports=function(page){var defer=$q.defer(),ctrlName="report/fund";return 1<parseInt(page)&&(ctrlName+="?page="+page),$log.debug("ReportProxy.getFundReports()"),$http.get(ngConfigSetting.api+ctrlName).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.getHedgeFundReports=function(page){var defer=$q.defer(),ctrlName="report/hedgefund";return 1<parseInt(page)&&(ctrlName+="?page="+page),$log.debug("ReportProxy.getHedgeFundReports()"),$http.get(ngConfigSetting.api+ctrlName).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.getETFReports=function(page){var defer=$q.defer(),ctrlName="report/etf";return 1<parseInt(page)&&(ctrlName+="?page="+page),$log.debug("ReportProxy.getETFReports()"),$http.get(ngConfigSetting.api+ctrlName).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.getForeignETFReports=function(page){var defer=$q.defer(),ctrlName="report/foreignetf";return 1<parseInt(page)&&(ctrlName+="?page="+page),$log.debug("ReportProxy.getForeignETFReports()"),$http.get(ngConfigSetting.api+ctrlName).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.getFundManagerReports=function(page,id){var defer=$q.defer();return $log.debug("ReportProxy.getFundManagerReports("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"fund/reports",params:{fundManagerId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getReportsByForeignETFManagerId=function(page,id){var defer=$q.defer();return $log.debug("ReportProxy.getReportsByForeignETFManagerId("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"company/manager/reports",params:{etfManagerId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getReportsByCompanyId=function(page,id){var defer=$q.defer();return $log.debug("ReportProxy.getReports("+id+","+page+")"),$http({method:"GET",url:ngConfigSetting.api+"company/reports",params:{companyId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getEtnReports=function(page){var defer=$q.defer(),ctrlName="report/etn";return 1<parseInt(page)&&(ctrlName+="?page="+page),$log.debug("ReportProxy.getEtnReports()"),$http.get(ngConfigSetting.api+ctrlName).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.downloadTextFileContent=function(id,fileType,index){var defer=$q.defer();return $log.debug("CompanyProxy.downloadTextFileContent("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/exporttextfile",params:{rptCd:id,index:index},headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getCompanyAnalysis=function(page,id){var defer=$q.defer();return $log.debug("ReportProxy.getCompanyAnalysis()"),$http({method:"GET",url:ngConfigSetting.api+"report/companyanalysis",params:{companyId:id,Page:page}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getRelatedReport=function(rptCd){var defer=$q.defer();return $log.debug("ReportProxy.RelatedReports("+rptCd+")"),$http({method:"GET",url:ngConfigSetting.api+"report/relatedreports",params:{rptCd:rptCd}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getReportDetails=function(rptCd,compCd){var defer=$q.defer();return $log.debug("ReportProxy.getReportDetails("+rptCd+")"),$http({method:"GET",url:ngConfigSetting.api+"report/details",params:compCd?{rptCd:rptCd,compCd:compCd}:{rptCd:rptCd}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getStatistics=function(){var defer=$q.defer();return $log.debug("ReportProxy.Statistics()"),$http.get(ngConfigSetting.api+"report/statistics").then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.getCubes=function(){var defer=$q.defer();return $log.debug("ReportProxy.getCubes()"),$http.get(ngConfigSetting.api+"report/cubes").then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.getCompanyFinanceReport=function(parms){var defer=$q.defer();return $log.debug("ReportProxy.getCompanyFinanceReport()"),$http({method:"POST",url:ngConfigSetting.api+"report/finance",data:$httpParamSerializerJQLike(parms),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getDefaultFinanceParams=function(year,period){var defer=$q.defer();return $log.debug("ReportProxy.getDefaultFinanceParams()"),$http.get(ngConfigSetting.api+"report/defaultfinanceparams").then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},ReportProxy.prototype.getFileFinanceReport=function(parms,fileType){var defer=$q.defer();return $log.debug("reportProxy.getFileFinanceReport()"),$http({method:"POST",url:ngConfigSetting.api+"download/financereport",data:$httpParamSerializerJQLike(parms),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getReportsByFundId=function(page,id){var defer=$q.defer();return $log.debug("ReportProxy.getReportsByFundId("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"fund/fundreports",params:{fundId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getReportsByETFId=function(page,id){var defer=$q.defer();return $log.debug("ReportProxy.getReportsByETFId("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"etf/etfreports",params:{etfId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},ReportProxy.prototype.getReportsByForeignETFId=function(page,id){var defer=$q.defer();return $log.debug("ReportProxy.getReportsByForeignETFId("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"foreignetf/reports",params:{etfId:id}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},new ReportProxy}),mi.factory("visitedLinksHelper",function(){var visitedLinksHelper={key:"visitedLinks",count:function(){return this.items.length},items:[],add:function(value){100<=this.count()&&this.remove(),this.items.push(value),this.saveInLocalStorage()},remove:function(){this.items.splice(0,1),this.saveInLocalStorage()},saveInLocalStorage:function(){localStorage.setItem(this.key,JSON.stringify(this))},readFromLocalStorage:function(){var data=localStorage.getItem(this.key);this.items=data?JSON.parse(data).items:[]},valueExist:function(val){for(var i=0;i<this.items.length;i++)if(this.items[i]==val)return!0;return!1}};return visitedLinksHelper.readFromLocalStorage(),visitedLinksHelper}),mi.run(function(Report,dataStorage,reportProxy,FavoritesProxy,ngConfigSetting){dataStorage.reports={lastUpdate:new Date,data:[],pageInfo:{BreakingAnnouncement:{viewType:1,proxyfunc:reportProxy.getBreakingAnnouncement},Company:{viewType:2,proxyfunc:reportProxy.getCompanyReports},Etn:{viewType:3,proxyfunc:reportProxy.getEtnReports},Fund:{viewType:4,proxyfunc:reportProxy.getFundReports},ETF:{viewType:25,proxyfunc:reportProxy.getETFReports},ForeignETF:{viewType:28,proxyfunc:reportProxy.getForeignETFReports},Tase:{viewType:5,proxyfunc:reportProxy.getTaseReports},Favorites:{viewType:6,proxyfunc:FavoritesProxy.getUserFavoriteReports},CompanyReports:{viewType:7,proxyfunc:reportProxy.getReportsByCompanyId},FundManagerReports:{viewType:8,proxyfunc:reportProxy.getFundManagerReports},Prospectus:{viewType:9,proxyfunc:null},DraftProspectus:{viewType:24,proxyfunc:null},ShareHolders:{viewType:10,proxyfunc:null},FundReports:{viewType:12,proxyfunc:reportProxy.getReportsByFundId},Analysis:{viewType:18,proxyfunc:null},Rates:{viewType:19,proxyfunc:null},MyMessages:{viewType:20,proxyfunc:FavoritesProxy.getUserReports},CompanyAnalysis:{viewType:21,proxyfunc:reportProxy.getCompanyAnalysis},AssemblyVotes:{viewType:26,proxyfunc:null},ETFReports:{viewType:27,proxyfunc:reportProxy.getReportsByETFId},ForeignETFReports:{viewType:29,proxyfunc:reportProxy.getReportsByForeignETFId},ForeignETFManagerReports:{viewType:30,proxyfunc:reportProxy.getReportsByForeignETFManagerId},HedgeFund:{viewType:31,proxyfunc:reportProxy.getHedgeFundReports}},add:function(o){return dataStorage.add.call(this,o,Report)},find:function(predicat){return dataStorage.find.call(this,predicat,Report)},isExists:function(id){return this.data.forEach(function(report){if(report.id==id)return!0}),!1},getById:function(id){return this.data.forEach(function(report){if(report.id==id)return report}),null},getBoundFolder:function(iRptCd){var blngBound,elngBound;return elngBound=iRptCd%1e3!=0?(blngBound=iRptCd-iRptCd%1e3+1,iRptCd-iRptCd%1e3+1e3):(blngBound=iRptCd-999,iRptCd),blngBound+"-"+elngBound},getPath:function(iRptCd,sType,bNilveId,firstMobileLoad){if(null==iRptCd)return"";var arrUrl=[],mapOfFile={1:{folder:"RHtm",prefix:"H",extention:".htm",boundFolder:this.getBoundFolder(iRptCd),rptPath:iRptCd,nilvePath:"",slashSign:"/"},3:{folder:"rtxt",prefix:"T",extention:".txt",boundFolder:this.getBoundFolder(iRptCd),rptPath:iRptCd,nilvePath:"-0"+bNilveId,slashSign:"/"},7:{folder:"rtxt",prefix:"T",extention:".txt",boundFolder:this.getBoundFolder(iRptCd),rptPath:iRptCd,nilvePath:"-0"+bNilveId,slashSign:"/"},2:{folder:"rpdf",prefix:"P",extention:".pdf",boundFolder:this.getBoundFolder(iRptCd),rptPath:iRptCd,nilvePath:"-0"+bNilveId,slashSign:"/"},4:{folder:"xbrl",prefix:"X",extention:".xbrl",boundFolder:this.getBoundFolder(iRptCd),rptPath:iRptCd,nilvePath:"",slashSign:"/"},6:{folder:"reports",prefix:"E",extention:".pdf",boundFolder:this.getBoundFolder(iRptCd),rptPath:iRptCd,nilvePath:"",slashSign:"/"},8:{folder:"ixbrl",prefix:"X",extention:".htm",boundFolder:this.getBoundFolder(iRptCd),rptPath:iRptCd,nilvePath:"",slashSign:"/"}};try{arrUrl.push(location.protocol+"//"+ngConfigSetting.mayaFilesBaseUrl+"/"),arrUrl.push(mapOfFile[sType].folder),arrUrl.push(mapOfFile[sType].slashSign),arrUrl.push(mapOfFile[sType].boundFolder),arrUrl.push(mapOfFile[sType].slashSign),arrUrl.push(mapOfFile[sType].prefix),arrUrl.push(mapOfFile[sType].rptPath),arrUrl.push(mapOfFile[sType].nilvePath),arrUrl.push(mapOfFile[sType].extention)}catch(e){return void alert("Fail to load file")}return arrUrl.join("")}}}),mi.run(function(ReportDetails,dataStorage){dataStorage.reportDetails={data:[],add:function(id){return dataStorage.add.call(this,id,ReportDetails)},find:function(predicat){return dataStorage.find.call(this,predicat,ReportDetails)},isExists:function(id){return this.data.forEach(function(report){if(report.id==id)return!0}),!1},getById:function(id){return this.data.forEach(function(report){if(report.id==id)return report}),null}}}),mi.run(function(CompanyFinanceReport,dataStorage,reportProxy){dataStorage.companyFinance={captions:{},defaultFinanceParams:{},data:[],add:function(o){return dataStorage.add.call(this,o,CompanyFinanceReport)},find:function(predicat){return dataStorage.find.call(this,predicat,CompanyFinanceReport)},isExists:function(id){return this.data.forEach(function(report){if(report.id==id)return!0}),!1},loadDefaultFinanceParams:function(){return reportProxy.getDefaultFinanceParams().then(function(data){return this.defaultFinanceParams=data,this}.bind(this))},getById:function(id){return this.data.forEach(function(report){if(report.id==id)return report}),null}}}),mi.directive("removeReportFromCounter",function($routeParams){return{link:function(){var elem=$("notification-alert");elem&&0<elem.length&&setTimeout(function(){elem.scope().removeItem($routeParams.id)},1e3)}}}),mi.directive("mayaStatistics",function(reportProxy,$interval,$location){function StatisticsCtrl(){this._ReportProxy=reportProxy,this.timeInterval=6e4,this._interval=$interval}return StatisticsCtrl.prototype.init=function(){this.start()},StatisticsCtrl.prototype.stop=function(){var interval=this._interval;this.unInterval&&(interval.cancel(this.unInterval),this.unInterval=void 0)},StatisticsCtrl.prototype.start=function(time){var proxy=this._ReportProxy,interval=this._interval;function addURL(data,lastTradeDate){data.forEach(function(feed){var url=""+feed.PageURL;if(null!=feed.EventCode){var arr=[];null!=feed.EventCode&&feed.EventCode.split(",").forEach(function(item){arr.push(parseInt(item))});var json={ShowLastTradeTime:!0,DateFrom:lastTradeDate.substring(0,lastTradeDate.indexOf("T")),subevents:arr};url+="?q="+JSON.stringify(json)}feed.URL=url})}function getStatistics(){proxy.getStatistics().then(function(data){(function(data){if(null==this.feeds)this.feeds=data.Statistics,addURL(this.feeds,data.LastTradeDate);else{addURL(this.feeds,data.LastTradeDate);for(var i=0;i<this.feeds.length;i++)this.feeds[i].Value!=data.Statistics[i].Value&&(this.feeds[i].Value=data.Statistics[i].Value)}}).call(this,data)}.bind(this))}time=time||this.timeInterval,this.unInterval&&this.stop(),this.unInterval=interval(function(){getStatistics.call(this)}.bind(this),time),getStatistics.call(this)},{restirct:"EA",scope:{feeds:"="},controller:StatisticsCtrl,bindToController:!0,controllerAs:"vms",require:"^mayaPanelslider",link:function(scope,element,attr,panelslider){var ctrl=scope.vms;ctrl.start(),panelslider.onStop=function(){ctrl.stop()},panelslider.onStart=function(){ctrl.start()},scope.$on("$destroy",function(){ctrl.stop()})}}}),mi.directive("mayaReportActions",function($timeout){function ReportActionsCtrl(localStorageService,$q,_,FavoritesService,reportProxy,mGeneralSetting,blockUI,ngConfigSetting,uibPopUpService,sharedScrollFactory,filterService){this.tickBoxes=[],this._ngConfigSetting=ngConfigSetting,this.favRpt=FavoritesService.authentication.isAuth?FavoritesService.fav:null,this.localStorage=localStorageService,this._=_,this._uibPopUpService=uibPopUpService,this.BoxOpened=[],this._reportProxy=reportProxy,this._mGeneralSetting=mGeneralSetting,this._blockUI=blockUI,this._favService=FavoritesService,this._$q=$q,this.modalOpen=!1,this._filterService=filterService,sharedScrollFactory.onInvokeScroll(function(){this.tickBoxes=[]}.bind(this))}return ReportActionsCtrl.prototype.findFavorite=function(rptCd){return this._favService.checkIsFav(rptCd)},ReportActionsCtrl.prototype.setFavOnView=function(action){action==this._mGeneralSetting.Action.AddFavorite?angular.forEach(this._favService.fav,function(rpt){angular.forEach(this.tickBoxes,function(tb){tb.report.RptCode==rpt&&(tb.isfavorite=!0)}.bind(this))}.bind(this)):angular.forEach(this.tickBoxes,function(tb){tb.isfavorite=!1}.bind(this))},ReportActionsCtrl.prototype.changeTicks=function(){this.isTickBoxOpen?this.selectAll():this.clearSelected()},ReportActionsCtrl.prototype.selectAll=function(){angular.forEach(this.tickBoxes,function(tb){tb.IsTickOpen=!0}),this.isTickBoxOpen=!0},ReportActionsCtrl.prototype.clearSelected=function(){angular.forEach(this.tickBoxes,function(tb){tb.IsTickOpen=!1}),this.isTickBoxOpen=!1},ReportActionsCtrl.prototype.checkIfSelected=function(){var bRes=!1;return angular.forEach(this.tickBoxes,function(tb){if(tb.IsTickOpen)return bRes=!0}),bRes},ReportActionsCtrl.prototype.printSelected=function(toPrint){var rptCodes=[],blockUI=this._blockUI,proxy=this._reportProxy;angular.forEach(this.tickBoxes,function(tb){tb.IsTickOpen&&rptCodes.push(tb.report.RptCode)});var modalService=this._uibPopUpService,mGeneralSetting=this._mGeneralSetting;0!=rptCodes.length?(blockUI.start(),proxy.printSelected(rptCodes).then(function(data){blockUI.stop(),toPrint&&(data+="?/print");window.open(location.protocol+"//"+this._ngConfigSetting.mayaFilesBaseUrl+"/printing/"+data,"_newtab")}.bind(this),function(res){blockUI.stop();modalService.open(mGeneralSetting.ModalType.PopUpMessage,{message:globalTrans[this.mGeneralSetting.Lang].mayaStrings.ReportsForPrintError,title:globalTrans[this.mGeneralSetting.Lang].mayaStrings.ReportsForPrintTitle});return deferred.promise})):modalService.open(mGeneralSetting.ModalType.PopUpMessage,{message:globalTrans[this._mGeneralSetting.Lang].mayaStrings.NoReportsForPrint,title:globalTrans[this._mGeneralSetting.Lang].mayaStrings.ReportsForPrintTitle}).result.then(function(){}.bind(this))},ReportActionsCtrl.prototype.addTickBox=function(tb){this.tickBoxes.push(tb)},ReportActionsCtrl.prototype.gotOpend=function(selectTb){angular.forEach(this.tickBoxes,function(tb){selectTb!=tb&&(tb.IsTickOpen=!1)})},ReportActionsCtrl.prototype.changeTickBox=function(selectTb){angular.forEach(this.tickBoxes,function(tb){selectTb==tb&&(tb.IsTickOpen=selectTb.IsTickOpen)})},ReportActionsCtrl.prototype.changeShareBox=function(curr){angular.forEach(this.tickBoxes,function(tb){curr.report.RptCode!=tb.report.RptCode&&(tb.IsShareBoxOpen=!1)})},ReportActionsCtrl.prototype.CloseShareBoxes=function(){angular.forEach(this.tickBoxes,function(tb){tb.IsShareBoxOpen=!1})},ReportActionsCtrl.prototype.SetCollapsed=function(curr){this.BoxOpened.push(curr)},ReportActionsCtrl.prototype.SaveFavorites=function(id){},ReportActionsCtrl.prototype.getNoResultText=function(pageName){var txt="";switch(pageName){case"mymessages":txt="לא נמצאו הודעות סוכן חכם בטווח התאריכים שנבחר, ניתן להרחיב את טווח החיפוש על ידי שינוי טווח התאריכים.";break;case"favorites":txt="לא נמצאו הודעות שמורות בטווח התאריכים שנבחר, ניתן להרחיב את טווח החיפוש על ידי שינוי טווח התאריכים.";break;default:txt=globalTrans[this._mGeneralSetting.Lang].mayaStrings.NoResult}return txt},{restirct:"EA",scope:{isbusy:"=",resultsCount:"=",isTickBoxOpen:"=",isSearchPage:"=",pageName:"="},transclude:!0,templateUrl:"src/reports/directives/views/actions.html",controller:ReportActionsCtrl,controllerAs:"rac",bindToController:!0,link:function(scope,element,attr){var ctrl=scope.rac;$(".arrow_box").each(function(){$(this).on("shown.bs.collapse",function(){ctrl.SetCollapsed($(this))})}),$("body").on("click",function(e){if(0<ctrl.BoxOpened.length)for(var i=0;i<=ctrl.BoxOpened.length;i++)$(ctrl.BoxOpened[i]).collapse("hide"),ctrl.BoxOpened.splice(i,1)}),scope.$on("maya-event.scrollTop",function(){}),scope.$on("maya-event.setFavorite",function(event,action){ctrl.setFavOnView(action)}),Object.defineProperty(ctrl,"filterItems",{get:function(){return scope.$parent.vm.filterItems}}),ctrl.filter=function(){scope.$parent.vm.filter()}}}}),mi.directive("slickSlider",function(){return{restrict:"A",scope:{data:"="},link:function(scope,element,attrs){var isInitialized=!1;scope.$watch("data",function(newVal,oldVal){newVal&&0<newVal.length&&(isInitialized&&($(element).slick("removeSlide",null,null,!0),$(element).slick("unslick")),$(element).slick(scope.$eval(attrs.slickSlider)),isInitialized=!0)})}}}),mi.directive("mayaCubes",function($interval,$rootScope,$location,reportProxy,RegistrationService,_){function CubesCtrl(){this._ReportProxy=reportProxy,this._location=$location,this._RegistrationService=RegistrationService,this.sliderplay=!0,this.stopstartdesc="עצור",this.timeInterval=6e4,this._interval=$interval,this._=_,$rootScope.$on("maya-event.panelslider",function(event,isHidden){isHidden?this.stop():this.init()}.bind(this))}return CubesCtrl.prototype.init=function(){this.start(6e4)},CubesCtrl.prototype.stop=function(){var interval=this._interval;this.unInterval&&(interval.cancel(this.unInterval),this.unInterval=void 0),this.cubes=[],this.favRpt={}},CubesCtrl.prototype.start=function(time){var proxy=this._ReportProxy,interval=this._interval;function getCubes(){proxy.getCubes().then(function(data){this.cubes=data}.bind(this))}time=time||this.timeInterval,this.unInterval&&this.stop(),this.unInterval=interval(function(){getCubes.call(this)}.bind(this),time),getCubes.call(this)},{restirct:"EA",scope:{cubes:"=",sliderplay:"=",stopstartdesc:"=",sliderstopstart:"=",currentSlide:"="},controller:CubesCtrl,bindToController:!0,controllerAs:"vmc",require:"^mayaPanelslider",link:function(scope,element,attr,panelslider){var ctrl=scope.vmc;$(window).width()<768&&$(".breakingMassegesCarousel").slick({infinite:!0,autoplay:!1,rtl:!0,initialSlide:3,prevArrow:'<button type="button" class="slick-prev"><img src="content/images/homepage/arrow_left.svg" class="svg" /></button>',nextArrow:'<button type="button" class="slick-next"><img src="content/images/homepage/arrow_right.svg" class="svg" /></button>'}),ctrl.start(),ctrl.sliderstopstart=function(){var mn=document.getElementById("slick1");ctrl.sliderplay?(mn.slick.setPaused(!0),mn.slick.options.autoplay=!1,ctrl.stopstartdesc="הפעל"):(mn.slick.options.autoplay=!0,mn.slick.setPaused(!1),ctrl.stopstartdesc="עצור"),ctrl.sliderplay=!ctrl.sliderplay},panelslider.onStop=function(){ctrl.stop()},panelslider.onStart=function(){ctrl.start()},scope.$on("$destroy",function(){ctrl.stop()})}}}),mi.directive("mayaFilterReports",function(reportProxy,$window,$log,$filter,$uibModal,_,dataStorage,filterService,mayaWrapperService,mGeneralSetting,searchProxy,filteredResultPopUpService){function ReportFilterCtrl($scope,$analytics){this._$analytics=$analytics,this._ReportProxy=reportProxy,this._searchProxy=searchProxy,this._dataStorage=dataStorage,this._log=$log,this._window=$window,this._ld=_,this.counterData=[],this.defaultParams=[],this.displayIsBreakingAnnouncement=!1,this.displayTradeHalt=!1,this.displayIsForTaseMember=!1,this.displayIsSpecificFund=!1,this.selectedComp,this._filteredResultPopUpService=filteredResultPopUpService,this.dateOptions={minDate:new Date(1999,12,1),startingDate:1},Object.defineProperty(this,"isEng",{get:function(){return mGeneralSetting.Lang===mGeneralSetting.LangStates.English}}),Object.defineProperty(this,"displayNested",{get:function(){return filterService.displayNested}}),Object.defineProperty(this,"pageName",{get:function(){return filterService.pageName}}),Object.defineProperty(this,"entities",{get:function(){return filterService.entities}}),Object.defineProperty(this,"entitiesByGroup",{get:function(){var groupNumber=this.filterItems.level2;return groupNumber?filterService.entitiesByGroup(groupNumber):this.entities}}),Object.defineProperty(this,"etnsByGroup",{get:function(){var groupNumber=this.filterItems.entity;return groupNumber?filterService.etnsByGroup(groupNumber):this.etns}}),Object.defineProperty(this,"etfsByGroup",{get:function(){var groupNumber=this.filterItems.entity;return groupNumber?filterService.etfsByGroup(groupNumber):this.etfs}}),Object.defineProperty(this,"hedgefundByGroup",{get:function(){var groupNumber=this.filterItems.entity;return groupNumber?filterService.hedgefundByGroup(groupNumber):this.hedgefund}}),Object.defineProperty(this,"foreignETFsByGroup",{get:function(){var groupNumber=this.filterItems.entity;return groupNumber?filterService.foreignETFsByGroup(groupNumber):this.foreignETFs}}),Object.defineProperty(this,"fundsByGroup",{get:function(){var groupNumber=this.filterItems.entity;return groupNumber?filterService.fundsByGroup(groupNumber):this.funds}}),Object.defineProperty(this,"etnMgr",{get:function(){return filterService.etnMgr}}),Object.defineProperty(this,"etns",{get:function(){return filterService.etns}}),Object.defineProperty(this,"etfs",{get:function(){return filterService.etfs}}),Object.defineProperty(this,"hedgefund",{get:function(){return filterService.hedgefund}}),Object.defineProperty(this,"foreignETFs",{get:function(){return filterService.foreignETFs}}),Object.defineProperty(this,"etfMgr",{get:function(){return filterService.etfMgr}}),Object.defineProperty(this,"hedgefundMgr",{get:function(){return filterService.hedgefundMgr}}),Object.defineProperty(this,"foreignETFMgr",{get:function(){return filterService.foreignETFMgr}}),Object.defineProperty(this,"funds",{get:function(){return filterService.funds}}),Object.defineProperty(this,"fundMgr",{get:function(){return filterService.fundMgr}}),Object.defineProperty(this,"filterMetadata",{get:function(){return filterService.filterMetadata}}),Object.defineProperty(this,"mobMenuOpen",{get:function(){return mayaWrapperService.mobMenuOpen}}),Object.defineProperty(this,"PageInfo",{get:function(){return dataStorage.reports.pageInfo}}),Object.defineProperty(this,"compFldNameLang",{get:function(){return mGeneralSetting.Lang===mGeneralSetting.LangStates.English?"EngName":"Name"}}),Object.defineProperty(this,"filterByLang",{get:function(){return mGeneralSetting.Lang===mGeneralSetting.LangStates.English?"EngValue":"Value"}}),Object.defineProperty(this,"eventName",{get:function(){return mGeneralSetting.Lang===mGeneralSetting.LangStates.English?"EngDesc":"Desc"}}),$scope.startsWith=function(item,viewValue){return item.substring(0,viewValue.length).toLowerCase()==viewValue.toLowerCase()},this.init()}return ReportFilterCtrl.prototype.init=function(){this._dataStorage;var view=this.viewPage;view&&!isNaN(view)&&(this.displayIsBreakingAnnouncement=-1<_.indexOf(filterService.items.IsBreakingAnnouncement,parseInt(view)),this.displayTradeHalt=-1<_.indexOf(filterService.items.IsTradeHalt,parseInt(view)),this.displayIsForTaseMember=-1<_.indexOf(filterService.items.IsForTaseMember,parseInt(view)),this.displayIsSpecificFund=-1<_.indexOf(filterService.items.IsSpecificFund,parseInt(view)))},ReportFilterCtrl.prototype.clear=function(){var eventsData=angular.copy(this.filterItems.eventsData);this.viewPage&&this.viewPage!=this.PageInfo.Analysis.viewType&&this.viewPage!=this.PageInfo.Rates.viewType&&this.viewPage!=this.PageInfo.Prospectus.viewType&&this.viewPage!=this.PageInfo.ShareHolders.viewType&&this.viewPage!=this.PageInfo.DraftProspectus.viewType&&this.viewPage!=this.PageInfo.AssemblyVotes.viewType&&eventsData.forEach(function(parent){parent.isSelected=!1,parent.expanded=!1,parent.childrens.length=0,parent.subevents.forEach(function(sub){sub.IsSelected=!1})}),this.filterItems={DateFrom:(new Date).addMonths(-6),DateTo:new Date,QOpt:1,IsBreakingAnnouncement:!1,IsForTaseMember:!1,IsSpecificFund:!1,subevents:{},eventsData:eventsData}},ReportFilterCtrl.prototype.setChildren=function(item){item.childrens=[],item.subevents.forEach(function(sub){sub.IsSelected=item.isSelected})},ReportFilterCtrl.prototype.setParent=function(event){var bSelected=!1;event.subevents.forEach(function(sub){sub.IsSelected&&(bSelected=!0)}),event.isSelected=bSelected},ReportFilterCtrl.prototype.matchCompanies=function(searchTerm){var result=[],arr=this.entities;if(!searchTerm||searchTerm.length<1)return result;searchTerm=searchTerm.toLowerCase();for(var i=0;i<arr.length;i++){var item=arr[i];if(5!=item.Type&&(0===item.Name.indexOf(searchTerm)||0===item.Id.toString().indexOf(searchTerm))&&(result.push(item),5==result.length))break}return result},ReportFilterCtrl.prototype.resetCompnyGrpRdio=function(){this.pressSearch=!1,this.filterItems.level1=void 0,this.filterItems.level2=void 0},ReportFilterCtrl.prototype.resetCompnyAutocompleteRdio=function(){this.pressSearch=!1,this.filterItems.entity=void 0},ReportFilterCtrl.prototype.resetAutoCompleteGrpRdio=function(){this.pressSearch=!1,this.filterItems.etf=void 0,this.filterItems.fund=void 0,this.filterItems.hedgefund=void 0},ReportFilterCtrl.prototype.getETFmgrDDLDate=function(){if(this.etfMgr&&0==this.etfMgr.length){var that=this;this._searchProxy.GetAllEntitiesByType(13,"").then(function(items){items.forEach(function(item){that.etfMgr.push(item)})})}},ReportFilterCtrl.prototype.getHedgeFundDDLDate=function(){if(this.hedgefundMgr&&0==this.hedgefundMgr.length){var that=this;this._searchProxy.GetAllEntitiesByType(14,"").then(function(items){items.forEach(function(item){that.hedgefundMgr.push(item)})})}},ReportFilterCtrl.prototype.resetSelectGrpRdio=function(){this.pressSearch=!1,this.filterItems.entity=void 0},ReportFilterCtrl.prototype.setCompanySelectfilter=function(cmpnyId){this.pressSearch=!0,this.filterItems.entity=cmpnyId,this.filterItems.level1=void 0,this.filterItems.level2=void 0},ReportFilterCtrl.prototype.setFundSelectfilter=function(fundId){this.pressSearch=!0,this.filterItems.fund=fundId,this.filterItems.level1=void 0,this.filterItems.level2=void 0},ReportFilterCtrl.prototype.setEtfSelectfilter=function(fundId){this.pressSearch=!0,this.filterItems.etf=fundId,this.filterItems.level1=void 0,this.filterItems.level2=void 0},ReportFilterCtrl.prototype.getCompaniesByGrpSelect=function(ev){for(var popUpTitle="",i=0;i<this.filterMetadata[0].NestedLevelOption.Level2.length;i++)if(this.filterMetadata[0].NestedLevelOption.Level2[i].Key==this.filterItems.level2)popUpTitle=this.isEng?this.filterMetadata[0].NestedLevelOption.Level2[i].EngValue:this.filterMetadata[0].NestedLevelOption.Level2[i].Value;this._searchProxy.getCompaniesByGroup(this.filterItems.level1,this.filterItems.level2).then(function(data){data.Title=popUpTitle,this._filteredResultPopUpService.open(data)}.bind(this))},ReportFilterCtrl.prototype.more=function($event,event){event&&($event.preventDefault(),$event.stopPropagation());var modalInstance=$uibModal.open({templateUrl:"src/reports/directives/views/filter-advanced-report.html",controller:filterAdvancedCtrl,controllerAs:"vm",windowClass:"filterDialogSize",resolve:{items:function(){return this.filterItems.eventsData}.bind(this),eventParent:function(){return event}}}),self=this;modalInstance.result.then(function(data){self.SendToGoogleAnalytics(data);var newData=[];data.forEach(function(item){newData[item.ParentCd]||(newData[item.ParentCd]=[]),newData[item.ParentCd].push(item)}),this.filterItems.eventsData.forEach(function(item){item.childrens=[],item.isSelected=!1,newData[item.cd]&&(newData[item.cd].length!=item.total&&(item.childrens=newData[item.cd]),item.isSelected=!0)}),this.filter()}.bind(this))},ReportFilterCtrl.prototype.SendToGoogleAnalytics=function(data){for(var i=0;i<data.length;i++)this._$analytics.eventTrack(data[i].Desc,{category:"אירועים",lable:data[i].Desc})},ReportFilterCtrl.prototype.onChangeCompany=function(){},{restirct:"EA",scope:{viewPage:"@",search:"@",pressSearch:"=",filter:"&onChange"},require:["^?ngModel","^?sharedWrapper"],controller:ReportFilterCtrl,bindToController:!0,controllerAs:"fd",templateUrl:"src/reports/directives/views/filter-reports.html",link:function(scope,element,attr,controllers){var ctrl=scope.fd,ngController=controllers[0];Object.defineProperty(ctrl,"filterItems",{get:function(){return ngController.$modelValue},set:function(value){ngController.$setViewValue(value)}}),ctrl.init(),scope.$on("$destroy",function(){ctrl.clear()})}}}),mi.controller("filterAdvancedCtrl",filterAdvancedCtrl),filterAdvancedCtrl.prototype.cancel=function(){this.$uibModalInstance.dismiss()},filterAdvancedCtrl.prototype.filter=function(){this.$uibModalInstance.close(this.selectedFilters)},filterAdvancedCtrl.prototype.changeGroup=function(parentFilter){this.selectedFilter=parentFilter},filterAdvancedCtrl.prototype.selectAll=function(){this.selectedFilter.childrens.forEach(function(child){var prevVal=child.IsSelected;child.IsSelected=!0,this.onChangeSelection(child,prevVal)}.bind(this))},filterAdvancedCtrl.prototype.unSelect=function(){this.selectedFilter.childrens.forEach(function(child){child.IsSelected=!1,this.onChangeSelection(child)}.bind(this))},filterAdvancedCtrl.prototype.onChangeSelection=function(item,prev){1==item.IsSelected?(-1==this._.indexOf(this.selectedFilters,item)&&this.selectedFilters.push(item),item.Parent.IsSelected=!0):(this._.remove(this.selectedFilters,function(currObject){return item.Cd==currObject.Cd}),this._.indexOf(item.Parent.childrens,{IsSelected:!0})<0&&(item.Parent.IsSelected=!1))},filterAdvancedCtrl.prototype.removeSelectedFilterItem=function(item){this._.remove(this.selectedFilters,function(currObject){return item.Cd==currObject.Cd}),this.filters.forEach(function(parent){parent.Cd==item.ParentCd&&parent.childrens.forEach(function(child){child.Cd==item.Cd&&(child.IsSelected=!1)})})},mi.directive("mayaFilterSelectedItem",function(){return{restrict:"E",scope:{item:"=",isEng:"=",onRemove:"&"},template:'<div class="filtersSelectedItem"><div class="filterSelectedText">{{isEng ? item.EngDesc : item.Desc}}</div><button type="button" class="removeFilterSelected" ng-click="onRemove(item)"><label class="hidden">{{"filterAdvancedCorp.removeFilter" | translate}}</label><i class="mf mf-remove-filtering-green" title="{{filterAdvancedCorp.removeEvent | translate}} {{isEng ? item.EngDesc : item.Desc}}"></i></button></div>'}}),mi.directive("filterReport",function($filter,mGeneralSetting){return{restrict:"E",replace:!0,template:'<div class="advSearch"><input aria-autocomplete="list"  class="mayaInputAdv" type="text" maxlength="20" ng-model="filterText" title="חיפוש אירוע"><button class="nSearchBtn" title="מחק תוכן" ng-show="filterText.length>0" ng-click="filterText=\'\'"><i class="mf mf-close-filtering-menu"></i></button></div>',link:function(scope){scope.$watch(function(){return scope.filterText},function(newVal){var isEng=mGeneralSetting.Lang===mGeneralSetting.LangStates.English;newVal&&(scope.vm.selectedFilter=isEng?$filter("filter")(scope.vm.data,{childrens:{EngDesc:scope.filterText}})[0]:$filter("filter")(scope.vm.data,{childrens:{Desc:scope.filterText}})[0])})}}}),mi.directive("mayaFinanceFilter",function($rootScope,reportProxy,filterService,mGeneralSetting,searchProxy,filteredResultPopUpService){function FinanceFilterCtrl(){this._searchProxy=searchProxy,this._filteredResultPopUpService=filteredResultPopUpService,this.arrYears=[],this.defaultYear=(new Date).getFullYear(),this.buildYear((new Date).getFullYear()),Object.defineProperty(this,"filterMetadata",{get:function(){return filterService.filterMetadata}}),Object.defineProperty(this,"isEng",{get:function(){return mGeneralSetting.Lang===mGeneralSetting.LangStates.English}}),Object.defineProperty(this,"entities",{get:function(){return filterService.entities}}),Object.defineProperty(this,"compGrpFldByLang",{get:function(){return mGeneralSetting.Lang===mGeneralSetting.LangStates.English?"EngValue":"Value"}}),Object.defineProperty(this,"compFldNameLang",{get:function(){return mGeneralSetting.Lang===mGeneralSetting.LangStates.English?"EngName":"Name"}}),Object.defineProperty(this,"entitiesByGroup",{get:function(){if(this.filterItems){var groupNumber=this.filterItems.CompanyGroup;return groupNumber?filterService.entitiesByGroup(groupNumber):this.entities}}})}return FinanceFilterCtrl.prototype.buildYear=function(year){this.arrYears=[];for(var curYear=year;2e3<=curYear;curYear--)this.arrYears.push(curYear)},FinanceFilterCtrl.prototype.getCompaniesByGrpSelect=function(ev){for(var popUpTitle="",i=0;i<this.filterMetadata[0].NestedLevelOption.Level2.length;i++)if(this.filterMetadata[0].NestedLevelOption.Level2[i].Key==this.filterItems.CompanyGroup)popUpTitle=this.isEng?this.filterMetadata[0].NestedLevelOption.Level2[i].EngValue:this.filterMetadata[0].NestedLevelOption.Level2[i].Value;this._searchProxy.getCompaniesByGroup(this.filterItems.level1,this.filterItems.CompanyGroup).then(function(data){data.Title=popUpTitle,this._filteredResultPopUpService.open(data)}.bind(this))},{scope:{filter:"&onChange"},controller:FinanceFilterCtrl,bindToController:!0,controllerAs:"ffCtrl",require:["^?ngModel"],templateUrl:"src/reports/directives/views/finance-filter.html",link:function(scope,element,attrs,controllers){var ctrl=scope.ffCtrl,ngController=controllers[0];filterService.setData(1),Object.defineProperty(ctrl,"filterItems",{get:function(){return ngController.$modelValue},set:function(value){ngController.$setViewValue(value)}})}}}),mi.directive("mayaFinanceResult",function(reportProxy){return{scope:{reports:"="},templateUrl:"src/reports/directives/views/finance-result.html"}}),mi.directive("mayaPanelslider",function(){function PanelSlider($scope,$rootScope){this.isOpen=!1,this._rootScope=$rootScope}return{restirct:"EA",transclude:!(PanelSlider.prototype.showHide=function(){this.isOpen=!this.isOpen,this._rootScope.$broadcast("maya-event.panelslider",this.isOpen)}),bindToController:!0,controller:PanelSlider,controllerAs:"panelSlider",require:"^mayaExpanderPanel",link:function(scope,element,attr){parseInt(attr.slideToggleDuration,10);scope.$watch("panelSlider.isOpen",function(newVal,oldVal){newVal!==oldVal&&(!newVal&&scope.panelSlider.onStart?scope.panelSlider.onStart():scope.panelSlider.onStop&&scope.panelSlider.onStop())})}}}),mi.directive("sendMail",function(modalService,blockUI,reportProxy,RecaptchaService){function SendMailCtrl($scope){$scope.cancel=modalService.reject,this.message="",this.submitted=!1,this.smSuccess=!1}return SendMailCtrl.prototype.sendMailReportToFriend=function(isValid){if(isValid){var dataToSend=angular.extend(this.smData,{RptCd:modalService.params().RptCd});RecaptchaService.captchaResponse&&(dataToSend.Captcha=RecaptchaService.captchaResponse),blockUI.start(),reportProxy.sendMailReportToFriend(dataToSend).then(function(data){blockUI.stop(),this.smSuccess=!0,this.message=""}.bind(this),function(data){blockUI.stop();var errors=[];for(var key in data.ModelState)for(var i=0;i<data.ModelState[key].length;i++)errors.push(data.ModelState[key][i]);this.message=errors[0]}.bind(this))}},{restirct:"EA",templateUrl:"src/reports/directives/views/mail-report.html",controller:SendMailCtrl,bindToController:!0,controllerAs:"smCtrl"}}),mi.directive("mayaRelated",function(reportProxy){function RelatedCtrl(){this._ReportProxy=reportProxy,this.relatedReports={},this.isRelatedLoaded=!1}return RelatedCtrl.prototype.load=function(id){this._ReportProxy.getRelatedReport(id).then(function(data){this.relatedReports=data,this.isRelatedLoaded=!0}.bind(this)),this.isRelatedLoaded=!1},{restirct:"EA",scope:{id:"="},templateUrl:"src/reports/directives/views/related.html",controller:RelatedCtrl,bindToController:!0,controllerAs:"vmsr",link:function(scope,element,attr){var ctrl=scope.vmsr;ctrl.load(ctrl.id)}}}),mi.directive("mayaRepDetailsRelated",function(reportProxy){function RepDetailsRelatedCtrl(){this._ReportProxy=reportProxy,this.relatedReports={},this.isRelatedLoaded=!1}return RepDetailsRelatedCtrl.prototype.load=function(id){this._ReportProxy.getRelatedReport(id).then(function(data){this.relatedReports=data,this.isRelatedLoaded=!0}.bind(this)),this.isRelatedLoaded=!1},{restirct:"EA",scope:{id:"="},templateUrl:"src/reports/directives/views/report-details-related.html",controller:RepDetailsRelatedCtrl,bindToController:!0,controllerAs:"vmsr",link:function(scope,element,attr){var ctrl=scope.vmsr;ctrl.load(ctrl.id)}}}),mi.directive("reportDetails",function(){return{restirct:"EA",scope:!0,require:"^?ReportDetailsCtrl",link:function(scope,element,attr,ReportDetailsCtrl){var ctrl=scope.rd;ctrl.isRelatedOpened=!1,$(".arrow_box").each(function(){$(this).on("shown.bs.collapse",function(){ctrl.SetCollapsed($(this))})}),$("body").on("click",function(e){if(0<ctrl.BoxOpened.length)for(var i=0;i<=ctrl.BoxOpened.length;i++)$(ctrl.BoxOpened[i]).collapse("hide"),ctrl.BoxOpened.splice(i,1)})}}}),mi.directive("mayaItemActions",function(mGeneralSetting){return{restirct:"EA",scope:{isfavorite:"=",savetofavorites:"&",openMailDialog:"&",shareTwitter:"&",shareWhatsapp:"&",openReportFile:"&",report:"=",isEng:"&"},templateUrl:"src/reports/directives/views/item-actions-buttons.html",require:"^?mayaReportActions",link:function(scope,element,attrs,reportActionsCtrl){scope.IsTickOpen=!1,scope.IsShareBoxOpen=!1,scope.showrptFiles=!1,element.find(".exportButton .arrow_box").css("min-width",40*scope.report.Files.length+"px"),reportActionsCtrl.findFavorite(scope.report.RptCode)?scope.isfavorite=!0:scope.isfavorite=!1,scope.isEng=mGeneralSetting.Lang===mGeneralSetting.LangStates.English;for(var i=0;i<scope.report.Files.length;i++)1!=scope.report.Files[i].Type&&(scope.showrptFiles=!0);$(".arrow_box").each(function(){$(this).on("shown.bs.collapse",function(){reportActionsCtrl.SetCollapsed($(this))})}),reportActionsCtrl.addTickBox(scope)}}}),mi.directive("mayaReportFeed",function($rootScope,$analytics){function ReportFeedCtrl(localStorageService,_,$location,FavoritesService,$uibModal,modalService,mGeneralSetting,Post,postingMayaService,utility,reportProxy){this._favService=FavoritesService,this._lstorage=localStorageService,this._ReportProxy=reportProxy,this.IsFavorite=!1,this.$location=$location,this.utility=utility,this._=_,this._modalService=modalService,this._$uibModal=$uibModal,this._postingMayaService=postingMayaService,this._mModalType=mGeneralSetting.ModalType,this._Post=Post,this._mGeneralSetting=mGeneralSetting}return ReportFeedCtrl.prototype.openSendMailDialog=function(report){var reportUrl=window.location.protocol+"//"+window.location.host,subject=new Array(null!=report.FormalCompanyData.CompanyId?report.FormalCompanyData.CompanyName:report.Companies[0].CompanyEntity.CompanyName+"...",report.Subject,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSiteTitle),body=report.Subject+"/n/n"+reportUrl+"/"+globalTrans[this._mGeneralSetting.Lang].mayaStrings.ReportPageURL+"/"+report.RptCode;escape(subject.join("-")),escape(body);this._modalService.open(this._mModalType.SendMail,{RptCd:report.RptCode}).then(function(){console.log("resolve")},function(){console.log("reject")})},ReportFeedCtrl.prototype.openReportFile=function(rptCd,type,index){if(7!=type)this._mGeneralSetting.Lang===this._mGeneralSetting.LangStates.English?this.$location.path("en/reports/details/"+rptCd+"/"+type+"/"+index):this.$location.path("reports/details/"+rptCd+"/"+type+"/"+index);else{this.rptCd;var proxy=this._ReportProxy,utility=this.utility;proxy.downloadTextFileContent(rptCd,"XLS",index).then(function(data){utility.download(data,rptCd+"_"+index,"XLS")}.bind(this))}},ReportFeedCtrl.prototype.shareTwitter=function(report){var post=new this._Post(report);this._postingMayaService.shareTwitter(post)},ReportFeedCtrl.prototype.shareWhatsapp=function(report,isMobile){var post=new this._Post(report,isMobile);this._postingMayaService.shareWhatsapp(post)},ReportFeedCtrl.prototype.SaveToFavorites=function(id){this._favService.SaveToFavorites(id).then(function(isFav){this.IsFavorite=isFav}.bind(this))},ReportFeedCtrl.prototype.showTradeData=function(entityId,type){if(0!=entityId){this._$uibModal.open({templateUrl:"src/company/directives/views/trade-data.html",controller:"tradeDataCtrl",controllerAs:"trd",windowClass:"TradingDialogSize",resolve:{id:function(){return entityId},type:function(){return type}.bind(this)}}).result.then(function(){$analytics.pageTrack("/tradedata/"+entityId)},function(){})}},{require:"^?mayaReportActions",controller:ReportFeedCtrl,controllerAs:"rfc",bindToController:!0,link:function(scope,element,attr,reportActionsCtrl){}}}),mi.directive("mayaReports",function(dataStorage){return{restirct:"EA",scope:{currentreport:"=",reports:"=",viewType:"=",relatedReports:"=",reportsTitle:"=",openrelatedreport:"&",isrelatedexists:"&",filter:"&onFilter",term:"="},controller:function(){Object.defineProperty(this,"PageInfo",{get:function(){return dataStorage.reports.pageInfo}})},bindToController:!0,controllerAs:"vm",templateUrl:"src/reports/directives/views/report.html",link:function(scope,element,attr){var ctrl=scope.vm;scope.$on("queryBroadcast",function(){console.log("Boradcast fired!!"),ctrl.queryby()})}}}),mi.directive("mayaReportComponent",function(){return{templateUrl:"src/reports/directives/views/report-component.html",link:function(scope,element,attr){}}}),mi.directive("inCaseInternetExplorerRenderVisitedElement",function(browserDetectionService){return browserDetectionService.isIE10Up?{replace:!0,template:'<when-link-pressed-write-local-storage affected-by="self">                                    </when-link-pressed-write-local-storage>',restrict:"E"}:{replace:!0,template:"",restrict:"E"}}),mi.directive("mayaSearchFilter",function(reportProxy,$window,$log,$filter,$uibModal,_,dataStorage,filterService,mayaWrapperService,mGeneralSetting,searchProxy,filteredResultPopUpService){return{restirct:"EAC",require:["^?ngModel","^?sharedWrapper"],scope:{viewPage:"@",search:"@",pressSearch:"=",filter:"&onChange",items:"=",filteritem:"=",branches:"="},controllerAs:"fd",templateUrl:"src/reports/directives/views/search-filter.html",link:function(scope,element,attr,controllers){scope.branchGrpByLang=mGeneralSetting.Lang===mGeneralSetting.LangStates.English?"NameEng":"NameHeb";var Ids=[];scope.handleSelection=function(selectedItem){if(selectedItem){if(Ids&&0<Ids.length&&-1<Ids.indexOf(selectedItem.EventId)){var index=Ids.indexOf(selectedItem.EventId);Ids.splice(index,1)}else Ids.push(selectedItem.EventId);this.$parent.filteritem.EventIds=Ids,this.$parent.filteritem.ReturnEvents=!1,this.$parent.filter()}},scope.handleIndicesFilter=function(selectedItem){var elem=angular.element(selectedItem.target),indiceId=selectedItem.target.getAttribute("value");elem.parents("div#indicesFilterButton").find("a.active").removeClass("active"),elem.addClass("active"),this.filteritem.ReturnEvents=!0,this.filteritem.IndicesId=indiceId,this.filteritem.EventIds=null,this.filter()},scope.handleTimeFilter=function(selectedItem){var elem=angular.element(selectedItem.target),timeId=selectedItem.target.getAttribute("value");elem.parents("div#timeFilterButton").find("a.active").removeClass("active"),elem.addClass("active"),this.filteritem.ReturnEvents=!0,this.filteritem.TimeId=timeId,this.filteritem.EventIds=null,this.filter()},scope.handleAllSelection=function(element,eventCat){this.$parent.filteritem.ReturnEvents=!1;var selectedIds=eventCat.EventCategory.map(function(x){return x.EventId}),elem=angular.element(element.target);if(elem[0].checked)if(elem.parents("div.filterGroup").find("li input:checkbox:not(:checked)").attr("checked",!0),0===Ids.length)Ids=Ids.concat(selectedIds);else for(var i=Ids.length-1;0<=i;i--)for(var j=0;j<selectedIds.length;j++)Ids[i]!==selectedIds[j]&&Ids.push(selectedIds[j]);else{for(i=Ids.length-1;0<=i;i--)for(j=0;j<selectedIds.length;j++)Ids[i]===selectedIds[j]&&Ids.splice(i,1);elem.parents("div.filterGroup").find("li input:checkbox(:checked)").attr("checked",!1)}this.$parent.filteritem.EventIds=Ids,this.$parent.filter()},scope.handleBranchSelection=function(selectedBranch){this.filteritem.BranchId=selectedBranch?selectedBranch.BranchId:null,this.filteritem.ReturnEvents=!0,this.filteritem.EventIds=null,this.filter()}}}}),mi.directive("visitedLinks",function(visitedLinksHelper,browserDetectionService){return{restrict:"A",link:function(scope,elem,attr){browserDetectionService.isIE10Up&&(elem=elem[0],visitedLinksHelper.valueExist(attr.itemId)&&(elem.style.color="#609"),elem.addEventListener("click",function(){visitedLinksHelper.add(attr.itemId)}))}}})}(angular);
!function(angular){"use strict";var mi=angular.module("etf",[]);function ETFDetailsCtrl($scope,$routeParams,$location,jsonService,BaseCtrl,dataStorage,ngConfigSetting,etfProxy,fundProxy,utility,MetaTagService,TitleService,ETF,HistoryFilterFactory,blockUI,mGeneralSetting,sharedScrollFactory,mayauthService){this._ETF=ETF,this.addResults=!1,this._ETFProxy=etfProxy,this._FundProxy=fundProxy,this._$location=$location,this._dataStorage=dataStorage,this._jsonService=jsonService,this._ngConfigSetting=ngConfigSetting,this.historyView="endday",this.tabPage=this.setTabByParam($routeParams.view),this._MetaTagService=MetaTagService,this._TitleService=TitleService,this._blockUI=blockUI,this.exportKeyArgs=[$routeParams.id],this.sortType="TradeDate",this.sortReverse=!0,this.fundId=$routeParams.id,this.pageSize=mGeneralSetting.ReportPageSize,this.page=1,this.etfHistory={},this.etfDetails={},this._HistoryFilterFactory=HistoryFilterFactory,this.historyTblColDef=[],this.graphButtonConfig=["chartsystem"],this.sharedScrollFactory=sharedScrollFactory,this.hasDeals=!1,this.hasTrade=!1,this._utility=utility,BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype),this._mGeneralSetting=mGeneralSetting,this.mayauthService=mayauthService;var self=this;Object.defineProperty(this,"PageInfo",{get:function(){return dataStorage.reports.pageInfo}}),Object.defineProperty(this,"isLoggedIn",{get:function(){return mayauthService.isAuthenticated()}}),etfProxy.getTradeData(this.fundId).then(function(data){(self.TradeData=data)&&(self.changeDirection=self.checkSign(self.TradeData.PercentageChange))}),$scope.$on("$routeUpdate",function(){var param=$location.search();if(param&&param.q)this.collectURLParamters(param.q),this.tabPage=param.view,this.historyView=param.type,this.filter();else if(this.tabPage=param.view||"details",this.historyView=param.type||"endday","history"==this.tabPage){$("html,body").animate({scrollTop:0},"slow");var res=dataStorage.etfs.getById(this.fundId);res?"endday"===this.historyView?(this.sortType="TradeDate",this.etfHistory=angular.copy(res.etfHistory),this.totalPage=res.etfHistory.Total,this.historyTemplate="etf-endday.html",this.historyTableHeader=globalTrans[this._mGeneralSetting.Lang].mayaStrings.EndDayHistoryTitle,this.historyTblColDef=this._jsonService.getTemplateByTemplateName("EtfEndDayHistoryTpl"),this.filterItems.DateFrom=new Date(res.etfHistory.StartDate),this.filterItems.DateTo=new Date(res.etfHistory.EndDate),this.filterItems=this._HistoryFilterFactory.filterParams||this.filterItems):(this.sortType="DealTime",this.etfHistory.Table=angular.copy(res.shareDealsHistory.Table),this.totalPage=res.shareDealsHistory.Total,this.validDate=res.shareDealsHistory.ValidDate,this.historyTemplate="etf-inday.html",this.historyTableHeader=globalTrans[this._mGeneralSetting.Lang].mayaStrings.EndDayHistoryTitle,this.historyTblColDef=this._jsonService.getTemplateByTemplateName("EtfInDayHistoryTpl")):this.filter()}}.bind(this))}function ETFEntityFactory(proxy,$q,storage){var initQueryPromise=[];function ETF(id){this.id=id,this.etfDetails={},this.etfHistory={},this.shareDealsHistory={},this.allETFs={}}return ETF.prototype.getETFDetails=function(){initQueryPromise.push(proxy.getETFDetails(this.id).then(function(data){this.etfDetails=data}.bind(this)))},ETF.prototype.getShareDealsHistory=function(param){param=param?JSON.parse(param):{Period:9,Page:1},angular.extend(param,{FundId:this.id}),initQueryPromise.push(proxy.getShareDealsHistory(param).then(function(data){this.shareDealsHistory=data}.bind(this)))},ETF.prototype.getEndDayHistory=function(param){param=param?JSON.parse(param):{Period:9,Page:1},angular.extend(param,{FundId:this.id}),initQueryPromise.push(proxy.getEndDayHistory(param).then(function(data){this.etfHistory=data}.bind(this)))},ETF.prototype.getAll=function(){proxy.all().then(function(data){this.allETFs=data}.bind(this))},ETF.prototype.load=function(param){var defer=$q.defer(),etf=storage.etfs.getById(this.id);return initQueryPromise.length=0,null==etf?(this.getShareDealsHistory(param),this.getEndDayHistory(param),this.getETFDetails(),$q.all(initQueryPromise).then(function(c){angular.extend(this,{TimeStamp:new Date}),storage.etfs.add(this),defer.resolve(this)}.bind(this))):(angular.extend(this,etf),defer.resolve(this)),defer.promise},ETF.prototype.loadAll=function(){return proxy.all().then(function(data){return this.allETFs=data,storage.etfs.add(this),this}.bind(this))},ETF}mi.controller("ETFDetailsCtrl",ETFDetailsCtrl),ETFDetailsCtrl.prototype.init=function(){this._etfProxy;var id=this.fundId,dataStorage=this._dataStorage,d=(this._ETF,new Date),param=this._$location.search();param.type&&(this.historyView=param.type),param&&param.q?(this.collectURLParamters(param.q),param=param.q):(param=null,this.filterItems={Period:9,DateFrom:d.addMonths(-1),DateTo:new Date,Page:1}),this.assetsTblColDef=this._jsonService.getTemplateByTemplateName("ETFAssetsTpl"),dataStorage.etfs.add(id).load(param).then(function(etf){"inday"===this.historyView?(this.etfHistory=angular.copy(etf.shareDealsHistory),this.totalPage=this.etfHistory.Total,this.historyTemplate="etf-inday.html",this.historyTableHeader=globalTrans[this._mGeneralSetting.Lang].mayaStrings.EtfInDayHistoryTitle,this.historyTblColDef=this._jsonService.getTemplateByTemplateName("EtfInDayHistoryTpl")):(this.etfHistory=angular.copy(etf.etfHistory),this.totalPage=this.etfHistory.Total,this.validDate=this.etfHistory.ValidDate,this.historyTemplate="etf-endday.html",this.historyTableHeader=globalTrans[this._mGeneralSetting.Lang].mayaStrings.EndDayHistoryTitle,this.historyTblColDef=this._jsonService.getTemplateByTemplateName("EtfEndDayHistoryTpl"),this.filterItems.DateFrom=new Date(etf.etfHistory.StartDate),this.filterItems.DateTo=new Date(etf.etfHistory.EndDate),this._HistoryFilterFactory.setFilterParams(this.filterItems)),this.etf=etf,this.etfDetails=etf.etfDetails.ETFDetails.FundDetails,this.logoURL=this._utility.getLogo(this.etfDetails.ManagerId),0<this.etfDetails.AssetCompostion.Assets.length&&(this.remarkTitle="נכון ל-"+this._utility.formatDate(new Date(this.etfDetails.AssetCompostion.DateValid))+", סך הכול נכסים: "+this.etfDetails.AssetCompostion.Assets.length),this._TitleService.setTitle(this.etfDetails.FundLongName,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitleShort),this._MetaTagService.setMetaTag({title:document.title,description:etf.etfDetails.MetaTag.Description,keywords:etf.etfDetails.MetaTag.Keywords}),this.setBreadCrumbs(this.etf),this.checkDeleted()}.bind(this))},ETFDetailsCtrl.prototype.checkPaging=function(data){if(this.addResults)for(var i=0;i<data.Table.length;i++)this.etfHistory.Table.push(data.Table[i]);else this.etfHistory=angular.copy(data)},ETFDetailsCtrl.prototype.filter=function(){var proxy=this._ETFProxy,params=angular.extend({FundId:this.fundId},this.filterItems);"history"===this.tabPage&&(this._blockUI.start(),"endday"===this.historyView?proxy.getEndDayHistory(params).then(function(data){this.checkPaging(data),this.totalPage=data.Total,this.historyTemplate="etf-endday.html",this.historyTableHeader=globalTrans[this._mGeneralSetting.Lang].mayaStrings.EndDayHistoryTitle,this.historyTblColDef=this._jsonService.getTemplateByTemplateName("EtfEndDayHistoryTpl"),this._HistoryFilterFactory.setFilterParams(this.filterItems),this._blockUI.stop()}.bind(this),function(err){this._blockUI.stop()}.bind(this)):proxy.getShareDealsHistory().then(function(data){this.checkPaging(data),this.totalPage=data.Total,this.validDate=data.ValidDate,this._blockUI.stop(),this.historyTemplate="etf-inday.html",this.historyTableHeader=globalTrans[this._mGeneralSetting.Lang].mayaStrings.InDayHistoryTitle,this.historyTblColDef=this._jsonService.getTemplateByTemplateName("EtfInDayHistoryTpl")}.bind(this),function(err){this._blockUI.stop()}.bind(this)))},ETFDetailsCtrl.prototype.getRandomColor=function(){for(var letters="0123456789ABCDEF".split(""),color="#",i=0;i<6;i++)color+=letters[Math.floor(16*Math.random())];return color},ETFDetailsCtrl.prototype.onFilterChange=function(page,sortBy,sort){this.filterItems.Page=page||1,this.saveSearchLocation()},ETFDetailsCtrl.prototype.saveSearchLocation=function(){var params=this.filterItems,p={};for(var pi in params)null!=params[pi]&&null!=params[pi]&&!1!==params[pi]&&("object"==typeof params[pi]&&0==Object.keys(params[pi]).length&&!params[pi]instanceof Date?p[pi]=params[pi].toDateString():p[pi]=params[pi]);p=JSON.stringify(p),this._$location.search("q",p)},ETFDetailsCtrl.prototype.changeWithSign=function(change){var num=parseFloat(change),abs_ch=Math.abs(change);return num<0?abs_ch+"% -":0<num?abs_ch+"% +":abs_ch+"% "},ETFDetailsCtrl.prototype.setTabByParam=function(view){var tabs="events,details,reports,assets,history".split(",");return view&&-1!=tabs.indexOf(view)?view:"details"},ETFDetailsCtrl.prototype.changeTabTo=function(view){this._$location.$$search.q&&delete this._$location.$$search.q,this._$location.search("view",view)},ETFDetailsCtrl.prototype.checkDeleted=function(){for(var i=0;i<this.etfDetails.FundIndicators.length;i++){if("MerLiqStatNm"==this.etfDetails.FundIndicators[i].Key&&1==this.etfDetails.FundIndicators[i].Value){this.statusDesc="("+this.etfDetails.FundIndicators[i].Desc+")";break}if("Deleted"==this.etfDetails.FundIndicators[i].Key&&1==this.etfDetails.FundIndicators[i].Value){this.statusDesc="("+this.etfDetails.FundIndicators[i].Desc+")";break}if("IsCandidate"==this.etfDetails.FundIndicators[i].Key&&1==this.etfDetails.FundIndicators[i].Value){this.statusDesc="("+this.etfDetails.FundIndicators[i].Desc+")";break}}},ETFDetailsCtrl.prototype.loadMore=function(){this.addResults=!0,this.filterItems.Page++,this.onFilterChange(this.filterItems.Page)},ETFDetailsCtrl.prototype.onPaging=function(page){this.sharedScrollFactory.invoke()},ETFDetailsCtrl.prototype.collectURLParamters=function(param){this.filterItems=param?JSON.parse(param):{},this.filterItems.Page=this.filterItems.Page||1,this.filterItems.DateFrom?this.filterItems.DateFrom=new Date(this.filterItems.DateFrom):this.filterItems.DateFrom=(new Date).addMonths(-1),this.filterItems.DateTo?this.filterItems.DateTo=new Date(this.filterItems.DateTo):this.filterItems.DateTo=new Date},ETFDetailsCtrl.prototype.changeHistoryTab=function(view){this.historyView=view,this.addResults=!1},ETFDetailsCtrl.prototype.checkSign=function(change){if(change){var num=parseFloat(change);return num<0?-1:0<num?1:0}},ETFDetailsCtrl.prototype.setBreadCrumbs=function(data){this.BaseCtrl.updateBreadcrumbs(2,{id:2,label:data.etfDetails.ETFDetails.FundDetails.FundLongName,url:""})},ETFDetailsCtrl.prototype.setTitle=function(view){this._TitleService.setTitle(this.etfDetails.FundLongName,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitleShort)},ETFDetailsCtrl.prototype.setDealFlag=function(disp){this.hasDeals=disp},ETFDetailsCtrl.prototype.setTradeFlag=function(disp){this.hasTrade=disp},ETFDetailsCtrl.prototype.openMonthlyReport=function(){var proxy=this._FundProxy,fundId=this.fundId,utility=this._utility,monthlyReportCode=this.etfDetails.MonthlyReportCode;proxy.getFileFundMonthlyReport(fundId,monthlyReportCode).then(function(data){utility.download(data,fundId,"CSV")})},ETFDetailsCtrl.prototype.pagingTo=function(page,sortType,sortReverse){this.page=page},ETFDetailsCtrl.prototype.addToPersonalFolder=function(){window.open(this.etfDetails.PersonalFolderLink)},ETFDetailsCtrl.prototype.login=function(isSignup){this.mayauthService.login(isSignup)},ETFDetailsCtrl.prototype.getPage=function(){return"etf"},mi.directive("setHrefEtf",function(ngConfigSetting,$routeParams){return{restrict:"A",link:function(scope,elem,attr){var href=("/"==ngConfigSetting.virDir?"":ngConfigSetting.virDir)+"/etf/"+$routeParams.id+"?view="+attr.setHrefEtf;elem.attr("href",href)}}}),mi.factory("ETF",ETFEntityFactory),ETFEntityFactory.$inject=["etfProxy","$q","dataStorage"],mi.directive("etfDescription",function(){return{template:"{{etf.etf.ETFDetails.Description}}."}}),mi.directive("etfBranch",function(){return{template:'<div class="branchInTaseTitle">ענף בבורסה:</div><div class="branchInTaseValue"> {{etf.etf.ETFDetails.SuperBranch}} - {{etf.etf.ETFDetails.Branch}} - {{etf.etf.ETFDetails.SubBranch}}</div>'}}),mi.directive("etfIndices",function(){return{restrict:"EA",scope:!0,templateUrl:"src/etf/etfIndices.html",controller:function($scope){console.log(0<$scope.etf.etf.IndicesList.length)},bindToController:!0,controllerAs:"eti"}}),mi.directive("etfManagers",function(){return{template:'   מנהל הקרן:  </div><span class="value"> &nbsp;&nbsp;&nbsp;{{etf.etf.ETFDetails.FundDetails.TrusteeLongName}}</span></br>  נאמן הקרן: <span class="value">&nbsp;&nbsp;&nbsp; {{etf.etf.ETFDetails.FundDetails.ManagerLongName}}</br>'}}),mi.directive("scrollToPagePart",function(){return{restrict:"EA",link:function(scope,element,attr){element.bind("click",function(event){var location=angular.element(document.getElementById(attr.scrollToPagePart)),pos=location.offset().top;991<$(window).width()&&(pos=155<$(document).scrollTop().valueOf()?location.offset().top-150:location.offset().top-300);$("html,body").animate({scrollTop:pos},"slow")})}}}),mi.directive("dealsTickerWrapper",function(securityProxy,$injector,mGeneralSetting,uibPopUpService,$routeParams){return{templateUrl:"src/etf/directives/views/trade-ticker-wrapper.html",restrict:"EA",controller:function($scope){this.$routeParams=$routeParams,this.maxTickerLength=5,this.tickerItems=[],this.tickerHeader=globalTrans[mGeneralSetting.Lang].companyDetails.tradingData,this.tickerFooter="פירוט עסקאות ליום מסחר >",this.tickerFooterLink=$scope.page?$scope.page+"/"+$routeParams.id+"?view=history&type=inday":null,this.setTitle=$scope.$parent.setTitle;var securityId=$scope.securityId&&0<$scope.securityId?$scope.securityId:$routeParams.id;this.tickerType="inday",securityProxy.getHistoryLastRates(securityId).then(function(data){data&&0<data.TickerItem.length?($scope.onLoadAction({disp:!0}),this.tickerItems=data.TickerItem,this.title=data.Title,this.tickerItems.forEach(function(item){0<item.Change?item.changeDirection=1:item.Change<0?item.changeDirection=-1:item.changeDirection=0})):$scope.onLoadAction({disp:!1})}.bind(this))},controllerAs:"ttw",scope:{onLoadAction:"&",page:"@",securityId:"="},link:function(scope,elem,attr){}}}),mi.directive("tradeTickerWrapper",function(securityProxy,$injector,mGeneralSetting,uibPopUpService,$routeParams){return{templateUrl:"src/etf/directives/views/trade-ticker-wrapper.html",restrict:"EA",controller:function($scope){this.$routeParams=$routeParams,this.tickerItems=[],this.maxTickerLength=5,this.tickerHeader=globalTrans[mGeneralSetting.Lang].companyDetails.tradingDataHistory,this.tickerFooter="נתונים היסטוריים >",this.tickerFooterLink=$scope.page?$scope.page+"/"+$routeParams.id+"?view=history&type=endday":null,this.setTitle=$scope.$parent.setTitle,this.tickerType="endday";var securityId=$scope.securityId&&0<$scope.securityId?$scope.securityId:$routeParams.id;securityProxy.getHistorytop5days(securityId).then(function(data){data&&0<data.TickerItem.length?($scope.onLoadAction({disp:!0}),this.tickerItems=data.TickerItem,this.title=data.Title,this.tickerItems.forEach(function(item){0<item.Change?item.changeDirection=1:item.Change<0?item.changeDirection=-1:item.changeDirection=0})):$scope.onLoadAction({disp:!1})}.bind(this))},controllerAs:"ttw",scope:{onLoadAction:"&",page:"@",securityId:"="},link:function(scope,elem,attr){scope.ttw}}}),mi.run(function(ETF,dataStorage){dataStorage.etfs={data:[],add:function(id){return dataStorage.add.call(this,id,ETF)},find:function(predicat){return dataStorage.find.call(this,predicat,ETF)},isExists:function(id){return this.data.forEach(function(etf){if(etf.id==id)return!0}),!1},getById:function(id){var res;return this.data.forEach(function(etf){etf.id==id&&0<Object.keys(etf.etfDetails).length&&(res=etf)}),res}}}),mi.factory("etfProxy",function(ngConfigSetting,$http,$routeParams,$q,$httpParamSerializerJQLike,HistoryFilterFactory,$log,mMimeTypeSettings){function etfProxy(){}return etfProxy.prototype.all=function(){var defer=$q.defer();return $log.debug("etfProxy.all()"),$http.get(ngConfigSetting.api+"etf").then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},etfProxy.prototype.getETFDetails=function(){return $http.get(ngConfigSetting.api+"etf/details?fundId="+$routeParams.id).then(function(data){return data.data})},etfProxy.prototype.getShareDealsHistory=function(){return $http.get(ngConfigSetting.api+"etf/sharedealshistory?fundId="+$routeParams.id).then(function(data){return data.data})},etfProxy.prototype.getInDayHistoryDetails=function(id,fileType){var defer=$q.defer();return $log.debug("etfProxy.getInDayHistoryDetails("+fileType+","+$routeParams.id),$http({method:"POST",url:ngConfigSetting.api+"download/indayhistory?fundId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},etfProxy.prototype.getEndDayHistoryDetails=function(id,fileType){var params=HistoryFilterFactory.filterParams,defer=$q.defer();return params=angular.extend({fundId:$routeParams.id},params),$log.debug("etfProxy.getEndDayHistoryDetails("+fileType+")"),$http({method:"POST",url:ngConfigSetting.api+"download/enddayhistory",data:$httpParamSerializerJQLike(params),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},etfProxy.prototype.getEndDayHistory=function(params){var defer=$q.defer();return $http({method:"POST",url:ngConfigSetting.api+"etf/history",data:$httpParamSerializerJQLike(params),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){defer.reject(status)}),defer.promise},etfProxy.prototype.getTradeData=function(id){return $http.get(ngConfigSetting.api+"etf/tradedata?fundId="+id).then(function(data){return data.data})},new etfProxy})}(angular);
!function(angular){"use strict";var mi=angular.module("hedgefund",[]);function HedgeFundDetailsCtrl($scope,$location,hedgefundProxy,$routeParams,dataStorage,HedgeFund,TitleService,MetaTagService,ngConfigSetting,utility,jsonService,BaseCtrl,HistoryFilterFactory,blockUI,mGeneralSetting,$filter,mayauthService){this._HedgeFund=HedgeFund,this.blockUI=blockUI,this._HedgeFundProxy=hedgefundProxy,this._$location=$location,this._HistoryFilterFactory=HistoryFilterFactory,this._dataStorage=dataStorage,this._utility=utility,this._TitleService=TitleService,this._MetaTagService=MetaTagService,this._jsonService=jsonService,this._ngConfigSetting=ngConfigSetting,this.fundId=$routeParams.id,this.exportKeyArgs=[$routeParams.id],this.pageSize=mGeneralSetting.ReportPageSize,this._mGeneralSetting=mGeneralSetting,this.page=1,this.showAll=!1,this.fund="",this.hedgeFundHistory={},this.isShow=!1,this.isGetFund=!1,this.tabPage=this.SetTabByParam($routeParams.view),this.sortType="FundPercentage",this.sortReverse=!0,this.pieData=[],this.pieLabels=[],this.piecolorArray=["#f78e1e","#017fad","#0a3f76","#145702","#006182","#666666","#1d7e02","#222222","#08315c"],this.mayauthService=mayauthService,Object.defineProperty(this,"filterParams",{get:function(){return HistoryFilterFactory.filterParams}}),Object.defineProperty(this,"isLoggedIn",{get:function(){return mayauthService.isAuthenticated()}}),this.pieOptions={tooltipTemplate:"<% if (value>0)%><%= value %>%"},this.orderBy=$filter("orderBy"),this.startFrom=$filter("startFrom"),this.limitTo=$filter("limitTo"),this.legendLink=location.protocol+"//"+this._ngConfigSetting.mayaFilesBaseUrl+"/docs/LegendOfFund.xls",BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype),Object.defineProperty(this,"PageInfo",{get:function(){return dataStorage.reports.pageInfo}}),$scope.$on("$routeUpdate",function(){var param=$location.search();param&&param.q&&"reports"!==param.view?(blockUI.start(),this.collectURLParamters(param.q),this.tabPage=param.view,this.filter()):(this.tabPage=param.view||"details","history"===this.tabPage&&(dataStorage.hedgefunds.getById(this.fundId)?(this.hedgeFundHistory.Table=[],this.totalPage=0,this.filterItems=this._HistoryFilterFactory.filterParams||this.filterItems):this.filter()))}.bind(this))}function HedgeFundEntityFactory(proxy,$q,storage){var initQueryPromise=[];function HedgeFund(id){this.id=id,this.fundDetails={},this.hedgeFundHistory={},this.allFunds={}}return HedgeFund.prototype.getFundDetails=function(){initQueryPromise.push(proxy.getFundDetails(this.id).then(function(data){this.fundDetails=data}.bind(this)))},HedgeFund.prototype.getFundHistory=function(param){param=param?JSON.parse(param):{Period:9,Page:1},angular.extend(param,{FundId:this.id}),initQueryPromise.push(proxy.getFundHistory(param).then(function(data){this.hedgeFundHistory=data}.bind(this)))},HedgeFund.prototype.getAll=function(){proxy.all().then(function(data){this.allFunds=data}.bind(this))},HedgeFund.prototype.load=function(param){var defer=$q.defer(),fund=storage.funds.getById(this.id);return null==fund?(this.getFundHistory(param),this.getFundDetails(),$q.all(initQueryPromise).then(function(c){angular.extend(this,{TimeStamp:new Date}),storage.funds.add(this),defer.resolve(this)}.bind(this))):(angular.extend(this,fund),defer.resolve(this)),defer.promise},HedgeFund.prototype.loadAll=function(){return proxy.all().then(function(data){return this.allFunds=data,storage.funds.add(this),this}.bind(this))},HedgeFund}mi.directive("setHrefHedgeFund",function(ngConfigSetting,$routeParams){return{restrict:"A",link:function(scope,elem,attr){var href=("/"===ngConfigSetting.virDir?"":ngConfigSetting.virDir)+"/hedgefund/"+$routeParams.id+"?view="+attr.setHrefHedgeFund;elem.attr("href",href)}}}),mi.controller("HedgeFundDetailsCtrl",HedgeFundDetailsCtrl),HedgeFundDetailsCtrl.prototype.collectURLParamters=function(param){this.filterItems=param?JSON.parse(param):{},this.filterItems.Page=this.filterItems.Page||1,this.filterItems.DateFrom?this.filterItems.DateFrom=new Date(this.filterItems.DateFrom):this.filterItems.DateFrom=(new Date).addMonths(-1),this.filterItems.DateTo?this.filterItems.DateTo=new Date(this.filterItems.DateTo):this.filterItems.DateTo=new Date},HedgeFundDetailsCtrl.prototype.getHedgeFundDetails=function(){this._HedgeFundProxy;var id=this.fundId,dataStorage=this._dataStorage,d=(this._HedgeFund,new Date);this.hedgeFundSecurityRedemptionDef=this._jsonService.getTemplateByTemplateName("HedgeFundSecurityRedemptionTpl"),this.historyTblColDef=this._jsonService.getTemplateByTemplateName("HedgeFundHistoryTpl"),this.assetsTblColDef=this._jsonService.getTemplateByTemplateName("FundAssetsTpl");var param=this._$location.search();param&&param.q?(this.collectURLParamters(param.q),param=param.q):(param=null,this.filterItems={DateFrom:d.addMonths(-1),DateTo:new Date,Page:1}),dataStorage.hedgefunds.add(id).load(param).then(function(fund){this.logoURL=this._utility.getLogo(fund.fundDetails.ManagerId),this.hedgeFundHistory=angular.copy(fund.hedgeFundHistory),this.hedgeFundHistory.Table=[],this.totalPage=0,this.srTotalPage=fund.fundDetails.SecurityRedemptionData.length,this.filterItems.SecurityCd=null,this.filterItems.DateFrom=new Date(fund.hedgeFundHistory.StartDate),this.filterItems.DateTo=new Date(fund.hedgeFundHistory.EndDate),this._HistoryFilterFactory.setFilterParams(this.filterItems),this.fund=fund.fundDetails,this._TitleService.setTitle(this.fund.FundLongName,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitleShort),this._MetaTagService.setMetaTag({title:document.title,description:fund.fundDetails.MetaTag.Description,keywords:fund.fundDetails.MetaTag.Keywords}),this.setBreadCrumbs(),this.pieDataInit(),this.checkDeleted(),0<fund.fundDetails.AssetCompostion.Assets.length&&(this.remarkTitle="נכון ל-"+this._utility.formatDate(new Date(fund.fundDetails.AssetCompostion.DateValid))+", סך הכול נכסים: "+fund.fundDetails.AssetCompostion.Assets.length)}.bind(this))},HedgeFundDetailsCtrl.prototype.changeTabTo=function(view){this._$location.$$search.q&&delete this._$location.$$search.q,this._$location.search("view",view)},HedgeFundDetailsCtrl.prototype.onFilterChange=function(page,sortBy,sort){this.filterItems.Page=page||1,this.saveSearchLocation()},HedgeFundDetailsCtrl.prototype.saveSearchLocation=function(){var params=this.filterItems,p={};for(var pi in params)void 0!==params[pi]&&null!=params[pi]&&!1!==params[pi]&&("object"==typeof params[pi]&&0==Object.keys(params[pi]).length&&!params[pi]instanceof Date?p[pi]=params[pi].toDateString():p[pi]=params[pi]);p=JSON.stringify(p),this._$location.search("q",p)},HedgeFundDetailsCtrl.prototype.filter=function(){var proxy=this._HedgeFundProxy,params=angular.extend({FundId:this.fundId},this.filterItems);proxy.getFundHistory(params).then(function(data){this.setData(data.Table),this._HistoryFilterFactory.setFilterParams(this.filterItems),this.totalPage=data.Total,this.blockUI.stop()}.bind(this),function(err){this.blockUI.stop()})},HedgeFundDetailsCtrl.prototype.setData=function(data){if(this.addResults)for(var len=data.length,i=0;i<len;i++)this.hedgeFundHistory.Table.push(data[i]);else this.hedgeFundHistory.Table=angular.copy(data);this.addResults=!1},HedgeFundDetailsCtrl.prototype.setTitle=function(view){this._TitleService.setTitle(this.fund.FundLongName,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitleShort)},HedgeFundDetailsCtrl.prototype.SetTabByParam=function(view){var tabs="details,reports,assets,history".split(",");return view&&-1!=tabs.indexOf(view)?view:"details"},HedgeFundDetailsCtrl.prototype.checkDeleted=function(){for(var i=0;i<this.fund.FundIndicators.length;i++){if("MerLiqStatNm"==this.fund.FundIndicators[i].Key&&1==this.fund.FundIndicators[i].Value){this.statusDesc="("+this.fund.FundIndicators[i].Desc+")";break}if("Deleted"==this.fund.FundIndicators[i].Key&&1==this.fund.FundIndicators[i].Value){this.statusDesc="("+this.fund.FundIndicators[i].Desc+")";break}}},HedgeFundDetailsCtrl.prototype.checkSign=function(val){if(val){var num=parseFloat(val);return num<0?-1:0<num?1:0}},HedgeFundDetailsCtrl.prototype.pieDataInit=function(){for(var assetVal,lCount=0,i=0;i<this.fund.AssetRisk.length;i++)0<(assetVal=this.fund.AssetRisk[i].WeightPercentage)&&(this.pieData.push(assetVal),this.pieLabels.push(this.fund.AssetRisk[i].AssetName),this.piecolorArray.length<lCount&&this.piecolorArray.push(this.getRandomColor()),this.fund.AssetRisk[i].color=this.piecolorArray[lCount],lCount+=1)},HedgeFundDetailsCtrl.prototype.getRandomColor=function(){for(var letters="0123456789ABCDEF".split(""),color="#",i=0;i<6;i++)color+=letters[Math.floor(16*Math.random())];return color},HedgeFundDetailsCtrl.prototype.openMonthlyReport=function(){var proxy=this._HedgeFundProxy,fundId=this.fundId,utility=this._utility,monthlyReportCode=this.fund.MonthlyReportCode;proxy.getFileFundMonthlyReport(fundId,monthlyReportCode).then(function(data){utility.download(data,fundId,"CSV")})},HedgeFundDetailsCtrl.prototype.setBreadCrumbs=function(){this.BaseCtrl.pushBreadcrumbs({id:1,label:this.fund.FundLongName,url:""})},HedgeFundDetailsCtrl.prototype.loadMore=function(){this.addResults=!0,this.filterItems.Page++,this.onFilterChange(this.filterItems.Page)},HedgeFundDetailsCtrl.prototype.login=function(isSignup){this.mayauthService.login(isSignup)},HedgeFundDetailsCtrl.prototype.pagingTo=function(page,sortType,sortReverse){this.page=page},mi.factory("hedgefundProxy",function($http,$httpParamSerializerJQLike,$log,$q,mMimeTypeSettings,FundFilterFactory,HistoryFilterFactory,ngConfigSetting){function HedgeFundProxy(){}return HedgeFundProxy.prototype.allFunds=function(){var defer=$q.defer();return $log.debug("hedgefundProxy.all()"),$http.get(ngConfigSetting.api+"hedgefund/all").then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},HedgeFundProxy.prototype.all=function(){var defer=$q.defer();return $log.debug("hedgefundProxy.all()"),$http.get(ngConfigSetting.api+"hedgefund").then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},HedgeFundProxy.prototype.getFundDetails=function(id){var defer=$q.defer();return $log.debug("hedgefundProxy.getFundDetails("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"hedgefund/details",params:{fundId:id}}).success(function(data){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},HedgeFundProxy.prototype.getFundHistory=function(params){var defer=$q.defer();return $log.debug("fundProxy.getFundHistory("+params.FundId+")"),$http({method:"POST",url:ngConfigSetting.api+"hedgefund/history",data:$httpParamSerializerJQLike(params),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(data,status,headers){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},HedgeFundProxy.prototype.getAssetFundsHolding=function(param){var defer=$q.defer();return $log.debug("fundProxy.getFundManagerDetails("+param.secId+"-"+param.managerId+")"),$http({method:"GET",url:ngConfigSetting.api+"fund/assetfundsholding",params:{securityId:param.secId,entityId:param.managerId,loadAll:param.loadAll}}).success(function(data,status,headers){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},HedgeFundProxy.prototype.getSecurityRedemptionCSV=function(fundId,rptCd){var defer=$q.defer();return $log.debug("fundProxy.getSecurityRedemptionCSV()"),$http({method:"POST",url:ngConfigSetting.api+"download/securityredemption?fundId="+fundId,headers:{Accept:"text/csv"}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},HedgeFundProxy.prototype.getFileFundManagerDetails=function(id,fileType){var defer=$q.defer();return $log.debug("fundProxy.getCSVFundManagerDetails("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/manager/funds?fundId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},HedgeFundProxy.prototype.getFileFundAssets=function(id,fileType){var defer=$q.defer();return $log.debug("fundProxy.getCSVFundAssets("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/fundassets?fundId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},HedgeFundProxy.prototype.getFileFundManagerAssets=function(id,fileType){var defer=$q.defer();return $log.debug("fundProxy.getFileFundManagerAssets("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/fundmanagerassetsholdings?entityId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},HedgeFundProxy.prototype.getFileFundsAssets=function(mgrId,secId,fileType){var defer=$q.defer();return $log.debug("fundProxy.getCSVFundsAssets("+secId+")"),$http({method:"POST",url:ngConfigSetting.api+"download/fundsassetholdings?entityId="+mgrId+"&securityId="+secId,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},HedgeFundProxy.prototype.getFileFundHistory=function(id,fileType){var params=angular.extend({FundId:id},HistoryFilterFactory.filterParams),defer=$q.defer();return $log.debug("fundProxy.getCSVFundHistory("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/fundhistory",data:$httpParamSerializerJQLike(params),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},HedgeFundProxy.prototype.getFileFundListDetails=function(fileType){var params=FundFilterFactory.filterParams,defer=$q.defer();return $log.debug("fundProxy.getFileFundListDetails("+fileType+")"),$http({method:"POST",url:ngConfigSetting.api+"download/funds",data:angular.toJson(params),headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},HedgeFundProxy.prototype.getAdditionalHoldings=function(id){var defer=$q.defer();return $log.debug("fundProxy.getAdditionalHoldings("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"fund/additionalholdings?securityId="+id}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},HedgeFundProxy.prototype.getHoldingsGraphData=function(securityId,id,type){var defer=$q.defer();return $log.debug("fundProxy.getHoldingsGraphData("+securityId,id+")"),$http({method:"GET",url:ngConfigSetting.api+"fund/assetchart?securityId="+securityId+"&entityId="+id+"&type="+type}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},new HedgeFundProxy}),mi.run(function(HedgeFund,dataStorage){dataStorage.hedgefunds={data:[],add:function(id){return dataStorage.add.call(this,id,HedgeFund)},find:function(predicat){return dataStorage.find.call(this,predicat,HedgeFund)},isExists:function(id){return this.data.forEach(function(fund){if(fund.id==id)return!0}),!1},getById:function(id){var res;return this.data.forEach(function(fund){fund.id==id&&0<Object.keys(fund.fundDetails).length&&(res=fund)}),res}}}),mi.factory("HedgeFund",HedgeFundEntityFactory),HedgeFundEntityFactory.$inject=["hedgefundProxy","$q","dataStorage"],mi.directive("mayaHedgeFundFilterHistory",function(hedgefundProxy,$window,$log,$location,_,dataStorage,jsonService,HistoryFilterFactory){function FilterHistoryCtrl(){this._HedgeFundProxy=hedgefundProxy,this._HistoryFilterFactory=HistoryFilterFactory,this._dataStorage=dataStorage,this._log=$log,this.menuTitles={},this.dateOptions={minDate:new Date(1999,12,1),startingDate:1},this.filterItems={},this.init()}return FilterHistoryCtrl.prototype.init=function(){},FilterHistoryCtrl.prototype.clear=function(){this.filterItems={DateFrom:(new Date).addMonths(-1),DateTo:new Date,SecurityId:void 0}},{restrict:"EA",require:"^ngModel",scope:{securities:"=",filter:"&onChange"},controller:FilterHistoryCtrl,bindToController:!0,controllerAs:"vm",templateUrl:"src/hedgefund/directives/views/filter-history.html",link:function(scope,element,attr,ngController){var ctrl=scope.vm;Object.defineProperty(scope.vm,"filterItems",{get:function(){return ngController.$modelValue},set:function(value){ngController.$setViewValue(value)}}),scope.$on("$destroy",function(){ctrl.clear()})}}})}(angular);
!function(angular){"use strict";var mi=angular.module("foreignetf",[]);function ForeignETFDetailsCtrl($scope,$routeParams,$location,jsonService,BaseCtrl,dataStorage,ngConfigSetting,foreignETFProxy,fundProxy,utility,MetaTagService,TitleService,ETF,HistoryFilterFactory,blockUI,mGeneralSetting,sharedScrollFactory){this._etfProxy=foreignETFProxy,this._dataStorage=dataStorage,this._$location=$location,this._jsonService=jsonService,this.titleService=TitleService,this._HistoryFilterFactory=HistoryFilterFactory,this.pageSize=mGeneralSetting.ReportPageSize,this._mGeneralSetting=mGeneralSetting,this.tabPage=this.setTabByParam($routeParams.view),this.exportKeyArgs=[$routeParams.id],this.etfId=$routeParams.id,this.history={},this.hasDeals=!1,this.hasTrade=!1,BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype),Object.defineProperty(this,"PageInfo",{get:function(){return dataStorage.reports.pageInfo}}),$scope.$on("$routeUpdate",function(){var param=$location.search();param&&param.q?(this.collectURLParamters(param.q),this.tabPage=param.view,this.historyView=param.type,this.filter()):(this.tabPage=param.view||"details",this.historyView=param.type||"endday","history"==this.tabPage&&($("html,body").animate({scrollTop:0},"slow"),this.loadHistory(this.historyView)))}.bind(this))}mi.directive("setHrefForeignEtf",function(ngConfigSetting,$routeParams){return{restrict:"A",link:function(scope,elem,attr){var href=("/"==ngConfigSetting.virDir?"":ngConfigSetting.virDir)+"/foreignetf/"+$routeParams.id+"?view="+attr.setHrefForeignEtf;elem.attr("href",href)}}}),mi.controller("ForeignETFDetailsCtrl",ForeignETFDetailsCtrl),ForeignETFDetailsCtrl.prototype.init=function(){var proxy=this._etfProxy,d=new Date;this.historyTableHeader=globalTrans[this._mGeneralSetting.Lang].mayaStrings.EndDayHistoryTitle,this.historyTemplate="foreign-etf-endday.html";var param=this._$location.search();param.type&&(this.historyView=param.type),param&&param.q?(this.collectURLParamters(param.q),param=param.q):(param=null,this.filterItems={Period:9,DateFrom:d.addMonths(-1),DateTo:new Date,Page:1}),proxy.getDetails().then(function(res){this.etfDetails=res.Data,this.setTitle("details"),this.setBreadCrumbs(this.etfDetails)}.bind(this)),proxy.getTradeData(this.etfId).then(function(data){(this.TradeData=data)&&(this.changeDirection=this.checkSign(this.TradeData.PercentageChange))}.bind(this)),"history"===this.tabPage&&this.loadHistory(this.historyView)},ForeignETFDetailsCtrl.prototype.setTitle=function(view){this.titleService.setTitle(this.etfDetails.ETFLongName,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitleShort)},ForeignETFDetailsCtrl.prototype.changeHistoryTab=function(view){this.historyView=view,this.addResults=!1},ForeignETFDetailsCtrl.prototype.checkSign=function(change){if(change){var num=parseFloat(change);return num<0?-1:0<num?1:0}},ForeignETFDetailsCtrl.prototype.setTabByParam=function(view){var tabs="events,details,reports,history".split(",");return view&&-1!=tabs.indexOf(view)?view:"details"},ForeignETFDetailsCtrl.prototype.collectURLParamters=function(param){this.filterItems=param?JSON.parse(param):{},this.filterItems.Page=this.filterItems.Page||1,this.filterItems.DateFrom?this.filterItems.DateFrom=new Date(this.filterItems.DateFrom):this.filterItems.DateFrom=(new Date).addMonths(-1),this.filterItems.DateTo?this.filterItems.DateTo=new Date(this.filterItems.DateTo):this.filterItems.DateTo=new Date},ForeignETFDetailsCtrl.prototype.loadHistory=function(view){var proxy=this._etfProxy;"endday"===view?proxy.getEndDayHistory(this.filterItems).then(function(res){this.history.Table=angular.copy(res.Table),this.totalPage=res.Total,this.historyTemplate="foreign-etf-endday.html",this.historyTableHeader=globalTrans[this._mGeneralSetting.Lang].mayaStrings.EndDayHistoryTitle,this.historyTblColDef=this._jsonService.getTemplateByTemplateName("ForeignEtfEndDayHistoryTpl"),this.filterItems.DateFrom=new Date(res.StartDate),this.filterItems.DateTo=new Date(res.EndDate),this._HistoryFilterFactory.setFilterParams(this.filterItems)}.bind(this)):proxy.getShareDealsHistory().then(function(res){this.history.Table=angular.copy(res.Table),this.totalPage=res.Total,this.validDate=res.ValidDate,this.historyTemplate="etf-inday.html",this.historyTableHeader=globalTrans[this._mGeneralSetting.Lang].mayaStrings.EtfInDayHistoryTitle,this.historyTblColDef=this._jsonService.getTemplateByTemplateName("EtfInDayHistoryTpl"),this._HistoryFilterFactory.setFilterParams(this.filterItems)}.bind(this))},ForeignETFDetailsCtrl.prototype.onFilterChange=function(page,sortBy,sort){this.filterItems.Page=page||1,this.saveSearchLocation()},ForeignETFDetailsCtrl.prototype.setDealFlag=function(disp){this.hasDeals=disp},ForeignETFDetailsCtrl.prototype.setTradeFlag=function(disp){this.hasTrade=disp},ForeignETFDetailsCtrl.prototype.getPage=function(){return"foreignetf"},ForeignETFDetailsCtrl.prototype.setBreadCrumbs=function(data){this.BaseCtrl.updateBreadcrumbs(2,{id:2,label:data.ETFLongName,url:""})},ForeignETFDetailsCtrl.prototype.onFilterChange=function(page,sortBy,sort){this.filterItems.Page=page||1,this.saveSearchLocation()},ForeignETFDetailsCtrl.prototype.saveSearchLocation=function(){var params=this.filterItems,p={};for(var pi in params)null!=params[pi]&&null!=params[pi]&&!1!==params[pi]&&("object"==typeof params[pi]&&0==Object.keys(params[pi]).length&&!params[pi]instanceof Date?p[pi]=params[pi].toDateString():p[pi]=params[pi]);p=JSON.stringify(p),this._$location.search("q",p)},ForeignETFDetailsCtrl.prototype.filter=function(){this.loadHistory(this.historyView)},ForeignETFDetailsCtrl.prototype.changeWithSign=function(change){var num=parseFloat(change),abs_ch=Math.abs(change);return num<0?abs_ch+"% -":0<num?abs_ch+"% +":abs_ch+"% "},mi.factory("foreignETFProxy",function(ngConfigSetting,$http,$routeParams,$q,$httpParamSerializerJQLike,HistoryFilterFactory,$log,mMimeTypeSettings){function foreignETFProxyFactory(){this.controllerPage="foreignetf/"}return foreignETFProxyFactory.prototype.all=function(){var defer=$q.defer();return $log.debug("foreignETFProxyFactory.all()"),$http.get(ngConfigSetting.api+"foreignetf").then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},foreignETFProxyFactory.prototype.getDetails=function(){return $http.get(ngConfigSetting.api+this.controllerPage+"details?etfId="+$routeParams.id).then(function(data){return data.data})},foreignETFProxyFactory.prototype.getShareDealsHistory=function(){return $http.get(ngConfigSetting.api+"etf/sharedealshistory?fundId="+$routeParams.id).then(function(data){return data.data})},foreignETFProxyFactory.prototype.getInDayHistoryDetails=function(id,fileType){var defer=$q.defer();return $log.debug("etfProxy.getInDayHistoryDetails("+fileType+","+$routeParams.id),$http({method:"POST",url:ngConfigSetting.api+"download/indayhistory?fundId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},foreignETFProxyFactory.prototype.getEndDayHistoryDetails=function(id,fileType){var params=HistoryFilterFactory.filterParams,defer=$q.defer();return params=angular.extend({fundId:$routeParams.id},params),$log.debug("etfProxy.getEndDayHistoryDetails("+fileType+")"),$http({method:"POST",url:ngConfigSetting.api+"download/foreignenddayhistory",data:$httpParamSerializerJQLike(params),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},foreignETFProxyFactory.prototype.getEndDayHistory=function(params){var defer=$q.defer();return params=angular.extend({fundId:$routeParams.id},params),$http({method:"POST",url:ngConfigSetting.api+this.controllerPage+"history",data:$httpParamSerializerJQLike(params),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){defer.reject(status)}),defer.promise},foreignETFProxyFactory.prototype.getTradeData=function(id){return $http.get(ngConfigSetting.api+this.controllerPage+"tradedata?etfId="+id).then(function(data){return data.data})},new foreignETFProxyFactory}),mi.run(function(ETF,dataStorage){dataStorage.etfs={data:[],add:function(id){return dataStorage.add.call(this,id,ETF)},find:function(predicat){return dataStorage.find.call(this,predicat,ETF)},isExists:function(id){return this.data.forEach(function(etf){if(etf.id==id)return!0}),!1},getById:function(id){var res;return this.data.forEach(function(etf){etf.id==id&&0<Object.keys(etf.etfDetails).length&&(res=etf)}),res}}})}(angular);
!function(angular){"use strict";var mi=angular.module("foreignetfManager",[]);function ForeginETFManagerDetailsCtrl($scope,$location,foreignETFManagerProxy,$routeParams,dataStorage,jsonService,BaseCtrl,breadcrumbs,TitleService,MetaTagService,mGeneralSetting){this._Proxy=foreignETFManagerProxy,this._jsonService=jsonService,this.tabPage=this.setTabByParam($routeParams.view),this.securitySortType="Name",this.exportKeyArgs=[$routeParams.id],BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype),this.busy=!0,this.pageSize=mGeneralSetting.ReportPageSize,this.isEng=mGeneralSetting.LangStates.English===mGeneralSetting.Lang,Object.defineProperty(this,"PageInfo",{get:function(){return dataStorage.reports.pageInfo}}),$scope.$on("$routeUpdate",function(){var param=$location.search();param&&param.view?this.tabPage=param.view:this.tabPage="details"}.bind(this))}mi.directive("setHrefForeignEtfManager",function(ngConfigSetting,$routeParams){return{restrict:"A",link:function(scope,elem,attr){var href=("/"==ngConfigSetting.virDir?"":ngConfigSetting.virDir)+"/foreignetfmanager/"+$routeParams.id+"?view="+attr.setHrefForeignEtfManager;elem.attr("href",href)}}}),mi.controller("ForeginETFManagerDetailsCtrl",ForeginETFManagerDetailsCtrl),ForeginETFManagerDetailsCtrl.prototype.getDetails=function(){var proxy=this._Proxy;this.securitiesTableColumnDefinition=this._jsonService.getTemplateByTemplateName("ETFManagerSecuritiesTpl"),this.tableSecurityHeader=this.isEng?this.securitiesTableColumnDefinition.GridTitleEng:this.securitiesTableColumnDefinition.GridTitle,proxy.getDetails().then(function(res){this.data=res,this.setBreadCrumbs(this.data)}.bind(this))},ForeginETFManagerDetailsCtrl.prototype.setBreadCrumbs=function(){this.BaseCtrl.pushBreadcrumbs({id:1,label:this.data.CompanyDetails.CompanyLongName,url:""})},ForeginETFManagerDetailsCtrl.prototype.setTabByParam=function(view){var tabs="details,reports".split(",");return view&&-1!=tabs.indexOf(view)?view:"details"},mi.factory("foreignETFManagerProxy",function(ngConfigSetting,$http,$routeParams){function foreignETFManagerProxyFactory(){this.controllerPage="company/"}return foreignETFManagerProxyFactory.prototype.getDetails=function(){return $http.get(ngConfigSetting.api+this.controllerPage+"/etfmanager?companyId="+$routeParams.id).then(function(data){return data.data})},new foreignETFManagerProxyFactory})}(angular);
!function(angular){"use strict";var mi=angular.module("corpactions",[]);function filterCorpAdvancedCtrl($uibModalInstance,$timeout,$window,filterService,filterCorpActionService,mGeneralSetting,_,items,view,eventParent){this.$uibModalInstance=$uibModalInstance,this._=_,this.isEng=mGeneralSetting.LangStates.English===mGeneralSetting.Lang,this.selectedFilters=[];var selectedId,data=_.filter("eng"==this.lang?filterCorpActionService.corpEventsEng:filterCorpActionService.corpEvents,{ParentCd:null});if("payments"==view&&(data=_.filter(data,{Cd:1})),data.forEach(function(item){item.childrens||(item.childrens=_.filter("eng"==this.lang?filterCorpActionService.corpEventsEng:filterCorpActionService.corpEvents,function(child){if(child.ParentCd==item.Cd)return child.Parent=item,!0}));var itemParent=_.first(_.filter(items.data,{cd:item.Cd}));item.IsSelected=itemParent.IsSelected,item.childrens.forEach(function(child){if(1==item.IsSelected){if(0<itemParent.childrens.length){var itemChild=_.first(_.filter(itemParent.childrens,{Cd:child.Cd}));child.IsSelected=!!itemChild}else child.IsSelected=!0;1==child.IsSelected&&this.onChangeSelection(child)}else child.IsSelected=!1}.bind(this))}.bind(this)),eventParent)selectedId=_.findIndex(data,{Cd:eventParent.cd});else{var idx=_.findIndex(data,{IsSelected:!0});selectedId=-1<idx?idx:0}this.selectedFilter=data[selectedId],$timeout(function(){var element=$window.document.getElementById("fp-"+this.selectedFilter.Cd);element&&element.focus()}.bind(this),500),Object.defineProperty(this,"filters",{get:function(){return data}}),Object.defineProperty(this,"filterMetadata",{get:function(){return filterService.filterMetadata[0]}})}function CorpactionsCtrl($scope,$routeParams,$rootScope,$location,BaseCtrl,$uibModal,corpactionsProxy,jsonService,TitleService,MetaTagService,filterCorpActionService,_,CorpActService,blockUI,uibPopUpService,mGeneralSetting,sharedScrollFactory){this._proxy=corpactionsProxy,this._mGeneralSetting=mGeneralSetting,this._uibPopUpService=uibPopUpService,this._jsonService=jsonService,this._TitleService=TitleService,this._MetaTagService=MetaTagService,this._CorpActService=CorpActService,this._blockUI=blockUI,this._filterCorpActionService=filterCorpActionService,this.$location=$location,this.$rootScope=$rootScope,this._$uibModal=$uibModal,this._ld=_,this.data=void 0,this.totalPage=0,this.pageSize=mGeneralSetting.ReportPageSize,this.filterPromise,this.entityViewType,this.corpactionsTableColumnDefinition=[],this.showBreadCrumbs=!0,this.view=$routeParams.view,this.$routeParams=$routeParams,this.isEng=this._mGeneralSetting.LangStates.English===this._mGeneralSetting.Lang,this.exportKeyArgs=[$routeParams.view],this.entityId=$routeParams.id,this.showAll=angular.isUndefined(this.entityId),this.showBreadCrumbs=!angular.isDefined(this.entityId),this.addResults=!1,this.sharedScrollFactory=sharedScrollFactory,this.defDateFrom,this.defDateTo,Object.defineProperty(this,"filterParams",{get:function(){return CorpActService.filterParams}}),BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype),$scope.$on("$routeUpdate",function(){var param=$location.search();param&&param.q?(this._blockUI.start(),this.collectURLParamters(param.q),this.filter()):param&&!param.view&&this.init()}.bind(this))}function CorpActionEntityFactory(proxy,$q,storage){function CorpAction(){this.data={}}return CorpAction.prototype.load=function(){return proxy.filter().then(function(data){return this.data=data,angular.extend({},{data:data})}.bind(this))},CorpAction}mi.directive("corpactions",function(){return{templateUrl:"corpactions/directives/views/corpactions.html"}}),mi.directive("mayaFilterSelectedItemEng",function(){return{restrict:"E",scope:{item:"=",onRemove:"&"},template:'<div class="filtersSelectedItem"><div class="filterSelectedText">{{item.Desc}}</div><button type="button" class="removeFilterSelected" ng-click="onRemove(item)"><label class="hidden">Remove Selection</label><i class="mf mf-remove-filtering-green" title="Remove Event {{item.Desc}}"></i></button></div>'}}),mi.directive("mayaFilterCorpactions",function(corpactionsProxy,$log,$window,$filter,_,dataStorage,jsonService,filterCorpActionService,$uibModal,$timeout,$q,$location,filterService,mGeneralSetting,searchProxy,filteredResultPopUpService){var searchNestedFilter=$filter("searchNestedFilter");function FilterCorpactionsCtrl(){this._corpactionsProxy=corpactionsProxy,this._dataStorage=dataStorage,this.$log=$log,this._window=$window,this._=_,this.lang,this.$location=$location,this._locationpath=$location.path(),this.filterEvents=[],this.companies=[],this.selectedComp,this.selectedSec,this.defDateFrom,this.defDateTo,this._searchProxy=searchProxy,this._filteredResultPopUpService=filteredResultPopUpService,this.isEng=mGeneralSetting.Lang===mGeneralSetting.LangStates.English,this.dateOptions={minDate:new Date(1999,12,1),startingDate:1},Object.defineProperty(this,"entities",{get:function(){return filterService.entities}}),Object.defineProperty(this,"securities",{get:function(){return filterService.securities}}),Object.defineProperty(this,"compGrpFldByLang",{get:function(){return mGeneralSetting.Lang===mGeneralSetting.LangStates.English?"EngValue":"Value"}}),Object.defineProperty(this,"compFldNameLang",{get:function(){return mGeneralSetting.Lang===mGeneralSetting.LangStates.English?"EngName":"Name"}}),Object.defineProperty(this,"lang",{get:function(){return mGeneralSetting.Lang.split("-")[0]}}),Object.defineProperty(this,"entitiesByGroup",{get:function(){var groupNumber=this.filterItems.level2;return groupNumber?filterService.entitiesByGroup(groupNumber):this.entities}}),Object.defineProperty(this,"filterMetadata",{get:function(){return filterCorpActionService.filterMetadata}}),Object.defineProperty(this,"corpEvents",{get:function(){return filterCorpActionService.corpEvents}}),this.init()}return FilterCorpactionsCtrl.prototype.setChildren=function(item){item.subevents.forEach(function(sub){sub.IsSelected=item.IsSelected}),item.IsSelected||(item.childrens=[])},FilterCorpactionsCtrl.prototype.setParent=function(event){var bSelected=!1;event.subevents.forEach(function(sub){sub.IsSelected&&(bSelected=!0)}),event.IsSelected=bSelected},FilterCorpactionsCtrl.prototype.init=function(){filterCorpActionService.setData(1,"",function(item){}.bind(this))},FilterCorpactionsCtrl.prototype.clear=function(){this.filterItems={DateFrom:angular.copy(this.defDateFrom),DateTo:angular.copy(this.defDateTo),events:{},subevents:{},eventsData:this.filterItems.eventsData,entity:this.entityViewType?this.filterItems.entity:void 0,security:this.entityViewType?this.filterItems.security:void 0},this.filterItems.eventsData.forEach(function(item){item.childrens=[],item.IsSelected=!1,item.expanded=!1,item.subevents.forEach(function(sub){sub.IsSelected=!1})})},FilterCorpactionsCtrl.prototype.more=function($event,event){event&&($event.preventDefault(),$event.stopPropagation()),$uibModal.open({templateUrl:"src/corpactions/directives/views/filter-advanced-corp.html",controller:filterCorpAdvancedCtrl,controllerAs:"vm",windowClass:"filterDialogSize",resolve:{items:function(){return{data:this.filterItems.eventsData,lang:this.lang}}.bind(this),view:function(){return this.view}.bind(this),eventParent:function(){return event}}}).result.then(function(data){var newData=[];data.forEach(function(item){newData[item.ParentCd]||(newData[item.ParentCd]=[]),newData[item.ParentCd].push(item)}),this.filterItems.eventsData.forEach(function(item){item.childrens=[],item.IsSelected=!1,newData[item.cd]&&(newData[item.cd].length!=item.total&&(item.childrens=newData[item.cd]),item.IsSelected=!0)}),this.filter()}.bind(this))},FilterCorpactionsCtrl.prototype.resetFields=function(){this.filterItems.level2=void 0,this.selectedSec=void 0,this.selectedComp=void 0,this.filterItems.entity=void 0,this.filterItems.security=void 0},FilterCorpactionsCtrl.prototype.getCompaniesByGrpSelect=function(ev){for(var popUpTitle="",i=0;i<this.filterMetadata[0].NestedLevelOption.Level2.length;i++)if(this.filterMetadata[0].NestedLevelOption.Level2[i].Key==this.filterItems.level2)popUpTitle=this.isEng?this.filterMetadata[0].NestedLevelOption.Level2[i].EngValue:this.filterMetadata[0].NestedLevelOption.Level2[i].Value;this._searchProxy.getCompaniesByGroup(this.filterItems.level1,this.filterItems.level2).then(function(data){data.Title=popUpTitle,this._filteredResultPopUpService.open(data)}.bind(this))},FilterCorpactionsCtrl.prototype.querySearch=function(query,arr){var deferred,results=query?arr.filter(this.createFilterFor(query)):arr;return this.simulateQuery?(deferred=$q.defer(),$timeout(function(){deferred.resolve(results)},1e3*Math.random(),!1),deferred.promise):results},FilterCorpactionsCtrl.prototype.createFilterFor=function(query){var lowercaseQuery=angular.lowercase(query);return function(item){return 0===item.Name.indexOf(lowercaseQuery)||0===item.Id.toString().indexOf(lowercaseQuery)}},FilterCorpactionsCtrl.prototype.onChangeCompany=function(){this.filterItems.security=void 0},FilterCorpactionsCtrl.prototype.onChangeSecurity=function(){this.filterItems.level1=void 0,this.filterItems.level2=void 0,this.filterItems.entity=void 0},{restirct:"EA",require:"^ngModel",scope:{filter:"&onChange",view:"=",showAll:"=",entityViewType:"@",defDateTo:"=",defDateFrom:"="},controller:FilterCorpactionsCtrl,bindToController:!0,controllerAs:"vm",templateUrl:"src/corpactions/directives/views/filter-corpactions.html",link:function(scope,element,attr,ngController){var ctrl=scope.vm;attr.lang&&(ctrl.lang=attr.lang),scope.$watch("vm.view",function(newVal){var key="payments"==newVal?1:"";ctrl.filterEvents=""==key?ctrl.corpEvents:searchNestedFilter(ctrl.corpEvents,"ParentCd",{Key:key})}),Object.defineProperty(ctrl,"filterItems",{get:function(){return ngController.$modelValue},set:function(value){ngController.$setViewValue(value)}})}}}),mi.controller("filterCorpAdvancedCtrl",filterCorpAdvancedCtrl),filterCorpAdvancedCtrl.prototype.cancel=function(){this.$uibModalInstance.dismiss()},filterCorpAdvancedCtrl.prototype.filter=function(){this.$uibModalInstance.close(this.selectedFilters)},filterCorpAdvancedCtrl.prototype.changeGroup=function(parentFilter){this.selectedFilter=parentFilter},filterCorpAdvancedCtrl.prototype.selectAll=function(){this.selectedFilters=[],this.selectedFilter.childrens.forEach(function(child){child.IsSelected=!0,this.onChangeSelection(child)}.bind(this))},filterCorpAdvancedCtrl.prototype.unSelect=function(){this.selectedFilter.childrens.forEach(function(child){child.IsSelected=!1,this.onChangeSelection(child)}.bind(this))},filterCorpAdvancedCtrl.prototype.onChangeSelection=function(item){1==item.IsSelected?(this.selectedFilters.push(item),item.Parent.IsSelected=!0):(this._.remove(this.selectedFilters,function(currObject){return item.Cd==currObject.Cd}),this._.indexOf(item.Parent.childrens,{IsSelected:!0})<0&&(item.Parent.IsSelected=!1))},filterCorpAdvancedCtrl.prototype.removeSelectedFilterItem=function(item){this._.remove(this.selectedFilters,function(currObject){return item.Cd==currObject.Cd}),this.filters.forEach(function(parent){parent.Cd==item.ParentCd&&parent.childrens.forEach(function(child){child.Cd==item.Cd&&(child.IsSelected=!1)})})},mi.factory("CorpActService",function(){var _filterParams={},services={setFilterParams:function(data){_filterParams=data}};return Object.defineProperty(services,"filterParams",{get:function(){return _filterParams}}),services}),mi.controller("CorpactionsCtrl",CorpactionsCtrl),CorpactionsCtrl.prototype.setTabs=function(){this.tabs={events:{tableHeader:"corporateactions.mainTitle",viewType:16,proxyFunc:this._proxy.getCorpActionEvents},payments:{tableHeader:"CORP_PAYMENT_HEADER_PAYMENT_TYPE",viewType:17,proxyFunc:this._proxy.getCorpActionPayments},assembly:{tableHeader:"corporateactions.gatheringTab",viewType:22,proxyFunc:this._proxy.getCorpActionPayments},financereportingdate:{tableHeader:"financereportingdate.gridTitle",viewType:23,proxyFunc:this._proxy.getCorpActionPayments}}},CorpactionsCtrl.prototype.setBreadcrumbs=function(){this.$routeParams.id||(this.isEng&&this.BaseCtrl.setBreadcrumbsMainRoot("Maya","/"),this.BaseCtrl.pushBreadcrumbs({id:1,label:this.isEng?"Corporate Actions":"מועדים ותשלומים"}))},CorpactionsCtrl.prototype.init=function(evp){var jsonService=this._jsonService,proxy=this._proxy;this._blockUI.start(),this.entityViewType=evp,this.tabPage=this.getTabByParam(this.$routeParams.view),this.setTabs(),this.setBreadcrumbs(),"events"==this.view?this.corpactionsTableColumnDefinition=jsonService.getTemplateByTemplateName("CorpActionEventsTpl"):"assembly"==this.view?this.corpactionsTableColumnDefinition=jsonService.getTemplateByTemplateName("CorpActionAssemblyTpl"):"financereportingdate"==this.view?this.corpactionsTableColumnDefinition=jsonService.getTemplateByTemplateName("CorpActionFinanceReportingDateTpl"):this.corpactionsTableColumnDefinition=jsonService.getTemplateByTemplateName("CorpActionPaymentsTpl"),this.setDefaultParameters();var param=this.$location.search();this.entityId?(this.filterItems={Page:1,DateFrom:(new Date).addDays(-1),DateTo:(new Date).addMonths(3)},"fund"==this.entityViewType||"etf"==this.entityViewType?(this.filterItems.DateFrom=(new Date).addYears(-6),this.filterItems.security=this.entityId):this.filterItems.entity=this.entityId,this.defDateFrom=angular.copy(this.filterItems.DateFrom),this.defDateTo=angular.copy(this.filterItems.DateTo),this.filter()):param&&param.q?this.filterPromise.then(function(){this.collectURLParamters(param.q),this.filter()}.bind(this)):this.tabPage.proxyFunc.call(proxy).then(function(data){this.data=data.CorporateAction,this.GridDisclaimer=data.GridDisclaimer,this.totalPage=data.TotalPages,this.filterItems.DateFrom=new Date(data.DateFrom),this.filterItems.DateTo=new Date(data.DateTo),this.defDateFrom=angular.copy(this.filterItems.DateFrom),this.defDateTo=angular.copy(this.filterItems.DateTo);var filterSend={Page:1,GroupData:[],DateFrom:this.filterItems.DateFrom,DateTo:this.filterItems.DateTo,ViewType:this.tabs[this.view].viewType};this._CorpActService.setFilterParams(filterSend),this.setTitle(this.view),this._MetaTagService.setMetaTag({title:document.title,description:data.MetaTag.Description,keywords:data.MetaTag.Keywords}),this._blockUI.stop()}.bind(this),function(err){err.ModelState&&err.ModelState.IncorrectDateRange&&this._uibPopUpService.open(this._mGeneralSetting.ModalType.PopUpMessage+(this.isEng?"Eng":""),{message:this.isEng?globalTrans[this.mGeneralSetting.Lang].mayaStrings.IncorrectDateRange:err.ModelState.IncorrectDateRange[0],title:globalTrans[this.mGeneralSetting.Lang].mayaStrings.IncorrectDateRangeSearchTitle}),this._blockUI.stop()}.bind(this))},CorpactionsCtrl.prototype.setGridTitle=function(){this.isEng?this.tabPage.tableHeader=this.corpactionsTableColumnDefinition.GridTitleEng:this.tabPage.tableHeader=this.corpactionsTableColumnDefinition.GridTitle},CorpactionsCtrl.prototype.setDefaultParameters=function(){var filterCorpActionService=this._filterCorpActionService,d=new Date;this.filterItems={DateFrom:new Date,DateTo:d.addMonths(3),events:{},subevents:{}},this.filterPromise=filterCorpActionService.setData(1).then(function(){this.filterItems.eventsData=[];var corpEvents=[];0<(corpEvents=this.isEng?filterCorpActionService.corpEventsEng:filterCorpActionService.corpEvents).length&&this._ld.filter(corpEvents,{ParentCd:null}).forEach(function(item){("payments"!=this.view||"payments"==this.view&&1==item.Cd)&&this.filterItems.eventsData.push({cd:item.Cd,title:item.Desc,IsSelected:!1,expanded:!1,childrens:[],subevents:this._ld.filter(corpEvents,{ParentCd:item.Cd}),total:this._ld.filter(corpEvents,{ParentCd:item.Cd}).length})}.bind(this))}.bind(this))},CorpactionsCtrl.prototype.setTitle=function(view){this.isEng,"payments"==view?this._TitleService.setTitle(globalTrans[this._mGeneralSetting.Lang].mayaStrings.CorpActionPaymentsTitle+"-"+globalTrans[this._mGeneralSetting.Lang].mayaStrings.ReportTitle,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle):this._TitleService.setTitle(globalTrans[this._mGeneralSetting.Lang].mayaStrings.CorpActionEventsTitle+"-"+globalTrans[this._mGeneralSetting.Lang].mayaStrings.ReportTitle,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle)},CorpactionsCtrl.prototype.getTabByParam=function(view){var proxy=this._proxy;this.view=view||"payments";return this.isEng&&"Eng","events"==view?{name:"events",htmlTemplateName:"corp-events",viewType:16,tableHeader:"corporateactions.events.gridTitle",proxyFunc:proxy.getCorpActionEvents,corpactionsTableColumnDefinition:angular.copy(this.corpactionsPaymentsTableColumnDefinition)}:"assembly"==view?(angular.isDefined(this.entityViewType)&&this._TitleService.setTitle(globalTrans[this.mGeneralSetting.Lang].mayaStrings.CorpActionPaymentsTitle,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle),{name:"assembly",htmlTemplateName:"corp-assembly",viewType:22,tableHeader:"corporateactions.assembly.gridTitle",proxyFunc:proxy.getAssembly,corpactionsTableColumnDefinition:angular.copy(this.corpactionsEventsTableColumnDefinition)}):"financereportingdate"==view?(angular.isDefined(this.entityViewType)&&this._TitleService.setTitle(globalTrans[this._mGeneralSetting.Lang].mayaStrings.CorpActionFinancialStatemntReportingDateTitle,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle),{name:"financereportingdate",htmlTemplateName:"corp-finance-schedule",viewType:23,tableHeader:"corporateactions.financereportingdate.gridTitle",proxyFunc:proxy.getFinStatemntReportingDate,corpactionsTableColumnDefinition:angular.copy(this.corpactionsEventsTableColumnDefinition)}):(angular.isDefined(this.entityViewType)&&this._TitleService.setTitle(globalTrans[this._mGeneralSetting.Lang].mayaStrings.CorpActionPaymentsTitle,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle),{name:"payments",htmlTemplateName:"corp-payments",viewType:17,tableHeader:"corporateactions.payments.gridTitle",proxyFunc:proxy.getCorpActionPayments,corpactionsTableColumnDefinition:angular.copy(this.corpactionsEventsTableColumnDefinition)})},CorpactionsCtrl.prototype.onFilterChange=function(page,sortBy,sort){this.filterItems.Page=page||1,this.filterItems.SortBy=sortBy,this.filterItems.Sort=sort,this.saveSearchLocation()},CorpactionsCtrl.prototype.saveSearchLocation=function(){var params=this.filterItems,p={};for(var pi in params)"eventsData"==pi?(p.events=[],p.subevents=[],params[pi].forEach(function(parent){parent.IsSelected&&(p.events.push(parent.cd),parent.childrens.forEach(function(child){child.IsSelected&&p.subevents.push(child.Cd)}),0==parent.childrens.length&&parent.subevents.forEach(function(child){child.IsSelected&&p.subevents.push(child.Cd)}))})):(null==params[pi]||null==params[pi]||"object"==typeof params[pi]&&0==Object.keys(params[pi]).length||!1===params[pi])&&!angular.isDate(params[pi])||(p[pi]=params[pi]);this.$location.search("q",JSON.stringify(p))},CorpactionsCtrl.prototype.filter=function(){var proxy=this._proxy,filterSend={Page:this.filterItems.Page,GroupData:[],DateFrom:this.filterItems.DateFrom,DateTo:this.filterItems.DateTo,ViewType:this.tabs[this.view].viewType};this.filterItems.GroupData=[],this.filterItems.SortBy&&(filterSend.SortBy=this.filterItems.SortBy,filterSend.Sort=this.filterItems.Sort),this.filterItems.level2&&!this.filterItems.entity&&filterSend.GroupData.push({DataList:[{Cd:this.filterItems.level2,Desc:"",IsSelected:!0,VFType:this.filterItems.level1}]});var tmpevents=[];this.filterItems.events&&this.filterItems.events.forEach(function(evt){tmpevents.push({Cd:evt,Desc:"",IsSelected:!0,VFType:8})}),0<tmpevents.length&&filterSend.GroupData.push({DataList:tmpevents}),tmpevents=[],this.filterItems.subevents&&this.filterItems.subevents.forEach(function(evt){tmpevents.push({Cd:evt,Desc:"",IsSelected:!0,VFType:7})}),0<tmpevents.length&&filterSend.GroupData.push({DataList:tmpevents}),this.filterItems.entity&&filterSend.GroupData.push({DataList:[{Cd:this.filterItems.entity,Desc:"",IsSelected:!0,VFType:15}]}),this.filterItems.security&&filterSend.GroupData.push({DataList:[{Cd:this.filterItems.security,Desc:"",IsSelected:!0,VFType:"fund"==this.entityViewType?17:16}]}),this._CorpActService.setFilterParams(filterSend),proxy.filter(filterSend,this.lng).then(function(data){this.setData(data.CorporateAction),this.totalPage=data.TotalPages,this._blockUI.stop(),this.sharedScrollFactory.invoke()}.bind(this),function(err){this._blockUI.stop(),err.ModelState&&err.ModelState.IncorrectDateRange&&this._uibPopUpService.open(this._mGeneralSetting.ModalType.PopUpMessage+(this.isEng?"Eng":""),{lang:this.lng,message:this.isEng?globalTrans[this._mGeneralSetting.Lang].mayaStrings.IncorrectDateRange:err.ModelState.IncorrectDateRange[0],title:globalTrans[this._mGeneralSetting.Lang].mayaStrings.SearchTitle})}.bind(this))},CorpactionsCtrl.prototype.collectURLParamters=function(param){if(this.filterItems=angular.extend(JSON.parse(param),{eventsData:this.filterItems.eventsData}),this.filterItems.DateFrom?this.filterItems.DateFrom=new Date(this.filterItems.DateFrom):this.filterItems.DateFrom=new Date,this.filterItems.DateTo?this.filterItems.DateTo=new Date(this.filterItems.DateTo):this.filterItems.DateTo=(new Date).addMonths(3),this.filterItems.Page=this.filterItems.Page||1,"fund"==this.entityViewType?this.filterItems.security&&(this.filterItems.security=this.entityId||this.filterItems.security):this.filterItems.entity&&(this.filterItems.entity=this.entityId||this.filterItems.entity),this.filterItems.eventsData.forEach(function(parent){parent.IsSelected=!1,parent.childrens.length=0}),this.filterItems.events&&this.filterItems.events.forEach(function(evts){var foundEventIndex=this._ld.findIndex(this.filterItems.eventsData,{cd:evts});this.filterItems.eventsData[foundEventIndex].IsSelected=!0}.bind(this)),this.filterItems.subevents&&0<this.filterItems.subevents.length){var data=this._ld.filter(this.isEng?this._filterCorpActionService.corpEventsEng:this._filterCorpActionService.corpEvents,function(child){return null!=child.ParentCd});this.filterItems.subevents.forEach(function(sub){var foundElement=this._ld.filter(data,{Cd:sub});if(0<foundElement.length){foundElement=foundElement[0];var foundEventIndex=this._ld.findIndex(this.filterItems.eventsData,{cd:foundElement.ParentCd});this.filterItems.eventsData[foundEventIndex].childrens.push(foundElement)}}.bind(this))}},CorpactionsCtrl.prototype.setData=function(data){if(this.addResults)for(var i=0;i<data.length;i++)this.data.push(data[i]);else this.data=data;this.addResults=!1},CorpactionsCtrl.prototype.loadMore=function(){this.addResults=!0,this.filterItems.Page++,this.onFilterChange(this.filterItems.Page)},mi.factory("corpactionsProxy",function($http,$log,$q,mMimeTypeSettings,mayaCacheService,$routeParams,CorpActService,ngConfigSetting){function CorpactionsProxy(){}return CorpactionsProxy.prototype.getCorpActionEvents=function(){var defer=$q.defer();return $log.debug("corpactionsProxy.getCorpActionEvents()"),$http({method:"GET",url:ngConfigSetting.api+"corporateaction/events"}).success(function(data,status,headers,cfg){$log.debug(data),defer.resolve(data)}).error(function(err,status){$log.debug(err),defer.reject(status)}),defer.promise},CorpactionsProxy.prototype.getCorpActionPayments=function(){var defer=$q.defer();return $log.debug("corpactionsProxy.getCorpActionPayments()"),$http({method:"GET",url:ngConfigSetting.api+"corporateaction/payments"}).success(function(data,status,headers,cfg){$log.debug(data),defer.resolve(data)}).error(function(err,status){$log.debug(err),defer.reject(status)}),defer.promise},CorpactionsProxy.prototype.getAssembly=function(){var defer=$q.defer();return $log.debug("corpactionsProxy.getAssembly()"),$http({method:"GET",url:ngConfigSetting.api+"corporateaction/assembly"}).success(function(data,status,headers,cfg){$log.debug(data),defer.resolve(data)}).error(function(err,status){$log.debug(err),defer.reject(status)}),defer.promise},CorpactionsProxy.prototype.getFinStatemntReportingDate=function(lang){var defer=$q.defer();return $log.debug("corpactionsProxy.getFinStatemntReportingDate()"),$http({method:"GET",url:ngConfigSetting.api+"corporateaction/financialstatemntreportingdate"}).success(function(data,status,headers,cfg){$log.debug(data),defer.resolve(data)}).error(function(err,status){$log.debug(err),defer.reject(status)}),defer.promise},CorpactionsProxy.prototype.getFileCorpActions=function(id,fileType){var params=CorpActService.filterParams,sUrl=ngConfigSetting.api+"download/corpactions",defer=$q.defer();return $log.debug("corpactionsProxy.getFileCorpActions()"),$http({method:"POST",url:sUrl,data:angular.toJson(params),headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.debug(err),defer.reject(status)}),defer.promise},CorpactionsProxy.prototype.filter=function(fco,lang){var defer=$q.defer();return $log.debug("corpactionsProxy.getCorpactionsDetails()"),$http({method:"POST",url:ngConfigSetting.api+"corporateaction/filter",data:angular.toJson(fco)}).success(function(data,status,headers,cfg){$log.debug(data),defer.resolve(data)}).error(function(err,status){$log.debug(err),defer.reject(err)}),defer.promise},new CorpactionsProxy}),mi.service("filterCorpActionService",function(utility,jsonService,$q,_){var filterItems={Page:1,events:{},DateFrom:(new Date).getMonth()-1,DateTo:new Date},filterMetadata=[],items=[],corpEvents=[],corpEventsEng=[],initFilterPromise=[],service={setData:function(view){return $q.all(initFilterPromise).then(function(){filterMetadata=_.filter(items.Data,function(item){return-1<_.indexOf(item.IncludeInView,view)}.bind(this))}.bind(this))},clean:function(){},current:filterItems};return Object.defineProperty(service,"filterMetadata",{get:function(){return filterMetadata}}),Object.defineProperty(service,"corpEvents",{get:function(){return corpEvents}}),Object.defineProperty(service,"corpEventsEng",{get:function(){return corpEventsEng}}),function(){initFilterPromise.push(jsonService.getFilterMetadata().then(function(data){items=data}.bind(this))),initFilterPromise.push(jsonService.getFilterCorpAction().then(function(items){corpEvents=items.Data}.bind(this))),initFilterPromise.push(jsonService.getFilterCorpAction("Eng").then(function(items){corpEventsEng=items.Data}.bind(this)))}(),service}),mi.run(function(CorpAction,dataStorage){dataStorage.corpAction={data:[],add:function(id){return dataStorage.add.call(this,id,CorpAction)},find:function(predicat){return dataStorage.find.call(this,predicat,CorpAction)},isExists:function(id){return this.data.forEach(function(company){if(company.id==id)return!0}),!1}}}),mi.factory("CorpAction",CorpActionEntityFactory),CorpActionEntityFactory.$inject=["corpactionsProxy","$q","dataStorage"]}(angular);
!function(angular){"use strict";var mi=angular.module("account",[]);function AccountCtrl($log,$location,$routeParams,$rootScope,AccountProxy,RegistrationService,FavoritesService,RecaptchaService,modalService,uibPopUpService,mGeneralSetting,blockUI,angularAuth0,mayauthService,ngConfigSetting,notificationProxy,toaster,$window){this._AccountProxy=AccountProxy,this._notificationProxy=notificationProxy,this._angularAuth0=angularAuth0,this._mayauthService=mayauthService,this.loginData={userName:"",password:"",submitted:!1},this._toaster=toaster,this._blockUI=blockUI,this._rootScope=$rootScope,this.authentication=AccountProxy.authentication,this._modalService=modalService,this._uibPopUpService=uibPopUpService,this.$log=$log,this._mGeneralSetting=mGeneralSetting,this._RecaptchaService=RecaptchaService,this.RegService=RegistrationService,this.location=$location,this.FavService=FavoritesService,this.message="",this.isLoggedIn=this.authentication.isAuth,this.loginUserName=this.authentication.userName,this.firstName=AccountProxy.userInfo.fName,this.lastName=AccountProxy.userInfo.lName,this.ngConfigSetting=ngConfigSetting,this.pwdSave=!1,this.resetPwd={Email:"",submitted:!1,resetSuccess:!1},this.sendUnsubscr={Email:"",submitted:!1,bSuccess:!1},this.window=$window,this._RecaptchaService.initKey(),this.pollItems=[],Object.defineProperty(this,"isOpened",{get:function(){return RegistrationService.isOpened},set:function(value){RegistrationService.isOpened=value}}),Object.defineProperty(this,"isLoggedIn",{get:function(){return AccountProxy.authentication.isAuth},set:function(value){AccountCtrl.isLoggedIn=value}}),Object.defineProperty(this,"boxType",{get:function(){return RegistrationService.boxType},set:function(value){RegistrationService.boxType=value}}),Object.defineProperty(this,"userInfo",{get:function(){return AccountProxy.userInfo}}),Object.defineProperty(this,"isEng",{get:function(){return mGeneralSetting.LangStates.English===mGeneralSetting.Lang}}),this.myTaseLink=this.isEng?ngConfigSetting.myTaseLink+"/en":ngConfigSetting.myTaseLink+"/he",this.taseInfoLink=this.isEng?ngConfigSetting.taseInfoLink+"/eng":ngConfigSetting.taseInfoLink+"/heb"}function NotificationCtrl($log,$q,$rootScope,$window,$timeout,jsonService,notificationProxy,AccountProxy,modalService,uibPopUpService,mGeneralSetting,ngConfigSetting,_,refreshVirtualScroll,blockUI,loginService){this.loaded=!1,this.entityType={1:"Group",2:"Entity",3:"Events",4:"SubEvents",5:"CustomerEvents"},this.chooseTypeEnum={C:"חברות",F:"קרנות",T:"בורסה"},this.page="addEdit",this.currentInnerPage=1,this._blockUI=blockUI,this._=_,this.jsonService=jsonService,this.$log=$log,this.$q=$q,this.$timeout=$timeout,this.notificationProxy=notificationProxy,this.modalService=modalService,this.uibPopUpService=uibPopUpService,this.mGeneralSetting=mGeneralSetting,this.emailAddress=AccountProxy.authentication.userName,this.isAllAlertsDisable=!1,this.notslist=[],this.maxAlertLimitMessage=globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotificationMaxAlertLimitExceeded,this.defaultTitleMessge=globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotificationSettingsTitle,this.refreshVirtualScroll=refreshVirtualScroll,blockUI.start();this.load(),$rootScope.$on("maya-event.logout",function(){$window.location.href=ngConfigSetting.virDir})}function PollingToasterCtrl(notificationProxy,toaster,$window,$location){this.window=$window,this.location=$location,this.pollItems=[],this._notificationProxy=notificationProxy,this._toaster=toaster,Object.defineProperty(this,"isToasterOpened",{get:function(){return PollingToasterCtrl.isToasterOpened},set:function(value){PollingToasterCtrl.isToasterOpened=value}}),Object.defineProperty(this,"isToasterRunning",{get:function(){return PollingToasterCtrl.isToasterRunning},set:function(value){PollingToasterCtrl.isToasterRunning=value}}),this.isToasterOpened=!0,this.isToasterRunning=!1,this.runPolling()}function mayauthService($location,angularAuth0,$timeout,$q,mGeneralSetting){var accessToken,idToken,expiresAt,isTaseUser;function localLogin(authResult){localStorage.setItem("isLoggedIn","true"),expiresAt=1e3*authResult.expiresIn+(new Date).getTime(),accessToken=authResult.accessToken,idToken=authResult.idToken}return{login:function(isSignup){-1<$location.path().indexOf("/en/")?localStorage.Language="en":localStorage.Language="he",localStorage.Language,console.log(localStorage.Language),"en"==localStorage.Language?localStorage.setItem("redirectTo","/account/emailverifyredirect"===$location.path()?"/en":$location.path()):localStorage.setItem("redirectTo","/account/emailverifyredirect"===$location.path()?"/":$location.path()),localStorage.removeItem("isLoggingOut"),angularAuth0.authorize({tase_lang:localStorage.Language,status:isSignup?"create_user":"login"})},getIdToken:function(){return idToken},getAccessToken:function(){return accessToken},handleAuthentication:function(){var defer=$q.defer();return angularAuth0.parseHash(function(err,authResult){authResult&&authResult.accessToken?(localLogin(authResult),angularAuth0.client.userInfo(authResult.accessToken,function(err,userInf){console.log(userInf),userInf&&(userInf.accessToken=authResult.accessToken,defer.resolve(userInf))})):err&&($timeout(function(){$location.path("/")}),console.log(err),console.log("Error: "+err.error+". Check the console for further details."))}),defer.promise},logout:function(logoutUri){localStorage.removeItem("isLoggedIn"),localStorage.setItem("isLoggingOut","true"),idToken=accessToken="",expiresAt=0,angularAuth0.logout({returnTo:logoutUri})},isAuthenticated:function(){return"true"===localStorage.getItem("isLoggedIn")&&(new Date).getTime()<expiresAt},renewTokens:function(){var defer=$q.defer();return $timeout(function(){angularAuth0.checkSession({},function(err,result){err?console.log(err):localLogin(result),defer.resolve(result)})},1),defer.promise},getAuthUserInfo:function(authResult){var defer=$q.defer();return angularAuth0.client.userInfo(authResult.accessToken,function(err,userInf){if(userInf){localStorage.uauid=userInf.sub;var userEmail=userInf.email;isTaseUser=/@tase.co.il/.test(userEmail),defer.resolve(userInf)}}),defer.promise},isLoggingOut:function(){return"true"===localStorage.getItem("isLoggingOut")},resetPassword:function(){-1<$location.path().indexOf("/en/")?localStorage.Language="en":localStorage.Language="he",localStorage.Language,console.log(localStorage.Language),"en"==localStorage.Language?localStorage.setItem("redirectTo","/account/emailverifyredirect"===$location.path()?"/en":$location.path()):localStorage.setItem("redirectTo","/account/emailverifyredirect"===$location.path()?"/":$location.path()),localStorage.removeItem("isLoggingOut"),angularAuth0.authorize({tase_lang:localStorage.Language,status:"reset_password",view:"reset"})},checkIsTaseUser:function(){return isTaseUser}}}mi.controller("AccountCtrl",AccountCtrl),mi.controller("ConfirmEmailCtrl",function($routeParams,$window,modalService,uibPopUpService,mGeneralSetting,ngConfigSetting){var status=$routeParams.status,message="";switch(status){case"success":message=globalTrans[mGeneralSetting.Lang].mayaStrings.ConfrimEmailSuccessMessage;break;case"invalidtoken":message=globalTrans[mGeneralSetting.Lang].mayaStrings.ConfrimEmailInvalidTokenMessage;break;case"fieldrequire":message=globalTrans[mGeneralSetting.Lang].mayaStrings.ConfrimEmailFieldRequireError;break;default:message=globalTrans[mGeneralSetting.Lang].mayaStrings.ConfrimEmailStatusNotFound}uibPopUpService.open(mGeneralSetting.ModalType.PopUpMessage,{message:message,title:globalTrans[mGeneralSetting.Lang].mayaStrings.ConfrimEmailTitle}).result.then(function(){$window.location.href=ngConfigSetting.virDir})}),mi.controller("TermOfUseCtrl",function($scope,BaseCtrl){BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype),this.BaseCtrl.pushBreadcrumbs({id:1,label:"הסכם שימוש"})}),mi.controller("NotificationCtrl",NotificationCtrl),mi.controller("PollingToasterCtrl",PollingToasterCtrl),AccountCtrl.prototype.Auth0Login=function(){1==this.isLoggedIn?this.showHidePopUp():this._mayauthService.login()},AccountCtrl.prototype.Auth0Logout=function(){var _redirectTo=-1<this.location.path().indexOf("/en")?this.ngConfigSetting.auth0EngRedirectUri.split("/account")[0]:this.ngConfigSetting.auth0RedirectUri.split("/account")[0];console.log("logout redirect to -> "+_redirectTo),this._mayauthService.logout(_redirectTo)},AccountCtrl.prototype.fillAuthData=function(){var authData=this._AccountProxy.GetAuthInfo();null!=authData&&(this.message=authData.token,this.isLoggedIn=!0,this.loginUserName=authData.userName)},AccountCtrl.prototype.showHidePopUp=function(){4==this.boxType&&this.isOpened&&(this.boxType=1),this.isOpened=!this.isOpened},AccountCtrl.prototype.logout=function(){this.isLoggedIn=!1,this.message="",this.loginUserName="",this.firstName="",this.lastName="",this.boxType=1,this.FavService.setFavorites([]),this.isOpened=!1,this._rootScope.$broadcast("maya-event.setFavorite",this._mGeneralSetting.Action.RemoveFavorite),this._rootScope.$broadcast("maya-event.logout")},AccountCtrl.prototype.getUserInfo=function(){this._AccountProxy.GetUserInfo().then(function(data){this.firstName=data.FirstName,this.lastName=data.LastName}.bind(this),function(reason){this.loginUserName="",this.isLoggedIn=!1,this.message=reason.error_description}.bind(this))},AccountCtrl.prototype.resetPassword=function(IsValid){if(this.resetPwd.submitted=!0,IsValid){var blockUI=this._blockUI,proxy=this._AccountProxy,resetData={Email:this.resetPwd.Email};this._RecaptchaService.captchaResponse&&(resetData.Captcha=this._RecaptchaService.captchaResponse),blockUI.start(),proxy.sendResetPassword(resetData).then(function(data){blockUI.stop(),this.message="",this.resetPwd.resetSuccess=!0}.bind(this),function(data){blockUI.stop();var errors=[];for(var key in this.resetPwd.resetSuccess=!1,data.ModelState)for(var i=0;i<data.ModelState[key].length;i++)errors.push(data.ModelState[key][i]);this.message=errors[0]}.bind(this))}},AccountCtrl.prototype.sendUnsubscribe=function(IsValid){if(this.sendUnsubscr.submitted=!0,IsValid){var blockUI=this._blockUI,proxy=this._AccountProxy,sendData={Email:this.sendUnsubscr.Email};this._RecaptchaService.captchaResponse&&(sendData.Captcha=this._RecaptchaService.captchaResponse),blockUI.start(),proxy.sendResetPassword(sendData).then(function(data){blockUI.stop(),this.message="",this.sendUnsubscr.bSuccess=!0}.bind(this),function(data){blockUI.stop();var errors=[];for(var key in this.sendUnsubscr.bSuccess=!1,data.ModelState)for(var i=0;i<data.ModelState[key].length;i++)errors.push(data.ModelState[key][i]);this.message=errors[0]}.bind(this))}},AccountCtrl.prototype.cancelModal=function(){this._modalService.resolve},AccountCtrl.prototype.openFavorites=function(){this.isOpened=!1},AccountCtrl.prototype.openDiv=function(){this.isOpened=!0},AccountCtrl.prototype.hidePage=function(){this.isOpened=!1},AccountCtrl.prototype.openPage=function(type,isModal){2==type?(this.isOpened=!1,this._RecaptchaService.reload()):(4==type&&this._RecaptchaService.reload(),this.isOpened=!0),this.message="",this.RegService.openPage(type,isModal)},AccountCtrl.prototype.closeModalPage=function(type,isModal){this.isOpened=!1,this.RegService.closeModalPage(type,isModal)},AccountCtrl.prototype.openRegister=function(){var modalService=this._modalService,modalType=this._mGeneralSetting.ModalType,logger=this.$log;this.isOpened=!1,this.RegService.closeModalPage(2,!0),modalService.open(modalType.Register,{}).then(function(response){logger.debug("Register message response"),this._uibPopUpService.open(modalType.PopUpMessage,{message:response.message,title:response.title})}.bind(this),function(){logger.debug("Register message reject")})},AccountCtrl.prototype.openUpdateDetails=function(){var modalService=this._modalService,modalType=this._mGeneralSetting.ModalType,logger=this.$log;this.isOpened=!1,modalService.open(modalType.UpdateAccount,{}).then(function(response){logger.debug("Update details response");this._uibPopUpService.open(modalType.PopUpMessage,{message:response.message,title:response.title})}.bind(this),function(){logger.debug("Update details reject")})},NotificationCtrl.prototype.load=function(){this.setDefaultNotification(),this.notificationProxy.getSmartAgentSettings().then(function(data){this.$log.debug("Notification Alerts Loaded"),this.notslist=data.na,0<this.notslist.length&&(this.page="list"),this.$log.debug("Setting Alerts Loaded"),data.ass.AccountDisableFrom=new Date(data.ass.AccountDisableFrom),data.ass.AccountDisableTo=new Date(data.ass.AccountDisableTo),this.settings=data.ass;var curDate=new Date;this.isAllAlertsDisable=2==this.settings.AlertActiveStatusId||3==this.settings.AlertActiveStatusId&&curDate>=this.settings.AccountDisableFrom.setHours(0,0,0,0)&&curDate<=this.settings.AccountDisableTo.setHours(23,59,0,0),this.loaded=!0,this._blockUI.stop()}.bind(this))},NotificationCtrl.prototype.selectChoiseTypeId=function($event,id){function change(){this.refreshVirtualScroll(),this.data.SubEntityType=void 0,this.EntityList=void 0,this.data.Entity={},this.data.ChoiseTypeId=id,this.data.Events={},this.data.SubEventType=void 0,"T"==id&&(this.data.SubEntityType=2,this.getEntityData(this.data.ChoiseTypeId,this.entityType[2]).then(function(list){this.EntityList=list}.bind(this)))}var self=this;this.data.Entity&&0<Object.keys(this.data.Entity).length?this.changeAlert().then(function(){change.call(self)},function(){$event.stopPropagation(),$event.target.blur()}):change.call(self)},NotificationCtrl.prototype.selectSubEntityType=function($event,id){var changeSelect=function(){this.refreshVirtualScroll(),this.data.SubEntityType=id,this.data.Entity={},2==id&&this.data.SubEventType&&5==this.data.SubEventType&&(this.data.SubEventType=void 0,this.data.OnlyForTaseMember=!1),this.getEntityData(this.data.ChoiseTypeId,this.entityType[id]).then(function(list){this.EntityList=list}.bind(this))}.bind(this);this.data.SubEntityType!==id&&(this.data.Entity&&0<Object.keys(this.data.Entity).length?this.changeAlert().then(function(){changeSelect()},function(){$event.stopPropagation(),$event.target.blur()}):changeSelect())},NotificationCtrl.prototype.selectSubEventType=function($event,id){var changeSelect=function(){this.refreshVirtualScroll(),this.data.SubEventType=id,this.data.Events={},this.data.OnlyForTaseMember=!1,this.getEntityData(this.data.ChoiseTypeId,this.entityType[id]).then(function(list){this.EventsList=list,5==id&&(this.EventsList.forEach(function(el){this.data.Events[el.Id]=!0}.bind(this)),this.data.OnlyForTaseMember=!0)}.bind(this))}.bind(this);this.data.SubEventType!==id&&(this.data.Events&&0<Object.keys(this.data.Events).length?this.changeAlert().then(function(){changeSelect()},function(){$event.stopPropagation(),$event.target.blur()}):changeSelect())},NotificationCtrl.prototype.getEntityData=function(chooseType,type){return this.jsonService.getAccountGroupsViaEntity().then(function(items){return this.entityTypeData||(this.entityTypeData={}),this._.filter(items,{TypeId:chooseType})[0][type]}.bind(this))},NotificationCtrl.prototype.save=function(){this.notificationProxy.saveNotification(this.data).then(function(savedData){this.$log.debug("Notification Saved");var idx=this._.findIndex(this.notslist,{ProfileId:this.data.ProfileId});-1==idx?this.notslist.push(savedData):this.notslist.splice(idx,1,this.data),this.data={},this.page="list"}.bind(this),function(err){var errMsg=err.ModelState&&(err.ModelState.MAX_ALERT_EXCEEDED||err.ModelState.MAX_ALERT_EXCEEDED_PER_PROFILE);errMsg?this.showAlert(errMsg[0],globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotificationSaveFailedTitle,!0):this.showAlert(globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotificationSaveFailedDesc,globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotificationSaveFailedTitle,!0)}.bind(this))},NotificationCtrl.prototype.showAlert=function(message,title,isError){this.uibPopUpService.open(this.mGeneralSetting.ModalType.PopUpMessage,{message:message,title:title})},NotificationCtrl.prototype.pageTo=function(page){var that=this;if(2==(this.currentInnerPage=page)&&this.data.SubEventType&&5==this.data.SubEventType&&angular.isDefined(this.data.Entity)&!(10 in this.data.Entity&&!0===this.data.Entity[10]))this.data.SubEventType=void 0,this.data.OnlyForTaseMember=!1;else if(3==page&&!this.data.AlertName){var self=this;this.data.AlertName=6===this.data.SubEventType?globalTrans[this.mGeneralSetting.Lang].mayaStrings.issuance:globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotAlertName+" "+(this.notslist.length+1),function generateName(countToAdd){self.data.AlertName=6===self.data.SubEventType?globalTrans[that.mGeneralSetting.Lang].mayaStrings.issuance:globalTrans[that.mGeneralSetting.Lang].mayaStrings.NotAlertName+" "+(self.notslist.length+countToAdd),function(name){for(var i=0;i<self.notslist.length;i++)if(self.notslist[i].AlertName==name)return 1;return 0}(self.data.AlertName)&&generateName(countToAdd+1)}(1)}},NotificationCtrl.prototype.createAlert=function(page){8<=this.notslist.length?this.showAlert(globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotificationMaxAlertLimitExceeded,globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotificationSettingsTitle,!0):(this.page="addEdit",this.currentInnerPage=1,this.setDefaultNotification())},NotificationCtrl.prototype.setDefaultNotification=function(page){this.data={OnlyBreakingAnnoucement:!1,OnlyForTaseMember:!1,SendLateMessageOnNextDay:!1,IsActive:!0,FrequencyAlert:1}},NotificationCtrl.prototype.editAlert=function(item){this.data=angular.copy(item),this.page="addEdit",this.currentInnerPage=1,"T"==this.data.ChoiseTypeId?this.getEntityData(this.data.ChoiseTypeId,this.entityType[2]).then(function(list){this.EntityList=list}.bind(this)):this.getEntityData(this.data.ChoiseTypeId,this.entityType[this.data.SubEntityType]).then(function(list){this.EntityList=list}.bind(this)),this.getEntityData(this.data.ChoiseTypeId,this.entityType[this.data.SubEventType]).then(function(list){this.EventsList=list}.bind(this))},NotificationCtrl.prototype.removeAlert=function(item){this.uibPopUpService.open(this.mGeneralSetting.ModalType.OkCancelDialog,{message:globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotificationOkCancelDialogDesc,title:globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotificationSettingsTitle}).result.then(function(){this.notificationProxy.remvoeAlert(item.ProfileId).then(function(){this.$log.debug("Removed alert success"),this.notslist.splice(this._.findIndex(this.notslist,{ProfileId:item.ProfileId}),1)}.bind(this))}.bind(this))},NotificationCtrl.prototype.saveGeneralSettings=function(){this.notificationProxy.saveSettings(this.settings).then(function(){this.$log.debug("setting has been saved");var curDate=new Date;this.isAllAlertsDisable=2==this.settings.AlertActiveStatusId||3==this.settings.AlertActiveStatusId&&curDate>=this.settings.AccountDisableFrom.setHours(0,0,0,0)&&curDate<=this.settings.AccountDisableTo.setHours(23,59,0,0),this.showAlert(globalTrans[this.mGeneralSetting.Lang].mayaStrings.UpdSuccMsg,globalTrans[this.mGeneralSetting.Lang].mayaStrings.UpdSuccTitle,!1)}.bind(this),function(err){this.showAlert(globalTrans[this.mGeneralSetting.Lang].mayaStrings.UpdErrMsg,globalTrans[this.mGeneralSetting.Lang].mayaStrings.UpdErrTitle,!0)}.bind(this))},NotificationCtrl.prototype.cancelAlert=function(){this.uibPopUpService.open(this.mGeneralSetting.ModalType.OkCancelDialog,{message:globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotificationOkCancelDialogDesc,title:globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotificationSettingsTitle}).result.then(function(){this.data={},this.page="list"}.bind(this))},NotificationCtrl.prototype.displaySavingAlert=function(){"addEdit"==this.page&&(this.data={}),this.page="list"},NotificationCtrl.prototype.setActive=function(nots,isActive){this.notificationProxy.setActiveAlert(nots.ProfileId,isActive).then(function(){nots.IsActive=!nots.IsActive}.bind(this))},NotificationCtrl.prototype.enableDisableCheck=function(type,entity){[3e3,3001,5e3,10].forEach(function(allECodes){if(entity.Id==allECodes&&this.data[type]&&1==this.data[type][entity.Id])for(var e in this.data[type])e!=entity.Id&&(this.data[type][e]=!1);else this.data[type]&&this.data[type][allECodes]&&(this.data[type][allECodes]=!1)}.bind(this))},NotificationCtrl.prototype.fakeResolve=function(){var $q=this.$q,$timeout=this.$timeout;return $q(function(resolve,reject){$timeout(function(){resolve()},0)}).then(function(){return""})},NotificationCtrl.prototype.displayAlert=function(nots){nots.chooseAlertDesc="";var arr=[],$q=this.$q,_=(this.$timeout,this._),p1=this.getEntityData(nots.ChoiseTypeId,this.entityType[nots.SubEntityType]),p2=this.getEntityData(nots.ChoiseTypeId,this.entityType[nots.SubEventType]),p3=this.fakeResolve();arr.push(this.chooseTypeEnum[nots.ChoiseTypeId]);var thenFn1=function(val){var arrEntity=[];for(var p in nots.Entity)if(1==nots.Entity[p]){var n=_.filter(val,{Id:parseInt(p)});n&&0<n.length&&arrEntity.push(n[0].Name)}return arrEntity.sort()}.bind(this),thenFn2=function(val){var arrEntity=[];if(6===nots.SubEventType)arrEntity.push(globalTrans[this.mGeneralSetting.Lang].mayaStrings.issuance);else for(var p in nots.Events)if(1==nots.Events[p]){var n=_.filter(val,{Id:parseInt(p)});n&&0<n.length&&arrEntity.push(n[0].Name)}return arrEntity.sort()}.bind(this),thenDefineAlertFn=function(){var arr=[];switch(nots.ChoiseTypeId){case"C":arr.push(nots.OnlyBreakingAnnoucement?"מתפרצות בלבד":"כל ההודעות");break;case"T":arr.push("כל ההודעות");break;case"F":arr.push(nots.OnlyForTaseMember?"הודעות ללקוחות":"כל ההודעות")}return arr}.bind(this);return function(){nots.IsOpen?nots.IsOpen=!1:$q.all([p1.then(thenFn1),p2.then(thenFn2),p3.then(thenDefineAlertFn)]).then(function(values){arr.push(values[0].join(",")),arr.push(values[1].join(",")),arr.push(values[2]),nots.chooseAlertDesc=arr.join(' <i class="mf mf-arrow-left"></i> '),nots.IsOpen=!0})}},NotificationCtrl.prototype.setSearchFocus=function(nSearchInput){angular.element(document.getElementById(nSearchInput)).focus()},NotificationCtrl.prototype.setDefaultDates=function(){this.frmGeneralSettings.$invalid&&(this.settings.AccountDisableFrom=new Date,this.settings.AccountDisableTo=new Date)},NotificationCtrl.prototype.selectSubEvent=function($event,id){5==id&&angular.isDefined(this.data.Entity)&!(10 in this.data.Entity&&!0===this.data.Entity[10])?($event.stopPropagation(),$event.target.blur(),this.uibPopUpService.open(this.mGeneralSetting.ModalType.PopUpMessage,{message:"יש לסמן כל הקרנות במסך קודם",title:"בחירת אירועים"})):(this.queryEventList="",this.selectSubEventType($event,id))},NotificationCtrl.prototype.changeAlert=function(){return this.uibPopUpService.open(this.mGeneralSetting.ModalType.OkCancelDialog,{message:globalTrans[this.mGeneralSetting.Lang].mayaStrings.Continue,title:globalTrans[this.mGeneralSetting.Lang].mayaStrings.NotChangeDialogTitle}).result},PollingToasterCtrl.prototype.runPolling=function(){var isEnabled=!localStorage.pollingEnabled||"true"==localStorage.pollingEnabled;if(this.isToasterOpened=isEnabled,this.isToasterOpened&&!this.isToasterRunning){this.isToasterRunning=!0;this._notificationProxy,localStorage.lastPolling;localStorage.lastPolling&&new Date(localStorage.lastPolling).getDay()==(new Date).getDay()&&new Date(localStorage.lastPolling).getMonth()==(new Date).getMonth()?new Date(localStorage.lastPolling):localStorage.lastPolling=new Date,this.isToasterRunning=!0}},PollingToasterCtrl.prototype.turnOnNotification=function(){localStorage.lastPolling=new Date,this.isToasterOpened=!this.isToasterOpened,localStorage.pollingEnabled=this.isToasterOpened,this.isToasterOpened&&this.isToasterRunning,this.runPolling()},PollingToasterCtrl.prototype.processPolling2=function(data){var that=this;if(that.isToasterRunning=!1,0<data.length&&that.isToasterOpened){that.pollItems.push(data),localStorage.lastPolling=data[0].PubDate;for(var i=0;i<data.length;i++)that._toaster.pop("info",data[i].Title,'<div class="toasterSubject">'+data[i].Subject+'</div><a class="hidden" href="'+data[i].Link+'" </a><div class="toasterTime">'+data[i].PubDate.substr(11,5)+"</div>",17e3,"trustedHtml",function(toaster,isClose){if(!isClose){var match=toaster.body.match(/href="([^\'\"]+)/g);if(match){var href=match[0].split("href=")[1];return href=href.replace('"',"/"),that.location.url(href),!0}}return!0})}that.isToasterOpened&&setTimeout(function(){that.runPolling()},15e3)},PollingToasterCtrl.prototype.processPolling=function(data){if(that.isToasterRunning=!1,localStorage.lastPolling=data.TimeStamp,0<data.DataItem.length&&that.isToasterOpened){that.pollItems.push(data.DataItem);for(var i=0;i<data.DataItem.length;i++)that._toaster.pop("info",data.DataItem[i].Title,'<div class="toasterSubject">'+data.DataItem[i].Subject+'</div><a class="hidden" href="'+data.DataItem[i].Link+'" </a><div class="toasterTime">'+data.DataItem[i].PubDate.substr(11,5)+"</div>",17e3,"trustedHtml",function(toaster,isClose){if(!isClose){var match=toaster.body.match(/href="([^\'\"]+)/g);if(match){var href=match[0].split("href=")[1];return href=href.replace('"',"/"),that.location.url(href),!0}}return!0})}that.isToasterOpened&&setTimeout(function(){that.runPolling()},15e3)},mi.service("loginService",function(){var funcs=[];return{onLogin:function(fn){return funcs.push(fn),function(){funcs=funcs.filter(function(f){return f!==fn})}},invoke:function(fn){funcs.forEach(function(f){f()})}}}),mi.directive("accountMenu",function(AccountProxy,$timeout){return{restirct:"EA",templateUrl:"src/account/directives/menu/menu.html",controller:AccountCtrl,bindToController:!0,controllerAs:"accCtrl",link:function(scope,element,attr){}}}),mi.directive("accountCheckRequired",function(){return{restirct:"A",require:"ngModel",controller:AccountCtrl,bindToController:!0,controllerAs:"accCtrl",link:function(scope,element,attr,ngModel){ngModel.$validators.checkRequired=function(modelValue,viewValue){var value=modelValue||viewValue,match=scope.$eval(attr.ngTrueValue)||!0;return value&&match===value}}}}),mi.directive("compareTo",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(scope,element,attr,ngModel){ngModel.$validators.compareTo=function(modelValue){return modelValue==scope.otherModelValue},scope.$watch("otherModelValue",function(){ngModel.$validate()})}}}),mi.directive("pwdStrength",function(){return{require:"ngModel",restrict:"A",link:function(scope,element,attr,ctrl){var pwdvalidLen,pwdHasNumber,pwdHasLetter,pwdHasInvalidSymbol;scope.$watch("regCtrl.registrationData.Password",function(newVal){pwdvalidLen=!!(newVal&&8<=newVal.length),pwdHasNumber=!(!newVal||!/\d/.test(newVal)),pwdHasLetter=!(!newVal||!/[a-zA-Z]/.test(newVal)),newVal&&/[-_!@#$^*.,?;)(]/.test(newVal),pwdHasInvalidSymbol=!(!newVal||!/[+%&|:~`'/\\{}<>]/.test(newVal)),pwdvalidLen&&pwdHasNumber&&pwdHasLetter&&!pwdHasInvalidSymbol?ctrl.$setValidity("pattern",!0):(ctrl.pwdHasNumber=pwdHasNumber,ctrl.pwdHasLetter=pwdHasLetter,ctrl.pwdHasInvalidSymbol=pwdHasInvalidSymbol,ctrl.$setValidity("pattern",!1))}),scope.$watch("arpc.user.Password",function(newVal){pwdvalidLen=!!(newVal&&8<=newVal.length),pwdHasNumber=!(!newVal||!/\d/.test(newVal)),pwdHasLetter=!(!newVal||!/[a-zA-Z]/.test(newVal)),newVal&&/[-_!@#$^*.,?;)(]/.test(newVal),pwdHasInvalidSymbol=!(!newVal||!/[+%&|:~`'/\\{}<>]/.test(newVal)),pwdvalidLen&&pwdHasNumber&&pwdHasLetter&&!pwdHasInvalidSymbol?ctrl.$setValidity("pattern",!0):(ctrl.pwdHasNumber=pwdHasNumber,ctrl.pwdHasLetter=pwdHasLetter,ctrl.pwdHasInvalidSymbol=pwdHasInvalidSymbol,ctrl.$setValidity("pattern",!1))})}}}),mi.directive("phoneNumber",function(){return{require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(scope,element,attr,ngModel){ngModel.$validators.compareTo=function(modelValue){return modelValue==scope.otherModelValue},scope.$watch("otherModelValue",function(){ngModel.$validate()})}}}),mi.directive("accountRecaptcha",function($http,$log,RecaptchaService){return{restirct:"A",templateUrl:"src/account/directives/recaptcha/recaptcha.html",controller:function(){this._RecaptchaService=RecaptchaService},bindToController:!0,controllerAs:"vm",link:function(scope,element,attr){var ctrl=scope.vm;scope.$on("$destroy",function(){ctrl._RecaptchaService.clear()})}}}),mi.factory("RecaptchaService",function(vcRecaptchaService,ngConfigSetting){var _captchaResponse=null,_widgetId=null,model={key:""},service={checkValidity:function($http){var valid;$http.post("/Home/ValidateCaptcha",$scope.response).success(function(isSubmitValid){alert("Is form submit valid :"+(valid=isSubmitValid)),console.log("sending the captcha response to the server",$scope.response),valid?console.log("Success"):(console.log("Failed validation"),vcRecaptchaService.reload($scope.widgetId))})},setResponse:function(response){_captchaResponse=response},setWidgetId:function(widgetId){_widgetId=widgetId},cbExpiration:function(){_captchaResponse=null},reload:function(){if(null==_widgetId)return;vcRecaptchaService.reload(_widgetId)},clear:function(){_captchaResponse=null},initKey:function(){model.key=ngConfigSetting.apiRecaptchaClientKey}};return Object.defineProperty(service,"model",{get:function(){return model}}),Object.defineProperty(service,"captchaResponse",{get:function(){return _captchaResponse}}),Object.defineProperty(service,"widgetId",{get:function(){return _widgetId}}),service}),mi.directive("accountRegistration",function(){function RegisterCtrl($scope,RecaptchaService,AccountProxy,modalService,mGeneralSetting,blockUI){this._AccountProxy=AccountProxy,this._RecaptchaService=RecaptchaService,this._modalService=modalService,this._mModalType=mGeneralSetting.ModalType,this._blockUI=blockUI,this.regSuccess=!1,this._mGeneralSetting=mGeneralSetting,this.message="",this.submitted=!1,this.regTmpData={area:"",phone:"",agreement:!1},this.registrationData={FirstName:"",LastName:"",PhoneNumber:"",Email:"",Password:"",ConfirmPassword:"",Captcha:""}}return RegisterCtrl.prototype.register=function(isValid){if(isValid){var blockUI=this._blockUI;0<this.regTmpData.area.length&&this.regTmpData.phone&&(this.registrationData.PhoneNumber=this.regTmpData.area+"-"+this.regTmpData.phone),this._RecaptchaService.captchaResponse&&(this.registrationData.Captcha=this._RecaptchaService.captchaResponse);var proxy=this._AccountProxy;blockUI.start(),proxy.saveRegistration(this.registrationData).then(function(data){blockUI.stop(),this.regSuccess=!0,this.message="";var newLine=String.fromCharCode(13,10),msgStr=globalTrans[this._mGeneralSetting.Lang].mayaStrings.RegistrationSuccessMessage.replace("\\n",newLine);this._modalService.resolve({message:msgStr,title:globalTrans[this._mGeneralSetting.Lang].mayaStrings.RegistrationSuccessTitle})}.bind(this),function(data){blockUI.stop(),this._RecaptchaService.clear(),this._RecaptchaService.reload();var errors=[];for(var key in data.ModelState)for(var i=0;i<data.ModelState[key].length;i++)errors.push(data.ModelState[key][i]);this.message=errors[0]}.bind(this))}},RegisterCtrl.prototype.clearData=function(){this.registrationData={FirstName:"",LastName:"",PhoneNumber:"",Email:"",Password:"",ConfirmPassword:""},this.regTmpData={area:"",phone:"",agreement:!1},this.message="",this.submitted=!1,this.regSuccess=!1},RegisterCtrl.prototype.closeModalPage=function(type,isModal){this.clearData(),this._RecaptchaService.clear(),this._modalService.reject()},{restirct:"EA",templateUrl:"src/account/directives/registration/registration.html",controller:RegisterCtrl,bindToController:!0,controllerAs:"regCtrl",link:function(scope,element,attr){$(window).width()<=991&&$("html,body").animate({scrollTop:0})}}}),mi.factory("RegistrationService",function(AccountProxy,MayaOverlay,_){var accP=AccountProxy,mayaOverlay=MayaOverlay,boxType=AccountProxy.authentication.isAuth?3:1,isOpened=!1,services={openPage:function(type,isModal){boxType=type,isOpened=!0,isModal&&mayaOverlay.show()},closeModalPage:function(type,isModal){boxType=accP.authentication.isAuth?3:1,isOpened=!1,isModal&&mayaOverlay.hide()},register:AccountProxy.register};return Object.defineProperty(services,"boxType",{get:function(){return boxType},set:function(value){boxType=value}}),Object.defineProperty(services,"isOpened",{get:function(){return isOpened},set:function(value){isOpened=value}}),services}),mi.directive("accountUpdateDet",function(){function UpdateAccountCtrl($scope,RecaptchaService,AccountProxy,modalService,mGeneralSetting,blockUI){this._AccountProxy=AccountProxy,this._RecaptchaService=RecaptchaService,this._modalService=modalService,this._mModalType=mGeneralSetting.ModalType,this._blockUI=blockUI,this.regSuccess=!1,this._mGeneralSetting=mGeneralSetting,this.message="",this.submitted=!1,this.tmpData={area:AccountProxy.userInfo.phoneNum?AccountProxy.userInfo.phoneNum.substring(0,3):"",phone:AccountProxy.userInfo.phoneNum?AccountProxy.userInfo.phoneNum.substring(4):""},this.accDetails={FirstName:AccountProxy.userInfo.fName,LastName:AccountProxy.userInfo.lName,PhoneNumber:AccountProxy.userInfo.phoneNum,Captcha:""}}return UpdateAccountCtrl.prototype.update=function(isValid){if(isValid){var blockUI=this._blockUI;0<this.tmpData.area.length&&this.tmpData.phone&&(this.accDetails.PhoneNumber=this.tmpData.area+"-"+this.tmpData.phone),this._RecaptchaService.captchaResponse&&(this.accDetails.Captcha=this._RecaptchaService.captchaResponse);var proxy=this._AccountProxy;blockUI.start(),proxy.updateAccountDetails(this.accDetails).then(function(data){blockUI.stop(),this.regSuccess=!0,this.message="",proxy.userInfo={fName:this.accDetails.FirstName,lName:this.accDetails.LastName,phoneNum:this.accDetails.PhoneNumber},this._modalService.resolve({message:globalTrans[this._mGeneralSetting.Lang].mayaStrings.UpdDetailsSuccessMessage,title:globalTrans[this._mGeneralSetting.Lang].mayaStrings.UpdDetailsSuccessTitle})}.bind(this),function(data){blockUI.stop();var errors=[];for(var key in data.ModelState||errors.push("Error occured"),data.ModelState)for(var i=0;i<data.ModelState[key].length;i++)errors.push(data.ModelState[key][i]);this.message=errors[0]}.bind(this))}},UpdateAccountCtrl.prototype.clearData=function(){this.accDetails={FirstName:"",LastName:"",PhoneNumber:"",Captcha:""},this.tmpData={area:"",phone:""},this.message="",this.submitted=!1,this.regSuccess=!1},UpdateAccountCtrl.prototype.closeModalPage=function(type,isModal){this.clearData(),this._RecaptchaService.clear(),this._modalService.reject()},{restirct:"EA",templateUrl:"src/account/directives/update-details/update-details.html",controller:UpdateAccountCtrl,bindToController:!0,controllerAs:"updAccount",link:function(scope,element,attr){}}}),mi.directive("accountUpdatePwd",function(AccountProxy,$timeout){return{restirct:"EA",templateUrl:"src/account/directives/updatepwd/update-pwd.html",controller:AccountCtrl,bindToController:!0,controllerAs:"accCtrl",link:function(scope,element,attr){scope.accCtrl;scope.$watch("accCtrl.boxType",function(newValue,oldValue){4==newValue&&$timeout(function(){var first=document.getElementById("agentEmailUpd");first&&first.focus()},100),4==oldValue&&oldValue!=newValue&&(scope.accCtrl.resetPwd={})})}}}),mi.directive("accountResetPwd",function(){function AccountResetPwdCtrl($scope,$route,$sce,AccountProxy,RecaptchaService,modalService,uibPopUpService,mGeneralSetting,blockUI){this._AccountProxy=AccountProxy,this._RecaptchaService=RecaptchaService,this._modalService=modalService,this._uibPopUpService=uibPopUpService,this._mGeneralSetting=mGeneralSetting,this._blockUI=blockUI,this.token=$route.current.params.token,this.id=$route.current.params.id,this._sce=$sce,this.submitted=!1,this.message="";this.user=new function(id,token){return{id:id,Code:token,Password:"",ConfirmPassword:""}}(this.id,this.token),$scope.close=modalService.resolve}return AccountResetPwdCtrl.prototype.resetpwd=function(isValid){if(isValid){var blockUI=this._blockUI,proxy=this._AccountProxy,csrfVal=angular.element('input[name="__RequestVerificationToken"]').attr("value");blockUI.start(),proxy.resetPassword(angular.copy(this.user),csrfVal).then(function(data){blockUI.stop();this._mGeneralSetting.ModalType;""==data?this._modalService.resolve({message:globalTrans[this._mGeneralSetting.Lang].mayaStrings.ResetPasswordSuccessMessage,title:globalTrans[this._mGeneralSetting.Lang].mayaStrings.ResetPasswordTitle}):this.message=globalTrans[this._mGeneralSetting.Lang].mayaStrings.GeneralMessage}.bind(this),function(data){blockUI.stop();var errors=[];if(data.ModelState)if(data.ModelState.TOKEN_EXPIRE)this._modalService.reject({message:globalTrans[this._mGeneralSetting.Lang].mayaStrings.ResetPasswordTokenExpireMessage,title:globalTrans[this._mGeneralSetting.Lang].smartAgentResetPasswordTitle});else for(var key in data.ModelState)for(var i=0;i<data.ModelState[key].length;i++)errors.push(data.ModelState[key][i]);else errors.push("Error occured");this.message=errors[0]}.bind(this))}},{restirct:"EA",scope:{token:"@"},templateUrl:"src/account/directives/resetpwd/reset-pwd.html",controller:AccountResetPwdCtrl,bindToController:!0,controllerAs:"arpc"}}),mi.directive("accountUnsubscribeForm",function(){function AccountUnsubscribeFormCtrl($scope,$route,$sce,AccountProxy,RecaptchaService,modalService,uibPopUpService,mGeneralSetting,blockUI){this._AccountProxy=AccountProxy,this._RecaptchaService=RecaptchaService,this._modalService=modalService,this._uibPopUpService=uibPopUpService,this._mGeneralSetting=mGeneralSetting,this._blockUI=blockUI,this.token=$route.current.params.token,this._sce=$sce,this.message="",this.sendUnsubscr={Email:"",submitted:!1,bSuccess:!1},$scope.close=modalService.resolve}return AccountUnsubscribeFormCtrl.prototype.sendUnsubscribe=function(IsValid){this.sendUnsubscr.submitted=!0;var that=this;if(IsValid){var blockUI=this._blockUI,proxy=this._AccountProxy,sendData={Email:this.sendUnsubscr.Email};this._RecaptchaService.captchaResponse&&(sendData.Captcha=this._RecaptchaService.captchaResponse),blockUI.start(),proxy.sendUnsubscribe(sendData).then(function(data){blockUI.stop(),""==data?this._modalService.resolve({message:globalTrans[that._mGeneralSetting.Lang].mayaStrings.SendUnsubscribeMessage,title:globalTrans[that._mGeneralSetting.Lang].mayaStrings.SendUnsubscribeTitle}):this.message=globalTrans[that._mGeneralSetting.Lang].mayaStrings.GeneralMessage,this.message="",this.sendUnsubscr.bSuccess=!0}.bind(this),function(data){blockUI.stop();var errors=[];for(var key in this.sendUnsubscr.bSuccess=!1,data.ModelState)for(var i=0;i<data.ModelState[key].length;i++)errors.push(data.ModelState[key][i]);this.message=errors[0]}.bind(this))}},{restirct:"EA",templateUrl:"src/account/directives/unsubscribeform/unsubscribeform.html",controller:AccountUnsubscribeFormCtrl,bindToController:!0,controllerAs:"unsubForm",link:function(scope,element,attr){scope.accCtrl.closeUnsubscribe=function(){}}}}),mi.directive("accountUnsubscribe",function(AccountProxy,modalService){function UnsubscribeCtrl($scope){this.message="",this.submitted=!1,this.unregSuccess=!1,this.emailAddr=modalService.params().email,this.token=modalService.params().token,$scope.cancel=modalService.resolve}return UnsubscribeCtrl.prototype.unsubscribeAccount=function(isValid){if(isValid){var proxy=AccountProxy,unsubscribeData={Email:this.emailAddr,Token:this.token};proxy.unsubscribeEmail(unsubscribeData).then(function(data){this.unSuccess=!0,this.message=""}.bind(this),function(data){var errors=[];for(var key in data.ModelState)for(var i=0;i<data.ModelState[key].length;i++)errors.push(data.ModelState[key][i]);this.message=errors[0]}.bind(this))}},{restirct:"EA",templateUrl:"src/account/directives/unsubscribe/unsubscribe.html",controller:UnsubscribeCtrl,controllerAs:"vm",bindToController:!0,link:function(scope,element,attr){}}}),mi.factory("AccountProxy",["$http","$q","$log","$timeout","localStorageService","ngAuthSettings","pushNotificationService","ngConfigSetting","angularAuth0","loginService","mayauthService",function($http,$q,$log,$timeout,localStorageService,ngAuthSettings,pushNotificationService,ngConfigSetting,angularAuth0,loginService,mayauthService){var authServiceFactory={},_authentication={isAuth:!1,token:"",userName:"",fName:"",headers:{}},_userInfo={fName:"",lName:"",phoneNum:""},_LoggedStatus={Login:1,Logout:2};Object.defineProperty(authServiceFactory,"authentication",{get:function(){return _authentication}}),Object.defineProperty(authServiceFactory,"LoggedStatus",{get:function(){return _LoggedStatus}}),Object.defineProperty(authServiceFactory,"userInfo",{get:function(){return _userInfo},set:function(info){_userInfo=info}});return authServiceFactory.sendUnsubscribe=function(data){var defer=$q.defer();return $http.post(ngConfigSetting.api+"account/sendunsubscribe",data).success(function(response){defer.resolve(response)}).error(function(err,status){defer.reject(err)}),defer.promise},authServiceFactory.unsubscribeEmail=function(data){var defer=$q.defer();return $http.post(ngConfigSetting.api+"account/unregister",data).success(function(response){defer.resolve(response)}).error(function(err,status){defer.reject(err)}),defer.promise},authServiceFactory.fillAuthData=function(uinf){if(uinf){var domain="https://"+ngConfigSetting.auth0CustomDomain;_authentication.isAuth=!0,_authentication.userName=uinf.nickname,_authentication.fName=uinf[domain+"/user_metadata/first_name"]?uinf[domain+"/user_metadata/first_name"]:uinf.given_name,_authentication.lName=uinf[domain+"/user_metadata/last_name"]?uinf[domain+"/user_metadata/last_name"]:uinf.family_name,_userInfo.fName=_authentication.fName,_userInfo.lName=_authentication.lName,_userInfo.phoneNum=uinf[domain+"/user_metadata/mobile_phone_number"],_authentication.token=uinf.token,_authentication.headers={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+_authentication.token,Fnm:encodeURIComponent(_userInfo.fName),Lnm:encodeURIComponent(_userInfo.lName)}}return _authentication},authServiceFactory.getHeaders=function(){if(0<_authentication.token.length)return{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+_authentication.token}},authServiceFactory.setUserNotificationEvent=function(event){var defer=$q.defer();return $http({method:"POST",url:ngConfigSetting.api+"Account/SetUserNotificationEvent",data:$.param(event)}).success(function(data,status,headers,cfg){defer.resolve()}).error(function(err,status){$log.log(err),defer.reject(err)}),defer.promise},authServiceFactory.saveUserAlertSettings=function(event){var defer=$q.defer();return $http({method:"POST",url:ngConfigSetting.api+"Account/SaveAlertSettings",data:$.param(event)}).success(function(data,status,headers,cfg){defer.resolve()}).error(function(err,status){$log.log(err),defer.reject(err)}),defer.promise},authServiceFactory.resendEmail=function(){var defer=$q.defer();return $log.debug("AccountProxy._resendEmailVerify()"),$http({method:"POST",url:ngConfigSetting.api+"Account/ResendEmailVerification"}).success(function(data){defer.resolve(data)}).error(function(err,status){$log.log(err),defer.reject(!1)}),defer.promise},authServiceFactory}]),mi.factory("FavoritesProxy",["$http","$q","$log","localStorageService","ngAuthSettings","AccountProxy","ngConfigSetting",function($http,$q,$log,localStorageService,ngAuthSettings,accountProxy,ngConfigSetting){var favFactory={};return favFactory.getFavorites=function(){var defer=$q.defer();return $log.debug("FavoritesProxy.GetFavorites()"),$http({method:"GET",url:ngConfigSetting.api+"Account/GetUserFavorites",headers:accountProxy.authentication.headers}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.log(err),defer.reject(status)}),defer.promise},favFactory.saveToFavorites=function(id){var defer=$q.defer();return $log.debug("FavoritesProxy.SaveToFavorites()"),$http({method:"POST",url:ngConfigSetting.api+"Account/AddToFavorites?rptcd="+id,headers:accountProxy.authentication.headers}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.debug(err),defer.reject(status)}),defer.promise},favFactory.removeFavorites=function(id){var defer=$q.defer();return $log.debug("FavoritesProxy.RemoveFavorites()"),$http({method:"POST",url:ngConfigSetting.api+"Account/RemoveFavorites?rptcd="+id,headers:accountProxy.authentication.headers}).success(function(data,status,headers,cfg){$log.log(data),defer.resolve(data)}).error(function(err,status){$log.log(err),defer.reject(status)}),defer.promise},favFactory.getUserFavoriteReports=function(){var defer=$q.defer();return $log.debug("FavoritesProxy.getUserFavoriteReports()"),$http({method:"GET",url:ngConfigSetting.api+"Account/GetUserFavoriteReports",headers:accountProxy.authentication.headers}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.log(err),defer.reject(status)}),defer.promise},favFactory.getUserReports=function(page,search){var defer=$q.defer();return $log.debug("FavoritesProxy.getUserReports()"),$http({method:"POST",url:ngConfigSetting.api+"Account/UserReports",data:search?$.param(search):null,headers:accountProxy.authentication.headers}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.log(err),defer.reject(status)}),defer.promise},favFactory.filterUserFavoriteReports=function(ffo){var defer=$q.defer();return $log.debug("FavoritesProxy.filterUserFavoriteReports()"),$http({method:"POST",url:ngConfigSetting.api+"Account/FilterFavoriteReports",data:$.param({Page:ffo.Page,DateFrom:ffo.DateFrom.toISOString(),DateTo:ffo.DateTo.toISOString()}),headers:accountProxy.authentication.headers}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.log(err),defer.reject(status)}),defer.promise},favFactory}]),mi.factory("FavoritesService",function($rootScope,$q,AccountProxy,FavoritesProxy,localStorageService,uibPopUpService,RegistrationService,mGeneralSetting,_){var fav=[],_favProxy=FavoritesProxy,_rootScope=$rootScope,_lstorage=localStorageService,_uibPopUpService=uibPopUpService,_RegService=RegistrationService,_mGeneralSetting=mGeneralSetting,services={getFavorites:function(){if(!AccountProxy.authentication.isAuth)return;_favProxy.getFavorites().then(function(data){setFavorites(data),_rootScope.$broadcast("maya-event.setFavorite",_mGeneralSetting.Action.AddFavorite)}.bind(this))},setFavorites:setFavorites,SaveToFavorites:function(id){var RegService=_RegService;{if(AccountProxy.authentication.isAuth)return!!_lstorage.isSupported&&(_.contains(fav,id)?function(arr,id){return FavoritesProxy.removeFavorites(id).then(function(data){return setFavorites(arr=_.pull(arr,id)),!1}.bind(this))}.call(this,fav,id):function(arr,id){return FavoritesProxy.saveToFavorites(id).then(function(data){return arr.push(id),setFavorites(arr),!0}.bind(this))}.call(this,fav,id));var deferred=$q.defer();return _uibPopUpService.open(_mGeneralSetting.ModalType.PopUpMessage,{message:globalTrans[mGeneralSetting.Lang].mayaStrings.FavoriteNotLoginTitleMessage,title:globalTrans[mGeneralSetting.Lang].mayaStrings.FavoriteNotLoginTitle}).result.then(function(){deferred.reject(),setTimeout(function(){RegService.openPage(1,!1)},1)},function(){console.log("reject")}),deferred.promise}},getUserFavoriteReports:function(page){return AccountProxy.authentication.isAuth?_favProxy.getUserFavoriteReports(page):null},checkIsFav:function(id){if(!AccountProxy.authentication.isAuth)return;return null!=fav&&_.contains(fav,id)}};function setFavorites(data){fav=data,localStorageService.set("favorites",fav)}return Object.defineProperty(services,"fav",{get:function(){return fav&&0===fav.length&&(fav=[]),fav}}),Object.defineProperty(services,"authentication",{get:function(){return AccountProxy.authentication}}),services}),mi.factory("notificationProxy",function($http,$q,$log,AccountProxy,ngConfigSetting){return{saveNotification:function(data){var defer=$q.defer(),newData=angular.copy(data);newData.chooseAlertDesc&&delete newData.chooseAlertDesc;var arr=[];for(var p in newData.Entity)1==newData.Entity[p]&&arr.push(p);for(var p in newData.Entity=arr,arr=[],newData.Events)1==newData.Events[p]&&arr.push(p);return newData.Events=arr,$log.debug("notificationProxy.saveNotification()"),$http({method:"POST",url:ngConfigSetting.api+"Account/SaveNotification",data:$.param(newData),headers:AccountProxy.authentication.headers}).success(function(data,status,headers,cfg){defer.resolve(setMapNotification(data))}).error(function(err,status){$log.log(err),defer.reject(err)}),defer.promise},saveSettings:function(settings){var defer=$q.defer();$log.debug("notificationProxy.saveSettings()");var newData=angular.copy(settings);3==settings.AlertActiveStatusId&&(newData.AccountDisableFrom=settings.AccountDisableFrom.toISOString(),newData.AccountDisableTo=settings.AccountDisableTo.toISOString());return $http({method:"POST",url:ngConfigSetting.api+"Account/SaveSettings",data:$.param(newData),headers:AccountProxy.authentication.headers}).success(function(data,status,headers,cfg){defer.resolve()}).error(function(err,status){$log.log(err),defer.reject(status)}),defer.promise},remvoeAlert:function(pid){var defer=$q.defer();return $log.debug("notificationProxy.RemvoeAlert()"),$http({method:"POST",url:ngConfigSetting.api+"Account/RemvoeAlert",params:{profileId:pid},headers:AccountProxy.authentication.headers}).success(function(data,status,headers,cfg){defer.resolve()}).error(function(err,status){$log.log(err),defer.reject(status)}),defer.promise},setActiveAlert:function(pid,isActive){var defer=$q.defer();return $log.debug("notificationProxy.setActiveAlert()"),$http({method:"POST",url:ngConfigSetting.api+"Account/SetActiveAlert",data:$.param({ProfileId:pid,IsActive:isActive}),headers:AccountProxy.authentication.headers}).success(function(data,status,headers,cfg){defer.resolve()}).error(function(err,status){$log.log(err),defer.reject(status)}),defer.promise},getSmartAgentSettings:function(){var defer=$q.defer();return $log.debug("notificationProxy.getSmartAgentSettings()"),$http({method:"POST",url:ngConfigSetting.api+"Account/SmartAgentSetup",headers:AccountProxy.authentication.headers}).success(function(data,status,headers,cfg){data.na.forEach(function(item){setMapNotification(item)}),defer.resolve(data)}).error(function(data,status,header,config){$log.log(data),defer.reject(status)}),defer.promise},startToastPolling:function(lastUpdate){var defer=$q.defer();return $log.debug("notificationProxy.checkNotify()"),$http({method:"GET",url:ngConfigSetting.api+"Notification/CheckNotify",params:{lastUpdate:lastUpdate}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise}};function setMapNotification(data){var obj={};return data.Entity.forEach(function(item){obj[item]=!0}),data.Entity=obj,obj={},data.Events&&data.Events.forEach(function(item){obj[item]=!0}),data.Events=obj,data}}),mi.run(function(AccountProxy,FavoritesService,RegistrationService,mayauthService,$controller,$location,mGeneralSetting,uibPopUpService,$q,ngConfigSetting){console.log("enter factory"),$location.hash(""),mayauthService.isAuthenticated()||mayauthService.isLoggingOut()||(-1==$location.hash().indexOf("access_token")?mayauthService.renewTokens().then(function(authResult){if(authResult){var token=authResult.accessToken;mayauthService.getAuthUserInfo(authResult).then(function(uinf){if(!uinf.email_verified){var deferred=$q.defer();return uibPopUpService.open(mGeneralSetting.ModalType.PopUpMessage,{message:globalTrans[mGeneralSetting.Lang].mayaStrings.EmailNotVerifiedMessage+uinf.email,title:globalTrans[mGeneralSetting.Lang].mayaStrings.EmailNotVerifiedTitleMessage}).result.then(function(){console.log("sent email "+data);var _redirectTo=-1<$location.path().indexOf("/en")?ngConfigSetting.auth0EngRedirectUri.split("/account")[0]:ngConfigSetting.auth0RedirectUri.split("/account")[0];console.log("logout redirect to -> "+_redirectTo),mayauthService.logout(_redirectTo),deferred.reject()},function(){console.log("reject")}),deferred.promise}uinf.token=token,AccountProxy.fillAuthData(uinf),FavoritesService.getFavorites(),RegistrationService.boxType=3;$controller("AccountCtrl");var r=localStorage.getItem("redirectTo");localStorage.removeItem("redirectTo"),r&&0<r.length&&$location.path(r)})}}):console.log("else log"))}),mi.factory("refreshVirtualScroll",function($timeout){return function(){$timeout(function(){var elem=$("[vs-scroller]:visible");elem.scrollTop(0),elem.scrollTop(1)})}}),mi.service("mayauthService",mayauthService,["$location","angularAuth0","$timeout","$q","mGeneralSetting"]),mayauthService.$inject=["$location","angularAuth0","$timeout","$q","mGeneralSetting"],mi.factory("auth0Interceptor",["$q","$timeout","$location","mGeneralSetting","mayauthService","loginService",function($q,$timeout,$location,mGeneralSetting,mayauthService,loginService){return{request:function(config){var token=mayauthService.getAccessToken();return 0<config.url.indexOf("/api")&&token?config.headers.Authorization="Bearer "+token:0<config.url.indexOf("/api/Account")&&!token&&mayauthService.login(),config}}}])}(angular);
!function(angular){"use strict";angular.module("sitemap",[]).controller("SitemapCtrl",function(mGeneralSetting){console.log("sitemap Ctrl"),this.isEng=mGeneralSetting.Lang===mGeneralSetting.LangStates.English})}(angular);
!function(angular){"use strict";var mi=angular.module("indices",[]);mi.factory("indicesProxy",function($http,$log,$q,ngAuthSettings,ngConfigSetting){function indicesProxy(){}return indicesProxy.prototype.getIndices=function(){var defer=$q.defer();return $log.debug("homeProxy.getIndices()"),$http.get(ngConfigSetting.api+"Index/Indices").then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},new indicesProxy}),mi.directive("indices",function($rootScope,$window,$log,indicesProxy,$interval,notificationStatesHelper,safeApply,ngConfigSetting,changeLangFactory,mGeneralSetting){function IndicesCtrl(){if(this._indicesProxy=indicesProxy,this.indices=[],this.timeInterval=3e4,this._interval=$interval,this._window=$window,this.firstLoad=!1,this.isEng=mGeneralSetting.Lang===mGeneralSetting.LangStates.English,changeLangFactory.onChangLang(function(){this._indicesProxy.getIndices().then(function(data){data&&0<data.length&&(this.indices=data,this.setIndexLink())}.bind(this))}.bind(this)),ngConfigSetting.socketEnabled){var apiStateHelper=notificationStatesHelper,self=this;apiStateHelper.socket.on("onIndices",function(parsedIndices){!0===apiStateHelper.socket.connected&&self.stop(),$rootScope.safeApply(function(){safeApply(parsedIndices.indices),self.indices=parsedIndices.indices})}),apiStateHelper.socket.on("connect",function(){$log.debug("State helper Connected"),this.stop()}.bind(this)),apiStateHelper.socket.on("disconnect",function(){$log.debug("State helper Disconnected"),this.start()}.bind(this)),!0===apiStateHelper.socket.connected&&this.stop()}}return IndicesCtrl.prototype.setColor=function(change){var num=parseFloat(change);return num<0?"stockData stockDown":0<num?"stockData stockUp":"stockStable"},IndicesCtrl.prototype.setMarketTrend=function(change){var num=parseFloat(change);return num<0?"mf mf-arrow_down_i":0<num?"mf mf-arrow_up_i":""},IndicesCtrl.prototype.changeWithSign=function(change){var num=parseFloat(change),abs_ch=Math.abs(change);return num<0?abs_ch+"%-":0<num?abs_ch+"%+":abs_ch+"%"},IndicesCtrl.prototype.init=function(){this.start()},IndicesCtrl.prototype.stop=function(){var interval=this._interval;this.unInterval&&(interval.cancel(this.unInterval),this.unInterval=void 0)},IndicesCtrl.prototype.start=function(time){var proxy=this._indicesProxy,interval=this._interval;function getIndices(){this._window.innerWidth<991?this.stop():proxy.getIndices().then(function(data){data&&0<data.length&&(this.indices=data,this.setIndexLink())}.bind(this))}time=time||this.timeInterval,this.unInterval&&this.stop(),this.unInterval=interval(function(){getIndices.call(this)}.bind(this),time),this.firstLoad||(getIndices.call(this),this.firstLoad=!0)},IndicesCtrl.prototype.setIndexLink=function(){var that=this;angular.forEach(this.indices,function(ind){ind.Link=that.isEng?"https://www.tase.co.il/en/market_data/index/"+ind.IndexNumber+"/major_data":"https://www.tase.co.il/he/market_data/index/"+ind.IndexNumber+"/major_data"})},{restrict:"EA",scope:{},templateUrl:"src/indices/indices.html",controller:IndicesCtrl,bindToController:!0,controllerAs:"vmi",link:function(scope,element,attr){var ctrl=scope.vmi;ctrl.start(),scope.$on("$destroy",function(){ctrl.stop()})}}})}(angular);
!function(angular){"use strict";var mi=angular.module("fund",[]);function FundDetailsCtrl($scope,$location,fundProxy,$routeParams,dataStorage,Fund,TitleService,MetaTagService,ngConfigSetting,utility,jsonService,BaseCtrl,HistoryFilterFactory,blockUI,mGeneralSetting,$filter,mayauthService){this._Fund=Fund,this.blockUI=blockUI,this._FundProxy=fundProxy,this._$location=$location,this._HistoryFilterFactory=HistoryFilterFactory,this._dataStorage=dataStorage,this._utility=utility,this._TitleService=TitleService,this._MetaTagService=MetaTagService,this._jsonService=jsonService,this._ngConfigSetting=ngConfigSetting,this.fundId=$routeParams.id,this.exportKeyArgs=[$routeParams.id],this.pageSize=mGeneralSetting.ReportPageSize,this._mGeneralSetting=mGeneralSetting,this.page=1,this.showAll=!1,this.fund="",this.fundHistory={},this.isShow=!1,this.isGetFund=!1,this.tabPage=this.SetTabByParam($routeParams.view),this.sortType="FundPercentage",this.sortReverse=!0,this.pieData=[],this.pieLabels=[],this.piecolorArray=["#f78e1e","#017fad","#0a3f76","#145702","#006182","#666666","#1d7e02","#222222","#08315c"],this.mayauthService=mayauthService,Object.defineProperty(this,"filterParams",{get:function(){return HistoryFilterFactory.filterParams}}),Object.defineProperty(this,"isLoggedIn",{get:function(){return mayauthService.isAuthenticated()}}),this.pieOptions={tooltipTemplate:"<% if (value>0)%><%= value %>%"},this.orderBy=$filter("orderBy"),this.startFrom=$filter("startFrom"),this.limitTo=$filter("limitTo"),this.legendLink=location.protocol+"//"+this._ngConfigSetting.mayaFilesBaseUrl+"/docs/LegendOfFund.xls",BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype),Object.defineProperty(this,"PageInfo",{get:function(){return dataStorage.reports.pageInfo}}),$scope.$on("$routeUpdate",function(){var param=$location.search();if(param&&param.q&&"reports"!==param.view)blockUI.start(),this.collectURLParamters(param.q),this.tabPage=param.view,this.filter();else if(this.tabPage=param.view||"details","history"===this.tabPage){var res=dataStorage.funds.getById(this.fundId);res?(this.fundHistory.Table=angular.copy(res.fundHistory.Table),this.totalPage=res.fundHistory.Total,this.filterItems=this._HistoryFilterFactory.filterParams||this.filterItems):this.filter()}}.bind(this))}function FundManagerDetailsCtrl($scope,$location,fundProxy,$routeParams,dataStorage,FundManager,jsonService,BaseCtrl,breadcrumbs,TitleService,MetaTagService,mGeneralSetting,blockUI,sharedScrollFactory,mayauthService){this._FundManager=FundManager,this._FundProxy=fundProxy,this._dataStorage=dataStorage,this._$location=$location,this.blockUI=blockUI,this.sharedScrollFactory=sharedScrollFactory,this._mGeneralSetting=mGeneralSetting,this._jsonService=jsonService,this._TitleService=TitleService,this._MetaTagService=MetaTagService,this.fundmanagerId=$routeParams.id,this.fundmanager="",this.address="",this.isShow=!1,this.tabPage=this.SetTabByParam($routeParams.view),this.isGetFundMng=!1,this.funds=[],this.fundTableColumnDefinition=[],this.mgrAssetsTblColDef=[],this.exportKeyArgs=[$routeParams.id],this.actionPrint=!(!$routeParams.action||"print"!=$routeParams.action),this.tableHeader=globalTrans[mGeneralSetting.Lang].mayaStrings.FundsListTitle,this.mgrAssetTblHeader=globalTrans[mGeneralSetting.Lang].mayaStrings.FundManagerAssets,this.sortType="FundShortName",this.sortReverse=!1,this.displayAssets=!1,this.currentPage=1,this.mRepLink="",BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype),this.busy=!0,this.pageSize=mGeneralSetting.ReportPageSize,this.mayauthService=mayauthService,Object.defineProperty(this,"PageInfo",{get:function(){return dataStorage.reports.pageInfo}}),Object.defineProperty(this,"isLoggedIn",{get:function(){return mayauthService.isAuthenticated()}}),$scope.$on("$routeUpdate",function(){var param=$location.search();param&&param.view?this.tabPage=param.view:this.tabPage="details"}.bind(this))}function FundsCtrl($scope,$routeParams,$filter,$location,BaseCtrl,dataStorage,jsonService,localStorageService,fundProxy,breadcrumbs,etfProxy,hedgefundProxy,foreignETFProxy,_,mGeneralSetting,FundFilterFactory,TitleService,MetaTagService,blockUI,sharedScrollFactory){this._fundProxy=fundProxy,this._etfProxy=etfProxy,this._hedgefundProxy=hedgefundProxy,this._foreignETFProxy=foreignETFProxy,this._dataStorage=dataStorage,this._jsonService=jsonService,this.blockUI=blockUI,this.localStorageService=localStorageService,this._TitleService=TitleService,this._MetaTagService=MetaTagService,this._mGeneralSetting=mGeneralSetting,this.sharedScrollFactory=sharedScrollFactory,this._=_,this.$location=$location,this._FundFilterFactory=FundFilterFactory,this.funds=void 0,this.tabPage=this.setTabByParam($routeParams.view),this.fundsOrigin=[],this.fundTableColumnDefinition=[],this.mgerAssetTblColDef=[],this.etfTblColDef=[],this.hedgeFundTblColDef=[],this.exportKeyArgs=[],this.actionPrint=!(!$routeParams.action||"print"!=$routeParams.action),this.tableHeader=globalTrans[mGeneralSetting.Lang].mayaStrings.FundsListTitle,this.isDataLoaded=!1,this.currentPage=1,this.pageSize=mGeneralSetting.DefaultPageSize,this.sortType="FId",this.sortReverse=!1,this.funds=[],this.addResults=!1,this.pageConfig={},this.allFundsTblColDef=jsonService.getTemplateByTemplateName("AllFundsTpl"),this.fundTableColumnDefinition=jsonService.getTemplateByTemplateName("FundsTpl"),this.hedgeFundTblColDef=jsonService.getTemplateByTemplateName("HedgeFundsTpl"),this.etfTblColDef=jsonService.getTemplateByTemplateName("ETFTpl"),this.foreignetfTblColDef=jsonService.getTemplateByTemplateName("ForeignETFTpl"),this.configs={foreignetf:{template:"foreign-etf.html",colDef:this.foreignetfTblColDef,fundType:200,proxy:this._foreignETFProxy.all,title:"נתוני קרנות חוץ נסחרות"},hedgefund:{template:"hedgefund.html",colDef:this.hedgeFundTblColDef,fundType:3,proxy:this._hedgefundProxy.all,title:"נתוני קרנות גידור בנאמנות"},etf:{template:"etf.html",colDef:this.etfTblColDef,fundType:2,proxy:this._etfProxy.all,title:"נתוני קרנות סל והייטק"},fund:{template:"fund1.html",colDef:this.fundTableColumnDefinition,fundType:1,proxy:this._fundProxy.all,title:"נתוני קרנות פתוחות"},all:{template:"all-funds.html",colDef:this.allFundsTblColDef,fundType:0,proxy:this._fundProxy.allFunds,title:"נתוני כל הקרנות"}},this.orderBy=$filter("orderBy"),this.startFrom=$filter("startFrom"),this.limitTo=$filter("limitTo"),this.filterItems={taxRouteData:{},props:{}},Object.defineProperty(this,"filterParams",{get:function(){return FundFilterFactory.filterParams}}),$scope.$on("$routeUpdate",function(){var param=$location.search();param&&param.q?(this.blockUI.start(),this.filterExistingFunds(param)):(this.filterItems={},this.tabPage==param.view?this.filter():(this.fundType=this.configs[param.view].fundType,this.loadFunds(!1,param.view,param),this.tabPage=param.view,this.pageConfig=this.configs[this.tabPage],this.tableHeader=globalTrans[this._mGeneralSetting.Lang].fundTypes[this.tabPage]))}.bind(this)),$scope.$watch("vm.filterItems.fundCd",function(newVal,old){newVal&&isNaN(newVal)&&($scope.vm.filterItems.fundCd=old)}),BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype)}function AssetCtrl($scope,$location,fundProxy,BaseCtrl,$routeParams,blockUI,jsonService,mGeneralSetting,utility){this._fundProxy=fundProxy,this.blockUI=blockUI,this._$location=$location,this.exportKeyArgs=[$routeParams.id,$routeParams.assetId],this.assetId=$routeParams.assetId,this.managerId=$routeParams.id,this.sortType="FundPercentage",this.assetTableColumnDefinition=jsonService.getTemplateByTemplateName("FundsAssetTpl"),this.tableHeader=globalTrans[mGeneralSetting.Lang].mayaStrings.FundsAssetHeader,this.sortReverse=!0,this.page=1,this.pageSize=20,this._utility=utility,BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype),this.chartConfig={type:"datetime",categories:[],subtitle:globalTrans[mGeneralSetting.Lang].mayaStrings.ChartAssetTitle[1].fldName+"ב",title:globalTrans[mGeneralSetting.Lang].mayaStrings.ChartAssetTitle[1].title,primaryFormatter:function(){parseFloat(this.value).toFixed(2)},secondaryFormatter:function(){return this.value.toLocaleString()},yPrimaryTitle:"₪ שווי הנכס במיליוני",ySecondaryTitle:"כמות",legendPrimary:"שווי הנכס",legendSecondary:"כמות",primaryChar:"",secondaryChar:"",primaryFormat:"{value}",secondaryFormat:"{value:,.0f}",xElem:"X",yElem:"Y"},$scope.$on("$routeUpdate",function(){}),this.fetch(!0)}function FundEntityFactory(proxy,$q,storage){var initQueryPromise=[];function Fund(id){this.id=id,this.fundDetails={},this.fundHistory={},this.allFunds={}}return Fund.prototype.getFundDetails=function(){initQueryPromise.push(proxy.getFundDetails(this.id).then(function(data){this.fundDetails=data}.bind(this)))},Fund.prototype.getFundHistory=function(param){param=param?JSON.parse(param):{Period:9,Page:1},angular.extend(param,{FundId:this.id}),initQueryPromise.push(proxy.getFundHistory(param).then(function(data){this.fundHistory=data}.bind(this)))},Fund.prototype.getAll=function(){proxy.all().then(function(data){this.allFunds=data}.bind(this))},Fund.prototype.load=function(param){var defer=$q.defer(),fund=storage.funds.getById(this.id);return null==fund?(this.getFundHistory(param),this.getFundDetails(),$q.all(initQueryPromise).then(function(c){angular.extend(this,{TimeStamp:new Date}),storage.funds.add(this),defer.resolve(this)}.bind(this))):(angular.extend(this,fund),defer.resolve(this)),defer.promise},Fund.prototype.loadAll=function(){return proxy.all().then(function(data){return this.allFunds=data,storage.funds.add(this),this}.bind(this))},Fund}function FundManagerEntityFactory(proxy,$q,storage){function FundManager(id){this.id=id,this.fundmanagerDetails={}}return FundManager.prototype.getFundManagerDetails=function(){proxy.getFundManagerDetails(this.id).then(function(data){this.fundmanagerDetails=data}.bind(this))},FundManager.prototype.load=function(){return proxy.getFundManagerDetails(this.id).then(function(data){return angular.extend(this,data),storage.fundmanagers.add(this),this}.bind(this))},FundManager}function AdditionalHoldingsCtrl($uibModalInstance,asset,fundProxy,viewName){this.$uibModalInstance=$uibModalInstance,this._fundProxy=fundProxy,this.asset=asset,this.additionalHoldings={},this.init(viewName)}mi.directive("setHrefFund",function(ngConfigSetting,$routeParams){return{restrict:"A",link:function(scope,elem,attr){var href=("/"===ngConfigSetting.virDir?"":ngConfigSetting.virDir)+"/fund/"+$routeParams.id+"?view="+attr.setHrefFund;elem.attr("href",href)}}}),mi.directive("setHrefFundManager",function(ngConfigSetting,$routeParams){return{restrict:"A",link:function(scope,elem,attr){var href=("/"===ngConfigSetting.virDir?"":ngConfigSetting.virDir)+"/fundmanager/"+$routeParams.id+"?view="+attr.setHrefFundManager;elem.attr("href",href)}}}),mi.directive("setHrefFundType",function(ngConfigSetting){return{restrict:"A",link:function(scope,elem,attr){var href=("/"===ngConfigSetting.virDir?"":ngConfigSetting.virDir)+"/funds?view="+attr.setHrefFundType;elem.attr("href",href)}}}),mi.controller("FundDetailsCtrl",FundDetailsCtrl),FundDetailsCtrl.prototype.collectURLParamters=function(param){this.filterItems=param?JSON.parse(param):{},this.filterItems.Page=this.filterItems.Page||1,this.filterItems.DateFrom?this.filterItems.DateFrom=new Date(this.filterItems.DateFrom):this.filterItems.DateFrom=(new Date).addMonths(-1),this.filterItems.DateTo?this.filterItems.DateTo=new Date(this.filterItems.DateTo):this.filterItems.DateTo=new Date},FundDetailsCtrl.prototype.getFundDetails=function(){this._FundProxy;var id=this.fundId,dataStorage=this._dataStorage,d=(this._Fund,new Date);this.historyTblColDef=this._jsonService.getTemplateByTemplateName("FundHistoryTpl"),this.assetsTblColDef=this._jsonService.getTemplateByTemplateName("FundAssetsTpl");var param=this._$location.search();param&&param.q?(this.collectURLParamters(param.q),param=param.q):(param=null,this.filterItems={Period:9,DateFrom:d.addMonths(-1),DateTo:new Date,Page:1}),dataStorage.funds.add(id).load(param).then(function(fund){this.logoURL=this._utility.getLogo(fund.fundDetails.ManagerId),this.fundHistory=angular.copy(fund.fundHistory),this.totalPage=fund.fundHistory.Total,this.filterItems.DateFrom=new Date(fund.fundHistory.StartDate),this.filterItems.DateTo=new Date(fund.fundHistory.EndDate),this._HistoryFilterFactory.setFilterParams(this.filterItems),this.fund=fund.fundDetails,this._TitleService.setTitle(this.fund.FundLongName,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitleShort),this._MetaTagService.setMetaTag({title:document.title,description:fund.fundDetails.MetaTag.Description,keywords:fund.fundDetails.MetaTag.Keywords}),this.setBreadCrumbs(),this.pieDataInit(),this.checkDeleted(),0<fund.fundDetails.AssetCompostion.Assets.length&&(this.remarkTitle="נכון ל-"+this._utility.formatDate(new Date(fund.fundDetails.AssetCompostion.DateValid))+", סך הכול נכסים: "+fund.fundDetails.AssetCompostion.Assets.length)}.bind(this))},FundDetailsCtrl.prototype.changeTabTo=function(view){this._$location.$$search.q&&delete this._$location.$$search.q,this._$location.search("view",view)},FundDetailsCtrl.prototype.onFilterChange=function(page,sortBy,sort){this.filterItems.Page=page||1,this.saveSearchLocation()},FundDetailsCtrl.prototype.saveSearchLocation=function(){var params=this.filterItems,p={};for(var pi in params)void 0!==params[pi]&&null!=params[pi]&&!1!==params[pi]&&("object"==typeof params[pi]&&0==Object.keys(params[pi]).length&&!params[pi]instanceof Date?p[pi]=params[pi].toDateString():p[pi]=params[pi]);p=JSON.stringify(p),this._$location.search("q",p)},FundDetailsCtrl.prototype.filter=function(){var proxy=this._FundProxy,params=angular.extend({FundId:this.fundId},this.filterItems);proxy.getFundHistory(params).then(function(data){this.setData(data.Table),this._HistoryFilterFactory.setFilterParams(this.filterItems),this.totalPage=data.Total,this.blockUI.stop()}.bind(this),function(err){this.blockUI.stop()})},FundDetailsCtrl.prototype.setData=function(data){if(this.addResults)for(var len=data.length,i=0;i<len;i++)this.fundHistory.Table.push(data[i]);else this.fundHistory.Table=angular.copy(data);this.addResults=!1},FundDetailsCtrl.prototype.setTitle=function(view){this._TitleService.setTitle(this.fund.FundLongName,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitleShort)},FundDetailsCtrl.prototype.SetTabByParam=function(view){var tabs="details,reports,assets,history".split(",");return view&&-1!=tabs.indexOf(view)?view:"details"},FundDetailsCtrl.prototype.checkDeleted=function(){for(var i=0;i<this.fund.FundIndicators.length;i++){if("MerLiqStatNm"==this.fund.FundIndicators[i].Key&&1==this.fund.FundIndicators[i].Value){this.statusDesc="("+this.fund.FundIndicators[i].Desc+")";break}if("Deleted"==this.fund.FundIndicators[i].Key&&1==this.fund.FundIndicators[i].Value){this.statusDesc="("+this.fund.FundIndicators[i].Desc+")";break}}},FundDetailsCtrl.prototype.checkSign=function(val){if(val){var num=parseFloat(val);return num<0?-1:0<num?1:0}},FundDetailsCtrl.prototype.pieDataInit=function(){for(var assetVal,lCount=0,i=0;i<this.fund.AssetRisk.length;i++)0<(assetVal=this.fund.AssetRisk[i].WeightPercentage)&&(this.pieData.push(assetVal),this.pieLabels.push(this.fund.AssetRisk[i].AssetName),this.piecolorArray.length<lCount&&this.piecolorArray.push(this.getRandomColor()),this.fund.AssetRisk[i].color=this.piecolorArray[lCount],lCount+=1)},FundDetailsCtrl.prototype.getRandomColor=function(){for(var letters="0123456789ABCDEF".split(""),color="#",i=0;i<6;i++)color+=letters[Math.floor(16*Math.random())];return color},FundDetailsCtrl.prototype.openMonthlyReport=function(){var proxy=this._FundProxy,fundId=this.fundId,utility=this._utility,monthlyReportCode=this.fund.MonthlyReportCode;proxy.getFileFundMonthlyReport(fundId,monthlyReportCode).then(function(data){utility.download(data,fundId,"CSV")})},FundDetailsCtrl.prototype.setBreadCrumbs=function(){this.BaseCtrl.pushBreadcrumbs({id:1,label:this.fund.FundLongName,url:""})},FundDetailsCtrl.prototype.loadMore=function(){this.addResults=!0,this.filterItems.Page++,this.onFilterChange(this.filterItems.Page)},FundDetailsCtrl.prototype.login=function(isSignup){this.mayauthService.login(isSignup)},FundDetailsCtrl.prototype.pagingTo=function(page,sortType,sortReverse){this.page=page},mi.controller("FundManagerDetailsCtrl",FundManagerDetailsCtrl),FundManagerDetailsCtrl.prototype.getFundManagerDetails=function(){this._FundProxy;var id=this.fundmanagerId,dataStorage=this._dataStorage,jsonService=(this._FundManager,this._jsonService);this.blockUI.start(),this.fundTableColumnDefinition=jsonService.getTemplateByTemplateName("FundManagerTpl"),this.mgrAssetsTblColDef=jsonService.getTemplateByTemplateName("FundManagerAssetsTpl"),dataStorage.fundmanagers.add(id).load().then(function(data){this.fundmanager=data,this._TitleService.setTitle(this.fundmanager.FundManagerLongName,globalTrans[this._mGeneralSetting.Lang].mayaStrings.FundManagerTitle,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle),this._MetaTagService.setMetaTag({title:document.title,description:data.MetaTag.Description,keywords:data.MetaTag.Keywords}),this.funds=data.Funds,this.total=data.Funds.length,data.AssetCompostion.Assets&&0<data.AssetCompostion.Assets.length&&(this.displayAssets=!0),this.setBreadCrumbs(),this.mRepLink=this.fundmanager.MonthlyReportCode?"reports/details/"+this.fundmanager.MonthlyReportCode:"",this.address=data.Address+", "+data.City+(null!=data.Zip?", "+data.Zip:""),this.busy=!1,this.blockUI.stop()}.bind(this))},FundManagerDetailsCtrl.prototype.changeTabTo=function(view){this._$location.$$search.q&&delete this._$location.$$search.q,this._$location.search("view",view)},FundManagerDetailsCtrl.prototype.setTitle=function(view){this._TitleService.setTitle(this.fundmanager.FundManagerLongName,globalTrans[this._mGeneralSetting.Lang].mayaStrings[{details:"FundManagerTitle",reports:"MessageTitle",assets:"FundManagerAssetsTitle"}[view]],globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle)},FundManagerDetailsCtrl.prototype.SetTabByParam=function(view){var tabs="details,reports,assets".split(",");return view&&-1!=tabs.indexOf(view)?view:"details"},FundManagerDetailsCtrl.prototype.setBreadCrumbs=function(){this.BaseCtrl.pushBreadcrumbs({id:1,label:this.fundmanager.FundManagerLongName,url:""})},FundManagerDetailsCtrl.prototype.login=function(isSignup){this.mayauthService.login(isSignup)},FundManagerDetailsCtrl.prototype.onPaging=function(page,sortType,sortReverse){this.sharedScrollFactory.invoke()},mi.controller("FundsCtrl",FundsCtrl),FundsCtrl.prototype.loadFunds=function(applyChanges,tabPage,param){var proxy=this.configs[tabPage].proxy;this.blockUI.start(),proxy().then(function(data){this.funds=data.FundsList,this.fundsOrigin=data.FundsList.slice(),this._TitleService.setTitle(this.configs[param.view].title,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle),this.setBreadCrumbs(),applyChanges&&(this.filterExistingFunds(param),this.setMetaData(data.MetaTag)),this.blockUI.stop()}.bind(this),function(err){this.blockUI.stop()}.bind(this))},FundsCtrl.prototype.setBreadCrumbs=function(){this.BaseCtrl.updateBreadcrumbs(2,{id:2,label:this.configs[this.tabPage].title,url:""})},FundsCtrl.prototype.init=function(){var param;this._dataStorage,this._jsonService;param=this.$location.search(),this.filterItems.fundType=this.configs[this.tabPage].fundType,this.changeClassification(this.tabPage),this.fundType=this.configs[this.tabPage].fundType,this.pageConfig=this.configs[this.tabPage],this.tableHeader=globalTrans[this._mGeneralSetting.Lang].fundTypes[this.tabPage],this.loadFunds(!0,this.tabPage,param),this._FundFilterFactory.setFilterParams(this.filterItems),this._TitleService.setTitle(this.configs[param.view].title,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle)},FundsCtrl.prototype.changeClassification=function(val){switch(val){case"etf":this.filterItems.classificationType=2;break;case"hedgefund":this.filterItems.classificationType=1;break;case"foreignetf":this.filterItems.classificationType=200;break;case"fund":this.filterItems.classificationType=null;break;default:this.filterItems.classificationType=null}},FundsCtrl.prototype.setMetaData=function(data){this._MetaTagService.setMetaTag({title:document.title,description:data.Description,keywords:data.Keywords})},FundsCtrl.prototype.filterExistingFunds=function(param){param&&param.q&&(this.filterItems=JSON.parse(param.q),this.currentPage=this.filterItems.currentPage||this.currentPage,this.sortType=this.filterItems.sortType||this.sortType,this.sortReverse=this.filterItems.sortReverse||this.sortReverse,this.filter())},FundsCtrl.prototype.setTitle=function(view){this._TitleService.setTitle(this.fundId,globalTrans[this._mGeneralSetting.Lang].mayaStrings[{etf:"ETF List",fund:"Open Funds List",hedgefund:"Hedge Funds List",foreignetf:"Foreign ETF",all:"AllFundsList"}[view]],globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle)},FundsCtrl.prototype.changeTabTo=function(view){this.$location.$$search.q&&delete this.$location.$$search.q,this.filterItems={taxRouteData:{},props:{}},this.filterItems.fundType=this.configs[view].fundType,this._FundFilterFactory.setFilterParams(this.filterItems),this.$location.search("view",view)},FundsCtrl.prototype.setTabByParam=function(view){var tabs="etf,fund,hedgefund,foreignetf,all".split(",");return view&&-1!=tabs.indexOf(view)?view:"fund"},FundsCtrl.prototype.pagingTo=function(page,sortType,sortReverse){this.filterItems.currentPage=page,this.filterItems.sortType=sortType,this.filterItems.sortReverse=sortReverse,this.saveSearchLocation()},FundsCtrl.prototype.onFilterChange=function(){this.filterItems.currentPage=1,this.saveSearchLocation()},FundsCtrl.prototype.saveSearchLocation=function(){var params=this.filterItems;this._FundFilterFactory.setFilterParams(this.filterItems);var p={};for(var pi in params)null==params[pi]||null==params[pi]||"object"==typeof params[pi]&&0==Object.keys(params[pi]).length||!1===params[pi]||(p[pi]=params[pi]);this.$location.search("q",JSON.stringify(p))},FundsCtrl.prototype.filter=function(){var _ld=this._,result=[],taxRouteTmp=void 0,propertyItemTmp=void 0,params=this.filterItems;for(var tax in this._FundFilterFactory.setFilterParams(this.filterItems),result=this.fundsOrigin.slice(),params.fundType=this.fundType,params.fundCd&&(result=_ld.filter(result,{FId:parseInt(params.fundCd)})),params.fundMagnaType&&(result=_ld.filter(result,{MFT:params.fundMagnaType})),params.mainClassification&&(result=_ld.filter(result,{MClCd:params.mainClassification})),params.secondaryClassification&&(result=_ld.filter(result,{SClCd:params.secondaryClassification})),params.subClassification&&(result=_ld.filter(result,{SubClCd:params.subClassification})),params.assets&&(result=_ld.filter(result,function(item){return-1<_ld.indexOf(item.ART,params.assets)}.bind(this))),params.sharesExposureProfile&&(result=_ld.filter(result,{ShEVal:params.sharesExposureProfile.toString()})),params.foreignCurrencyExposureProfile&&(result=_ld.filter(result,{FCEVal:params.foreignCurrencyExposureProfile.toString()})),params.manager&&(result=_ld.filter(result,{MId:params.manager})),params.trustee&&(result=_ld.filter(result,{TId:params.trustee})),params.taxRouteData)!0===params.taxRouteData[tax]&&(angular.isDefined(taxRouteTmp)||(taxRouteTmp=[]),taxRouteTmp=taxRouteTmp.concat(_ld.union(_ld.where(result,{TRCd:parseInt(tax)}))));for(var p in taxRouteTmp&&(result=taxRouteTmp),params.props)if(!0===params.props[p]){angular.isDefined(propertyItemTmp)||(propertyItemTmp=[]);var jWhere={};jWhere[this._mGeneralSetting.FundProps[p]]=!0,propertyItemTmp=propertyItemTmp.concat(_ld.union(_ld.where(result,jWhere)))}result=propertyItemTmp||result,result=_ld.uniq(result),this.setData(result),this.blockUI.stop(),this.sharedScrollFactory.invoke()},FundsCtrl.prototype.setData=function(data){if(this.addResults){this.recordCount=data.length;for(var orderByResult=this.filterItems.sortType?this.orderBy(data,this.filterItems.sortType,this.filterItems.sortReverse):data,startFromResult=this.startFrom(orderByResult,(this.filterItems.currentPage-1)*this.pageSize),limitToResult=this.limitTo(startFromResult,this.pageSize),i=0;i<limitToResult.length;i++)this.funds.push(limitToResult[i])}else this.funds=data;this.addResults=!1},FundsCtrl.prototype.loadMore=function(){this.addResults=!0,this.filterItems.currentPage=this.filterItems.currentPage?this.filterItems.currentPage+1:this.currentPage+1,this.filterItems.sortType=this.filterItems.sortType?this.filterItems.sortType:this.sortType,this.filterItems.sortReverse=this.filterItems.sortReverse?this.filterItems.sortReverse:this.sortReverse,this.saveSearchLocation()},mi.controller("AssetCtrl",AssetCtrl),AssetCtrl.prototype.fetch=function(isFirstTimeLoad){var proxy=this._fundProxy;this.blockUI.start(),proxy.getAssetFundsHolding({secId:this.exportKeyArgs[1],managerId:this.exportKeyArgs[0],loadAll:isFirstTimeLoad}).then(function(data){this.funds=data.AssetFundsHoldingInfo.Funds,this.validDate=data.AssetFundsHoldingInfo.DateValid,isFirstTimeLoad&&(this.assetName=data.AssetFundsHoldingInfo.AssetName,this.assetType=data.AssetFundsHoldingInfo.AssetType,this.CID=data.AssetFundsHoldingInfo.Id,this.CName=data.AssetFundsHoldingInfo.CompanyName,this.BaseCtrl.pushBreadcrumbs({id:1,label:data.AssetFundsHoldingInfo.AssetName,url:""}),this.setLogos(data.FundAdditionalHoldings.AdditionalHoldings),this.managerHoldings=data.FundAdditionalHoldings),this.blockUI.stop()}.bind(this),function(err){this.blockUI.stop()})},AssetCtrl.prototype.refresh=function(id,$event){this.page=1,this._$location.path("/fundmanager/"+id+"/asset/"+this.assetId,!1),this.exportKeyArgs[0]=id,this.managerId=id,this.fetch(!1)},AssetCtrl.prototype.pagingTo=function(page,sortType,sortReverse){this.page=page},AssetCtrl.prototype.setLogos=function(data){data.forEach(function(item){item.Logo=this._utility.getLogo(item.ManagerId)}.bind(this))},mi.factory("FundFilterFactory",function(){var _filterParams={},services={setFilterParams:function(data){_filterParams=data}};return Object.defineProperty(services,"filterParams",{get:function(){return _filterParams}}),services}),mi.factory("HistoryFilterFactory",function(){var _filterParams={},services={setFilterParams:function(data){_filterParams=data}};return Object.defineProperty(services,"filterParams",{get:function(){return _filterParams}}),services}),mi.factory("Fund",FundEntityFactory),FundEntityFactory.$inject=["fundProxy","$q","dataStorage"],mi.factory("FundManager",FundManagerEntityFactory),FundManagerEntityFactory.$inject=["fundProxy","$q","dataStorage"],mi.factory("fundProxy",function($http,$httpParamSerializerJQLike,$log,$q,mMimeTypeSettings,FundFilterFactory,HistoryFilterFactory,ngConfigSetting){function FundProxy(){}return FundProxy.prototype.allFunds=function(){var defer=$q.defer();return $log.debug("fundProxy.all()"),$http.get(ngConfigSetting.api+"fund/all").then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},FundProxy.prototype.all=function(){var defer=$q.defer();return $log.debug("fundProxy.all()"),$http.get(ngConfigSetting.api+"fund").then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},FundProxy.prototype.getFundDetails=function(id){var defer=$q.defer();return $log.debug("fundProxy.getFundDetails("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"fund/details",params:{fundId:id}}).success(function(data){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},FundProxy.prototype.getFundHistory=function(params){var defer=$q.defer();return $log.debug("fundProxy.getFundHistory("+params.FundId+")"),$http({method:"POST",url:ngConfigSetting.api+"fund/history",data:$httpParamSerializerJQLike(params),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(data,status,headers){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},FundProxy.prototype.getFundManagerDetails=function(id){var defer=$q.defer();return $log.debug("fundProxy.getFundManagerDetails("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"fund/manager",params:{fundManagerId:id}}).success(function(data,status,headers){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},FundProxy.prototype.getAssetFundsHolding=function(param){var defer=$q.defer();return $log.debug("fundProxy.getFundManagerDetails("+param.secId+"-"+param.managerId+")"),$http({method:"GET",url:ngConfigSetting.api+"fund/assetfundsholding",params:{securityId:param.secId,entityId:param.managerId,loadAll:param.loadAll}}).success(function(data,status,headers){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},FundProxy.prototype.getFileFundMonthlyReport=function(fundId,rptCd){var defer=$q.defer();return $log.debug("fundProxy.getFileFundMonthlyReport()"),$http({method:"POST",url:ngConfigSetting.api+"download/fundmonthlyreport?fundId="+fundId+"&rptCd="+rptCd,headers:{Accept:"text/csv"}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},FundProxy.prototype.getFileFundManagerDetails=function(id,fileType){var defer=$q.defer();return $log.debug("fundProxy.getCSVFundManagerDetails("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/manager/funds?fundId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},FundProxy.prototype.getFileFundAssets=function(id,fileType){var defer=$q.defer();return $log.debug("fundProxy.getCSVFundAssets("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/fundassets?fundId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},FundProxy.prototype.getFileFundManagerAssets=function(id,fileType){var defer=$q.defer();return $log.debug("fundProxy.getFileFundManagerAssets("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/fundmanagerassetsholdings?entityId="+id,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},FundProxy.prototype.getFileFundsAssets=function(mgrId,secId,fileType){var defer=$q.defer();return $log.debug("fundProxy.getCSVFundsAssets("+secId+")"),$http({method:"POST",url:ngConfigSetting.api+"download/fundsassetholdings?entityId="+mgrId+"&securityId="+secId,headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},FundProxy.prototype.getFileFundHistory=function(id,fileType){var params=angular.extend({FundId:id},HistoryFilterFactory.filterParams),defer=$q.defer();return $log.debug("fundProxy.getCSVFundHistory("+id+")"),$http({method:"POST",url:ngConfigSetting.api+"download/fundhistory",data:$httpParamSerializerJQLike(params),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},FundProxy.prototype.getFileFundListDetails=function(fileType){var params=FundFilterFactory.filterParams,defer=$q.defer();return $log.debug("fundProxy.getFileFundListDetails("+fileType+")"),$http({method:"POST",url:ngConfigSetting.api+"download/funds",data:angular.toJson(params),headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},FundProxy.prototype.getAdditionalHoldings=function(id){var defer=$q.defer();return $log.debug("fundProxy.getAdditionalHoldings("+id+")"),$http({method:"GET",url:ngConfigSetting.api+"fund/additionalholdings?securityId="+id}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},FundProxy.prototype.getHoldingsGraphData=function(securityId,id,type){var defer=$q.defer();return $log.debug("fundProxy.getHoldingsGraphData("+securityId,id+")"),$http({method:"GET",url:ngConfigSetting.api+"fund/assetchart?securityId="+securityId+"&entityId="+id+"&type="+type}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},new FundProxy}),mi.run(function(Fund,dataStorage){dataStorage.funds={data:[],add:function(id){return dataStorage.add.call(this,id,Fund)},find:function(predicat){return dataStorage.find.call(this,predicat,Fund)},isExists:function(id){return this.data.forEach(function(fund){if(fund.id==id)return!0}),!1},getById:function(id){var res;return this.data.forEach(function(fund){fund.id==id&&0<Object.keys(fund.fundDetails).length&&(res=fund)}),res}}}),mi.run(function(FundManager,dataStorage){dataStorage.fundmanagers={data:[],add:function(id){return dataStorage.add.call(this,id,FundManager)},find:function(predicat){return dataStorage.find.call(this,predicat,FundManager)},isExists:function(id){return this.data.forEach(function(fundmanager){if(fundmanager.id==id)return!0}),!1},getById:function(id){return this.data.forEach(function(fundmanager){if(fundmanager.id==id)return fundmanager}),null}}}),mi.directive("funddetails",function(){return{templateUrl:"src/fund/directives/views/funddetails.html"}}),mi.directive("moreManagerDescription",function($timeout){return{restirct:"A",link:function(scope,element,attr){$timeout(function(){var expandEl=element.find(".expandDetails"),textEl=element.find(".detailsItemAddress");textEl[0].offsetWidth<textEl[0].scrollWidth&&expandEl.addClass("show")},2e3)}}}),mi.directive("additionalHoldings",function($uibModal){return{restrict:"A",link:function(scope,element,attr){scope.open=function(rec,$event){$uibModal.open({templateUrl:"src/fund/directives/views/additional-holdings-modal.html",controller:AdditionalHoldingsCtrl,controllerAs:"ah",windowClass:"holdingDialogSize",resolve:{viewName:function(){return"holdings"},asset:function(){return rec}}})}}}}),mi.directive("holdingsGraph",function($uibModal){return{restrict:"A",link:function(scope,element,attr){scope.showHoldingsGraph=function(rec,$event){$uibModal.open({templateUrl:"src/fund/directives/views/holdings-graph-modal.html",controller:AdditionalHoldingsCtrl,controllerAs:"ah",windowClass:"HoldingGraphDialogSize",resolve:{viewName:function(){return"graph"},asset:function(){return rec}}})}}}}),mi.controller("AdditionalHoldingsCtrl",AdditionalHoldingsCtrl),AdditionalHoldingsCtrl.prototype.init=function(viewName){var proxy=this._fundProxy;"holdings"===viewName?proxy.getAdditionalHoldings(this.asset.IdentityCd).then(function(data){this.additionalHoldings=data,this.additionalHoldings.AdditionalHoldings&&this.additionalHoldings.AdditionalHoldings.forEach(function(holding){holding.NisValueInt=parseInt(holding.NisValue),holding.LatestUpdate=Date.now()})}.bind(this)):"graph"===viewName&&proxy.getHoldingsGraphData(this.asset.IdentityCd,this.asset.ManagerId).then(function(data){this.graphData=data}.bind(this))},AdditionalHoldingsCtrl.prototype.showHoldingsGraph=function(rec,$event){event&&($event.preventDefault(),$event.stopPropagation())},AdditionalHoldingsCtrl.prototype.cancel=function(){console.log("closing additional holdings"),this.$uibModalInstance.dismiss()},AdditionalHoldingsCtrl.prototype.open=function($event,event){event&&($event.preventDefault(),$event.stopPropagation())},mi.filter("classificationFilter",function(_){return function(arr,searchString,type){if(!searchString)return[];return _.filter(arr,function(item){return item.ParentKey===("no"!=searchString?searchString:item.ParentKey)&&item.CType===type})}}),mi.filter("classificationFilterType",function(){return function(arr,searchString,type){if(!searchString||!arr)return[];var result=[],nums={etf:[1],foreignetf:[200],fund:[1,3],hedgefund:[6],all:[1,2,3]}[searchString];if(nums){for(var i=0;i<nums.length;i++)result.push(arr[nums[i]-1]);return result}}}),mi.filter("fundFilterType",function(){return function(arr,searchString,type){if(!searchString||!arr||!type)return[];var result=[],nums={magnaType:{fund:[1,4,6],all:[1,3,4,5,6]}}[type][searchString];if(nums){for(var i=0;i<nums.length;i++)result.push(arr[nums[i]-1]);return result}}}),mi.directive("mayaFilterFunds",function(fundProxy,$log,$location,_,jsonService){function FilterFundCtrl(){this._FundProxy=fundProxy,this._log=$log,this._ld=_,this.menuTitles={},this.init()}return FilterFundCtrl.prototype.init=function(){jsonService.getFilterFunds().then(function(data){this.menuTitles=data,this.props={};var props=this.menuTitles.PropertyItem,result=[];Object.keys(props).forEach(function(key){props[key].k=key,result.push(props[key])}),result.sort(function(a,b){return a.Key<b.Key?-1:1}),result.forEach(function(item){this.props[item.k]=item}.bind(this))}.bind(this))},FilterFundCtrl.prototype.clear=function(){this.filterItems={taxRouteData:{},props:{}}},FilterFundCtrl.prototype.resetNested=function(isSecLevel){if(1==isSecLevel){this.filterItems.secondaryClassification=void 0;var item=this._ld.find(this.menuTitles.ClassificationData.ClassificationType,{Value:$("#mc option:selected").text()});this.filterItems.magnaType=item?item.CType:void 0}this.filterItems.subClassification=void 0},FilterFundCtrl.prototype.changeClassification=function(val){switch(val){case"etf":this.filterItems.classificationType=2;break;case"hedgefund":this.filterItems.classificationType=1;break;case"foreignetf":this.filterItems.classificationType=200;break;default:this.filterItems.classificationType=null}},{restrict:"EA",require:"^ngModel",scope:{filter:"&onChange",view:"="},controller:FilterFundCtrl,bindToController:!0,controllerAs:"vm",templateUrl:"src/fund/directives/views/filter-funds.html",link:function(scope,element,attr,ngController){var ctrl=scope.vm;scope.$watch("vm.view",function(newVal,oldVal){newVal!=oldVal&&ctrl.changeClassification(newVal)}),Object.defineProperty(scope.vm,"filterItems",{get:function(){return ngController.$modelValue},set:function(value){ngController.$setViewValue(value)}})}}}),mi.directive("mayaFilterHistory",function(fundProxy,$window,$log,$location,_,dataStorage,jsonService,HistoryFilterFactory){function FilterHistoryCtrl(){this._FundProxy=fundProxy,this._HistoryFilterFactory=HistoryFilterFactory,this._dataStorage=dataStorage,this._log=$log,this.menuTitles={},this.dateOptions={minDate:new Date(1999,12,1),startingDate:1},this.filterItems={},this.init()}return FilterHistoryCtrl.prototype.init=function(){jsonService.getFilterFundHistory().then(function(data){this.menuTitles=data,this.props={};var props=this.menuTitles.Period,result=[];Object.keys(props).forEach(function(key){props[key].k=key,result.push(props[key])}),result.sort(function(a,b){return a.Key<b.Key?-1:1}),result.forEach(function(item){this.props[item.k]=item}.bind(this))}.bind(this))},FilterHistoryCtrl.prototype.clear=function(){this.filterItems={Period:9,DateFrom:(new Date).addMonths(-1),DateTo:new Date}},{restrict:"EA",require:"^ngModel",scope:{filter:"&onChange"},controller:FilterHistoryCtrl,bindToController:!0,controllerAs:"vm",templateUrl:"src/fund/directives/views/filter-history.html",link:function(scope,element,attr,ngController){var ctrl=scope.vm;Object.defineProperty(scope.vm,"filterItems",{get:function(){return ngController.$modelValue},set:function(value){ngController.$setViewValue(value)}}),scope.$on("$destroy",function(){ctrl.clear()})}}})}(angular);
!function(angular){"use strict";angular.module("security",[]).factory("securityProxy",function($http,$log,$q,$routeParams,ngConfigSetting){function securityProxy(){}return securityProxy.prototype.getHistorytop5days=function(securityId){var defer=$q.defer();return $log.debug("securityProxy.getHistorytop5days("+securityId+")"),$http({method:"GET",url:ngConfigSetting.api+"security/historytop5days",params:{securityId:securityId}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},securityProxy.prototype.getHistoryLastRates=function(securityId){var defer=$q.defer();return $log.debug("securityProxy.getHistoryLastRates("+securityId+")"),$http({method:"GET",url:ngConfigSetting.api+"security/historylastrates",params:{securityId:securityId}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},new securityProxy})}(angular);
!function(angular){"use strict";var mi=angular.module("issuance",[]);function IssuanceCtrl($scope,$location,$interval,$routeParams,BaseCtrl,issuanceProxy,jsonService,TitleService,MetaTagService,blockUI,$log,mGeneralSetting,TaseMemberService){this._mGeneralSetting=mGeneralSetting,this._issuanceProxy=issuanceProxy,this.TaseMemberService=TaseMemberService,this._TitleService=TitleService,this.blockUI=blockUI,this.$interval=$interval,this.$scope=$scope,this._MetaTagService=MetaTagService,this.tableHeader=globalTrans[mGeneralSetting.Lang].mayaStrings.IssuanceListTitle,this.issuanceTableColumnDefinition=[],this._jsonService=jsonService,this.sortReverse=!1,this.errorOccured=!1,this.view=$routeParams.view,this.tabPage=this.getTabByParam($routeParams.view),this.exportKeyArgs=[],this.$log=$log,this.time=mGeneralSetting.issuanceInterval,this.filterItems={taxRouteData:{},props:{}},BaseCtrl.call(this,$scope),this.BaseCtrl=Object.create(BaseCtrl.prototype),this.BaseCtrl.prototype=Object.create(BaseCtrl.prototype),$scope.$on("$routeUpdate",function(){var param=$location.search();param&&param.view&&(this.blockUI.start(),this.tabPage=this.getTabByParam(param.view),this.getDataFromServer())}.bind(this)),$scope.$on("$destroy",function(){this.$interval.cancel(this.pull)}.bind(this))}function IssuanceOrderCtrl($uibModalInstance,rec,issuanceProxy,$analytics){this.$uibModalInstance=$uibModalInstance,this._issuanceProxy=issuanceProxy,this._$analytics=$analytics,this.rec=rec,this.checked=null,this.textColor="blue",this.TaseMemberService=TaseMemberService,this.taseMembers=[],this.init()}function TaseMemberService(){var services={};return services}mi.factory("issuanceProxy",function($http,$log,$q,mMimeTypeSettings,ngConfigSetting){function issuanceProxy(){}return issuanceProxy.prototype.getOpenTender=function(){var defer=$q.defer();return $http.get(ngConfigSetting.api+"issuance/openoffering").then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},issuanceProxy.prototype.getUpComing=function(){var defer=$q.defer();return $http.get(ngConfigSetting.api+"issuance/upcoming").then(function(res){defer.resolve(res.data)},function(res){defer.reject(res.data)}),defer.promise},issuanceProxy.prototype.getFileOpenTender=function(fileType){var defer=$q.defer();return $http({method:"POST",url:ngConfigSetting.api+"download/opentender",headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},issuanceProxy.prototype.getFileUpComing=function(fileType){var defer=$q.defer();return $http({method:"POST",url:ngConfigSetting.api+"download/upcoming",headers:{Accept:mMimeTypeSettings.FileType[fileType]}}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},new issuanceProxy}),mi.controller("issuanceCtrl",IssuanceCtrl),IssuanceCtrl.prototype.getOpenTender=function(){var that=this;this._issuanceProxy.getOpenTender().then(function(data){this._MetaTagService.setMetaTag({title:document.title,description:data.MetaTag.Description,keywords:data.MetaTag.Keywords}),TaseMemberService.taseMembers=data.TaseMembers;var newdata=[],offerings=data.OpenOffering;offerings&&offerings.forEach(function(offering){var brTagTemp="",offerItem={Interest:offering.Interest&&!offering.IsTheVariableInterest?offering.Interest.toLocaleString()+"%":"",PricdPerUnit:offering.PricdPerUnit?offering.PricdPerUnit.toLocaleString():"",InterestOnPrice:"",PricePerUnitOnInterest:"",MinOfferedUnits:null,MaxOfferedUnits:null,BeginAt:offering.BeginAt,EndAt:offering.EndAt,RptCd:offering.RptCd,OfferNumber:offering.OfferNumber,CompanyId:offering.CompanyId,CompanyName:offering.CompanyName,OfferTypeName:offering.OfferTypeName,PriceMargin:offering.PriceMargin,InterestMargin:offering.InterestMargin,QuantityPerUnit:"",FileIndex:offering.FileIndex,OfferingType:offering.OfferingType,SecurityName:"",LinkageType:"",MaalotRating:"",MidrugRating:""};(offering.MinOfferedUnits||0<=offering.MinOfferedUnits)&&(offerItem.MinOfferedUnits=offering.MinOfferedUnits.toLocaleString()+(offering.MaxOfferedUnits?" - ":"")),offering.MaxOfferedUnits&&(offerItem.MinOfferedUnits+=offering.MaxOfferedUnits.toLocaleString()),1==offering.IsTheVariableInterest?offerItem.Interest+=brTagTemp+globalTrans[that._mGeneralSetting.Lang].changes:1==offering.OfferTypeCd&&(offerItem.Interest+=brTagTemp+"("+globalTrans[that._mGeneralSetting.Lang].max+")"),2==offering.OfferTypeCd&&(offerItem.PricdPerUnit+=brTagTemp+"("+globalTrans[that._mGeneralSetting.Lang].min+")"),offering.Securities&&offering.Securities.forEach(function(security){security.TradePageUrl?offerItem.SecurityName+=brTagTemp+'<a target="_blank" href="'+security.TradePageUrl+'" title="'+globalTrans[that._mGeneralSetting.Lang].linkToTradindgData+'">'+security.SecurityName+"</a>":offerItem.SecurityName+=brTagTemp+(security.SecurityName?'<i class="mf mf-star" title="נייר חדש"></i> '+security.SecurityName:""),offerItem.QuantityPerUnit+=brTagTemp+(security.QuantityPerUnit?security.QuantityPerUnit.toLocaleString():""),offerItem.MaalotRating+=brTagTemp+(security.MaalotRating?security.MaalotRating:""),offerItem.MidrugRating+=brTagTemp+(security.MidrugRating?security.MidrugRating:""),offerItem.LinkageType+=brTagTemp+(security.LinkageType?security.LinkageType:""),security.InterestOnPrice&&(offerItem.InterestOnPrice+=brTagTemp+(security.InterestOnPrice?security.InterestOnPrice.toLocaleString()+"%":""),1===offering.OfferTypeCd&&(offerItem.InterestOnPrice+="("+globalTrans[that._mGeneralSetting.Lang].max+")")),security.PricePerUnitOnInterest&&(offerItem.PricePerUnitOnInterest+=brTagTemp+(security.PricePerUnitOnInterest?security.PricePerUnitOnInterest.toLocaleString():""),2===offering.OfferTypeCd&&(offerItem.InterestOnPrice+="("+globalTrans[that._mGeneralSetting.Lang].min+")")),brTagTemp="</br>"}),newdata.push(offerItem)}),this.data=newdata,this.blockUI.stop(),this.errorOccured=!1}.bind(this),function(err){this.blockUI.stop(),this.data=[],this.errorOccured=!0}.bind(this))},IssuanceCtrl.prototype.getUpComing=function(){this._issuanceProxy.getUpComing().then(function(data){this._MetaTagService.setMetaTag({title:document.title,description:data.MetaTag.Description,keywords:data.MetaTag.Keywords});var newdata=[];if(data=data.IssuanceUpComing){var temp=JSON.stringify(data).replace(/null/g,'""');(data=JSON.parse(temp)).forEach(function(rec){if(0<rec.Securities.length)for(var i=0;i<rec.Securities.length;i++)0<i?(rec.SecurityType+=rec.Securities[i].SecurityType?"</br>"+rec.Securities[i].SecurityType:"",rec.MaalotRate+=rec.Securities[i].MaalotRate?"</br>"+rec.Securities[i].MaalotRate:"",rec.MidrugRate+=rec.Securities[i].MidrugRate?"</br>"+rec.Securities[i].MidrugRate:""):(rec.SecurityType=rec.Securities[i].SecurityType?rec.Securities[i].SecurityType:"",rec.MaalotRate=rec.Securities[i].MaalotRate?rec.Securities[i].MaalotRate:"",rec.MidrugRate=rec.Securities[i].MidrugRate?rec.Securities[i].MidrugRate:"");newdata.push(rec)}),this.data=newdata}this.blockUI.stop(),this.errorOccured=!1}.bind(this),function(err){this.data=[],this.blockUI.stop(),this.errorOccured=!0}.bind(this))},IssuanceCtrl.prototype.init=function(){this.blockUI.start(),this.pull&&this.$interval.cancel(this.pull),this.pull=this.$interval(function(){this.getDataFromServer()}.bind(this),this.time),this.getDataFromServer()},IssuanceCtrl.prototype.setTitle=function(view){"opentender"==view?this._TitleService.setTitle(globalTrans[this._mGeneralSetting.Lang].mayaStrings.IssuanceOpenTenderTitle+"-"+globalTrans[this._mGeneralSetting.Lang].mayaStrings.ReportTitle,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle):this._TitleService.setTitle(globalTrans[this._mGeneralSetting.Lang].mayaStrings.IssuanceUncomingTitle+"-"+globalTrans[this._mGeneralSetting.Lang].mayaStrings.ReportTitle,globalTrans[this._mGeneralSetting.Lang].mayaStrings.MayaSystemTitle)},IssuanceCtrl.prototype.getTabByParam=function(view){var proxy=this._issuanceProxy;return this.view=view||"opentender","opentender"==view?{name:"opentender",htmlTemplateName:"issuance-opentender",tableHeader:globalTrans[this._mGeneralSetting.Lang].grid.issuanceOpenTenderTpl.title,noResult:globalTrans[this._mGeneralSetting.Lang].mayaStrings.OpenTenderNoResult,proxyFunc:proxy.getOpenTender,issuanceTableColumnDefinition:angular.copy(this._jsonService.getTemplateByTemplateName("IssuanceOpenTenderTpl"))}:"upcoming"==view?{name:"upcoming",htmlTemplateName:"issuance-upcoming",tableHeader:globalTrans[this._mGeneralSetting.Lang].grid.issuanceUpComingTenderTpl.title,noResult:globalTrans[this._mGeneralSetting.Lang].mayaStrings.UncomingNoResult,proxyFunc:proxy.getUpComing,issuanceTableColumnDefinition:angular.copy(this._jsonService.getTemplateByTemplateName("IssuanceUpComingTpl"))}:void 0},IssuanceCtrl.prototype.getDataFromServer=function(){try{this.issuanceTableColumnDefinition=void 0,this.setTitle(this.tabPage.name),"upcoming"==this.tabPage.name?this.getUpComing():this.getOpenTender()}catch(e){console.log("error occured")}},mi.directive("issuanceOrderModal",function($uibModal){return{restrict:"A",link:function(scope,element,attr){scope.open=function(rec,$event){$uibModal.open({templateUrl:"src/issuance/issuance-order-modal.html",controller:IssuanceOrderCtrl,controllerAs:"io",windowClass:"holdingDialogSize",resolve:{rec:function(){return rec}}})}}}}),mi.controller("IssuanceOrderCtrl",IssuanceOrderCtrl),IssuanceOrderCtrl.prototype.init=function(){this._issuanceProxy;this.taseMembers=this.TaseMemberService.taseMembers},IssuanceOrderCtrl.prototype.getLogo=function(memberId){return"000000".substring(0,"000000".length-String(memberId).length)+String(memberId)},IssuanceOrderCtrl.prototype.check=function($event){this.checked?this.textColor="blue":this.textColor="red"},IssuanceOrderCtrl.prototype.cancel=function(){this.$uibModalInstance.dismiss()},IssuanceOrderCtrl.prototype.checkAgreement=function(link,memberName){this.checked?(window.open(link),this._$analytics.eventTrack("הזמנה הנפקה מחבר "+memberName)):this.textColor="red"},IssuanceOrderCtrl.prototype.open=function($event,event){event&&($event.preventDefault(),$event.stopPropagation())},mi.service("TaseMemberService",TaseMemberService)}(angular);
!function(angular){"use strict";var mi=angular.module("m.sharedGrid",[]);mi.directive("sharedMayaGrid",function($rootScope,$log,$filter,$injector,$timeout,$templateCache,printer,openFullPageGrid,uibPopUpService,mGeneralSetting,utility,mayauthService){$filter("filter");var orderBy=$filter("orderBy"),startFrom=$filter("startFrom"),onlyExtendedOrAllValue=$filter("onlyExtendedOrAllValue"),limitTo=$filter("limitTo");function MayaGridCtrl($routeParams,browserDetectionService,mGeneralSetting){this._log=$log,this.sortReverse=this.sortReverse||!1,this.errorOccured=this.errorOccured&&"true"==this.errorOccured||!1,this.pageSize=this.pageSize||10,this.recordCount=0,this.data=[],this.dataFilter="",this.showEmptyResult=!1,this.columnDef=[],this.gridDef={},this.isEng=mGeneralSetting.Lang===mGeneralSetting.LangStates.English,this.mGeneralSetting=mGeneralSetting,this.routeParams=$routeParams,this._browserDetectionService=browserDetectionService,this.noResultTitle=this.noResultTitle||globalTrans[this.mGeneralSetting.Lang].mayaStrings.NoResult,this.noResultText=globalTrans[this.mGeneralSetting.Lang].mayaStrings.NoResult,this.isTaseUser=mayauthService.checkIsTaseUser()}return MayaGridCtrl.prototype.buildColumn=function(){this.columnDefinition&&0!=Object.keys(this.columnDefinition).length&&(!this.isTaseUser||"corporateactions.events.gridTitle"!=this.columnDefinition.transKey&&"corporateactions.payments.gridTitle"!=this.columnDefinition.transKey||(this.columnDefinition.Toolbar.Export.Display=!0),this.columnDef=onlyExtendedOrAllValue(this.columnDefinition.ColumnItems,this.columnExtend),this.gridDef=this.columnDefinition,this.toolTipText=this.isEng?this.columnDefinition.Toolbar.OpenNew.ToolTipEngText:this.columnDefinition.Toolbar.OpenNew.ToolTipHebText,this.tooltipIsOpen=this.columnDefinition.Toolbar.OpenNew.ToolTipIsOpen)},MayaGridCtrl.prototype.reFilter=function(page,pageSize,total){this.data;if(angular.isArray(this.source)){if(this.useServerPaging){var orderByResult=this.sortType?orderBy(this.source,this.sortType,this.sortReverse):this.source;return this.data=orderByResult,void(this.showEmptyResult=(null==this.errorOccured||!1===this.errorOccured)&&0==this.data.length)}if(this.showAll)return this.data=this.sortType?orderBy(this.source,this.sortType,this.sortReverse):this.source,this.recordCount=this.source.length,void(this.showEmptyResult=(null==this.errorOccured||!1===this.errorOccured)&&0==this.data.length);this.recordCount=this.source.length,this.currentPage=page||this.currentPage;orderByResult=this.sortType?orderBy(this.source,this.sortType,this.sortReverse):this.source;var startFromResult=startFrom(orderByResult,(this.currentPage-1)*this.pageSize),limitToResult=limitTo(startFromResult,this.pageSize);this.data=limitToResult,this.showEmptyResult=(null==this.errorOccured||!1===this.errorOccured)&&0==this.data.length}},MayaGridCtrl.prototype.pageTo=function(page,pageSize,total,isServerSide){1==this.useServerPaging?(this.currentPage=page,this.onServerPaging({page:this.currentPage,sortBy:this.sortType,sort:this.sortReverse})):(this.reFilter(page,pageSize,total),this.onPaging({page:this.currentPage,sortType:this.sortType,sortReverse:this.sortReverse}))},MayaGridCtrl.prototype.sort=function(st,reverse){this.sortType=st,this.sortReverse=reverse,1==this.useServerPaging?this.onServerPaging({page:this.currentPage,sortBy:this.sortType,sort:this.sortReverse}):(this.onPaging&&!this.showAll&&this.onPaging({page:this.currentPage,sortType:this.sortType,sortReverse:this.sortReverse}),this.reFilter())},MayaGridCtrl.prototype.invokeProxy=function(view,proxyFactory,type){if(mayauthService.isAuthenticated()){var proxy=$injector.get(proxyFactory.Proxy);if(this.recordCount>mGeneralSetting.ModalType.MaximumExportLimit)uibPopUpService.open(mGeneralSetting.ModalType.PopUpMessage,{message:globalTrans[this.mGeneralSetting.Lang].PaymentExportLimitDesc,title:globalTrans[this.mGeneralSetting.Lang].PaymentExportLimitTitle});else proxy[proxyFactory.Method].apply(this,this.exportKey.concat(type)).then(function(res){utility.download(res,view,type)}.bind(this))}else uibPopUpService.open(mGeneralSetting.ModalType.PopUpMessage,{message:globalTrans[mGeneralSetting.Lang].mayaStrings.DownloadNotLoginTitleMessage,title:globalTrans[mGeneralSetting.Lang].mayaStrings.DownloadNotLoginTitle})},MayaGridCtrl.prototype.isServerPage=function(){return this.useServerPaging&&parseInt(this.recordCount)>parseInt(this.pageSize)},MayaGridCtrl.prototype.openFullPage=function(view,print){var fileTemplate=/^src\/templates\/(.*)(\.html)$/i,extTemplate="",toRemove=this.gridDef.hasOwnProperty("RemoveEmptyFields")&&1==this.gridDef.RemoveEmptyFields;if(fileTemplate.test(this.template)){var result=fileTemplate.exec(this.template);extTemplate=this.template.replace(result[1],result[1]+"-ext")}var data=this.source;500<this.recordCount&&(data=this.data),data=this.data;var arr={};for(var item in data[0])data[0].hasOwnProperty(item)&&(arr[item]=toRemove?0:1);toRemove&&data.forEach(function(row){for(var item in row)row[item]&&0<row[item].length&&arr[item]++});for(var tmpGridDef=angular.copy(this.gridDef),i=tmpGridDef.ColumnItems.length-1;0<=i;--i)(tmpGridDef.ColumnItems[i].isUnextended||this.isEng&&0<tmpGridDef.ColumnItems[i].className.indexOf("hidden-eng")||!this.isEng&&0<tmpGridDef.ColumnItems[i].className.indexOf("hidden-heb"))&&tmpGridDef.ColumnItems.splice(i,1);var pageData={Template:extTemplate,GridDef:tmpGridDef,Data:data,DataCounter:arr,IsEng:this.isEng,Print:print};openFullPageGrid.open("src/shared/views/full-page.html",{fullPageData:pageData})},MayaGridCtrl.prototype.printView=function(){var data=this.source;500<this.recordCount&&(data=this.data),printer.print("src/shared/views/print-grid.html",{printData:{Template:this.template,GridDef:this.gridDef,Data:data,IsEng:this.isEng}})},{restirct:"E",controller:MayaGridCtrl,bindToController:!0,controllerAs:"vm",templateUrl:"src/shared/grid/views/grid.html",scope:{source:"=",columnDefinition:"=",hidePagination:"=",columnExtend:"=",exportKey:"=",template:"@",header:"=",legendBottom:"@",legendSource:"=",currentPage:"=page",pageSize:"@",showAll:"@",sortType:"=",sortReverse:"=",customSubTitle:"=",remarkTitle:"@",tabsHeader:"=",print:"@",useServerPaging:"=",useEventClientPaging:"=",onServerPaging:"&",recordCount:"@",onPaging:"&",noResultTitle:"@",errorOccured:"@"},link:function(scope,element,attr){var ctrl=scope.vm;scope.$watchCollection("vm.source",function(){var tableGrandparent=angular.element(element).parent().parent();ctrl.source&&0!==ctrl.source.length?tableGrandparent.removeClass("noResultsFrame"):tableGrandparent.addClass("noResultsFrame"),ctrl.source&&(ctrl.pageSize=ctrl.showAll?1e3:ctrl.pageSize,ctrl.errorOccured=ctrl.errorOccured&&"true"==ctrl.errorOccured||!1,ctrl.reFilter.call(ctrl,ctrl.currentPage,ctrl.pageSize,ctrl.source.length))}),scope.$watchCollection("vm.columnDefinition",ctrl.buildColumn.bind(ctrl))}}}),mi.directive("hideInCaseMoblie",function(){return{restrict:"A",link:function(scope,elem){$(window).width()<991&&elem.remove()}}}),mi.filter("startFrom",function(){return function(input,start){return start=+start,input.slice(start)}}),mi.filter("removeEmptyField",function(_){return function(arr,counterArrayFields){var tmp=angular.copy(arr);for(var prop in counterArrayFields)0==counterArrayFields[prop]&&delete tmp[_.findIndex(tmp,{fieldName:prop})];for(var filterArr=[],i=0;i<tmp.length;i++)tmp[i]&&filterArr.push(tmp[i]);return filterArr}}),mi.filter("onlyExtendedOrAllValue",function(){return function(input,param){var ret=[];if(!angular.isUndefined(input))return angular.forEach(input,function(v){(param&&v.isExtended||!v.isExtended)&&ret.push(v)}),ret}}),mi.directive("sharedMayaExport",function(){return{link:function(scope,element,attrs){$(".exportList").each(function(){$(this).on("shown.bs.collapse",function(){scope.ActiveBox=$(this)})}),$("body").on("click",function(e){scope.ActiveBox&&(scope.ActiveBox.collapse("hide"),scope.ActiveBox=void 0)})},restrict:"A"}}),mi.directive("sharedMayaLink",function($compile){return{link:function(scope,element,attrs){var newlink=attrs.dbHref;attrs.$set("ng-href",newlink),element.removeAttr("test-href"),$compile(element)(scope)},restrict:"A"}}),mi.directive("sharedMayaEventSelect",function(){return{link:function(scope,elem,attrs){},restrict:"A"}})}(angular);
!function(angular){"use strict";var mi=angular.module("m.sharedCharts",[]);mi.directive("mayaDrillDownBarChart",function($window,mGeneralSetting){return{restirct:"E",template:'<div id="maya-bar-chart"></div>',scope:{title:"@",yAxis:"@",parentClass:"@",labelFormat:"@",pointFormat:"@",filter:"=",data:"="},link:function(scope,element,attr){var chart,series={},drillDownSeries={},chartDrilldownData=[],isMobile=!(991<=$window.innerWidth),filterBy=scope.filter,chartOption={chart:{renderTo:"maya-bar-chart",type:"column",ignoreHiddenSeries:!1,width:isMobile?285:300,height:400,backgroundColor:"rgba(255,255,255,0.1)",events:{drilldown:function(e){if(!e.seriesOptions){var seriesSel={data:[]};for(var key in drillDownSeries)drillDownSeries[key].parent==e.point.id&&seriesSel.data.push(drillDownSeries[key].data[0]);chart.showLoading("טוען נתונים"),setTimeout(function(){chart.hideLoading(),chart.addSeriesAsDrilldown(e.point,seriesSel)},100)}}}},credits:{enabled:!1},title:{text:scope.title,style:{fontFamily:"arial"}},xAxis:{type:"category",labels:{style:{textAlign:"center",fontFamily:"arial",direction:"rtl",whiteSpace:"normal"},formatter:function(){return"<span>"+this.value+"</span>"},useHTML:!0}},yAxis:{title:{text:scope.yAxis,style:{fontWeight:"normal",fontSize:"15px"}}},legend:{enabled:!1},lang:{drillUpText:">>",style:{fontFamily:"arial"}},tooltip:{enabled:!1},drilldown:{drillUpButton:{relativeTo:"spacingBox",position:{y:-15,x:6},theme:{fill:"white","stroke-width":1,stroke:"silver",r:0,states:{hover:{fill:"#bada55"},select:{stroke:"#039",fill:"#bada55"}}}}},series:[{name:"",colorByPoint:!0,data:chartDrilldownData,maxPointWidth:30}],plotOptions:{series:{maxPointWidth:30,borderWidth:0,dataLabels:{enabled:!0,format:scope.labelFormat}}}};Highcharts.setOptions({lang:{noData:"אין נתונים להצגה"}}),scope.$watchCollection("data",function(n,o){n&&(n.forEach(function(item){if(filterBy&&-1<filterBy.indexOf(item.ParentLevel))if(1==item.LevelIndex){series[item.LevelCd]||(series[item.LevelCd]={id:item.LevelCd,data:[]});var ser={name:item.LevelDesc,y:item.ExposureRate,id:item.LevelCd};1==item.HasChild&&(ser.drilldown=!0),series[item.LevelCd].data.push(ser),chartDrilldownData.push(ser)}else if(0==item.HasChild){var arr=[];arr.push(item.LevelDesc),arr.push(item.ExposureRate),drillDownSeries[item.LevelCd]||(drillDownSeries[item.LevelCd]={id:item.LevelCd,data:[],parent:item.Parent}),drillDownSeries[item.LevelCd].data.push(arr)}else{drillDownSeries[item.LevelCd]||(drillDownSeries[item.LevelCd]={id:item.LevelCd,data:[],parent:item.Parent});ser={name:item.LevelDesc,y:item.ExposureRate,drilldown:!0,id:item.LevelCd};drillDownSeries[item.LevelCd].data.push(ser)}}),0<Object.keys(series).length?element.css("display","block"):(chartOption.yAxis.max=10,element.closest("."+scope.parentClass).find(".chartNoData").prop("innerHTML",globalTrans[mGeneralSetting.Lang].mayaStrings.NoChartData)),chart=Highcharts.chart(element[0],chartOption))})}}}),mi.directive("mayaDrillDownLineChart",function($window){return{restrict:"E",replace:!0,template:'<div id="maya-line-chart"></div>',scope:{config:"@",titles:"@",data:"="},link:function(scope,elem,attr){scope.data;var chartPrimaryDrilldownData=[],chartSecondaryDrilldownData=[],config=($window.innerWidth,""==scope.config?{}:JSON.parse(scope.config)),chartOption={chart:{events:{load:function(){this.renderer.image("content/images/vchart/GRAPH_HP_BG.gif",160,88,220,140).add()}}},xAxis:{type:config.type,categories:config.categories},title:{text:config.title,style:{color:"#0c0c0c",fontFamily:"Arial",textAlign:"right",direction:"rtl"}},subtitle:{text:config.subtitle,style:{textAlign:"right",direction:"rtl",fontFamily:"Arial",fontSize:"18px",color:"#0c0c0c"}},yAxis:[{labels:{formatter:config.primaryFormatter,format:config.primaryFormat},title:{text:config.yPrimaryTitle,style:{textAlign:"right",fontFamily:"Arial",fontSize:"14px",color:"#0c0c0c"}}},{labels:{formatter:config.secondaryFormatter,format:config.secondaryFormat},title:{text:config.ySecondaryTitle,style:{textAlign:"right",fontFamily:"Arial",fontSize:"14px",color:"#0c0c0c"}},opposite:!0}],tooltip:{crosshairs:!0},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},credits:{enabled:!1},legend:{enabled:!0,itemStyle:{fontFamily:"Arial",fontSize:"13px"}},series:[{name:config.legendPrimary,type:"spline",tooltip:{shared:!0,useHTML:!0,headerFormat:"<table>",pointFormat:'<tr><th align="right" style="direction:rtl">{point.key} </th></tr><tr><td><b>{point.y}'+config.primaryChar+"</b></td></tr>",footerFormat:"</table>",style:{textAlign:"right",direction:"rtl",fontFamily:"Arial",color:"#0c0c0c"}},color:"#017fad",data:chartPrimaryDrilldownData},{name:config.legendSecondary,type:"spline",data:chartSecondaryDrilldownData,color:"#1d7e02",yAxis:1,tooltip:{shared:!0,useHTML:!0,headerFormat:"<table>",pointFormat:'<tr><th align="right" style="direction:rtl">{point.key} </th></tr><tr><td><b>{point.y}'+config.secondaryChar+"</b></td></tr>",footerFormat:"</table>",style:{textAlign:"right",direction:"rtl",fontFamily:"Arial",color:"#0c0c0c"}}}]};Highcharts.setOptions({lang:{thousandsSep:",",noData:"אין נתונים להצגה"}}),scope.$watchCollection("data",function(n,o){if(n&&n!==o){0<chartPrimaryDrilldownData.length&&(chartPrimaryDrilldownData=[],chartSecondaryDrilldownData=[]),0<chartOption.xAxis.categories.length&&(chartOption.xAxis.categories=[]);var showSecondaryY=!1;n.forEach(function(item){0<item.Y2&&(showSecondaryY=!0)}),n.forEach(function(item){chartPrimaryDrilldownData.push(+parseFloat(item.Y1).toFixed(1)),showSecondaryY&&chartSecondaryDrilldownData.push(+parseFloat(item.Y2).toFixed(1)),chartOption.xAxis.categories.push(item.X)}),chartOption.series[0].data=chartPrimaryDrilldownData,showSecondaryY?chartOption.series[1].data=chartSecondaryDrilldownData:chartOption.series.length=1,Highcharts.chart(elem[0],chartOption)}}),scope.$watchCollection("titles",function(newTitle,o){newTitle&&(newTitle=JSON.parse(newTitle),Highcharts.chart(elem[0],chartOption).setTitle({text:newTitle.Title},{text:newTitle.SubTitle}))})}}}),mi.directive("mayaDrillDownPieChart",function($window,mGeneralSetting){return{restirct:"E",template:'<div id="maya-pie-chart"></div>',scope:{title:"@",data:"="},link:function(scope,element,attr){var chart,drillDownSeries=[],chartDrilldownData=[],isMobile=!(991<=$window.innerWidth),dist=isMobile?-30:20,chartOption={chart:{type:"pie",backgroundColor:"rgba(255,255,255,0.1)",events:{drilldown:function(e){e.point.customtitle&&chart.setTitle({text:e.point.customtitle})},drillup:function(e){chart.setTitle({text:scope.title})}}},title:{useHTML:!0,text:"<span>"+scope.title+"</span>",style:{fontFamily:"arial",fontSize:isMobile?"13px":"14px",textAlign:"right",fontWeight:"bold"}},plotOptions:{pie:{size:220,dataLabels:{distance:dist},showInLegend:isMobile,point:{events:{legendItemClick:function(e){e.preventDefault()}}}},series:{dataLabels:{enabled:!0,style:{textOutline:!1,fontFamily:"arial",fontSize:"13px","white-space":"normal !important"},format:isMobile?"{point.y:.2f}%":"{point.name}: {point.y:.2f}%"}},allowPointSelect:!1},legend:{rtl:!0,enabled:isMobile,useHTML:!0,labelFormatter:function(){return'<span style="width:130px">'+this.name+"</span><span> "+this.y+"%</span>"}},lang:{drillUpText:mGeneralSetting.Lang==mGeneralSetting.LangStates.English?"<< Back":"חזרה >>",style:{fontFamily:"arial"}},credits:{enabled:!1},tooltip:{shared:!0,useHTML:!0,pointFormatter:function(){return this.options.tooltip},style:{fontFamily:"arial",textAlign:mGeneralSetting.Lang==mGeneralSetting.LangStates.English?"left":"right"}},series:[{name:" ",colorByPoint:!0,data:chartDrilldownData}],drilldown:{series:isMobile?null:drillDownSeries}};scope.$watchCollection("data",function(n,o){n&&(n.series.forEach(function(item){chartDrilldownData.push(item)}),n.drilldown.forEach(function(item){drillDownSeries.push(item)}),chart=Highcharts.chart(element[0],chartOption))})}}})}(angular);
!function(angular){"use strict";var mi=angular.module("m.services",[]).factory("storage",function(){var reports=[];return{reports:{data:reports,first:function(){return reports[0]}}}}).factory("_",function($window){var _=$window._;return delete $window._,_.naturalList=function(collection){if(2<collection.length){var head=collection.slice(0,-1),tail=collection[collection.length-1];return head.join(", ")+", and "+tail}return 2===collection.length?collection.join(" and "):collection.length?collection[0]:""},_}).factory("jsonService",function($http,$q,$timeout,localStorageService,mayaCacheService,ngConfigSetting){if(localStorage)try{for(var i=localStorage.length-1;0<=i;i--)0===localStorage.key(i).indexOf("angular-cache")&&localStorage.removeItem(localStorage.key(i))}catch(e){}ngConfigSetting.data;return{getTemplateByTemplateName:function(name){return gridTemplatesProvider.getTemplate(name)},getFilterMetadata:function(){var defer=$q.defer();return $http.get(ngConfigSetting.clientdata+"FilterMetadata.json",{cache:mayaCacheService.cacheThreeHour}).then(function(res){defer.resolve(res.data.FilterOptionsMetadata)},function(res){defer.reject(res.data)}),defer.promise},getAccountGroupsViaEntity:function(){var defer=$q.defer();return $http.get(ngConfigSetting.clientdata+"FilterAccountGroupTypes.json",{cache:mayaCacheService.cacheOneDay}).then(function(res){defer.resolve(res.data.Groups)},function(res){defer.reject(res.data)}),defer.promise},getEntities:function(){var defer=$q.defer();return $http.get(ngConfigSetting.clientdata+"Entity.json",{cache:mayaCacheService.cache15Minute}).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res)}),defer.promise},getFilterFunds:function(){var defer=$q.defer();return $http.get(ngConfigSetting.clientdata+"FilterFunds.json",{cache:mayaCacheService.cacheOneDay}).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res)}),defer.promise},getFilterFundHistory:function(){var defer=$q.defer();return $http.get(ngConfigSetting.clientdata+"FilterFundHistory.json",{cache:mayaCacheService.cacheOneDay}).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res)}),defer.promise},getFilterCorpAction:function(lang){var defer=$q.defer();return lang=lang||"",$http.get(ngConfigSetting.clientdata+"FilterCorpAction"+lang+".json",{cache:mayaCacheService.cacheOneDay}).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res)}),defer.promise},getMayaStrings:function(){var defer=$q.defer();return $http.get(ngConfigSetting.clientdata+"MayaStrings.json",{cache:mayaCacheService.cache15Minute}).then(function(res){defer.resolve(res.data)},function(res){defer.reject(res)}),defer.promise},getEntityAll:function(lang){return $q.defer().promise},getSecurity:function(lang){return $q.defer().promise},getEntityByGroup:function(lang){return $q.defer().promise},getEtnByGroup:function(lang){return lang=lang||"",$http.get(ngConfigSetting.clientdata+"EtnByGroup"+lang+".json",{cache:mayaCacheService.cache15Minute})},getEtfByGroup:function(lang){return lang=lang||"",$http.get(ngConfigSetting.clientdata+"EtfByGroup"+lang+".json",{cache:mayaCacheService.cache15Minute})},getHedgefundByGroup:function(lang){return lang=lang||"",$http.get(ngConfigSetting.clientdata+"HedgefundByGroup"+lang+".json",{cache:mayaCacheService.cache15Minute})},getForeignEtfByGroup:function(lang){return lang=lang||"",$http.get(ngConfigSetting.clientdata+"ForeignEtfByGroup"+lang+".json",{cache:mayaCacheService.cache15Minute})},getFundByGroup:function(lang){return lang=lang||"",$http.get(ngConfigSetting.clientdata+"FundByGroup"+lang+".json",{cache:mayaCacheService.cache15Minute})}}}).factory("utility",function(browserDetectionService,ngConfigSetting,mGeneralSetting){return{download:function(data,fileName,type){if(browserDetectionService.isIE10Up||!browserDetectionService.isCompatible()){if(navigator.msSaveBlob){var blob=new Blob(["\ufeff"+data],{type:"xls"==type.toLowerCase()?"application/vnd.ms-excel":"text/csv;charset=utf-8;"});window.navigator.msSaveBlob(blob,fileName+"."+type.toLowerCase())}}else{var anchor=angular.element("<a/>");anchor.css({display:"none"}),angular.element(document.body).append(anchor),anchor.attr({href:window.URL.createObjectURL(new Blob(["\ufeff"+data],{type:"xls"==type.toLowerCase()?"application/vnd.ms-excel":"text/csv;charset=utf-8;"})),target:"_blank",download:fileName+"."+type.toLowerCase()})[0].click()}},formatNumber:function(num){return num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},formatDate:function(d){var dd=d.getDate(),mm=d.getMonth()+1;return dd<10&&(dd="0"+dd),mm<10&&(mm="0"+mm),dd+"/"+mm+"/"+d.getFullYear()},padLeft:function(num,size){for(var s=num+"";s.length<size;)s="0"+s;return s},getLogo:function(id){var logo=null!=id||null!=id?this.padLeft(id,6)+".jpg":"default.jpg";return logo=ngConfigSetting.logoUrl+mGeneralSetting.Lang+"/"+logo}}});mi.filter("unique",function(_){return function(arr,field){return _.uniq(arr,function(a){return a[field]})}}),mi.service("MetaTagService",function($log){return{setMetaTag:function(tagMeta){setMetaName(tagMeta.keywords,"keywords"),setMetaName(tagMeta.description,"description"),setMetaName(tagMeta.title,"twitter:title"),setMetaName(tagMeta.description,"twitter:description"),setMetaProperty(tagMeta.title,"og:title"),setMetaProperty(tagMeta.description,"og:description"),setMetaItemProp(tagMeta.title,"name"),setMetaItemProp(tagMeta.description,"description")}};function setMetaName(content,name){updateAttribute('meta[name="'+name+'"]',"content",content)}function setMetaProperty(content,name){updateAttribute('meta[property="'+name+'"]',"content",content)}function setMetaItemProp(content,name){updateAttribute('meta[itemprop="'+name+'"]',"content",content)}function updateAttribute(selector,attributeName,attributeValue){if(document)if(selector){var el=document.querySelector(selector);el&&el.setAttribute&&el.setAttribute(attributeName,attributeValue)}else $log.error('updateMeta: Either of "name", "httpEquiv", "property" or "charset" must be provided!');else $log.error("updateMeta: document is not available!")}}),mi.service("TitleService",function($log,$window){return{setTitle:function(){var args=Array.prototype.slice.call(arguments);$window.document.title=args.join(" | ")}}}),Date.prototype.sameDay||(Date.prototype.sameDay=function(d){return this.getFullYear()===d.getFullYear()&&this.getDate()===d.getDate()&&this.getMonth()===d.getMonth()}),mi.service("browserDetectionService",function(){var browserInfo=navigator.userAgent,_isIE10Up=-1==browserInfo.indexOf("MSIE")&&0<browserInfo.indexOf("Trident")||0<browserInfo.indexOf("MSIE 10"),_isIE=-1!=browserInfo.indexOf("MSIE")||0<browserInfo.indexOf("Trident"),_isFireFox=-1!=browserInfo.indexOf("Firefox"),_isChrome=-1!=browserInfo.indexOf("Chrome"),services={isCompatible:function(){var browserInfo=navigator.userAgent,browserFlags={};return browserFlags.ISFF=-1!=browserInfo.indexOf("Firefox"),browserFlags.ISOPERA=-1!=browserInfo.indexOf("Opera"),browserFlags.ISCHROME=-1!=browserInfo.indexOf("Chrome"),browserFlags.ISSAFARI=-1!=browserInfo.indexOf("Safari")&&!browserFlags.ISCHROME,browserFlags.ISWEBKIT=-1!=browserInfo.indexOf("WebKit"),browserFlags.ISIE=0<browserInfo.indexOf("Trident")||0<navigator.userAgent.indexOf("MSIE"),browserFlags.ISIE6=0<browserInfo.indexOf("MSIE 6"),browserFlags.ISIE7=0<browserInfo.indexOf("MSIE 7"),browserFlags.ISIE8=0<browserInfo.indexOf("MSIE 8"),browserFlags.ISIE9=0<browserInfo.indexOf("MSIE 9"),browserFlags.ISIE10=0<browserInfo.indexOf("MSIE 10"),browserFlags.ISOLD=browserFlags.ISIE6||browserFlags.ISIE7||browserFlags.ISIE8||browserFlags.ISIE9,browserFlags.ISIE11UP=-1==browserInfo.indexOf("MSIE")&&0<browserInfo.indexOf("Trident"),browserFlags.ISIE10UP=browserFlags.ISIE10||browserFlags.ISIE11UP,browserFlags.ISIE9UP=browserFlags.ISIE9||browserFlags.ISIE10UP,!browserFlags.ISOLD}};return Object.defineProperty(services,"isIE10Up",{get:function(){return _isIE10Up}}),Object.defineProperty(services,"isFireFox",{get:function(){return _isFireFox}}),Object.defineProperty(services,"isIE",{get:function(){return _isIE}}),Object.defineProperty(services,"isChrome",{get:function(){return _isChrome}}),services}),mi.factory("mayaCacheService",function(CacheFactory){var cacheOneDay=CacheFactory("maya.OneDayCache",{maxAge:864e5,cacheFlushInterval:864e5,deleteOnExpire:"aggressive",storageMode:"localStorage"}),cacheOneHour=CacheFactory("maya.OneHourCache",{maxAge:36e5,cacheFlushInterval:72e5,deleteOnExpire:"aggressive",storageMode:"localStorage"}),cacheThreeHour=CacheFactory("maya.ThreeHourCache",{maxAge:108e5,cacheFlushInterval:18e6,deleteOnExpire:"aggressive",storageMode:"localStorage"}),cache15Minute=CacheFactory("maya.FifthMinuteCache",{maxAge:9e5,cacheFlushInterval:36e5,deleteOnExpire:"aggressive",storageMode:"localStorage"});return{cacheOneDay:cacheOneDay,cacheOneHour:cacheOneHour,cacheThreeHour:cacheThreeHour,cache15Minute:cache15Minute}}),mi.factory("Post",function(ngConfigSetting,mGeneralSetting){function Post(report,isMobile){this.isMobile=isMobile||!1;var preEng=mGeneralSetting.Lang===mGeneralSetting.LangStates.English?"en/":"";this.id=report.RptCode,this.title=globalTrans[mGeneralSetting.Lang].mayaStrings.ShareTitleMessage,this.entities=report.Companies,this.formalCompany=report.FormalCompanyData,this.link=window.location.protocol+"//"+window.location.host+ngConfigSetting.virDir+preEng+globalTrans[mGeneralSetting.Lang].mayaStrings.ReportPageURL+report.RptCode,this.picture=window.location.protocol+"//"+window.location.host+ngConfigSetting.virDir+preEng+globalTrans[mGeneralSetting.Lang].mayaStrings.SharePicture,this.description=report.Subject}return Post.prototype.toString=function(){return new Array(null!=this.formalCompany.CompanyId?this.formalCompany.CompanyName:this.entities[0].CompanyEntity.CompanyName+"...",this.description).join("-")},Post}),mi.factory("MayaSearchService",function($interval,jsonService,_){var AllEntities={},AllEntitiesEng={},services=(_=_,{getString:function(key){return null!=mayaStrings&&_.result(_.find(mayaStrings,function(obj){return obj.Key==key}),"Value")},init:function(eng){}});return Object.defineProperty(services,"AllEntities",{get:function(){return AllEntities}}),Object.defineProperty(services,"AllEntitiesEng",{get:function(){return AllEntitiesEng}}),services})}(angular);
!function(angular){"use strict";angular.module("m.notification",[]).factory("notifyProxy",function($http,reportProxy,$log,$rootScope,$location,dataStorage,_){var currentName,id,funcs=[],pause=!1;return $rootScope.$on("$routeChangeStart",function(ae,c,p){currentName=null}),{onNotify:function(fn){funcs.length=0,funcs.push(fn)},start:function(nData,view){if(!nData)return;pause=!1,currentName=view,setTimeout(function work(){if(!(view!=currentName||1==pause||window.innerWidth<991)){var o={view:view,id:id};reportProxy.checkForNewReports(o).then(function(res){res&&(0<res.Reports.length||0<res.ChangedReports.length)&&(funcs[0](res),0<res.Reports.length&&(id=res.Reports[0].RptCode)),$log.debug(currentName),view!=currentName||pause||setTimeout(work,1e3*nData.frq)},function(err){setTimeout(work,5e3*nData.frq)})}},1e3*nData.frq)},stop:function(){pause=!0},setMaxReport:function(reportId){id=reportId}}}).service("postingMayaService",function($log,$analytics){return{shareTwitter:function(post){$log.log("Share on Twitter");var urlToPost=encodeURIComponent(post.link),fullUrl="https://twitter.com/intent/tweet?text="+encodeURIComponent(post.title+"\n"+post.toString())+"%0a&url="+urlToPost;window.open(fullUrl,"tweeter","width=630, height=250"),$analytics.eventTrack("ShareTwitter")},shareWhatsapp:function(post){$log.log("Share on shareWhatsapp");var textToPost=encodeURIComponent(post.title+"\n"+post.toString()+"\n"+post.link);post.isMobile?window.open("whatsapp://send?text="+textToPost):window.open("https://api.whatsapp.com/send?text="+textToPost),$analytics.eventTrack("ShareWhatsapp")}}}).service("notificationStatesHelper",function(ngConfigSetting,$log){var socket;ngConfigSetting.socketEnabled&&(socket=io(ngConfigSetting.mayaServiceUrl));return{socket:socket}}).service("safeApply",function($rootScope,mGeneralSetting){return function(data){var strLink="";return angular.forEach(data,function(ind){strLink=(strLink="https://www.tase.co.il/heb/"+globalTrans[mGeneralSetting.Lang].mayaStrings.IndexMainPageLink[ind.TabIndexType])+"?IndexId="+ind.IndexNumber,ind.IsAdditional?strLink+="&addTab="+ind.TabNumber:strLink+="&Action="+ind.TabNumber,ind.Link=strLink}),data}}).service("pushNotificationService",function(){var count,ignoreNotifyPopup,wantNotifications,selectedEvents,messageData=[],storageKeys_WantNotifications="WantNotifications",storageKeys_SelectedEvents="SelectedEvents",services={load:function(refreshData){(count=sessionStorage.count)||resetCounter();var sessionData=function(){var ssData=sessionStorage.getItem("notifications")?JSON.parse(sessionStorage.getItem("notifications")):[],day=new Date;ssData&&ssData.messages&&ssData.messages.forEach(function(item,idx){if(day.getDay()!=new Date(item.message.Ticks).getDay())return console.log("clear storage",day.getDay(),new Date(item.message.Ticks).getDay()),clearAll(),void(ssData.messages=[])});return ssData}(),newData=[];refreshData.forEach(function(rd){rd.notification.forEach(function(elem){sessionData&&0<Object.keys(sessionData).length?elem.RowClicked=-1<sessionData.rowClicked.indexOf(elem.Key):elem.RowClicked=!1,newData.push({message:elem,type:rd.announcementType,url:elem.url,id:elem.Key})})}),messageData=this.merge(0<Object.keys(sessionData).length?sessionData.messages:[],newData),this.setCounter()},removeItem:function(id){if(0<count){for(var i=0;i<messageData.length;i++)messageData[i].message.Key==id&&count--;sessionStorage.count=count}},clearAll:clearAll,onRowClicked:function(id){for(var i=0;i<messageData.length;i++)if(messageData[i].id===id){messageData[i].message.RowClicked=!0,saveDataToStorage();break}},addItem:function(item){var data=[],added=!1;if(item){data=item.notification;for(var mes=0;mes<data.length;mes++)data[mes].RowClicked=!1,data[mes]={message:data[mes],type:item.announcementType,url:data[mes].url,id:data[mes].Key};for(var i=0;i<data.length;i++){if(0==messageData.filter(function(elem){return elem.message.Key==data[i].message.Key}).length){var settings=wantNotifications[data[i].type];settings&&(messageData.unshift(data[i]),count++,added=!0),settings&&angular.isFunction(this.onPublishAnnouncement)&&this.onPublishAnnouncement(data[i])}}added&&(sessionStorage.count=count,saveDataToStorage())}},resetCounter:resetCounter,setCounter:function(){count=sessionStorage.count?+sessionStorage.count:0},setNotify:function(flag){localStorage.ShowNotifications=flag?"none":"yes",ignoreNotifyPopup=flag},onPublishAnnouncement:null,createBRTitle:function(item){var title="";for(var i in item.Companies){var company=item.Companies[i];title+=company.CompanyEntity.CompanyName,company.HasTradingData&&(title+=" "+company.TradeHaltType),title+=", "}0<title.length&&(title=title.substring(0,title.length-2));return title},clearEventData:function(eventType){messageData.forEach(function(item,idx){item.type===eventType&&messageData.splice(idx,1)})},merge:function(arr1,arr2){var i=0,j=0,merged=[];for(;i<arr1.length&&j<arr2.length;)arr1[i].message.Ticks<arr2[j].message.Ticks?merged.push(arr2[j++]):merged.push(arr1[i++]);for(;i<arr1.length;)merged.push(arr1[i++]);for(;j<arr2.length;)merged.push(arr2[j++]);return merged},init:function(){wantNotifications=localStorage[storageKeys_WantNotifications]?JSON.parse(localStorage[storageKeys_WantNotifications]):{breakingAnnouncement:!0,issuance:!0,tradeDate:!0};sessionStorage[storageKeys_SelectedEvents]&&(selectedEvents=JSON.parse(sessionStorage[storageKeys_SelectedEvents]))},saveSettings:function(settings){wantNotifications=settings,localStorage[storageKeys_WantNotifications]=JSON.stringify(wantNotifications)},setSelectedEvents:function(se){selectedEvents=se,sessionStorage[storageKeys_SelectedEvents]=JSON.stringify(selectedEvents)},setSingleEvent:function(rec){if(rec.IsSelected)selectedEvents[rec.TblType.toLowerCase()].push(+rec.PaymentKey);else{var index=selectedEvents[rec.TblType.toLowerCase()].indexOf(+rec.PaymentKey);-1<index&&selectedEvents[rec.TblType.toLowerCase()].splice(index,1)}sessionStorage[storageKeys_SelectedEvents]}};return Object.defineProperty(services,"messageData",{get:function(){return messageData}}),Object.defineProperty(services,"count",{get:function(){return count},set:function(val){count=val}}),Object.defineProperty(services,"wantNotifications",{get:function(){return wantNotifications},set:function(val){wantNotifications=val}}),Object.defineProperty(services,"ignoreNotifyPopup",{get:function(){return ignoreNotifyPopup}}),services;function saveDataToStorage(){var rowClicked=[];messageData.forEach(function(elem){elem.message.RowClicked&&rowClicked.push(elem.id)});var messagesToAdd=messageData.filter(function(message){return"issuance"!==message.type&&"firstTrade"!==message.type});sessionStorage.notifications=JSON.stringify({messages:messagesToAdd,rowClicked:rowClicked})}function clearAll(){messageData.splice(0,messageData.length),sessionStorage.removeItem("notifications"),resetCounter()}function resetCounter(){count=0,sessionStorage.count=count}}).directive("announcementPopup",function($filter,toastr,$templateCache,ngConfigSetting,notificationStatesHelper,pushNotificationService,mGeneralSetting){function toastrTemplateCache(){$templateCache.put("directives/toast/toast.html",'<div class="notificationFloatWindow hidden-xs hidden-sm"><div class="floatWindowIcon {{customOptions.tag}}FloatWindowBackground"><i class="{{customOptions.iconType}}"></i></div><button title="סגור חלון" class="floatWindowCloseBtn" ng-click="tapToast()"><i class="mf mf-close-signup" ng-click="tapToast()"></i></button><div class="floatWindowText"><div class="floatWindowEntitiesWrap"><div class="floatWindowEntities" aria-label="{{title}}">{{title}}</div></div><div class="message-subject" ng-switch on="customOptions.notificationType"><a ng-switch-when="breakingAnnouncement" class="subject" ng-href="{{customOptions.item.url}}" data-ellipsis data-ellipsis-symbol="..." data-ng-bind="customOptions.item.message.Subject" ng-click="tapToast()">{{customOptions.item.message.Subject}}</a><a ng-switch-when="issuanceDayRange" class="subject" ng-href="{{customOptions.item.url}}"><div>הזמנות - התחלה:&ensp;{{customOptions.item.start}}&ensp;&ensp;{{customOptions.item.message.SubmissionOfOrdersStartHour}}</div><div class="subjectIndent">סיום:&ensp;{{customOptions.item.end}}&ensp;&ensp;{{customOptions.item.message.SubmissionOfOrdersEndHour }}</div></a><a ng-switch-when="issuanceOneDay" class="subject" ng-href="{{customOptions.item.url}}"><div>הזמנות:&ensp;{{customOptions.item.start}}</div><div>התחלה:&ensp;{{customOptions.item.message.SubmissionOfOrdersStartHour}}&ensp;&ensp;סיום:&ensp;{{customOptions.item.message.SubmissionOfOrdersEndHour}}</div></a><a ng-switch-when="issuanceUpdate" class="subject" data-ellipsis data-ellipsis-symbol="..." data-ng-bind="customOptions.item.message.Subject" ng-href="{{customOptions.item.url}}">{{customOptions.item.message.Subject}}</a><div ng-switch-when="firstTrade" class="subject"><div>{{customOptions.item.message.Subject}}: {{customOptions.item.message.TradeFirstDate | date : \'d/MM/yyyy\'}}</div><div>ל- {{customOptions.item.message.StockShortHeb}}</div></div><progress-bar></progress-bar></div><div class="{{customOptions.tag}}-tag" ><span class="footer-message">{{customOptions.announcementType}}</span></div></div></div>')}return toastrTemplateCache(),{restrict:"E",link:function(){ngConfigSetting.socketEnabled&&(pushNotificationService.onPublishAnnouncement=function(result){var tag,html="breakingAnnouncement",recordTitle="",iconType="",data=angular.copy(result);switch(data.type){case"issuance":switch(data.start=$filter("date")(new Date(data.message.SubmissionOfOrdersStartDate),"dd/MM/yy"),data.end=$filter("date")(new Date(data.message.SubmissionOfOrdersEndDate),"dd/MM/yy"),data.message.SubmissionOfOrdersEndHour=$filter("date")(new Date("1/1/2018 "+data.message.SubmissionOfOrdersEndHour),"HH:mm"),data.message.SubmissionOfOrdersStartHour=$filter("date")(new Date("1/1/2018 "+data.message.SubmissionOfOrdersStartHour),"HH:mm"),data.message.RecordType){case 1:recordTitle="מכרז חדש",html=data.start===data.end?"issuanceOneDay":"issuanceDayRange";break;case 2:recordTitle="עדכון מכרז",html="issuanceUpdate",data.message.Subject="עיקרי העדכון:   "+data.message.ChangeComment;break;case 3:recordTitle="עדכון מכרז",html="issuanceUpdate",data.message.Subject="עיקרי העדכון:  "+data.message.ChangeComment}recordTitle=data.message.CompanyNm+" - "+recordTitle,tag="orange",iconType="icon-statistic-raise";break;case"firstTrade":data.message.Subject="מחר יום מסחר ראשון",iconType="fa fa-calendar",tag="blue",recordTitle="יום מסחר ראשון",html="firstTrade";break;case"breakingAnnouncement":tag="green",iconType="mf mf-megaphone_white",recordTitle=data.message.ConcatCompanyNames}var announcementType=globalTrans[mGeneralSetting.Lang].mayaStrings[data.type];toastr.info("&nbsp;",recordTitle,{},{announcementType:announcementType,tag:tag,iconType:iconType,item:data,notificationType:html}),toastrTemplateCache()})}}}).directive("notificationAlert",function($interval,$log,ngConfigSetting,notificationStatesHelper,pushNotificationService,modalService,mGeneralSetting,AccountProxy){return{restrict:"E",templateUrl:"src/notification/views/notification-alert.html",link:function(scope,elem,attr){scope.isOpen=!1,scope.loadDate=new Date,Object.defineProperty(scope,"data",{get:function(){return pushNotificationService.messageData}}),Object.defineProperty(scope,"count",{get:function(){return pushNotificationService.count}}),scope.removeItem=function(id){pushNotificationService.removeItem(id)},scope.rowClicked=function(id){scope.isOpen=!1,pushNotificationService.onRowClicked(id)},scope.openSetting=function(){scope.isOpen=!1,modalService.open(mGeneralSetting.ModalType.AlertSettingDialog,{}).then(function(){AccountProxy.authentication.isAuth&&AccountProxy.saveUserAlertSettings(JSON.parse(localStorage.WantNotifications)).then(function(){}.bind(this),function(err){console.log("network error")})}.bind(this),function(){}.bind(this))},function(){pushNotificationService.init(),scope.apiStateHelper=notificationStatesHelper,scope.apiStateHelper.socket.on("onAnnouncement",function(data){pushNotificationService.addItem(data)}),scope.apiStateHelper.socket.on("onIssuance",function(data){pushNotificationService.addItem(data)}),scope.apiStateHelper.socket.on("onRefresh",function(data){pushNotificationService.load(data)}),scope.apiStateHelper.socket.on("onTradeDate",function(data){pushNotificationService.clearEventData(data.announcementType),pushNotificationService.addItem(data)}),scope.apiStateHelper.disconnected=function(){}.bind(this)}(),scope.autoReset=$interval(function(){var currDate=new Date;0<Math.round(Math.abs((scope.loadDate.getTime()-currDate.getTime())/864e5))&&(pushNotificationService.clearAll(),$log.info("cleared yesterday's notifications"),scope.loadDate=currDate)},3e5),scope.$on("$destroy",function(){$interval.cancel(scope.autoReset)}),scope.toggle=function(){pushNotificationService.resetCounter(),scope.isOpen=!scope.isOpen,!0===scope.isOpen&&$("body").on("click",function handlerOutsideInputClick(){0==scope.isOpen&&$("body").off("click",handlerOutsideInputClick),"I"==event.target.tagName||"A"==event.target.tagName||0<$(event.target).closest(".ignore-click").length||1==scope.isOpen&&(scope.isOpen=!1,scope.$apply())})},ngConfigSetting.socketEnabled}}}).directive("oneNotification",function($filter,$location,ngConfigSetting,notificationStatesHelper,mGeneralSetting){return{restrict:"E",templateUrl:"src/notification/views/one-notification.html",scope:{item:"=",onRowClicked:"&"},link:function(scope,elem,attr){scope.goto=function(item){scope.onRowClicked({id:item.id}),$location.url(item.url)},scope.translate=function(key){return globalTrans[mGeneralSetting.Lang].mayaStrings[key]},scope.displayDate=scope.item.message.PubDate;var html="breaking-announcement.html",recordTitle="";switch(scope.item.type){case"issuance":switch(scope.item.start=$filter("date")(new Date(scope.item.message.SubmissionOfOrdersStartDate),"dd/MM/yy"),scope.item.end=$filter("date")(new Date(scope.item.message.SubmissionOfOrdersEndDate),"dd/MM/yy"),scope.item.message.SubmissionOfOrdersEndHour=$filter("date")(new Date("1/1/2018 "+scope.item.message.SubmissionOfOrdersEndHour),"HH:mm"),scope.item.message.SubmissionOfOrdersStartHour=$filter("date")(new Date("1/1/2018 "+scope.item.message.SubmissionOfOrdersStartHour),"HH:mm"),scope.tag="orange",scope.item.message.RecordType){case 1:recordTitle="מכרז חדש",html=scope.item.start===scope.item.end?"issuance-one-day.html":"issuance-day-range.html";break;case 2:recordTitle="עדכון מכרז",html="issuance-update.html",scope.item.message.Subject="עיקרי העדכון:   "+scope.item.message.ChangeComment;break;case 3:recordTitle="עדכון מכרז",html="issuance-update.html",scope.item.message.Subject="עיקרי העדכון:  "+scope.item.message.ChangeComment}scope.item.message.Title=scope.item.message.CompanyNm+" - "+recordTitle,scope.iconType="icon-statistic-raise";break;case"breakingAnnouncement":scope.item.message.Title=scope.item.message.ConcatCompanyNames,scope.iconType="mf mf-megaphone_white",scope.tag="green";break;case"firstTrade":html="event-alert.html",scope.item.message.Title="יום מסחר ראשון",scope.item.message.Subject=" מחר יום מסחר ראשון",scope.tag="blue",scope.iconType="fa fa-calendar"}scope.hebAnnouncementType=scope.translate(scope.item.type),scope.htmlTemplate="src/notification/template/"+html}}}).run(function($rootScope){$rootScope.safeApply=function(fn){var phase=this.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)}}).directive("alertSetting",function(){function alertSettingsCtrl($scope,modalService,pushNotificationService){$scope.close=modalService.resolve,$scope.cancel=modalService.reject,this.placeHolder=modalService.params().placeHolder,this.inputLabel=modalService.params().inputLabel,this.title=modalService.params().title,this.modalService=modalService,this.currentSettings={},this.saveSettings=pushNotificationService.saveSettings,Object.defineProperty(this,"wantNotifications",{get:function(){return pushNotificationService.wantNotifications}}),this.init()}return alertSettingsCtrl.prototype.init=function(){this.currentSettings=angular.extend({},this.wantNotifications)},alertSettingsCtrl.prototype.close=function(){this.modalService.resolve()},alertSettingsCtrl.prototype.cancel=function(){this.modalService.reject()},alertSettingsCtrl.prototype.save=function(){this.saveSettings(this.currentSettings),this.modalService.resolve()},{restrict:"EA",templateUrl:"src/notification/views/alert-settings.html",controller:alertSettingsCtrl,bindToController:!0,controllerAs:"as",link:function(scope,elem,attrs){}}})}(angular);
!function(angular){"use strict";function mayaBreadCrumbsFactory($rootScope,$location,$route,mayaMenuService,$log,mGeneralSetting){var breadcrumbs=[{id:0,label:globalTrans[mGeneralSetting.Lang].maya,url:mGeneralSetting.Lang==mGeneralSetting.LangStates.English?"/":"/en"}],self=this,menuService=mayaMenuService,breadcrumbService={push:push,remove:function(id){0<id&&1<breadcrumbs.length&&breadcrumbs.splice(id,1)},update:function(id,label,url){breadcrumbs[id].label=label,breadcrumbs[id].url=url},clean:clean,generateByMenu:function(c){clean();var menuKey=null==c.params.view?"":c.params.view;""==(menuKey=null==c.params.search?menuKey:c.params.search)&&(menuKey=null==c.$$route.label?"":c.$$route.label);menuService.menudata[menuKey]&&""!=menuService.menudata[menuKey].Desc?push(1,menuService.menudata[menuKey].Desc,menuService.menudata[menuKey].Url):menuService.submenudata[menuKey]&&angular.forEach(menuService.submenudata,function(md){menuKey==md.Key&&(push(1,menuService.menudata[menuService.submenudata[menuKey].Parent].Desc,menuService.menudata[menuService.submenudata[menuKey].Parent].Url),push(2,menuService.submenudata[menuKey].Desc,menuService.submenudata[menuKey].Url))})}};return Object.defineProperty(breadcrumbService,"items",{get:function(){return breadcrumbs}}),breadcrumbService;function push(id,label,url){breadcrumbs[0]={id:0,label:globalTrans[mGeneralSetting.Lang].maya,url:"/"},""!=label&&id&&(id<breadcrumbs.length||(url=url,breadcrumbs.push({id:id,label:label,url:url}),dump()))}function clean(id){for(var i=breadcrumbs.length-1;0<i;i--)breadcrumbs.pop();dump()}function dump(){self.enabledDebug&&$log.debug(breadcrumbs.items)}}angular.module("ng-breadcrumbs",[]).provider("breadcrumbs",function(){this.enabledDebug=!1,this.$get=mayaBreadCrumbsFactory}).factory("BaseCtrl",function(breadcrumbs){function BaseCtrl($scope){(this.$scope=$scope).$on("$destroy",function(){this&&this.breadcrumbs.clean()})}return BaseCtrl.prototype.pushBreadcrumbs=function(item){breadcrumbs.push(item.id,item.label,item.url)},BaseCtrl.prototype.updateBreadcrumbs=function(index,item){breadcrumbs.items[index]=item},BaseCtrl.prototype.setBreadcrumbsMainRoot=function(label,url){breadcrumbs.update(0,label,url)},BaseCtrl})}(angular);
!function(angular){"use strict";var mi=angular.module("m.sharedDirective",[]);function searchProxyFactory($http,$log,$q,ngConfigSetting){function SearchProxy(){}return SearchProxy.prototype.GetAllEntitiesByType=function(entityType,term){var defer=$q.defer();return $log.debug("SearchProxy.GetAllEntitiesByType"),$http({method:"GET",url:ngConfigSetting.api+"autocomplete/getallentitiesbytype?entityType="+entityType+"&term="+term}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},SearchProxy.prototype.getSearchAutoCompleteData=function(term){var defer=$q.defer();return $log.debug("SearchProxy.getSearchAutoCompleteData("+term+")"),term=0<term.length?encodeURIComponent(term):term,$http({method:"GET",url:ngConfigSetting.api+"autocomplete/getsearchjson?term="+term}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},SearchProxy.prototype.getSearchAutoCompletCompany=function(term){var defer=$q.defer();return $log.debug("SearchProxy.getSearchAutoCompletCompany("+term+")"),$http({method:"GET",url:ngConfigSetting.api+"autocomplete/getcompanyjson?term="+term}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},SearchProxy.prototype.getCompaniesByGroup=function(grpId,subgrpId){var defer=$q.defer();return $log.debug("SearchProxy.getCompaniesByGroup("+grpId+")"),$http({method:"GET",url:ngConfigSetting.api+"autocomplete/getcompaniesbygrp?grpId="+grpId+"&subgrpId="+subgrpId}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},SearchProxy.prototype.getSearchAutoCompletCompanyAndSecurity=function(term){var defer=$q.defer(),apiUrl=ngConfigSetting.api+"autocomplete/getcompaniesandsecurities?term=";return $log.debug("SearchProxy.getSearchAutoCompletCompany("+term+")"),$http({method:"GET",url:apiUrl+term}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},SearchProxy.prototype.getBranchesTypes=function(){var defer=$q.defer();return $log.debug("SearchProxy.getBranchesTypes"),$http({method:"GET",url:ngConfigSetting.api+"autocomplete/getbranches"}).success(function(data,status,headers,cfg){defer.resolve(data)}).error(function(err,status){$log.error(err),defer.reject(status)}),defer.promise},new SearchProxy}function mayaAppLoadedDirective($rootScope,$timeout){return{link:function(scope,element,attributes){scope.$on("$viewContentLoaded",function(){null!=element&&(element.remove(),element=null),$timeout(function(){var footer=angular.element("footer");footer.hasClass("hidden")&&footer.removeClass("hidden")},800)})},restrict:"C"}}function sharedWrapperDirective(mayaWrapperService){return{restrict:"A",controller:function($scope){Object.defineProperty(this,"mobMenuOpen",{get:function(){return mayaWrapperService.mobMenuOpen},set:function(value){mayaWrapperService.menudata=mobMenuOpen}})},bindToController:!0,controllerAs:"wrp",link:function(scope,element,attrs){var wrapper=$("#wrapper"),pageOverlayToggle=$("#pageOverlayToggle"),sidebarWrapper=$("#sidebar-wrapper");scope.wrp.openMobMenu=function(){wrapper.toggleClass("toggled"),pageOverlayToggle.toggleClass("menuOpenOverlay"),$("#sidebar-filter-wrapper").toggle(),$("#second-sidebar-filter-wrapper").toggle()},scope.wrp.closeMobMenu=function(){wrapper.toggleClass("toggled"),pageOverlayToggle.toggleClass("menuOpenOverlay"),$("#sidebar-filter-wrapper").toggle(),$("#second-sidebar-filter-wrapper").toggle()},scope.wrp.openSidebarFilter=function(){wrapper.toggleClass("toggled"),pageOverlayMobileFilterToggle.toggleClass("menuOpenOverlay"),sidebarWrapper.toggle(),$("#second-sidebar-filter-wrapper").toggle()},scope.wrp.closeSidebarFilter=function(){wrapper.toggleClass("toggled"),pageOverlayMobileFilterToggle.toggleClass("menuOpenOverlay"),sidebarWrapper.toggle(),$("#second-sidebar-filter-wrapper").toggle()},scope.wrp.backToTop=function(){$("html,body").animate({scrollTop:0},"slow")},element.find("#menu-toggle").on("click",function(e){e.preventDefault(),scope.wrp.openMobMenu()}),element.find("#menu-toggle-close").on("click",function(e){e.preventDefault(),scope.wrp.closeMobMenu()}),element.find("#pageOverlayToggle").on("click",function(e){e.preventDefault(),wrapper.toggleClass("toggled"),$(this).toggleClass("menuOpenOverlay"),$("#sidebar-filter-wrapper").toggle(),$("#second-sidebar-filter-wrapper").toggle()});var pageOverlayMobileFilterToggle=element.find("#pageOverlayMobileFilterToggle").on("click",function(e){e.preventDefault(),wrapper.toggleClass("toggled"),$(this).toggleClass("menuOpenOverlay"),sidebarWrapper.toggle(),$("#second-sidebar-filter-wrapper").toggle()});scope.wrp.checkIfOpenOverlay=function(){pageOverlayToggle.hasClass("menuOpenOverlay")&&(wrapper.toggleClass("toggled"),pageOverlayToggle.toggleClass("menuOpenOverlay"),$("#sidebar-filter-wrapper").toggle(),$("#second-sidebar-filter-wrapper").toggle()),pageOverlayMobileFilterToggle.hasClass("menuOpenOverlay")&&(wrapper.toggleClass("toggled"),pageOverlayMobileFilterToggle.toggleClass("menuOpenOverlay"),sidebarWrapper.toggle(),$("#second-sidebar-filter-wrapper").toggle())},scope.$on("$routeChangeStart",function(ae,c,p){scope.wrp.checkIfOpenOverlay()}),scope.$on("$routeUpdate",function(){scope.wrp.checkIfOpenOverlay()})}}}function mayaWrapperServiceFactory(){var mobMenuOpen,AccessibilityOpen,services={};return Object.defineProperty(services,"mobMenuOpen",{get:function(){return mobMenuOpen},set:function(value){mobMenuOpen=value}}),Object.defineProperty(services,"AccessibilityOpen",{get:function(){return AccessibilityOpen},set:function(value){AccessibilityOpen=value}}),services}function sidebarFilterBtnDirective(){return{restrict:"A",require:"^sharedWrapper",link:function(scope,element,attrs,wrp){element.on("click",function(e){e.preventDefault(),wrp.openSidebarFilter()})}}}function closeSidebarFilterBtnDirective(){return{restrict:"A",require:"^sharedWrapper",link:function(scope,element,attrs,wrp){element.on("click",function(e){e.preventDefault(),wrp.closeSidebarFilter()})}}}function sharedTopNavBarDirective(){return{restrict:"A",link:function(scope,element,attrs){angular.element(window).bind("scroll",function(e){var sticky=$(".sticky");155<=$(window).scrollTop()?sticky.addClass("fixed"):sticky.removeClass("fixed")})}}}function mayaMenuNavBarDirective($log,jsonService,$location,mayaMenuService,breadcrumbs,$route){function MayaNavBarCtrl(){this._log=$log,this._location=$location,this._route=$route,this.menuService=mayaMenuService,this.breadcrumbs=breadcrumbs,Object.defineProperty(this,"menudata",{get:function(){return mayaMenuService.menudata},set:function(value){mayaMenuService.menudata=value}}),Object.defineProperty(this,"submenudata",{get:function(){return mayaMenuService.submenudata},set:function(value){mayaMenuService.submenudata=value}})}return MayaNavBarCtrl.prototype.onPageChange=function(key,c){var menudata=this.menudata,submenudata=this.submenudata;function setMenuActive(key){angular.forEach(menudata,function(md){md.IsActive=!1,md.IsSelected="",key==md.Key&&(md.IsActive=!0,md.IsSelected="active",md.isVisited=!1)})}"favorites"==key&&(key=""),""==key?setMenuActive(key):this.menudata[key]?setMenuActive(key):angular.forEach(submenudata,function(md){key==md.Key&&setMenuActive(md.Parent)}),this.breadcrumbs.generateByMenu(c)},{restirct:"A",controller:MayaNavBarCtrl,bindToController:!0,controllerAs:"mc",link:function(scope,element,attr){var ctrl=scope.mc;element.find(".subMenu");scope.$on("$routeChangeSuccess",function(ae,c,p){if(c.$$route){var key="/"==c.$$route.originalPath||"/en/"==c.$$route.originalPath?"breakingannouncement":"";""==key&&-1==c.$$route.originalPath.indexOf("corporateactions")&&(key=null==c.params.view?"":c.params.view),""==key&&(key=null==c.$$route.label?"":c.$$route.label),ctrl.onPageChange(key,c)}})}}}function mayaMenuDirective(mGeneralSetting){return{restrict:"A",require:"^?sharedMayaNavBar",link:function(scope,element,attrs,mayaNavBarCtrl){mGeneralSetting.Lang,element.find("ul");var urlMenuElement=element.find("a"),o={};o.IsActive=urlMenuElement[0].hash.replace("#","/")==mayaNavBarCtrl._location.path(),o.Key=attrs.sharedMayaMenu,o.IsSelected=urlMenuElement[0].hash.replace("#","/")==mayaNavBarCtrl._location.path()?"active":"",0<urlMenuElement.children().length?(o.Desc=""==urlMenuElement.children()[0].innerHTML?globalTrans[mGeneralSetting.Lang][urlMenuElement.children()[0].attributes.translate.value.split(".")[0]][urlMenuElement.children()[0].attributes.translate.value.split(".")[1]]:urlMenuElement.children()[0].innerHTML,o.Url=""):(o.Desc=urlMenuElement.html(),o.Url=urlMenuElement.attr("href")),o.isVisited=!1,mayaNavBarCtrl.menuService.addMenu(o)}}}function mayaSubMenuDirective(mGeneralSetting){return{restrict:"A",require:"^?sharedMayaNavBar",link:function(scope,element,attrs,mayaNavBarCtrl){mGeneralSetting.Lang,element.find("ul");var urlMenuElement=element.find("a"),parentElement=element.parent().parent()[0],o={};o.IsActive=urlMenuElement[0].hash.replace("#","/")==mayaNavBarCtrl._location.path(),o.Key=attrs.sharedMayaSubMenu,o.IsSelected=urlMenuElement[0].hash.replace("#","/")==mayaNavBarCtrl._location.path()?"active":"",o.Parent=parentElement.getAttribute("shared-maya-menu"),0<urlMenuElement.children().length?o.Desc=""==urlMenuElement.children()[0].innerHTML?globalTrans[mGeneralSetting.Lang][urlMenuElement.children()[0].attributes.translate.value.split(".")[0]][urlMenuElement.children()[0].attributes.translate.value.split(".")[1]]:urlMenuElement.children()[0].innerHTML:o.Desc=urlMenuElement.html(),o.Url=urlMenuElement.attr("href"),mayaNavBarCtrl.menuService.addSubMenu(o)}}}function sharedDownloadDirective($http){return{restrict:"A",scope:{file:"@"},link:function(scope,iElement,iAttrs){scope.$on("maya-event-downloadFile",function(e,url){var strURL=url;$http.get(url,{responseType:"arraybuffer"}).success(function(data,status,headers){var success=!1,filename=(headers=headers())["x-filename"]||strURL.substring(strURL.lastIndexOf("/")+1),contentType=headers["content-type"]||"application/octet-stream";try{console.log("Trying saveBlob method ...");var blob=new Blob([data],{type:contentType});if(navigator.msSaveBlob)navigator.msSaveBlob(blob,filename);else{var saveBlob=navigator.webkitSaveBlob||navigator.mozSaveBlob||navigator.saveBlob;if(void 0===saveBlob)throw"Not supported";saveBlob(blob,filename)}console.log("saveBlob succeeded"),success=!0}catch(ex){console.log("saveBlob method failed with the following exception:"),console.log(ex)}if(!success){var urlCreator=window.URL||window.webkitURL||window.mozURL||window.msURL;if(urlCreator){var link=document.createElement("a");if("download"in link)try{console.log("Trying download link method with simulated click ...");blob=new Blob([data],{type:contentType});var url=urlCreator.createObjectURL(blob);link.setAttribute("href",url),link.setAttribute("download",filename);var event=document.createEvent("MouseEvents");event.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),link.dispatchEvent(event),console.log("Download link method with simulated click succeeded"),success=!0}catch(ex){console.log("Download link method with simulated click failed with the following exception:"),console.log(ex)}if(!success)try{console.log("Trying download link method with window.location ...");blob=new Blob([data],{type:"application/octet-stream"}),url=urlCreator.createObjectURL(blob);window.location=url,console.log("Download link method with window.location succeeded"),success=!0}catch(ex){console.log("Download link method with window.location failed with the following exception:"),console.log(ex)}}}success||(console.log("No methods worked for saving the arraybuffer, using last resort window.open"),window.open(httpPath,"_blank",""))}).error(function(data,status){console.log("Request failed with status: "+status)})})}}}function PopUpNewCtrl($uibModalInstance,localStorageService,mGeneralSetting,mayauthService){this.localStorageService=localStorageService,this.$uibModalInstance=$uibModalInstance,this.featureIndex=0,this.sliderLeft=0,this.isEng=mGeneralSetting.Lang===mGeneralSetting.LangStates.English,this.imgHref=this.isEng?"popup_eng.png":"popup_heb.png",this.sliderImagesArray=[],this.features=[{id:0,title:"",desc:"",img:"etfs.jpg",linkTxt:"",link:""}],this.currFeature=this.features[this.featureIndex],this.mayauthService=mayauthService,this.init()}function popupNewDirective($uibModal,localStorageService){return{restrict:"A",replace:!0,link:function(scope,elem,attr){scope.open=function(){$uibModal.open({templateUrl:"src/shared/views/popup-new.html",controllerAs:"pu",controller:PopUpNewCtrl})},scope.init=function(){var prevSetting=localStorageService.get("showInFuture"),curdate=(new Date).getTime(),skip=!1;prevSetting&&((!prevSetting.lastCreated&&!prevSetting.showNew||21<(curdate-prevSetting.lastCreated)/864e5)&&(localStorageService.set("showInFuture",{lastOpened:curdate,showNew:!0,lastCreated:curdate}),skip=!0),!skip&&(!prevSetting.showNew||(curdate-prevSetting.lastOpened)/864e5<21))||(localStorageService.set("showInFuture",{lastOpened:curdate,showNew:!0,lastCreated:curdate}),this.open())},scope.init()}}}function mayaMenuServiceFactory(){var menudata={},submenudata={},services={addMenu:function(menu){""!=menu.Key&&(menudata[menu.Key]=menu)},addSubMenu:function(menu){""!=menu.Key&&(submenudata[menu.Key]=menu)}};return Object.defineProperty(services,"menudata",{get:function(){return menudata},set:function(value){menudata=value}}),Object.defineProperty(services,"submenudata",{get:function(){return submenudata},set:function(value){submenudata=value}}),services}function sharedEventNotificationSelectDirective(AccountProxy,pushNotificationService){function EventNotificationSelectCtrl($q,uibPopUpService,RegistrationService,mGeneralSetting){this.$q=$q,this.uibPopUpService=uibPopUpService,this.regService=RegistrationService,this.mGeneralSetting=mGeneralSetting,Object.defineProperty(this,"wantNotifications",{get:function(){return pushNotificationService.wantNotifications}}),Object.defineProperty(this,"authentication",{get:function(){return AccountProxy.authentication}})}return EventNotificationSelectCtrl.prototype.selectEvent=function(){var regService=this.regService,$q=this.$q;if(!AccountProxy.authentication.isAuth){var deferred=$q.defer();return this.uibPopUpService.open(this.mGeneralSetting.ModalType.PopUpMessage,{message:globalTrans[this.mGeneralSetting.Lang].EventSelectNotLoginTitleMessage,title:globalTrans[this.mGeneralSetting.Lang].EventSelectNotLoginTitle}).result.then(function(){deferred.reject(),setTimeout(function(){regService.openPage(1,!1)},1)},function(){console.log("reject")}),deferred.promise}AccountProxy.setUserNotificationEvent({PaymentKey:this.rec.PaymentKey,TblType:this.rec.TblType,ActiveStatus:!this.rec.IsSelected}).then(function(){this.rec.IsSelected=!this.rec.IsSelected,pushNotificationService.setSingleEvent(this.rec)}.bind(this),function(err){console.log("network error")})},{restrict:"E",templateUrl:"src/shared/views/event-notification.html",controller:EventNotificationSelectCtrl,bindToController:!0,scope:{rec:"="},controllerAs:"en",link:function(scope,element,attr){}}}function mayaPrintDirective($log){var printSection=document.getElementById("printSection");return printSection||((printSection=document.createElement("div")).id="printSection",document.body.appendChild(printSection)),{link:function(scope,element,attrs){element.on("click",function(){var elemToPrint=document.getElementById(attrs.printElementId);elemToPrint&&function(elem){var domClone=elem.cloneNode(!0);0<printSection.childElementCount&&(printSection.innerHTML="");printSection.appendChild(domClone),window.print()}(elemToPrint)}),window.onafterprint=function(){printSection.innerHTML=""},element.on("$destroy",function(){$log.debug("destroy print was trigger"),printSection.innerHTML=""})},restrict:"A"}}function printerFactory($rootScope,$templateRequest,$compile,$timeout,$http){return{print:function(templateUrl,scopeData){var element;$templateRequest(templateUrl).then(function(template){var printingScope=$rootScope.$new();angular.extend(printingScope,scopeData),element=$compile($("<div>"+template+"</div>"))(printingScope);var waitForRenderAndDoSomething=function(){0<$http.pendingRequests.length?$timeout(waitForRenderAndDoSomething):(function(element){var printingWindow=window.open("","");printingWindow.document.write(element.html()),$timeout(function(){printingWindow.document.close(),printingWindow.print(),printingWindow.close()},600)}(element),printingScope.$destroy(),printingScope=null)};$timeout(waitForRenderAndDoSomething)})}}}function propertyTagDirective(){return{restrict:"E",replace:!0,templateUrl:"src/shared/views/property-tag.html",scope:{indications:"=",isExt:"="},link:function(scope,elem,attr){scope.indications&&(scope.hasIndications=1<=scope.indications.length,scope.content=1<=scope.indications.length?"F":"",scope.isExt?scope.tooltipContent=scope.indications.length<=0?"אין מאפיינים לקרן זאת":scope.indications.join(", "):scope.tooltipContent=scope.indications.length<=0?"אין מאפיינים לקרן זאת":scope.indications.join("\n"))}}}function openFullPageGridFactory($rootScope,$templateRequest,$compile,$timeout,$http,browserDetectionService,divsToTable){return{open:function(templateUrl,scopeData){var element;$templateRequest(templateUrl).then(function(template){var printingScope=$rootScope.$new();angular.extend(printingScope,scopeData),element=$compile($("<div>"+template+"</div>"))(printingScope);var waitForRenderAndDoSomething=function(){0<$http.pendingRequests.length?$timeout(waitForRenderAndDoSomething):(function(element,print){print&&(browserDetectionService.isIE||browserDetectionService.isFireFox||browserDetectionService.isChrome)&&(element=divsToTable(element,scopeData.fullPageData));var printingWindow=window.open("","");printingWindow.document.write(element.html()),print&&!0===print&&$timeout(function(){printingWindow.document.close(),printingWindow.print(),printingWindow.close()},500)}(element,printingScope.fullPageData.Print),printingScope.$destroy(),printingScope=null)};$timeout(waitForRenderAndDoSomething)})}}}function mayaBreadCrumbsDirective(breadcrumbs,mayaMenuService,$location,mGeneralSetting){return{restirct:"EA",templateUrl:"src/shared/views/bread-crumbs.html",controller:function(){this._location=$location,this.isMainPage=!1,Object.defineProperty(this,"breadcrumbs",{get:function(){return breadcrumbs.items}}),this.isEng=mGeneralSetting.Lang==mGeneralSetting.LangStates.English},bindToController:!0,controllerAs:"brcr",link:function(scope,element,attr){}}}function mayaMainMenuDirective(mGeneralSetting){function MayaMainMenuCtrl(){Object.defineProperty(this,"isEng",{get:function(){return mGeneralSetting.Lang===mGeneralSetting.LangStates.English}})}return MayaMainMenuCtrl.prototype.getTemplate=function(){return"src/shared/views/maya-menu-"+(this.mGeneralSetting.Lang===this.mGeneralSetting.LangStates.English?"en":"he")+".html"},{restrict:"E",controller:MayaMainMenuCtrl,bindToController:!0,controllerAs:"mm",templateUrl:"src/shared/views/maya-menu-he.html",link:function(scope,element,attrs,mayaNavBarCtrl){}}}function propValidatorDirective(){return{require:"^ngModel",restirct:"A",link:function(scope,element,attr,ngctrl){ngctrl.$validators.propValidator=function(modelValue,viewValue){var value=modelValue||viewValue;if(!value)return!1;for(var p in value)if(1==value[p])return!0;return!1},scope.$watch(function(){var size=0;for(var p in ngctrl.$modelValue)1==ngctrl.$modelValue[p]&&size++;return size},function(){ngctrl.$validate()})}}}function alertUniqueValidatordirective(_){return{require:"^ngModel",restirct:"A",link:function(scope,element,attr,ngctrl){var notslist=JSON.parse(attr.list),dat=JSON.parse(attr.item);ngctrl.$validators.alertUniqueValidator=function(modelValue,viewValue){var value=modelValue||viewValue,item=_.find(notslist,{AlertName:value});return angular.isUndefined(item)||item.ProfileId==dat.ProfileId}}}}function dateFromToValidator(){return{require:"^ngModel",restirct:"A",link:function(scope,element,attr,ngctrl){var isBigger=attr.isBigger||!0;ngctrl.$validators.dateFromToValidator=function(modelValue,viewValue){return scope.dateFromToValidator=scope.$eval(attr.dateFromToValidator),modelValue<new Date(1999,11,31)||1==isBigger?modelValue>=scope.dateFromToValidator:modelValue<=scope.dateFromToValidator},scope.$watch(attr.dateFromToValidator,function(){ngctrl.$validate()})}}}function minMaxYearValidator(){return{require:"^ngModel",restirct:"A",link:function(scope,element,attr,ngctrl){var isBigger=attr.isBigger||!0;ngctrl.$validators.minMaxYearValidator=function(modelValue,viewValue){return scope.minMaxYearValidator=scope.$eval(attr.minMaxYearValidator),1==isBigger?modelValue>=scope.minMaxYearValidator:modelValue<=scope.minMaxYearValidator},scope.$watch(attr.minMaxYearValidator,function(){ngctrl.$validate()})}}}function sharedMayaOverlayDirective(){function OverlayCtrl(MayaOverlay){this._MayaOverlay=MayaOverlay}return Object.defineProperty(OverlayCtrl.prototype,"isOpen",{get:function(){return this._MayaOverlay.isOpen},set:function(value){this._MayaOverlay.isOpen=value}}),{restirct:"EA",replace:!0,templateUrl:"src/shared/views/overlay.html",controller:OverlayCtrl,bindToController:!0,controllerAs:"ovlc",link:function(scope,element,attr){}}}function MayaOverlayFactory(){var isOpen=!1,services={isOpen:isOpen,show:function(){isOpen=!0},hide:function(){isOpen=!1}};return Object.defineProperty(services,"isOpen",{get:function(){return isOpen},set:function(value){isOpen=value}}),services}function sharedMayaAutocompleteDirective($compile,$timeout,$filter,$q,_){var searchBoxFilter=$filter("searchBoxFilter"),eventsRange={100:"tase",5e3:"company",1e4:"fund"},formRange={"ת":"company",c:"company","ר":"company","ק":"fund","נ":"fund","א":"company","ס":"etn",F:"foreignetf"};function AutocompleteCtrl(MayaSearchService,$compile,$http,$timeout,$log,$sce,$location,searchProxy,ngConfigSetting,mGeneralSetting){this._MayaSearchService=MayaSearchService,this.ngConfigSetting=ngConfigSetting,this.simulateQuery=!1,this.mobSearchPressed=!1,this.isDisabled=!1,this.$log=$log,this.$location=$location,this.isOpen=!1,this._http=$http,this.localResults=[],this.googleResults=[],this._$sce=$sce,this._mGeneralSetting=mGeneralSetting,this.fileTemplate=/^(e|h|t|p){1}([0-9]{3,10})[-0]{0,2}(0|1|2|3){0,1}\.(pdf|htm|txt)$/i,this.query="",this._searchProxy=searchProxy,this.prefixTypeMap={h:1,t:3,p:2,e:6},Object.defineProperty(this,"AllEntities",{get:function(){return this._searchProxy.getSearchAutoCompleteData()}})}return AutocompleteCtrl.prototype.orderByIndexOfMatch=function(results,text){for(var i=0;i<results.length;i++){var res=results[i];res.indexOf=res.Name.indexOf(text),res.equal=text===res.Name}return results},AutocompleteCtrl.prototype.searchQuery=function(){this.q&&(this._mGeneralSetting.Lang==this._mGeneralSetting.LangStates.English?this.$location.path("/en/search").search({q:this.q}):this.$location.path("/search").search({q:this.q}))},AutocompleteCtrl.prototype.searchMobQuery=function(){this.mobSearchPressed=!0,this.searchQuery()},AutocompleteCtrl.prototype.setText=function(word){$timeout(function(){this.q=word}.bind(this),100)},AutocompleteCtrl.prototype.setLinks=function(arr){function getPageNameByEvent(id){for(var er in eventsRange){var isInRange=eval(id+"<"+er);if(isInRange)return eventsRange[er]}}function getPageNameByForm(name){return formRange[name.substring(0,1)]}return arr},AutocompleteCtrl.prototype.setDefTitle=function(type){var defTitle=globalTrans[this._mGeneralSetting.Lang].mapEntitiesTitle[type];return defTitle?"("+defTitle+")":""},AutocompleteCtrl.prototype.getEntityLink=function(data){var link="",p={};switch(data.Type){case 1:case 2:link="company/"+data.Id;break;case 3:case 16:link="fundmanager/"+data.Id;break;case 4:case 20:link="fund/"+data.Id;break;case 6:p={events:[data.Id]},link="reports/"+getPageNameByEvent(data.Id)+"?q="+JSON.stringify(p);break;case 7:p={subevents:[data.Id]},link="reports/"+getPageNameByEvent(data.Id)+"?q="+JSON.stringify(p);break;case 8:p={level1:4,level2:data.Id},link="reports/company?q="+JSON.stringify(p);break;case 9:p={level1:5,level2:data.Id},link="/reports/company?q="+JSON.stringify(p);break;case 10:p={level1:6,level2:data.Id},link="reports/company?q="+JSON.stringify(p);break;case 11:p={form:encodeURI(data.Name.substring(0,data.Name.indexOf("-")))},link="reports/"+getPageNameByForm(data.Name)+"?q="+JSON.stringify(p);break;case 14:case 15:link="etf/"+data.Id;break;case 18:link="foreignetfmanager/"+data.Id;break;case 19:link="foreignetf/"+data.Id;break;default:link=""}return this._mGeneralSetting.Lang==this._mGeneralSetting.LangStates.English&&(link="/en/"+link),link},AutocompleteCtrl.prototype.setReportLinks=function(arr){var self=this,mapLink=[];mapLink.push({tpl:/bursa\/report\.asp\?report_cd\=([0-9]{3,10})/i,newLink:"reports/details/"}),mapLink.push({tpl:/bursa\/companydetails\.asp\?companycd\=([0-9]{2,4})/i,newLink:"company/"});for(var i=0;i<arr.length;i++){reverseFileNameToLink(arr[i])&&(arr[i].rptLink=reverseFileNameToLink(arr[i]),arr[i].title=arr[i].title.replace(/quot&/g,"'"))}function reverseFileNameToLink(item){if(!item.URL||0==item.URL.length)return"";var fileLink="",rptLink=void 0;if(mapLink.forEach(function(page){page.tpl.test(item.URL)&&(fileLink=page.tpl.exec(item.URL)[1],rptLink=page.newLink+fileLink)}),!rptLink){fileLink=item.URL.substring(item.URL.lastIndexOf("/")+1);var result=null;self.fileTemplate.test(fileLink)&&(result=self.fileTemplate.exec(fileLink),rptLink="reports/details/"+result[2]+"/"+self.prefixTypeMap[result[1].toLowerCase()]+"/"+(angular.isUndefined(result[3])?0:result[3]))}return rptLink}return arr},AutocompleteCtrl.prototype.clearResults=function(){this.localResults=[],this.googleResults=[]},AutocompleteCtrl.prototype.filterFunc=function(item){var lowercaseQuery=angular.lowercase(this.search);return 0===item.Name.indexOf(lowercaseQuery)||0===item.Id.toString().indexOf(lowercaseQuery)},{restrict:"EA",scope:!0,controller:AutocompleteCtrl,bindToController:!0,controllerAs:"ctrlSearch",link:function(scope,elem,attrs){var ctrl=scope.ctrlSearch;ctrl.currItem=null,ctrl.currIndex=-1,ctrl.listContainer=$("#results",elem),ctrl.inputQ=$("#searchDesktop",elem),ctrl.isLoading=!1,ctrl.localResults=Rx.Observable.fromEvent(elem.find("input"),"keyup").merge(Rx.Observable.fromEvent(elem.find("input"),"paste")).filter(function(e){return!e.keyCode||!(-1<[40,38,13].indexOf(e.keyCode))}).map(function(e){return e.originalEvent.clipboardData?e.originalEvent.clipboardData.getData("text"):e.target.value}).debounce(100).map(function(keyword){return keyword.trim()}).filter(function(keyword){return 1<keyword.length}).map(function(keyword){return ctrl.isLoading=!0,ctrl.searchApi(keyword)}).switch(),ctrl.searchApi=function(term){return Rx.Observable.create(function(observer){ctrl.currIndex=-1,ctrl._searchProxy.getSearchAutoCompleteData(term).then(function(res){return ctrl.isLoading=!1,res}).then(function(json){observer.onNext(json)}).catch(function(e){})}).map(function(json){var results=ctrl.orderByIndexOfMatch(json,term);ctrl.localResults=results.Item1,ctrl.googleResults=results.Item2})},elem[0].addEventListener("keyup",function(e){var oldIdx=ctrl.currIndex;switch(e.keyCode){case 40:ctrl.currIndex++,ctrl.currIndex>=ctrl.localResults.length&&ctrl.currIndex--,ctrl.currItem=ctrl.localResults[ctrl.currIndex];break;case 38:ctrl.currIndex--,ctrl.currIndex<0&&ctrl.currIndex++,ctrl.currItem=ctrl.localResults[ctrl.currIndex];break;case 13:ctrl.clearSearchDesktop(),ctrl.currItem?$timeout(function(){ctrl.$location.url(encodeURI(ctrl.currItem.URL)),ctrl.currItem=null},10):ctrl.searchQuery();break;case 8:1==ctrl.q.length&&ctrl.clearSearchDesktop()}oldIdx!=ctrl.currIndex&&(ctrl.listContainer.children().eq(oldIdx).removeClass("selected"),ctrl.listContainer.children().eq(ctrl.currIndex).addClass("selected"),ctrl.inputQ.val(ctrl.localResults[ctrl.currIndex].Name))}),ctrl.clearSearchDesktop=function(){ctrl.localResults=[],ctrl.googleResults=[],ctrl.q=""},scope.$on("$routeChangeSuccess",function(ae,c,p){ctrl.clearSearchDesktop()}),scope.$on("$routeUpdate",function(){ctrl.clearSearchDesktop()})}}}function searchBoxFilter(_){return function(arr,searchString,$sce){var result=[],delResult=[];if(!searchString||searchString.length<2)return result;function isNotInList(item){_.findIndex(["מחוקה","שם קודם","Prev name","delisted"],function(o){return item.Name.indexOf(o)})}searchString=searchString.toLowerCase();for(var i=0;i<arr.length;i++){var item=arr[i];if(5!=item.Type&&12!=item.Type)if(-1<item.Name.toLowerCase().indexOf(searchString)||-1<item.Id.toString().indexOf(searchString))if(isNotInList(item)?delResult.push(item):result.push(item),7==result.length)break}return result.length<7&&0<delResult.length&&7<(result=result.concat(delResult)).length&&result.splice(7,result.length-7),result}}function sharedMayaTypeaheadDirective($timeout,$rootScope,mGeneralSetting){return{restrict:"AEC",scope:{items:"=",prompt:"@",selectedId:"=",entityName:"@",entityId:"@",excludeMaxLength:"@",excludeType:"@",onSelect:"&",onClear:"&",onEnter:"&"},link:function(scope,elem,attrs){function toShowAllMode(){scope.state="showAll",$timeout(function(){elem.find(".items").scrollTop(0),elem.find(".items").scrollTop(1)})}function handlerOutsideInputClick(e){"INPUT"!=e.target.tagName&&"I"!=e.target.tagName&&scope.state&&(scope.state="",scope.$apply())}scope.toShowAllMode=toShowAllMode,scope.$watch("model",function(newVal,old){newVal?scope.state="":old&&""==newVal&&toShowAllMode()}),scope.clicked=function(){scope.model?scope.state="":toShowAllMode()},$("body").on("click",handlerOutsideInputClick),scope.fieldName=mGeneralSetting.LangStates.English===mGeneralSetting.Lang?"EngName":"Name";var divItems=elem.find(".items");function setSelectedItem(id){for(var res,val,val1,val2,i=0;i<scope.items.length;i++)if(!(scope.items[i].Id!=id||(val1=scope.model,val2=scope.items[i].Name,val1&&val2&&val1!=val2)||(val=scope.items[i].Name,angular.isUndefined(scope.model)&&-1<val.indexOf("שם קודם")))){res=scope.items[i],scope.model=res.Name,scope.selectedId=res.Id,scope.current=0,scope.selected=!0;break}return res}scope.handleSelection=function(selectedItem){scope.model=selectedItem[scope.fieldName],scope.selectedId=selectedItem.Id,scope.current=0,scope.selected=!0,$timeout(function(){scope.onSelect(),angular.element(elem.find("input")[0]).focus()},200)},scope.matchItems=function(searchTerm){var result=[],lastResult=[],arr=scope.items;if("showAll"==scope.state)return arr;if(!searchTerm||searchTerm.length<1)return result;searchTerm=searchTerm.toLowerCase();for(var i=0;i<arr.length;i++){var item=arr[i];if(!(scope.excludeMaxLength&&!isNaN(scope.excludeMaxLength)&&scope.excludeMaxLength<item.Id.toString().length))if(0===item[scope.fieldName].toLowerCase().indexOf(searchTerm)||0===item.Id.toString().indexOf(searchTerm)){if(result.push(item),scope.maxLength&&result.length==scope.maxLength)break}else if(1<searchTerm.length&&0<item[scope.fieldName].toLowerCase().indexOf(searchTerm)&&(lastResult.push(item),scope.maxLength&&result.length==scope.maxLength))break}return scope.lastSearchTerm!=searchTerm&&divItems.scrollTop(0),scope.lastSearchTerm=searchTerm,result.concat(lastResult)},scope.clearIfEmpty=function(){0==scope.model.length&&(scope.onClear(),angular.element(elem.find("input")[0]).focus())},scope.keyDown=function(event){9!=event.which&&14!==event.which&&(scope.selected=!1)},scope.isCurrent=function(index){return scope.current==index},scope.setCurrent=function(index){scope.current=index},scope.selectedId&&setSelectedItem(scope.selectedId),scope.current=0,scope.selected=!0,scope.$watch("selectedId",function(newVal,oldVal){newVal!=oldVal&&(0<newVal?setSelectedItem(newVal):(scope.model=void 0,scope.selectedId=0,scope.current=0,scope.selected=!0))}),$rootScope.$on("maya-event-autocomplete.changeurl",function(){setSelectedItem(scope.selectedId)}),scope.$on("$destroy",function(){$("body").off("click",handlerOutsideInputClick)})},templateUrl:"src/shared/views/typeahed-autocomplete.html"}}function highlightFilter($sce){return function(text,phrase){return phrase&&(phrase=(phrase=phrase.replace(")","")).replace("(","")).split(" ").forEach(function(ph){text=text.replace(new RegExp("("+ph+")","gi"),'<span class="highlighted">$1</span>')}),$sce.trustAsHtml(text)}}function sharedAutocomplete($timeout,$rootScope,mGeneralSetting,ngConfigSetting,searchProxy){return{restrict:"EA",bindToController:!0,link:function(scope,element){scope.isLoading=!1,scope.suggestions=Rx.Observable.fromEvent(element.find("input"),"keyup").merge(Rx.Observable.fromEvent(element.find("input"),"paste")).filter(function(e){switch(e.keyCode){case 8:return 1==e.target.value.length&&element.find("li").remove(),!1;case 40:return 0<element.find("li.selected").length?(element.find("li.selected").next().first().addClass("selected"),element.find("li.selected").first().removeClass("selected")):element.find("li").first().addClass("selected"),element.find("li.selected").first().focus(),!1;case 38:return 0<element.find("li.selected").length?(element.find("li.selected").prev().first().addClass("selected"),element.find("li.selected").first().next().removeClass("selected")):element.find("li").first().addClass("selected"),element.find("li.selected").first().focus(),!1;case 13:return element.find("li.selected a").click(),!1;default:return!0}}).map(function(e){return e.target.value}).debounce(200).map(function(keyword){return keyword.trim()}).filter(function(keyword){return 1<keyword.length}).map(function(keyword){scope.isLoading=!0;var term,entityType=+element.attr("type");return keyword=encodeURIComponent(keyword),1==entityType?(term=keyword,Rx.Observable.create(function(observer){searchProxy.getSearchAutoCompletCompany(term).then(function(res){return scope.isLoading=!1,res}).then(function(json){observer.onNext(json)}).catch(function(e){})}).map(function(json){return json.map(function(item){return item})})):2==entityType?function(term){return Rx.Observable.create(function(observer){searchProxy.getSearchAutoCompletCompanyAndSecurity(term).then(function(res){return scope.isLoading=!1,res}).then(function(json){observer.onNext(json)}).catch(function(e){})}).map(function(json){return json.map(function(item){return item})})}(keyword):function(entityType,term){return Rx.Observable.create(function(observer){searchProxy.GetAllEntitiesByType(entityType,term).then(function(res){return scope.isLoading=!1,res}).then(function(json){observer.onNext(json)}).catch(function(e){})}).map(function(json){return json.map(function(item){return item})})}(entityType,keyword)}).switch(),scope.handleSelection=function(selectedItem){$timeout(function(){angular.element(element.find("input")[0]).focus(),element.find("input")[0].value=selectedItem.Name,element.find("li").remove()},200)}}}}function tradeIndicatorsDirective(){return{restrict:"E",replace:!0,templateUrl:"src/shared/views/trade-indicators.html",scope:{redIndicators:"=",greenIndicators:"="},link:function(scope,elem,attr){}}}function tradeTicker(){return{restrict:"E",replace:!0,template:'<div class="tickerTradeItems" ng-repeat="item in items track by $index">{{items.length}}<trade-ticker-item change-direction="item.changeDirection" ticker-data="item"></trade-ticker-item></div>',scope:{items:"="},link:function(scope,elem,attr){}}}function tradeTickerItem(){return{restrict:"E",replace:!0,templateUrl:"src/shared/views/trade-ticker-item.html",scope:{tickerData:"=",changeDirection:"="},link:function(scope,elem,attr){scope.changeWithSign=function(change){var num=parseFloat(change),abs_ch=Math.abs(change);return 0===change?"0":num<0?"- "+abs_ch+"%":0<num?"+ "+abs_ch+"%":abs_ch+"% "}}}}function ellipsesComboDirective(){function EllipsesComboCtrl(){}return EllipsesComboCtrl.prototype.visualLength=function(s){var ruler=document.getElementById("ruler");return ruler.innerHTML=s,ruler.offsetWidth},EllipsesComboCtrl.prototype.trimToPx=function(s){var tmp=s,trimmed=s;if(this.visualLength(tmp)>this.length)for(trimmed+="...";this.visualLength(trimmed)>this.length;)trimmed=(tmp=tmp.substring(0,tmp.length-1))+"...";return trimmed},{restrict:"E",replace:!0,require:["^?ngModel"],controller:EllipsesComboCtrl,bindToController:!0,controllerAs:"ecc",templateUrl:"src/shared/views/ellipses-combo.html",scope:{options:"=",assetValue:"&"},link:function(scope,elem,attr,controllers){var ctrl=scope.ecc;ctrl.length=elem[0].offsetWidth,scope.$watchCollection("ecc.options",function(){ctrl.options&&ctrl.options.forEach(function(option){option.Value=ctrl.trimToPx(option.Value)})});var ngController=controllers[0];Object.defineProperty(ctrl,"filterItems",{get:function(){return ngController.$modelValue},set:function(value){ngController.$setViewValue(value)}})}}}function LangCtrl(mGeneralSetting,changeLangFactory){this.Lang="",changeLangFactory.onChangLang(function(){this.Lang=mGeneralSetting.Lang===mGeneralSetting.LangStates.English}.bind(this))}function changeLangFactory(){var funcs=[];return{onChangLang:function(fn){return funcs.push(fn),function(){funcs=funcs.filter(function(f){return f!==fn})}},invoke:function(fn){funcs.forEach(function(f){f()})}}}function ModalMsgCtrl($uibModalInstance,title,message,mayauthService){this.$uibModalInstance=$uibModalInstance,this.title=title,this.message=message,this.mayauthService=mayauthService}function sharedPopupMessageDirective(){return{restirct:"EA",templateUrl:function(element,attr){return"src/shared/views/popup-message"+(attr.lang?"-"+attr.lang:"")+".html"},controller:function($scope,modalService){$scope.hide=modalService.resolve,this.message=modalService.params().message,this.title=modalService.params().title},bindToController:!0,controllerAs:"popUpMsg",link:function(scope,element,attr){}}}function sharedPopupDownloadDirective(){return{restirct:"EA",templateUrl:function(element,attr){return"src/shared/views/popup-download.html"},controller:function($scope,modalService,angularAuth0){$scope.hide=modalService.resolve,this.message=modalService.params().message,this.title=modalService.params().title},bindToController:!0,controllerAs:"popUpDownload",link:function(scope,element,attr){}}}function sharedErrorDialogDirective(){return{restirct:"E",templateUrl:function(element,attr){return"src/shared/views/error-dialog"+(attr.lang?"-"+attr.lang:"")+".html"},controller:function($scope,modalService){$scope.hide=modalService.resolve,this.message=modalService.params().message,this.title=modalService.params().title},bindToController:!0,controllerAs:"vm",link:function(scope,element,attr){}}}function sharedOkCancelDialogDirective(){return{restirct:"EA",templateUrl:"src/shared/views/ok-cancel-dialog.html",controller:function($scope,modalService){$scope.ok=modalService.resolve,$scope.cancel=modalService.reject,this.message=modalService.params().message,this.title=modalService.params().title},bindToController:!0,controllerAs:"vm"}}function sharedInputDialogDirective(){function InputDialogCtrl($scope,modalService){$scope.cancel=modalService.reject,this.placeHolder=modalService.params().placeHolder,this.inputLabel=modalService.params().inputLabel,this.title=modalService.params().title,this.modalService=modalService}return InputDialogCtrl.prototype.confirm=function(){this.modalService.resolve(this.inputData)},{restirct:"EA",templateUrl:"src/shared/views/input-dialog.html",controller:InputDialogCtrl,bindToController:!0,controllerAs:"vm"}}function AssetValueTimeGraphCtrl($uibModalInstance,fundProxy,asset,type,mGeneralSetting){this.type=type,this.$uibModalInstance=$uibModalInstance,this._fundProxy=fundProxy,this.graphData={},this.asset=asset,this._mGeneralSetting=mGeneralSetting,this.name=globalTrans[this._mGeneralSetting.Lang].ChartAssetTitle[type].fldName,this.config={type:"datetime",categories:[],title:globalTrans[this._mGeneralSetting.Lang].ChartAssetTitle[type].title,subtitle:globalTrans[this._mGeneralSetting.Lang].ChartAssetTitle[type].fldName+"ב",primaryFormatter:function(){parseFloat(this.value).toFixed(2)},secondaryFormatter:function(){parseFloat(this.value).toFixed(2)},yPrimaryTitle:"₪ שווי הנכס במיליוני",ySecondaryTitle:globalTrans[this._mGeneralSetting.Lang].ChartAssetTitle[type].ySecondaryTitle,legendPrimary:"שווי הנכס",legendSecondary:globalTrans[this._mGeneralSetting.Lang].ChartAssetTitle[type].ySecondaryTitle,primaryFormat:"{value}",secondaryFormat:globalTrans[this._mGeneralSetting.Lang].ChartAssetTitle[type].secondaryFormat,primaryChar:"",secondaryChar:globalTrans[this._mGeneralSetting.Lang].ChartAssetTitle[type].secondaryChar,xElem:"X",yElem:"Y"},this.init(type)}function assetValueTimeGraphDirective($uibModal){return{restrict:"A",link:function(scope,element,attr){scope.displayChart=function(rec,type,$event){$uibModal.open({templateUrl:"src/shared/views/asset-value-time-graph.html",controller:AssetValueTimeGraphCtrl,controllerAs:"av",windowClass:"TradingDialogSize",resolve:{type:function(){return type},asset:function(){return rec}}})}}}}function assetTimeGraphDirective(){function AssetTimeGraphCtrl(fundProxy,mGeneralSetting){this._fundProxy=fundProxy,this.graphData={},this.name=globalTrans[mGeneralSetting.Lang].ChartAssetTitle[1].fldName,this.init(1)}return AssetTimeGraphCtrl.prototype.init=function(type){this._fundProxy.getHoldingsGraphData(this.assetId,this.assetManager,type).then(function(data){this.titles=data.Titles,this.graphData=data}.bind(this))},{restrict:"A",scope:{assetId:"@",assetManager:"=",config:"="},templateUrl:"src/shared/views/asset-time-graph.html",controller:AssetTimeGraphCtrl,controllerAs:"av",bindToController:!0,link:function(scope,element,attr){var ctrl=scope.av;scope.$watch("av.assetManager",function(newVal,oldVal){newVal!=oldVal&&ctrl.init(1)})}}}function sharedScrollToDirective($log,$location,$anchorScroll){return{link:function(scope,element,attr){element.bind("click",function(event){var location=attr.scrollTo;$location.hash(location),$anchorScroll()})}}}function sharedScrollFactory(){var funcs=[];return{onInvokeScroll:function(fn){return funcs.push(fn),function(){funcs=funcs.filter(function(f){return f!==fn})}},invoke:function(fn){$(window).width()<991||funcs.forEach(function(f){f()})}}}function sharedScrollToItemDirective($timeout,sharedScrollFactory){return{restrict:"EA",controller:function(){},bindToController:!0,controllerAs:"vmscrl",link:function(scope,element,attr){scope.vmscrl;var onInvokeScroll=sharedScrollFactory.onInvokeScroll(function(){$timeout(function(){$("body, html").animate({scrollTop:0},"slow")},1)});scope.$on("$destroy",function(){onInvokeScroll()})}}}function sharedSmoothScrollDirective(){return{restrict:"EA",link:function(scope,element,attr){element.bind("click",function(event){var location=angular.element(document.getElementById(attr.sharedSmoothScroll));$("body").animate({scrollTop:location.offset().top},"slow")})}}}function sharedScrollToTopDirective(){return{restrict:"EA",controller:function(){},link:function(scope,element,attr){element.on("click",function(event){$("body").animate({scrollTop:0},"slow")})}}}function mayaEatClickDirective($log){return{restirct:"EA",link:function(scope,element,attr){element.on("click",function(event){event.preventDefault(),document.getElementById("BNagishMenu").toggle()})}}}function mayaAccessibilityMenuDirective($timeout,ngConfigSetting,mayaWrapperService,mGeneralSetting){return{restirct:"EA",templateUrl:"src/shared/views/accessibilitymenu.html",require:"^sharedWrapper",link:function(scope,element,attr,wrp){function readCookie(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}function createCookie(name,value,days){if(days){var date=new Date;date.setTime(date.getTime()+24*days*60*60*1e3);var expires="; expires="+date.toGMTString()}else expires="";document.cookie=name+"="+value+expires+"; path=/"}function setActiveButton(linksClass,elm){$(linksClass).each(function(){$(this).attr("id")==elm.attr("id")?$(this).addClass("active"):$(this).removeClass("active")}),createCookie("bnagishChoosen",elm.attr("id"),100)}scope.IsHidden=!0,scope.isEng=mGeneralSetting.Lang===mGeneralSetting.LangStates.English,scope.toggleNagish=function(){$timeout(function(){scope.IsHidden=!scope.IsHidden},5)},wrp.openAccessibility=function(){wrp.closeMobMenu(),$timeout(function(){scope.IsHidden=!scope.IsHidden},5)},scope.increaseFontSize=function(){var existingZoom=readCookie("newZoom");if(-1<navigator.userAgent.toLowerCase().indexOf("firefox")){if(null==existingZoom||void 0===existingZoom)existingZoom=jQuery("body").css("transform");"none"==existingZoom&&(existingZoom=1);var newZoom=parseFloat(existingZoom)+.1;jQuery("body").css("transform","scale("+newZoom+")")}else{if(null==existingZoom||void 0===existingZoom)existingZoom=jQuery("body").css("zoom");"normal"==existingZoom?existingZoom=1:-1!=existingZoom.search("%")&&(existingZoom=parseInt(existingZoom)/100);newZoom=Math.round(10*existingZoom)/10+.1;jQuery("body").css("zoom",newZoom)}createCookie("newZoom",newZoom,30)},scope.decreaseFontSize=function(){var existingZoom=readCookie("newZoom");if(-1<navigator.userAgent.toLowerCase().indexOf("firefox")){if(null==existingZoom||void 0===existingZoom)existingZoom=jQuery("body").css("transform");"none"==existingZoom&&(existingZoom=1);var newZoom=parseFloat(existingZoom)-.1;jQuery("body").css("transform","scale("+newZoom+")")}else{if(null==existingZoom||void 0===existingZoom)existingZoom=jQuery("body").css("zoom");"normal"==existingZoom?existingZoom=1:-1!=existingZoom.search("%")&&(existingZoom=parseInt(existingZoom)/100);newZoom=Math.round(10*existingZoom)/10-.1;jQuery("body").css("zoom",newZoom)}createCookie("newZoom",newZoom,30)};var zoomBody=readCookie("newZoom");null!=zoomBody&&(-1<navigator.userAgent.toLowerCase().indexOf("firefox")?jQuery("body").css("transform","scale("+zoomBody+")"):jQuery("body").css("zoom",zoomBody));var selectedColor=readCookie("bnagishChoosen");switch($("html").removeClass(),selectedColor){case"BNagish_Inverted":$("html").addClass("Nagish-Inverted");break;case"BNagish_Grayscale":$("html").addClass("Nagish-Grayscale")}element.find("#BNagish_Grayscale").on("click",function(e){e.preventDefault(),$("html").removeClass("Nagish-Inverted"),$("html").toggleClass("Nagish-Grayscale"),setActiveButton(".webColors",$(this))}),element.find("#BNagish_Inverted").on("click",function(e){e.preventDefault(),$("html").removeClass("Nagish-Grayscale"),$("html").toggleClass("Nagish-Inverted"),setActiveButton(".webColors",$(this))}),element.find("#BNagish_DefaultColors").on("click",function(e){e.preventDefault(),$("html").removeClass("Nagish-Grayscale"),$("html").removeClass("Nagish-Inverted"),setActiveButton(".webColors",$(this))})}}}function mayaMoreFeedItemsDirective($timeout,mGeneralSetting){return{restirct:"A",link:function(scope,element,attr){$timeout(function(){var elem=element.parent().find(".feedItemCompaniesData"),max_h=elem.css("max-height");elem.css("max-height","none");var h=elem.height();if(elem.css("max-height",max_h),h>parseInt(max_h)){element.addClass("show");var isExpanded=!1,strViewMore=globalTrans[mGeneralSetting.Lang].mayaStrings.ViewMore,strHideMore=globalTrans[mGeneralSetting.Lang].mayaStrings.HideMore;element.on("click",function(){elem.css("max-height",isExpanded?max_h:h+"px"),element[0].innerHTML=isExpanded?strViewMore:strHideMore,isExpanded&&(element[0].title=strHideMore),isExpanded=!isExpanded})}})}}}function mayaMoreCompanyDescriptionDirective($timeout,$log){return{restirct:"A",link:function(scope,element,attr){}}}function mayaModalService($rootScope,$q){var modal={deferred:null,params:null};return{open:function(type,params,pipeResponse){var previousDeferred=modal.deferred;modal.deferred=$q.defer(),modal.params=params,previousDeferred&&pipeResponse?modal.deferred.promise.then(previousDeferred.resolve,previousDeferred.reject):previousDeferred&&previousDeferred.reject();return $rootScope.$emit("modals.open",type),modal.deferred.promise},params:function(){return modal.params||{}},reject:function(reason){if(!modal.deferred)return;modal.deferred.reject(reason),modal.deferred=modal.params=null,$rootScope.$emit("modals.close")},resolve:function(response){if(!modal.deferred)return;modal.deferred.resolve(response),modal.deferred=modal.params=null,$rootScope.$emit("modals.close")}}}function mayaBnModalDirective($rootScope,modalService,MayaOverlay){return function(scope,element,attributes){scope.subview=null,element.on("click",function(event){element[0]===event.target&&scope.$apply(modalService.reject)}),$rootScope.$on("modals.open",function(event,modalType){MayaOverlay.show(),scope.subview=modalType}),$rootScope.$on("modals.close",function(){MayaOverlay.hide(),scope.subview=null})}}function modalTabbingDirective($timeout){return{restirct:"C",scope:!0,link:function(scope,element,attr){var first,last,elem=element,waitTime=300;attr.modalTime&&(waitTime=parseInt(attr.modalTime)),$timeout(function(){var focusField,inputTexts=elem.find("input:text");0<inputTexts.length&&(focusField=inputTexts[0]);var children=elem.find(":tabbable");first=children[0],last=children[children.length-1],focusField?focusField.focus():first&&first.focus()},waitTime),element.on("keyup",function(evt){if(9===evt.which){var onFirstWithShift=evt.target===first&&evt.shiftKey,onLastNoShift=evt.target===last&&!evt.shiftKey;(onFirstWithShift||onLastNoShift)&&evt.preventDefault()}}),element.on("keydown",function(evt){9===evt.which&&(evt.target===first&&evt.shiftKey?(evt.preventDefault(),last.focus()):evt.target!==last||evt.shiftKey||(evt.preventDefault(),first.focus()))})}}}function mayauibPopUpService($uibModal){var modalTemplate,modal_params=null;return{open:function(type,params){var tmpl=modalTemplate[type];return $uibModal.open({templateUrl:tmpl,controller:ModalMsgCtrl,controllerAs:"vm",animation:!0,windowClass:"popupDialog",resolve:{title:function(){return params.title}.bind(this),message:function(){return params.message}.bind(this)}})},params:function(){return modal_params||{}},modalTemplate:modalTemplate={popUpDownload:"src/shared/views/popup-download.html",popUpMessage:"src/shared/views/popup-message.html",popUpMessageEng:"src/shared/views/popup-message-eng.html",okCancelDialog:"src/shared/views/ok-cancel-dialog.html"}};function modalTemplate(){return modalTemplate||{}}}function searchInArrFilter(_){return function(arr,searchString){if(!searchString)return arr;return _.filter(arr,function(item){return-1<_.indexOf(item.InGroups,searchString)})}}function searchNestedFilter(_){return function(arr,searchFields,searchString){if(!searchString)return[];return _.filter(arr,function(item){return item[searchFields]==searchString.Key})}}function formatTimeFilter($filter){return function(time){if(!time)return"";var parts=time.split(":"),date=new Date(0,0,0,parts[0],parts[1],parts[2]);return $filter("date")(date,"HH:mm")}}function formatDateLocalZone($filter){return function(time,frmt){if(!time)return"";var date=new Date(time);return $filter("date")(date,frmt,"0000")}}function formatDateByLangFilter($filter,mGeneralSetting){var dateFilter=$filter("date");return function(theDate){var frmt=mGeneralSetting.Lang==mGeneralSetting.LangStates.English?"MMM dd, yyyy  HH:mm":"dd/MM/yyyy HH:mm";return dateFilter(theDate,frmt)}}function filterFactory($rootScope,$log,utility,jsonService,_,searchProxy){var initFilterPromise,displayNested=!1,pageName="",items=[],filterMetadata=[],entities=[],securities=[],etnMgr=[],etns=[],etfs=[],hedgefund=[],foreignETFs=[],etfMgr=[],hedgefundMgr=[],foreignETFMgr=[],funds=[],fundMgr=[],entitiesByGroup=[],etfsByGroup=[],hedgefundByGroup=[],foreignETFsByGroup=[],etnsByGroup=[],fundsByGroup=[],filteredByGroup=[],filterService={setData:function(view){return initFilterPromise.then(function(){filterMetadata=_.filter(items.Data,function(item){return-1<_.indexOf(item.IncludeInView,view)}.bind(this)),displayNested=0<filterMetadata.length&&-1<_.indexOf(filterMetadata[0].IncludeNestedInView,view),pageName=0<filterMetadata.length?filterMetadata[0].PageName:""}.bind(this))},displayNested:displayNested};return Object.defineProperty(filterService,"items",{get:function(){return items}}),Object.defineProperty(filterService,"displayNested",{get:function(){return displayNested}}),Object.defineProperty(filterService,"pageName",{get:function(){return pageName}}),Object.defineProperty(filterService,"entities",{get:function(){return entities}}),Object.defineProperty(filterService,"securities",{get:function(){return securities}}),filterService.entitiesByGroup=function(groupNumber){filteredByGroup.length=0;var data=entitiesByGroup[groupNumber];data&&entities.filter(function(elem){return-1<data.Companies.indexOf(elem.Id)}).map(function(item){(2004===groupNumber&&-1<item.Name.indexOf("שם קודם")||2004!==groupNumber&&-1===item.Name.indexOf("שם קודם"))&&filteredByGroup.push(item)});return filteredByGroup},filterService.etnsByGroup=function(groupNumber){filteredByGroup.length=0;var data=etnsByGroup[groupNumber];data&&etns.filter(function(elem){return-1<data.Companies.indexOf(elem.Id)}).map(function(item){filteredByGroup.push(item)});return filteredByGroup},filterService.etfsByGroup=function(groupNumber){filteredByGroup.length=0;var data=etfsByGroup[groupNumber];data&&etfs.filter(function(elem){return-1<data.Companies.indexOf(elem.Id)}).map(function(item){filteredByGroup.push(item)});return filteredByGroup},filterService.hedgefundByGroup=function(groupNumber){filteredByGroup.length=0;var data=hedgefundByGroup[groupNumber];data&&hedgefund.filter(function(elem){return-1<data.Companies.indexOf(elem.Id)}).map(function(item){filteredByGroup.push(item)});return filteredByGroup},filterService.foreignETFsByGroup=function(groupNumber){filteredByGroup.length=0;var data=foreignETFsByGroup[groupNumber];data&&foreignETFs.filter(function(elem){return-1<data.Companies.indexOf(elem.Id)}).map(function(item){filteredByGroup.push(item)});return filteredByGroup},filterService.fundsByGroup=function(groupNumber){filteredByGroup.length=0;var data=fundsByGroup[groupNumber];data&&funds.filter(function(elem){return-1<data.Companies.indexOf(elem.Id)}).map(function(item){filteredByGroup.push(item)});return filteredByGroup},Object.defineProperty(filterService,"etnMgr",{get:function(){return etnMgr}}),Object.defineProperty(filterService,"etns",{get:function(){return etns}}),Object.defineProperty(filterService,"fundMgr",{get:function(){return fundMgr}}),Object.defineProperty(filterService,"etfMgr",{get:function(){return etfMgr}}),Object.defineProperty(filterService,"hedgefundMgr",{get:function(){return hedgefundMgr}}),Object.defineProperty(filterService,"foreignETFMgr",{get:function(){return foreignETFMgr}}),Object.defineProperty(filterService,"etfs",{get:function(){return etfs}}),Object.defineProperty(filterService,"hedgefund",{get:function(){return hedgefund}}),Object.defineProperty(filterService,"foreignETFs",{get:function(){return foreignETFs}}),Object.defineProperty(filterService,"funds",{get:function(){return funds}}),Object.defineProperty(filterService,"filterMetadata",{get:function(){return filterMetadata}}),filterService.initFilter=function(){initFilterPromise=jsonService.getFilterMetadata().then(function(data){items=data}.bind(this)),jsonService.getEntityByGroup().then(function(data){var result=data.data;for(var prop in result)result[prop].InGroups.forEach(function(grp){entitiesByGroup[grp]||(entitiesByGroup[grp]={},entitiesByGroup[grp].Companies=[]),entitiesByGroup[grp].Companies.push(parseInt(prop))})}.bind(this)),jsonService.getEtnByGroup().then(function(data){var result=data.data;for(var prop in result)result[prop].InGroups.forEach(function(grp){etnsByGroup[grp]||(etnsByGroup[grp]={},etnsByGroup[grp].Companies=[]),etnsByGroup[grp].Companies.push(parseInt(prop))})}.bind(this)),jsonService.getEtfByGroup().then(function(data){var result=data.data;for(var prop in result)result[prop].InGroups.forEach(function(grp){etfsByGroup[grp]||(etfsByGroup[grp]={},etfsByGroup[grp].Companies=[]),etfsByGroup[grp].Companies.push(parseInt(prop))})}.bind(this)),jsonService.getHedgefundByGroup().then(function(data){var result=data.data;for(var prop in result)result[prop].InGroups.forEach(function(grp){hedgefundByGroup[grp]||(hedgefundByGroup[grp]={},hedgefundByGroup[grp].Companies=[]),hedgefundByGroup[grp].Companies.push(parseInt(prop))})}.bind(this)),jsonService.getForeignEtfByGroup().then(function(data){var result=data.data;for(var prop in result)result[prop].InGroups.forEach(function(grp){foreignETFsByGroup[grp]||(foreignETFsByGroup[grp]={},foreignETFsByGroup[grp].Companies=[]),foreignETFsByGroup[grp].Companies.push(parseInt(prop))})}.bind(this)),jsonService.getFundByGroup().then(function(data){var result=data.data;for(var prop in result)result[prop].InGroups.forEach(function(grp){fundsByGroup[grp]||(fundsByGroup[grp]={},fundsByGroup[grp].Companies=[]),fundsByGroup[grp].Companies.push(parseInt(prop))})}.bind(this))},filterService}function mayaIndicesToolTipDirective(){return{restrict:"EA",scope:{indicesData:"="},templateUrl:"src/shared/views/indices-tooltip.html",controller:function($scope){},bindToController:!0,controllerAs:"itt"}}function coropRemarksAttantion(mGeneralSetting){return{restrict:"A",scope:{remarks:"@"},controller:function(){},bindToController:!0,controllerAs:"coropRemarksAttantionCtrl",link:function(scope,elem,attr){var ctrl=scope.coropRemarksAttantionCtrl;[globalTrans[mGeneralSetting.Lang].blocked].forEach(function(block){-1<ctrl.remarks.indexOf(block)&&elem.html(ctrl.remarks.replace(block,'<span style="color:red">'+block+"</span>"))})}}}function FilteredResultCtrl($uibModalInstance,rec){this.$uibModalInstance=$uibModalInstance,this.rec=rec}function filteredResultPopUpService($uibModal){return{open:function(data){$uibModal.open({templateUrl:"src/shared/views/filtered-result-popup.html",controller:FilteredResultCtrl,controllerAs:"io",windowClass:"holdingDialogSize",resolve:{rec:function(){return data}}})}}}function cookisesPopDirective($cookies){return{scope:{},template:'<div class="cookies-ad"><div class="cookies-body" ng-hide="consent()"><div class="txt"><span translate="cokiisPopupMessage"></span><a href="" translate="moreInf"  ng-click="url()" class="more"></a></div><a href="" ng-click="consent(true)" translate="Iapprove" class="btn"></a><a href="" class="btn-close " ng-click="consent(false)"><strong translate="closeBtn"></strong>&nbsp;<i class="font_icon icon-x"></i></a><div></div>',controller:function($scope,$cookies,mGeneralSetting){var _MayaCookies=$cookies.get("MayaCookies");$scope.consent=function(consent){switch(consent){case!0:var now=new Date,expired=new Date(now.getFullYear()+10,now.getMonth(),now.getDay());$cookies.put("MayaCookies",!0,{expires:expired}),_MayaCookies=consent;case!1:_MayaCookies=!0}return _MayaCookies},$scope.url=function(){window.location.href=mGeneralSetting.Lang===mGeneralSetting.LangStates.English?"https://info.tase.co.il/Eng/about_tase/disclaimer/Pages/privacy_policy.aspx":"https://info.tase.co.il/Heb/about_tase/disclaimer/Pages/privacy_policy.aspx"}}}}angular.module("asyncFilter",[]).filter("async",function(){var values={},subscriptions={};function async(input,scope){if(!input||!input.subscribe&&!input.then)return input;var inputId=function(obj){obj.hasOwnProperty("__asyncFilterObjectID__")||(obj.__asyncFilterObjectID__=++nextObjectID);return obj.__asyncFilterObjectID__}(input);if(!(inputId in subscriptions)){var subscriptionStrategy=input.subscribe&&input.subscribe.bind(input)||input.success&&input.success.bind(input)||input.then.bind(input);subscriptions[inputId]=subscriptionStrategy(function(value){values[inputId]=value,scope&&scope.$applyAsync&&scope.$applyAsync()})}return values[inputId]||void 0}var nextObjectID=0;return async.$stateful=!0,async}),mi.factory("searchProxy",searchProxyFactory),mi.directive("mayaAppLoaded",mayaAppLoadedDirective),mi.directive("sharedWrapper",sharedWrapperDirective),mi.factory("mayaWrapperService",mayaWrapperServiceFactory),mi.directive("sidebarFilterBtn",sidebarFilterBtnDirective),mi.directive("closeSidebarFilterBtn",closeSidebarFilterBtnDirective),mi.directive("sharedTopNavBar",sharedTopNavBarDirective),mi.directive("sharedMayaNavBar",mayaMenuNavBarDirective),mi.directive("sharedMayaMenu",mayaMenuDirective),mi.directive("sharedMayaSubMenu",mayaSubMenuDirective),mi.directive("sharedDownload",sharedDownloadDirective),mi.controller("PopUpNewCtrl",PopUpNewCtrl),PopUpNewCtrl.prototype.init=function(){this.sliderImagesArray=document.getElementsByClassName("slider-image")},PopUpNewCtrl.prototype.flip=function(dir,idx){for(var sliderImages=[],i=0;i<this.sliderImagesArray.length;i++)sliderImages.push(this.sliderImagesArray[i]);var imageWidth=sliderImages[0].offsetWidth,oldIndex=this.featureIndex;idx||0===idx?this.featureIndex=idx:dir?this.next():this.prev(),this.currFeature=this.features[this.featureIndex];var sliderWrap=document.getElementById("slider-wrap"),animation=(window.getComputedStyle(sliderWrap).getPropertyValue("left"),this.featureIndex<oldIndex?"-=":"+=");0==this.featureIndex&&oldIndex==this.features.length-1?animation="-=":this.featureIndex==this.features.length-1&&0==oldIndex&&(animation="+=");var newLeft=animation+Math.abs(this.featureIndex-oldIndex)*imageWidth+"px";$("#slider-wrap").animate({left:newLeft})},PopUpNewCtrl.prototype.prev=function(){0==this.featureIndex?this.featureIndex=this.features.length-1:this.featureIndex--},PopUpNewCtrl.prototype.next=function(){this.featureIndex==this.features.length-1?this.featureIndex=0:this.featureIndex++},PopUpNewCtrl.prototype.cancel=function(){if(this.showInFuture){var curdate=(new Date).getTime();this.localStorageService.set("showInFuture",{lastOpened:curdate,showNew:!1,lastCreated:curdate})}this.$uibModalInstance.dismiss()},mi.directive("popupNew",popupNewDirective),mi.factory("mayaMenuService",mayaMenuServiceFactory),mi.directive("eventNotificationSelect",sharedEventNotificationSelectDirective),mi.directive("sharedMayaPrint",mayaPrintDirective),mi.factory("printer",printerFactory),mi.directive("propertyTag",propertyTagDirective),mi.factory("divsToTable",function(mGeneralSetting){return function(element,printData){var title=element[0].querySelector("title").innerHTML,elemToPrint=element[0].querySelector("#printThisElement");element[0].setAttribute("dir",printData.IsEng?"ltr":"rtl");var childrenDivs=elemToPrint.children,tableHeader=function(number){var title="";title=printData.IsEng?printData.GridDef.GridTitleEng+"</br>Total "+number+" Records":printData.GridDef.GridTitle+'</br>סה"כ '+number+" רשומות";return"</br>"+title}(childrenDivs.length-1),table=document.createElement("table");table.setAttribute("dir",printData.IsEng?"ltr":"rtl"),table.style.overflowX="none",table.style.overflowY="none",table.style.fontSize="11px";for(var i=0;i<childrenDivs.length;i++){for(var currentDIV=childrenDivs[i],tr=createTR(0==i),j=0;j<currentDIV.children.length;j++){addTd(tr,currentDIV.children[j],printData.GridDef.ColumnItems[j],0==i,printData.IsEng)}table.appendChild(tr)}element[0].innerHTML="<center>"+title+"</center>"+tableHeader;var container=document.createElement("div");return element[0].appendChild(table),container.style.width="100%",container.setAttribute("dir","rtl"),container.appendChild(element[0]),$(container);function createTR(firstRow){var tr=document.createElement("tr");return firstRow&&(tr.style.fontWeight="bold",tr.style.fontSize="14px"),tr}function addTd(tr,data,colDef,isHeader,isEng){var className=data.getAttribute("class");if(!(className&&(-1<className.indexOf("ng-hide")||-1<className.indexOf("hideInPrint"))||-1<className.indexOf("hidden-eng")&&isEng||-1<className.indexOf("hidden-heb")&&!isEng)){var td=document.createElement("td");td.setAttribute("width","120px; !important"),td.innerHTML=function(data,colDef,isHeader){var result="";data.textContent&&(result=data.textContent);if(result=data.innerText,colDef&&colDef.isYesNo&&!isHeader){angular.element(data).find("mf-v_icon");result=data.querySelector("i.mf.mf-x_icon")?globalTrans[mGeneralSetting.Lang].NO:data.querySelector("i.mf.mf-v_icon")?globalTrans[mGeneralSetting.Lang].YES:"-"}return result}(data,colDef,isHeader),isHeader?(td.style.borderBottom="2px solid #0a3f76",td.style.color="#0a3f76"):(td.style.borderBottom="1px solid #dcdcdc",td.style.color="#444444",colDef&&colDef.printDir&&(td.setAttribute("dir","ltr"),td.style.textAlign="center")),tr.appendChild(td)}}}}),mi.factory("openFullPageGrid",openFullPageGridFactory),mi.directive("sharedMayaBreadCrumbs",mayaBreadCrumbsDirective),mi.directive("mayaMainMenu",mayaMainMenuDirective),mi.directive("propValidator",propValidatorDirective),mi.directive("dateFromToValidator",dateFromToValidator),mi.directive("alertUniqueValidator",alertUniqueValidatordirective),mi.directive("minMaxYearValidator",minMaxYearValidator),mi.directive("sharedMayaOverlay",sharedMayaOverlayDirective),mi.factory("MayaOverlay",MayaOverlayFactory),mi.directive("sharedMayaAutocomplete",sharedMayaAutocompleteDirective),mi.filter("searchBoxFilter",searchBoxFilter),mi.directive("sharedMayaTypeahead",sharedMayaTypeaheadDirective),mi.filter("highlight",highlightFilter),mi.directive("sharedAutocomplete",sharedAutocomplete),mi.directive("tradeIndicators",tradeIndicatorsDirective),mi.directive("tradeTicker",tradeTicker),mi.directive("tradeTickerItem",tradeTickerItem),mi.directive("ellipsesCombo",ellipsesComboDirective),mi.factory("setFocusElement",function(){return function(containerItems,scope,isDown){return scope.focusedElement?(clearClassFocused(),isDown&&0<$(scope.focusedElement).next().find(".item").length?(scope.focusedElement=$(scope.focusedElement).next()[0],scope.focusedElementData=angular.element(scope.focusedElement).scope().item):0<$(scope.focusedElement).prev().find(".item").length&&(scope.focusedElement=$(scope.focusedElement).prev()[0],scope.focusedElementData=angular.element(scope.focusedElement).scope().item),setClassFocused(),!0):(scope.focusedElement=containerItems.children()[1],scope.focusedElementData=angular.element(scope.focusedElement).scope().item,setClassFocused(),!1);function setClassFocused(){$(scope.focusedElement).parent().find("a").removeClass("focusedElement"),$(scope.focusedElement).find("a").addClass("focusedElement")}function clearClassFocused(){$(scope.focusedElement).find("a").removeClass("focusedElement")}}}),mi.directive("upAndDownArrows",function($timeout,setFocusElement){return{restrict:"A",link:function(scope,elem,attr){var containerItems=elem.parent().find(".items");elem[0].addEventListener("focus",function(e){$timeout(setFocusElement,500,null,containerItems,scope,!1)}),elem[0].addEventListener("keydown",function(e){if(40===e.keyCode)setFocusElement(containerItems,scope,!0)&&containerItems.scrollTop(containerItems.scrollTop()+40);else if(38===e.keyCode){setFocusElement(containerItems,scope,!1)&&containerItems.scrollTop(containerItems.scrollTop()-40)}else if(13===e.keyCode){if(scope.$parent.model&&0==containerItems.is(":visible"))return void(scope.$parent.onEnter()&&scope.$parent.onEnter()());scope.focusedElementData&&scope.$parent.handleSelection(scope.focusedElementData)}else scope.focusedElement=null,scope.focusedElementData=null,$timeout(setFocusElement,500,null,containerItems,scope,!1)}),elem[0].addEventListener("keydown",function(e){38!==e.keyCode&&40!==e.keyCode||0==containerItems.is(":visible")&&scope.$parent.toShowAllMode()}),document.body.addEventListener("click",function(){scope.focusedElement=null,scope.focusedElementData=null})},scope:{}}}),mi.factory("userPressedUpOnEmptyInput",function(userPressedUp){return function(elem,callback){userPressedUp(function(e){""==e.target&&callback()})}}),mi.factory("userPressedDownOnEmptyInput",function(userPressedDown){return function(elem,callback){userPressedDown(function(e){""==e.target&&callback()})}}),mi.factory("userPressedUp",function(userPressedSomeKey){return function(elem,callback){userPressedSomeKey(function(e){38==e.keyCode&&callback(e)})}}),mi.factory("userPressedDown",function(userPressedSomeKey){return function(elem,callback){userPressedSomeKey(function(e){40==e.keyCode&&callback(e)})}}),mi.factory("userPressedSomeKey",function(){return function(elem,callback){elem.addEventListener("keydown",function(e){callback(e)})}}),mi.controller("LangCtrl",LangCtrl),mi.directive("langBtnHref",function(ngConfigSetting,mGeneralSetting,$location,$translate,$route,$window,$templateCache){return{restrict:"A",link:function(scope,elem,attr){scope.is404Page=function(){return-1<$location.path().indexOf("/en/404")};var href="";scope.onChangeLanguage=function(){mGeneralSetting.Lang==mGeneralSetting.LangStates.Hebrew?(localStorage.setItem("Language","en"),href="/"==$location.url()?"/en":"/en"+$location.url()):(localStorage.setItem("Language","he"),href=$location.url().replace("/en",""));var landingUrl="";landingUrl=-1<$window.location.href.indexOf("app")?"http://"+$window.location.host+"/app"+href:href,$window.location.href=landingUrl}}}}),mi.directive("changeHrefByLang",function(ngConfigSetting,mGeneralSetting,$location,$translate,$window,changeLangFactory){return{restrict:"A",scope:{param:"@",formobile:"@"},link:function(scope,elem,attr){function setHrefByLang(){var href=elem.attr("href");mGeneralSetting.Lang==mGeneralSetting.LangStates.English?href.indexOf("en/")<0&&(href="en/"+elem.attr("href")):href=elem.attr("href").replace("en/",""),scope.formobile&&$window.innerWidth<991&&elem.attr("target","_blank"),href+=null!=scope.param?scope.param:"",elem.attr("href",href)}setHrefByLang(),changeLangFactory.onChangLang(function(){setHrefByLang()}.bind(this))}}}),mi.service("changeLangFactory",changeLangFactory),mi.controller("ModalMsgCtrl",ModalMsgCtrl),ModalMsgCtrl.prototype.cancel=function(){this.$uibModalInstance.dismiss()},ModalMsgCtrl.prototype.close=function(){this.$uibModalInstance.close(!0)},ModalMsgCtrl.prototype.Ok=function(){this.$uibModalInstance.close(!0)},ModalMsgCtrl.prototype.login=function(){this.mayauthService.login(!1)},ModalMsgCtrl.prototype.signup=function(){this.mayauthService.login(!0)},mi.directive("sharedPopupMessage",sharedPopupMessageDirective),mi.directive("sharedPopupDownload",sharedPopupDownloadDirective),mi.directive("sharedErrorDialog",sharedErrorDialogDirective),mi.directive("sharedOkCancelDialog",sharedOkCancelDialogDirective),mi.directive("sharedInputDialog",sharedInputDialogDirective),mi.controller("AssetValueTimeGraphCtrl",AssetValueTimeGraphCtrl),AssetValueTimeGraphCtrl.prototype.cancel=function(){this.$uibModalInstance.dismiss()},AssetValueTimeGraphCtrl.prototype.init=function(type){this._fundProxy.getHoldingsGraphData(this.asset.IdentityCd,this.asset.Id,this.type).then(function(data){this.titles=data.Titles,this.graphData=data}.bind(this))},mi.directive("assetValueTimeGraph",assetValueTimeGraphDirective),mi.directive("assetTimeGraph",assetTimeGraphDirective),mi.directive("sharedScrollTo",sharedScrollToDirective),mi.service("sharedScrollFactory",sharedScrollFactory),mi.directive("sharedScrollToItem",sharedScrollToItemDirective),mi.directive("sharedSmoothScroll",sharedSmoothScrollDirective),mi.directive("sharedScrollToTop",sharedScrollToTopDirective),mi.directive("mayaEatClick",mayaEatClickDirective),mi.directive("mayaAccessibilityMenu",mayaAccessibilityMenuDirective),mi.config(["$httpProvider",function($httpProvider){}]),mi.directive("moreFeedItems",mayaMoreFeedItemsDirective),mi.directive("moreCompanyDescription",mayaMoreCompanyDescriptionDirective),mi.service("modalService",mayaModalService),mi.directive("mayaBnModal",mayaBnModalDirective),mi.directive("modalTabbing",modalTabbingDirective),mi.service("uibPopUpService",mayauibPopUpService),mi.filter("searchInArr",searchInArrFilter),mi.filter("searchNestedFilter",searchNestedFilter),mi.filter("formatTime",formatTimeFilter),mi.filter("formatDateLocalZone",formatDateLocalZone),mi.filter("formatDateByLang",formatDateByLangFilter),mi.service("filterService",filterFactory),angular.module("brantwills.paging",[]).directive("paging",function(mGeneralSetting){function internalAction(scope,page){scope.page!=page&&(scope.page=page,scope.pagingAction({page:scope.page,pageSize:scope.pageSize,total:scope.total}),scope.scrollTop&&scrollTo(0,0))}function addPrevNext(scope,pageCount,mode){if(scope.showPrevNext&&!(pageCount<1)){var disabled,alpha,beta;if("prev"===mode){disabled=scope.page-1<=0;var prevPage=scope.page-1<=0?1:scope.page-1;alpha={value:"<",title:globalTrans[mGeneralSetting.Lang].paging.prevAlt,page:prevPage},beta={value:globalTrans[mGeneralSetting.Lang].paging.prevTitle,title:globalTrans[mGeneralSetting.Lang].paging.prevAlt,page:prevPage}}else{disabled=scope.page+1>pageCount;var nextPage=scope.page+1>=pageCount?pageCount:scope.page+1;alpha={value:globalTrans[mGeneralSetting.Lang].paging.nextTitle,title:globalTrans[mGeneralSetting.Lang].paging.nextAlt,page:nextPage},beta={value:">",title:globalTrans[mGeneralSetting.Lang].paging.nextTitle,page:nextPage}}var alphaItem={value:alpha.value,title:alpha.title,liClass:disabled?scope.disabledClass:"",action:function(){disabled||internalAction(scope,alpha.page)}},betaItem={value:beta.value,title:beta.title,liClass:disabled?scope.disabledClass:"",action:function(){disabled||internalAction(scope,beta.page)}};scope.List.push(alphaItem),scope.List.push(betaItem)}}function addRange(start,finish,scope){if(1!=scope.hideNumbers){var i=0;for(i=start;i<=finish;i++){var item={value:i,title:globalTrans[mGeneralSetting.Lang].paging.nexpPage+" "+i,liClass:scope.page==i?scope.activeClass:"",action:function(){internalAction(scope,this.value)}};scope.List.push(item)}}}function addDots(scope){1!=scope.hideNumbers&&scope.List.push({value:scope.dots})}function addFirst(scope,next){addRange(1,2,scope),3!=next&&addDots(scope)}function addLast(pageCount,scope,prev){prev!=pageCount-2&&addDots(scope),addRange(pageCount-1,pageCount,scope)}function build(scope,attrs){(!scope.pageSize||scope.pageSize<=0)&&(scope.pageSize=1);var start,finish,pageCount=Math.ceil(scope.total/scope.pageSize);!function(scope,attrs){scope.List=[],scope.Hide=!1,scope.dots=scope.dots||"...",scope.page=parseInt(scope.page)||1,scope.total=parseInt(scope.total)||0,scope.ulClass=scope.ulClass||"pagination",scope.adjacent=parseInt(scope.adjacent)||2,scope.activeClass=scope.activeClass||"active",scope.disabledClass=scope.disabledClass||"disabled",scope.scrollTop=scope.$eval(attrs.scrollTop),scope.hideIfEmpty=scope.$eval(attrs.hideIfEmpty),scope.showPrevNext=scope.$eval(attrs.showPrevNext),scope.hideNumbers=scope.$eval(attrs.hideNumbers)}(scope,attrs),function(scope,pageCount){scope.page>pageCount&&(scope.page=pageCount),scope.page<=0&&(scope.page=1),scope.adjacent<=0&&(scope.adjacent=2),pageCount<=1&&(scope.Hide=scope.hideIfEmpty)}(scope,pageCount);var fullAdjacentSize=2*scope.adjacent+2;addPrevNext(scope,pageCount,"prev"),pageCount<=2+fullAdjacentSize?addRange(start=1,pageCount,scope):scope.page-scope.adjacent<=2?(addRange(start=1,finish=1+fullAdjacentSize,scope),addLast(pageCount,scope,finish)):scope.page<pageCount-(scope.adjacent+2)?(start=scope.page-scope.adjacent,finish=scope.page+scope.adjacent,addFirst(scope,start),addRange(start,finish,scope),addLast(pageCount,scope,finish)):(addFirst(scope,start=(finish=pageCount)-fullAdjacentSize),addRange(start,finish,scope)),addPrevNext(scope,pageCount,"next")}return{restrict:"EA",scope:{page:"=",pageSize:"=",total:"=",dots:"@",hideIfEmpty:"@",ulClass:"@",activeClass:"@",disabledClass:"@",adjacent:"@",scrollTop:"@",showPrevNext:"@",pagingAction:"&",lang:"=",hideNumbers:"@"},template:'<ul ng-hide="Hide" ng-class="ulClass"> <li title="{{Item.title}}" alt="{{Item.title}}" data-dtName="showMoreInfo" ng-class="Item.liClass" ng-click="Item.action()" ng-repeat="Item in List"> <a aria-label="{{Item.title}}" ng-bind="Item.value" href="">{{Item.value}}</a></li></ul>',link:function(scope,element,attrs){scope.$watchCollection("[page,pageSize,total]",function(){build(scope,attrs)})}}}),mi.directive("mayaIndicesToolTip",mayaIndicesToolTipDirective),mi.directive("setActiveLink",function($location,$rootScope){return{restrict:"A",link:function(scope,elem,attr){$rootScope.$watch(function(){return $location.search().view},function(newVal){newVal&&-1<newVal.indexOf(attr.setActiveLink)?elem.addClass("active"):elem.removeClass("active"),$location.url()===$location.path()&&"details"==attr.setActiveLink&&elem.addClass("active")})}}}),mi.directive("setActiveSubLink",function($location,$rootScope){return{restrict:"A",link:function(scope,elem,attr){$rootScope.$watch(function(){return $location.search().type},function(newVal){newVal&&-1<newVal.indexOf(attr.setActiveSubLink)?elem.addClass("active"):elem.removeClass("active"),$location.url()===$location.path()&&"details"==attr.setActiveSubLink&&elem.addClass("active")})}}}),mi.directive("whenClickedTriggerLink",function(){return{restrict:"A",link:function(scope,elem,attr){elem.css("cursor","pointer"),elem.click(function(){var link=elem.find("a").attr("href");window.open(link,"_blank")})}}}),mi.directive("corpRemarksAttantion",coropRemarksAttantion),mi.controller("FilteredResultCtrl",FilteredResultCtrl),FilteredResultCtrl.prototype.init=function(){},FilteredResultCtrl.prototype.cancel=function(){this.$uibModalInstance.dismiss()},FilteredResultCtrl.prototype.open=function(data,$event,event){$uibModal.open({templateUrl:"src/shared/views/filtered-result-popup.html",controller:FilteredResultCtrl,controllerAs:"io",windowClass:"holdingDialogSize",resolve:{rec:function(){return data}}})},mi.service("filteredResultPopUpService",filteredResultPopUpService),mi.directive("cookisesPop",cookisesPopDirective)}(angular);
var data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"company/finance",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!(gridTemplatesProvider={allTemplates:{},setTemplate:function(nameOfTemplate,template){this.allTemplates[nameOfTemplate]=template},getTemplate:function(nameOfTemplate){return this.allTemplates[nameOfTemplate]}})},Export:{Display:!0,Name:"FinanceReports",ProxyFactory:{Proxy:"companyProxy",Method:"getFileFinanceReports",Args:[]}},Legend:{Display:!1,HtmlTemplate:"fund-manager-legend.html"},Info:{Display:!0,Text:"נתוני הדוחות הכספיים התקבלו מחברת אי- אונליין קפיטל(אי.או.סי) בע''מ(להלן – ''אי - אונליין'') והם לוקטו ועובדו על ידה.הנתונים כאמור לא נבדקו ולא בוקרו על ידי הבורסה והם מוצגים כפי שהם נמסרו לבורסה על ידי אי- אונליין.הנתונים המחייבים הינם הנתונים המופיעים בדוחות הכספיים שפורסמו על ידי החברה.מבלי לגרוע מהאמור בהסכם השימוש, הבורסה ו/ או אי-אונליין אינן אחראיות לליקוי, טעות שגיאה או אי דיוק שנפלו בנתונים המוצגים.",TextEng:"Note: The financial statements data have been obtained from A-ONLINE CAPITAL (A.O.C) LTD (hereinafter – ''A-Online'') and they were compiled and processed by it. The data have not been examined or audited by the Stock Exchange and they are presented as given to the Stock Exchange by A-Online.The binding data are those appearing in the financial statements published by the Company.Without derogating from the provisions of the use agreement, the Stock Exchange and/or A-Online are not liable for any fault, error, mistake or inaccuracy in the data presented"},LastFundManagerReport:{Display:!0}},GridTitle:"דוחות כספיים",GridTitleEng:"Financial Report",ClassPageName:"companyInnerPage financeReportsTable",ClassGridName:"financeReportsTable",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",title:"שם",transKey:"grid.companyFinanceReportTpl.Name",IFRS:!1,IFRSRemark:"grid.companyFinanceReportTpl.IFRSRemark",fieldName:"Name",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_2",title:"",IFRS:!1,IFRSRemark:"grid.companyFinanceReportTpl.IFRSRemark",fieldName:"CurrPeriodValue",isExport:!0,isExtended:!1,printDir:!0},{columnHeaderTemplate:"",className:"tableCol col_3",title:"",IFRS:!1,IFRSRemark:"grid.companyFinanceReportTpl.IFRSRemark",fieldName:"PrevPeriodValue",isExport:!0,isExtended:!1,printDir:!0},{columnHeaderTemplate:"",className:"tableCol col_4",title:"",IFRS:!1,IFRSRemark:"grid.companyFinanceReportTpl.IFRSRemark",fieldName:"PrevYearValue",isExport:!0,isExtended:!1,printDir:!0}]};gridTemplatesProvider.setTemplate("CompanyFinanceReports",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"company/indices",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"Indices",ProxyFactory:{Proxy:"companyProxy",Method:"getFileIndices",Args:[]}},Legend:{Display:!1,HtmlTemplate:""},Info:{Display:!1,Text:""},LastFundManagerReport:{Display:!1}},GridTitle:"grid.companyIndicesTpl.title",transKey:"grid.companyIndicesTpl.title",GridTitleEng:"grid.companyIndicesTpl.title",ClassPageName:"companyInnerPage indicatorsSecuritiesTable",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",title:"שם",titleEng:"Name",transKey:"grid.companyIndicesTpl.SecurityName",fieldName:"SecurityName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_2",title:"סימול",titleEng:"Symbol",transKey:"grid.companyIndicesTpl.Symbol",fieldName:"Symbol",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3",title:"מס' נ''ע",titleEng:"ISIN",transKey:"grid.companyIndicesTpl.SecurityId",fieldName:"SecurityId",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",title:"מדד",titleEng:"Index",transKey:"grid.companyIndicesTpl.IndexName",fieldName:"IndexName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_5",title:"% משקל",titleEng:"Weight (%)",transKey:"grid.companyIndicesTpl.Weight",fieldName:"Weight",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_6",title:"פקטור משקל",titleEng:"Weight Factor",transKey:"grid.companyIndicesTpl.FactorWeight",fieldName:"FactorWeight",isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("CompanyIndicesTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"company/management",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"Management",ProxyFactory:{Proxy:"companyProxy",Method:"getFileManagementAndSeniorExecutives",Args:[]}},Legend:{Display:!1,HtmlTemplate:""},Info:{Display:!0,Text:"יתכנו הבדלים בין הנתונים המתפרסמים על ידי הבורסה לבין הנתונים המתפרסמים על ידי החברה, הנובעים בעיקר מתדירות שונה של עדכון הנתונים.",TextEng:"There may be differences between the published data to the data disseminated by the Company, due to frequency of update."},LastFundManagerReport:{Display:!1}},GridTitle:"הנהלה ונושאי משרה",GridTitleEng:"Board & Management",ClassPageName:"companyInnerPage managementTable",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",title:"שם",titleEng:"Name",transKey:"grid.companyManagmentTpl.Name",fieldName:"Name",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_2",title:"תפקיד",titleEng:"Position",transKey:"grid.companyManagmentTpl.RoleType",fieldName:"RoleType",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3",title:"שם נ''ע",titleEng:"Name",transKey:"grid.companyManagmentTpl.SecurityName",fieldName:"SecurityName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",title:"יתרה",titleEng:"Balance",transKey:"grid.companyManagmentTpl.EndBalance",fieldName:"EndBalance",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4-1",title:"ת. יתרה",titleEng:"Balance Date",transKey:"grid.companyManagmentTpl.LastBalanceDate",fieldName:"LastBalanceDate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_5",title:"% בהון",titleEng:"% Capital",transKey:"grid.companyManagmentTpl.CapitalPercent",fieldName:"CapitalPercent",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_6",title:"% בהצבעה",titleEng:"Voting",transKey:"grid.companyManagmentTpl.VoteCapital",fieldName:"VoteCapital",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_7",title:"מומחיות פיננסית",titleEng:"Financial Expert",transKey:"grid.companyManagmentTpl.IsFinancialExpert",fieldName:"IsFinancialExpert",isYesNo:!0,isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_8",title:"ועדת ביקורת",titleEng:"Audit Committee",transKey:"grid.companyManagmentTpl.IsInspectionComitee",fieldName:"IsInspectionComitee",isYesNo:!0,isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("CompanyManagementTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"company/securities",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"Securities",ProxyFactory:{Proxy:"companyProxy",Method:"getFileSecurities",Args:[]}},Legend:{Display:!0,HtmlTemplate:"src/templates/company-securuties-legend.html"},Info:{Display:!0,Text:"",TextEng:"The Company is a foreign corporation and owes reporting duties in accordance with Chapter 5C of the Securities Law ('a dual listed company'). The capital data of the Company in the Stock Exchange records are updated in accordance with the information given to the Stock Exchange by the Company when it applies to the Stock Exchange for approval to list for trading on the Stock Exchange new securities that are issued by it and offered to the public or through a private placement, and also information given to the Stock Exchange by the Company concerning the exercise of its convertible securities. It should be noted that there might be differences between the capital data published by the Stock Exchange and the capital data published by the Company. The differences inter alia derive from the data being updated at different frequency. "},LastFundManagerReport:{Display:!1}},GridTitle:"ניירות ערך",GridTitleEng:"Securities",ClassPageName:"companyInnerPage securitiesTable",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",title:"שם",titleEng:"Name",transKey:"grid.companySecuritiesTpl.securityName",fieldName:"SecurityName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",title:"סוג נייר",titleEng:"Share Type",transKey:"grid.companySecuritiesTpl.shareType",fieldName:"ShareTypeDesc",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_2",title:"סימול",titleEng:"Symbol",transKey:"grid.companySecuritiesTpl.symbol",fieldName:"Symbol",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3 hidden-eng",title:"מס' נ''ע",titleEng:"Security Id",transKey:"grid.companySecuritiesTpl.securityId",fieldName:"SecurityId",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3 hidden-heb",title:"ISIN",titleEng:"ISIN",transKey:"grid.companySecuritiesTpl.isin",fieldName:"ISIN",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",title:"הון מונפק ונפרע",titleEng:"Issued and Paid-Up Share Capital",transKey:"grid.companySecuritiesTpl.issuedCapital",fieldName:"IssuedCapital",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_5",title:"הון רשום למסחר",titleEng:"Capital Listed for Trading",transKey:"grid.companySecuritiesTpl.registredCapital",fieldName:"RegistredCapital",isExport:!0,isExtended:!1,info:"grid.companyFinanceReportTpl.info"},{columnHeaderTemplate:"",className:"tableCol col_7",title:"% בהון",titleEng:"% Capital",transKey:"grid.companySecuritiesTpl.dispositivePower",fieldName:"DispositivePower",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_7",title:"% בהצבעה",titleEng:"% Voting",transKey:"grid.companySecuritiesTpl.votingPower",fieldName:"VotingPower",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",title:"שווי שוק במיליוני ₪",titleEng:"Market Cap (NIS millions)",transKey:"grid.companySecuritiesTpl.marketValue",fieldName:"MarketValue",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_8 hideInPrint",title:"מדדים",transKey:"grid.companySecuritiesTpl.indicesWeight",fieldName:"IndicesWeight",isExport:!1,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_7 hidden-eng hideInPrint",title:"קרנות מחזיקות",transKey:"grid.companySecuritiesTpl.isFundHolding",fieldName:"IsFundHolding",isExport:!1,isExtended:!1}]};gridTemplatesProvider.setTemplate("CompanySecuritiesTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"company/sharedholder",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"SharedHolders",ProxyFactory:{Proxy:"companyProxy",Method:"getFileShareHolders",Args:[]}},Legend:{Display:!1,HtmlTemplate:""},Info:{Display:!0,Text:"נתוני הדוחות הכספיים התקבלו מחברת אי- אונליין קפיטל(אי.או.סי) בע''מ(להלן – ''אי - אונליין'') והם לוקטו ועובדו על ידה.הנתונים כאמור לא נבדקו ולא בוקרו על ידי הבורסה והם מוצגים כפי שהם נמסרו לבורסה על ידי אי- אונליין.הנתונים המחייבים הינם הנתונים המופיעים בדוחות הכספיים שפורסמו על ידי החברה.מבלי לגרוע מהאמור בהסכם השימוש, הבורסה ו/ או אי-אונליין אינן אחראיות לליקוי, טעות שגיאה או אי דיוק שנפלו בנתונים המוצגים."},LastFundManagerReport:{Display:!1}},GridTitle:"בעלי עניין",GridTitleEng:"Interested Parties",ClassPageName:"companyInnerPage tabsTable",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",title:"שם",titleEng:"Name",transKey:"grid.companySharedHoldersTpl.HolderName",fieldName:"HolderName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_2 hidden-eng hideInPrint",title:"הערות",titleEng:"Remarks",transKey:"grid.companySharedHoldersTpl.Remark",fieldName:"Remark",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3",title:"תאריך היתרה",titleEng:"Balance Date",transKey:"grid.companySharedHoldersTpl.LastUpdateDate",fieldName:"LastUpdateDate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",title:"שם נ''ע",titleEng:"Symbol",transKey:"grid.companySharedHoldersTpl.SecurityName",fieldName:"SecurityName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_5",title:"יתרה",titleEng:"Balance",transKey:"grid.companySharedHoldersTpl.EndBalance",fieldName:"EndBalance",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_6",title:"% בהון",titleEng:"% Capital",transKey:"grid.companySharedHoldersTpl.CapitalPercent",fieldName:"CapitalPercent",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_7",title:"% בהצבעה",titleEng:"% Voting",transKey:"grid.companySharedHoldersTpl.VoteCapital",fieldName:"VoteCapital",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_8",title:"שווי שוק",titleEng:"Market Cap (NIS millions)",transKey:"grid.companySharedHoldersTpl.MarketValue",fieldName:"MarketValue",isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("CompanyShareHoldersTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"General Meetings",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"GeneralMeetings",ProxyFactory:{Proxy:"corpactionsProxy",Method:"getFileCorpActions",Args:[]}},Legend:{Display:!1,HtmlTemplate:"src/templates/corp-action-legend.html"},Info:{Display:!1,Text:""},LastFundManagerReport:{Display:!1}},GridTitle:"אסיפות",GridTitleEng:"Assemblies",ClassPageName:"paymentsInnerPage",ClassPageNameEng:"payments_engInnerPage",RemoveEmptyFields:!1,ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_10",sortKey:"BeginningOfPeriod",transKey:"corporateactions.assembly.beginningOfPeriod",fieldName:"BeginningOfPeriod",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_10",sortKey:"ConventionDate",transKey:"corporateactions.assembly.conventionDate",fieldName:"ConventionDate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_11",transKey:"corporateactions.assembly.assemblyTime",fieldName:"AssemblyTime",isExport:!0,isExtended:!1,info:"corporateactions.timezoneInfo"},{columnHeaderTemplate:"",className:"tableCol col_3",transKey:"corporateactions.assembly.securityCd",fieldName:"SecurityCd",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3",transKey:"corporateactions.assembly.securityName",sortKey:"SecurityName",fieldName:"SecurityName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_14 hideInPrint",transKey:"corporateactions.assembly.rptCode",sortKey:"",fieldName:"RptCode",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_12",transKey:"corporateactions.assembly.remarks",fieldName:"Remarks",isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("CorpActionAssemblyTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"FinanceReportingDate",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"FinanceReportingDate",ProxyFactory:{Proxy:"corpactionsProxy",Method:"getFileCorpActions",Args:[]}},Legend:{Display:!1,HtmlTemplate:"src/templates/corp-action-legend.html"},Info:{Display:!0,Text:"המועדים הצפויים לפרסום הדוחות הכספיים התקבלו בבורסה ממקורות שונים לרבות, החברות עצמן, חברות קשרי משקיעים ואתרי הפצת מידע שונים. הנתונים לא נבדקו ולא בוקרו על ידי הבורסה והיא אינה אחראית לתוכנם או עדכניותם. מועדים שהתקבלו מהחברות בדיווח המידי כוללים קישור לדיווח. </br>מובהר כי דיווח על המועד הצפוי לפרסום הדוחות הכספיים הינו וולונטרי. לפיכך, דף זה כולל אך ורק את המועדים הצפויים לפרסום הדוחות הכספיים של החברות שבחרו לפרסם מועדים אלה.",TextEng:"TASE has received the expected dates for the publication of the financial reports from various sources, including  the listed companies themselves, IR companies and financial websites.\nTASE has not checked or reviewed the data and shall not be held liable nor for its content neither for it being updated.\nwhere the source of the information is an immediate report,  a link to the report itself is provided."},LastFundManagerReport:{Display:!1}},GridTitle:"מועדי פרסום דוחות",GridTitleEng:"Financial Reports Schedule",ClassPageName:"paymentsInnerPage",ClassPageNameEng:"payments_engInnerPage",RemoveEmptyFields:!1,ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",sortKey:"BeginningOfPeriod",transKey:"corporateactions.financereportingdate.beginningOfPeriod",fieldName:"BeginningOfPeriod",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3",transKey:"corporateactions.financereportingdate.securityCd",fieldName:"SecurityCd",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"SecurityName",transKey:"corporateactions.financereportingdate.securityName",fieldName:"SecurityName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_15",transKey:"corporateactions.financereportingdate.remarks",fieldName:"Remarks",isExport:!0,isExtended:!1,info:"corporateactions.timezoneInfo"}]};gridTemplatesProvider.setTemplate("CorpActionFinanceReportingDateTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"Events",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!1,Name:"Events",ProxyFactory:{Proxy:"corpactionsProxy",Method:"getFileCorpActions",Args:[]}},Legend:{Display:!1,HtmlTemplate:"src/templates/corp-action-legend.html"},Info:{Display:!1,Text:""},LastFundManagerReport:{Display:!1}},GridTitle:"מועדים ותשלומים",GridTitleEng:"Corporate Events",transKey:"corporateactions.events.gridTitle",ClassPageName:"paymentsInnerPage",ClassPageNameEng:"payments_engInnerPage",RemoveEmptyFields:!1,ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",sortKey:"BeginningOfPeriod",transKey:"corporateactions.events.beginningOfPeriod",fieldName:"BeginningOfPeriod",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"PaymentType",transKey:"corporateactions.events.eventType",fieldName:"PaymentType",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_00",transKey:"corporateactions.events.securityCd",fieldName:"SecurityCd",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"SecurityName",transKey:"corporateactions.events.securityName",fieldName:"SecurityName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_13",transKey:"corporateactions.events.remarks",fieldName:"Remarks",isExport:!0,isExtended:!1,info:"corporateactions.timezoneInfo"}]};gridTemplatesProvider.setTemplate("CorpActionEventsTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"Payments",ToolTipHebText:"נתונים נוספים",ToolTipEngText:"Additional data",ToolTipIsOpen:!0},Export:{Display:!1,Name:"Payments",ProxyFactory:{Proxy:"corpactionsProxy",Method:"getFileCorpActions",Args:[]}},Legend:{Display:!1,HtmlTemplate:"src/templates/corp-action-legend.html"},Info:{Display:!1,Text:""},LastFundManagerReport:{Display:!1}},GridTitle:"תשלומים",GridTitleEng:"Income Payments",transKey:"corporateactions.payments.gridTitle",ClassPageName:"paymentsInnerPage",ClassPageNameEng:"payments_engInnerPage",RemoveEmptyFields:!1,ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",sortKey:"BeginningOfPeriod",title:"יום אקס",titleEng:"Beginning of Period EX-Date",transKey:"corporateactions.payments.beginningOfPeriod",fieldName:"BeginningOfPeriod",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_1",sortKey:"EndOfPeriod",title:"יום תשלום",titleEng:"End of Period Payment Date",transKey:"corporateactions.payments.endOfPeriod",fieldName:"EndOfPeriod",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_2",sortKey:"PaymentType",title:"סוג תשלום",titleEng:"Type of Payment",transKey:"corporateactions.payments.paymentType",fieldName:"PaymentType",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_00",title:'מספר ני"ע',titleEng:"Security Number",transKey:"corporateactions.payments.securityCd",fieldName:"SecurityCd",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"SecurityName",title:"שם נייר",titleEng:"Security Name",transKey:"corporateactions.payments.securityName",fieldName:"SecurityName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_5",title:"תשלום",titleEng:"Payment",transKey:"corporateactions.payments.payment",fieldName:"Payment",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_10",title:"% מס חברות",titleEng:"Corporate Tax",transKey:"corporateactions.payments.corporateTax",fieldName:"CorporateTax",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_10",title:"% מס יחידים",titleEng:"Personal Tax",transKey:"corporateactions.payments.personalTax",fieldName:"PersonalTax",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_10",title:"כמות מקבלת",titleEng:"Receivable Ammount",transKey:"corporateactions.payments.receivableAmount",fieldName:"ReceivableAmount",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_10",title:'ני"ע מתקבל',titleEng:"Received Security",transKey:"corporateactions.payments.receivedSecurity",fieldName:"ReceivedSecurity",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_10",title:"כמות מתקבלת",titleEng:"Received Ammount",transKey:"corporateactions.payments.receivedAmount",fieldName:"ReceivedAmount",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_10",title:"מחיר מימוש",titleEng:"Exercise Price",transKey:"corporateactions.payments.exercisePrice",fieldName:"ExercisePrice",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_10",title:"שיעור הצמדה",titleEng:"Linkage Rate",transKey:"corporateactions.payments.linkageRate",fieldName:"LinkageRate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_1",title:"הערות",titleEng:"Remark",transKey:"corporateactions.payments.remarks",fieldName:"Remarks",isExport:!0,isExtended:!0}]};gridTemplatesProvider.setTemplate("CorpActionPaymentsTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"finance",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"Finance",ProxyFactory:{Proxy:"reportProxy",Method:"getFileFinanceReport",Args:[]}},Info:{Display:!0,Text:"נתוני הדוחות הכספיים התקבלו מחברת אי- אונליין קפיטל(אי.או.סי) בע''מ(להלן – ''אי - אונליין'') והם לוקטו ועובדו על ידה.הנתונים כאמור לא נבדקו ולא בוקרו על ידי הבורסה והם מוצגים כפי שהם נמסרו לבורסה על ידי אי- אונליין.הנתונים המחייבים הינם הנתונים המופיעים בדוחות הכספיים שפורסמו על ידי החברה.מבלי לגרוע מהאמור בהסכם השימוש, הבורסה ו/ או אי-אונליין אינן אחראיות לליקוי, טעות שגיאה או אי דיוק שנפלו בנתונים המוצגים.",TextEng:"Note: The financial statements data have been obtained from A-ONLINE CAPITAL (A.O.C) LTD (hereinafter – ''A-Online'') and they were compiled and processed by it. The data have not been examined or audited by the Stock Exchange and they are presented as given to the Stock Exchange by A-Online.The binding data are those appearing in the financial statements published by the Company.Without derogating from the provisions of the use agreement, the Stock Exchange and/or A-Online are not liable for any fault, error, mistake or inaccuracy in the data presented"}},GridTitle:"דוחות כספיים",GridTitleEng:"Financial Statements",transKey:"grid.financeReportTpl.title",ClassPageName:"financialPage",ClassGridName:"financeReportsTable",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",sortKey:"PubDate",title:"תאריך פרסום",titleEng:"Publish date",transKey:"grid.financeReportTpl.PubDate",fieldName:"PubDate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_2",sortKey:"CompanyName",title:"שם החברה",titleEng:"Company name",transKey:"grid.financeReportTpl.CompanyName",fieldName:"CompanyName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3",sortKey:"",title:'תקופת הדו"ח',titleEng:"Report period",transKey:"grid.financeReportTpl.ReportPeriod",fieldName:"ReportPeriod",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_files hideInPrint",sortKey:"",title:'קישור לדו"ח',titleEng:"Report hyperlink",transKey:"grid.financeReportTpl.Files",fieldName:"Files",isExport:!1,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",title:"הפסקת מסחר",titleEng:"Trade stop",transKey:"grid.financeReportTpl.TradeHalt",fieldName:"TradeHalt",isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("FinanceReportTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"fund/manager",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"FundManager",ProxyFactory:{Proxy:"fundProxy",Method:"getFileFundManagerDetails",Args:[]}},Legend:{Display:!0,HtmlTemplate:"src/templates/fund-manager-legend.html"},Info:{Display:!1,Text:"למרקוח איבן איף, ברומץ כלרשט מיחוצים. קלאצי סחטיר בלובק"},LastFundManagerReport:{Display:!1}},GridTitle:"רשימת קרנות",ClassPageName:"fundsInnerPage",ClassGridName:"",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",sortKey:"FundShortName",title:"שם הקרן",transKey:"grid.fundsManagerTpl.FundShortName",fieldName:"FundShortName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_8",sortKey:"FTD",title:'סוג ני"ע',transKey:"grid.fundsManagerTpl.FundTypeDesc",fieldName:"FundTypeDesc",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_2",sortKey:"FundId",title:"מס' קרן",transKey:"grid.fundsManagerTpl.FundId",fieldName:"FundId",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3",sortKey:"ExposureProfile",title:"פרופיל חשיפה",transKey:"grid.fundsManagerTpl.ExposureProfile",fieldName:"ExposureProfile",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"Classification",title:"סיווג הקרן",transKey:"grid.fundsManagerTpl.Classification",fieldName:"Classification",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_5",sortKey:"TaxRouteDesc",transKey:"grid.fundsManagerTpl.TaxRouteDesc",title:"מעמד מס",fieldName:"TaxRouteDesc",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"ManagementFee",transKey:"grid.fundsManagerTpl.ManagementFee",title:"דמי ניהול",fieldName:"ManagementFee",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"TrusteeFee",title:"דמי נאמנות",transKey:"grid.fundsManagerTpl.TrusteeFee",fieldName:"TrusteeFee",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"AssetValue",title:"שווי נכסי הקרן",transKey:"grid.fundsManagerTpl.AssetValue",fieldName:"AssetValue",isExport:!0,isExtended:!1,info:"במיליוני ₪"},{columnHeaderTemplate:"",className:"tableCol col_7",sortKey:"PurchasePrice",title:"מחיר קניה",transKey:"grid.fundsManagerTpl.PurchasePrice",fieldName:"PurchasePrice",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_8",sortKey:"SellPrice",title:"מחיר פדיון",fieldName:"SellPrice",transKey:"grid.fundsManagerTpl.SellPrice",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_9",sortKey:"DayYield",title:"% שינוי יומי",transKey:"grid.fundsManagerTpl.DayYield",fieldName:"DayYield",isExport:!0,isExtended:!1,printDir:!0},{columnHeaderTemplate:"",className:"tableCol col_10",sortKey:"MonthYield.Yield",title:"תשואות מתחילת החודש",fieldName:"MonthYield",transKey:"grid.fundsManagerTpl.MonthYield",isExport:!0,isExtended:!1,printDir:!0},{columnHeaderTemplate:"",className:"tableCol col_11",sortKey:"YearYield.Yield",title:"תשואות מתחילת השנה",transKey:"grid.fundsManagerTpl.YearYield",fieldName:"YearYield",isExport:!0,isExtended:!1,printDir:!0},{columnHeaderTemplate:"",className:"tableCol col_12",sortKey:"Standard_Deviation.Yield",title:"סטיית תקן",transKey:"grid.fundsManagerTpl.StandardDeviation",fieldName:"StandardDeviation",isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("FundManagerTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!1,View:"fund/manager",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"FundManager",ProxyFactory:{Proxy:"fundProxy",Method:"getFileFundManagerAssets",Args:[]}},Legend:{Display:!1},Info:{Display:!0,Text:'<span>הבורסה אינה מתחייבת לכך שהנתונים יהיו עדכניים תמיד, וכן היא אינה אחראית לליקוי, טעות,  שגיאה או אי דיוק שנפלו בנתונים המוצגים <a href="https://info.tase.co.il/heb/about_tase/disclaimer/Pages/terms_of_service.aspx" title="הסכם שימוש" target="_blank"> בהסכם השימוש </a>הנתונים לוקטו על ידי הבורסה מתוך הדוחות החודשיים המוגשים על ידי מנהלי הקרנות, על פי דין. הנתונים כאמור לא נבדקו ולא בוקרו על ידי הבורסה והם מוצגים כפי שהם פורסמו על ידי מנהלי הקרונות. מבלי לגרוע מהאמור .</span>'},LastFundManagerReport:{Display:!1}},GridTitle:"הרכב נכסי הקרן",ClassPageName:"managerInnerPage",ClassGridName:"",ColumnItems:[{columnHeaderTemplate:"",className:"assetCol col_asset1",sortKey:"AssetName",title:"שם הנכס",transKey:"grid.fundsManagerAssetsTpl.AssetName",fieldName:"AssetName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:" assetCol col_asset2",sortKey:"NisValue",title:'שווי באלפי ש"ח',transKey:"grid.fundsManagerAssetsTpl.NisValue",fieldName:"NisValue",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:" assetCol col_asset3",sortKey:"Quantity",title:'כמות ני"ע',transKey:"grid.fundsManagerAssetsTpl.Quantity",fieldName:"Quantity",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:" assetCol col_asset4",sortKey:"AssetTypeName",title:"סוג",transKey:"grid.fundsManagerAssetsTpl.AssetTypeName",fieldName:"AssetTypeName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:" assetCol col_asset5",sortKey:"BondRank",title:"דירוג",transKey:"grid.fundsManagerAssetsTpl.BondRank",fieldName:"BondRank",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:" assetCol col_asset5 hideInPrint",title:"גרף שווי אחזקות לתקופה",fieldName:"Graph",transKey:"grid.fundsManagerAssetsTpl.Graph",isExport:!0,isExtended:!1,printDir:!0}]};gridTemplatesProvider.setTemplate("FundManagerAssetsTpl",data);data={Toolbar:{},GridTitle:"דוח חודשי",ClassPageName:"fundsInnerPage",ColumnItems:[{title:"מספר קרן",transKey:"grid.fundsMonthlyReportTpl.FundId",fieldName:"FundId",isExport:!0},{title:"שם קרן",transKey:"grid.fundsMonthlyReportTpl.FundNm",fieldName:"FundNm",isExport:!0},{title:"שם נכס",transKey:"grid.fundsMonthlyReportTpl.AssetNm",fieldName:"AssetNm",isExport:!0},{title:"סוג נכס",transKey:"grid.fundsMonthlyReportTpl.AssetType",fieldName:"AssetType",isExport:!0},{title:"מספר מזהה",transKey:"grid.fundsMonthlyReportTpl.IdentificationNumber",fieldName:"IdentificationNumber",isExport:!0},{title:"סוג מזהה",transKey:"grid.fundsMonthlyReportTpl.IdentificationType",fieldName:"IdentificationType",isExport:!0},{title:"כמות",transKey:"grid.fundsMonthlyReportTpl.Amount",fieldName:"Amount",isExport:!0},{title:"שווי בשקלים\tמחיר",transKey:"grid.fundsMonthlyReportTpl.PriceValueInNis",fieldName:"PriceValueInNis",isExport:!0},{title:"מחיר",transKey:"grid.fundsMonthlyReportTpl.Price",fieldName:"Price",isExport:!0},{title:"שווי במטבע מסחר",transKey:"grid.fundsMonthlyReportTpl.TradingCurrencyValue",fieldName:"TradingCurrencyValue",isExport:!0},{title:"% מקרן",transKey:"grid.fundsMonthlyReportTpl.PercentageFund",fieldName:"PercentageFund",isExport:!0},{title:"כמות שהושאלה",transKey:"grid.fundsMonthlyReportTpl.AmountBorrwed",fieldName:"AmountBorrwed",isExport:!0},{title:"סוג מחיר",transKey:"grid.fundsMonthlyReportTpl.PriceType",fieldName:"PriceType",isExport:!0},{title:"מקום מסחר",transKey:"grid.fundsMonthlyReportTpl.TradingPlace",fieldName:"TradingPlace",isExport:!0},{title:"שוק מסחר",transKey:"grid.fundsMonthlyReportTpl.TradingMarket",fieldName:"TradingMarket",isExport:!0},{title:"מטבע",transKey:"grid.fundsMonthlyReportTpl.Currency",fieldName:"Currency",isExport:!0},{title:"שער מטבע",transKey:"grid.fundsMonthlyReportTpl.CurrencyRate",fieldName:"CurrencyRate",isExport:!0},{title:'כמות אג"ח לפדיון',transKey:"grid.fundsMonthlyReportTpl.BondsAmountFroMaturity",fieldName:"BondsAmountFroMaturity",isExport:!0},{title:"ריבית שנצברה",transKey:"grid.fundsMonthlyReportTpl.AccuredInterest",fieldName:"AccuredInterest",isExport:!0},{title:"TICKER",transKey:"grid.fundsMonthlyReportTpl.TICKER",fieldName:"TICKER",isExport:!0},{title:"לפי מדיניות",transKey:"grid.fundsMonthlyReportTpl.AccordingPolicy",fieldName:"AccordingPolicy",isExport:!0},{title:'דרגת אג"ח',transKey:"grid.fundsMonthlyReportTpl.RatingBond",fieldName:"RatingBond",isExport:!0},{title:"קוד מדרגת",transKey:"grid.fundsMonthlyReportTpl.CodeBreak",fieldName:"CodeBreak",isExport:!0},{title:"קוד בנק",transKey:"grid.fundsMonthlyReportTpl.BankCode",fieldName:"BankCode",isExport:!0},{title:"תאריך דוח",transKey:"grid.fundsMonthlyReportTpl.ReportDate",fieldName:"ReportDate",isExport:!0},{title:"מס#רשומה",transKey:"grid.fundsMonthlyReportTpl.RecordNumber",fieldName:"RecordNumber",isExport:!0},{title:"סהכ רשומות",transKey:"grid.fundsMonthlyReportTpl.TotalRecord",fieldName:"TotalRecord",isExport:!0},{title:"מס#מנהל ברשם",transKey:"grid.fundsMonthlyReportTpl.ManagerCorpNumber",fieldName:"ManagerCorpNumber",isExport:!0}]};gridTemplatesProvider.setTemplate("FundMonthlyReport",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!1,View:"fundassets",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"FundAssets",ProxyFactory:{Proxy:"fundProxy",Method:"getFileFundAssets",Args:[]}},Legend:{Display:!1},Info:{Display:!0,Text:'<span>הבורסה אינה מתחייבת לכך שהנתונים יהיו עדכניים תמיד, וכן היא אינה אחראית לליקוי, טעות,  שגיאה או אי דיוק שנפלו בנתונים המוצגים <a href="https://info.tase.co.il/heb/about_tase/disclaimer/Pages/terms_of_service.aspx" title="הסכם שימוש" target="_blank"> בהסכם השימוש </a>הנתונים לוקטו על ידי הבורסה מתוך הדוחות החודשיים המוגשים על ידי מנהלי הקרנות, על פי דין. הנתונים כאמור לא נבדקו ולא בוקרו על ידי הבורסה והם מוצגים כפי שהם פורסמו על ידי מנהלי הקרונות. מבלי לגרוע מהאמור .</span>'},LastFundManagerReport:{Display:!1}},GridTitle:"הרכב נכסי הקרן",ClassPageName:"fundInnerPage",ClassGridName:"",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol assetCol1",sortKey:"AssetName",title:"שם הנכס",transKey:"grid.fundsAssetTpl.AssetName",fieldName:"AssetName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetCol2",sortKey:"FundPercentage",title:"מהקרן %",transKey:"grid.fundsAssetTpl.FundPercentage",fieldName:"FundPercentage",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetCol3",sortKey:"NisValue",title:'שווי באלפי ש"ח',transKey:"grid.fundsAssetTpl.NisValue",fieldName:"NisValue",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetCol4",sortKey:"Price",title:"מחיר",transKey:"grid.fundsAssetTpl.Price",fieldName:"Price",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetCol5",sortKey:"Quantity",title:'כמות ני"ע',transKey:"grid.fundsAssetTpl.Quantity",fieldName:"Quantity",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetCol6",sortKey:"AssetTypeName",title:"סוג",transKey:"grid.fundsAssetTpl.AssetTypeName",fieldName:"AssetTypeName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetCol7",sortKey:"BondRank",title:"דירוג",transKey:"grid.fundsAssetTpl.BondRank",fieldName:"BondRank",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetChart hideInPrint",title:"גרף שווי אחזקות לתקופה",transKey:"grid.fundsAssetTpl.Graph",fieldName:"Graph",isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("FundAssetsTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!1,View:"fundassets",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"FundAssets",ProxyFactory:{Proxy:"fundProxy",Method:"getFileFundAssets",Args:[]}},Legend:{Display:!1},Info:{Display:!0,Text:'<span>הבורסה אינה מתחייבת לכך שהנתונים יהיו עדכניים תמיד, וכן היא אינה אחראית לליקוי, טעות,  שגיאה או אי דיוק שנפלו בנתונים המוצגים <a href="https://info.tase.co.il/heb/about_tase/disclaimer/Pages/terms_of_service.aspx" title="הסכם שימוש" target="_blank"> בהסכם השימוש </a>הנתונים לוקטו על ידי הבורסה מתוך הדוחות החודשיים המוגשים על ידי מנהלי הקרנות, על פי דין. הנתונים כאמור לא נבדקו ולא בוקרו על ידי הבורסה והם מוצגים כפי שהם פורסמו על ידי מנהלי הקרונות. מבלי לגרוע מהאמור .</span>'},LastFundManagerReport:{Display:!1}},GridTitle:"הרכב נכסי הקרן",ClassPageName:"etfFundInnerPage",ClassGridName:"",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol assetCol1",sortKey:"AssetName",title:"שם הנכס",transKey:"grid.etfAssetsTpl.AssetName",fieldName:"AssetName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetCol2",sortKey:"FundPercentage",title:"מהקרן %",transKey:"grid.etfAssetsTpl.FundPercentage",fieldName:"FundPercentage",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetCol3",sortKey:"NisValue",title:'שווי באלפי ש"ח',transKey:"grid.etfAssetsTpl.NisValue",fieldName:"NisValue",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetCol4",sortKey:"Price",title:"מחיר",transKey:"grid.etfAssetsTpl.Price",fieldName:"Price",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetCol5",sortKey:"Quantity",title:'כמות ני"ע',transKey:"grid.etfAssetsTpl.Quantity",fieldName:"Quantity",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetCol6",sortKey:"AssetTypeName",title:"סוג",transKey:"grid.etfAssetsTpl.AssetTypeName",fieldName:"AssetTypeName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetCol7",sortKey:"BondRank",title:"דירוג",transKey:"grid.etfAssetsTpl.BondRank",fieldName:"BondRank",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol assetChart hideInPrint",title:"גרף שווי אחזקות לתקופה",transKey:"grid.etfAssetsTpl.Graph",fieldName:"Graph",isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("ETFAssetsTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!1,View:"company/securities"},Export:{Display:!0,Name:"Securities",ProxyFactory:{Proxy:"companyProxy",Method:"getFileSecurities",Args:[]}},Legend:{Display:!0,HtmlTemplate:"src/templates/company-securuties-legend.html"},Info:{Display:!1,Text:""},LastFundManagerReport:{Display:!1}},GridTitle:"רשימת קרנות",GridTitleEng:"Securities",ClassPageName:"companyInnerPage securitiesTable",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",title:"שם",titleEng:"Name",transKey:"grid.etfManagerSecurity.SecurityName",fieldName:"SecurityName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_2",title:"סימול",titleEng:"Symbol",transKey:"grid.etfManagerSecurity.Symbol",fieldName:"Symbol",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3",title:"מס' נ''ע",titleEng:"ISIN",transKey:"grid.etfManagerSecurity.SecurityId",fieldName:"SecurityId",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3",title:"ISIN",titleEng:"ISIN",transKey:"grid.etfManagerSecurity.ISIN",fieldName:"ISIN",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_5",title:"יתרה בחשבון מסלקת הבורסה ביורוקליר",titleEng:"Capital Listed for Trading",transKey:"grid.etfManagerSecurity.RegistredCapital",fieldName:"RegistredCapital",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_5",title:"שווי אחזקות בחשבון מסלקת הבורסה ביורוקליר במיליוני ₪",titleEng:"Market Value",transKey:"grid.etfManagerSecurity.MarketValue",fieldName:"MarketValue",isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("ETFManagerSecuritiesTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!1,View:"fundassets",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"FundAssets",ProxyFactory:{Proxy:"fundProxy",Method:"getFileFundsAssets",Args:[]}},Legend:{Display:!1},Info:{Display:!0,Text:'<span>הבורסה אינה מתחייבת לכך שהנתונים יהיו עדכניים תמיד, וכן היא אינה אחראית לליקוי, טעות,  שגיאה או אי דיוק שנפלו בנתונים המוצגים <a href="https://info.tase.co.il/heb/about_tase/disclaimer/Pages/terms_of_service.aspx" title="הסכם שימוש" target="_blank"> בהסכם השימוש </a>הנתונים לוקטו על ידי הבורסה מתוך הדוחות החודשיים המוגשים על ידי מנהלי הקרנות, על פי דין. הנתונים כאמור לא נבדקו ולא בוקרו על ידי הבורסה והם מוצגים כפי שהם פורסמו על ידי מנהלי הקרונות. מבלי לגרוע מהאמור .</span>'},LastFundManagerReport:{Display:!1}},GridTitle:"קרנות מחזיקות בנכס",ClassPageName:"fundInnerPage",ClassGridName:"",ColumnItems:[{columnHeaderTemplate:"",className:"assetCol col_asset1",sortKey:"FundName",title:"שם קרן",transKey:"grid.fundsAssetsTpl.FundName",fieldName:"FundName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"assetCol col_asset2",sortKey:"FundId",title:"מספר קרן",transKey:"grid.fundsAssetsTpl.FundId",fieldName:"FundId",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"assetCol col_asset3",sortKey:"FundPercentage",title:"% מהקרן",transKey:"grid.fundsAssetsTpl.FundPercentage",fieldName:"FundPercentage",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"assetCol col_asset4",sortKey:"NisValue",title:'שווי באלפי ש"ח',transKey:"grid.fundsAssetsTpl.NisValue",fieldName:"NisValue",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"assetCol col_asset5",sortKey:"Price",title:"מחיר",transKey:"grid.fundsAssetsTpl.Price",fieldName:"Price",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"assetCol col_asset6",sortKey:"Quantity",title:'כמות ני"ע',transKey:"grid.fundsAssetsTpl.Quantity",fieldName:"Quantity",isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("FundsAssetTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"fundhistory",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"FundHistory",ProxyFactory:{Proxy:"fundProxy",Method:"getFileFundHistory",Args:[]}},Legend:{Display:!1},Info:{Display:!1,Text:""},LastFundManagerReport:{Display:!1}},GridTitle:"נתונים היסטוריים",ClassPageName:"fundInnerPage",ClassGridName:"",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol histCol1",title:"תאריך",transKey:"grid.fundsHistoryTpl.TradeDate",fieldName:"TradeDate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol2",title:"מחיר קניה",transKey:"grid.fundsHistoryTpl.PurchasePrice",fieldName:"PurchasePrice",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol3",title:"מחיר פדיון",transKey:"grid.fundsHistoryTpl.SellPrice",fieldName:"SellPrice",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol4",title:"שיעור הוספה (%)",transKey:"grid.fundsHistoryTpl.Rate",fieldName:"Rate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol5",title:"דמי ניהול (%)",transKey:"grid.fundsHistoryTpl.ManagmentFee",fieldName:"ManagmentFee",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol4",title:"שווי נכסים במיל' ₪",transKey:"grid.fundsHistoryTpl.AssetValue",fieldName:"AssetValue",isExport:!0,isExtended:!1,info:"מתעדכן בהתאם לדיווחי הקרן אחת לחודש נכון ללפני חודשיים"},{columnHeaderTemplate:"",className:"tableCol histCol1",title:"דמי נאמנות",transKey:"grid.fundsHistoryTpl.TrusteeFee",fieldName:"TrusteeFee",isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("FundHistoryTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"fundhistory",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"FundHistory",ProxyFactory:{Proxy:"hedgeFundProxy",Method:"getFileFundHistory",Args:[]}},Legend:{Display:!1},Info:{Display:!1,Text:""},LastFundManagerReport:{Display:!1}},GridTitle:"שערים היסטוריים",ClassPageName:"hedgefundInnerPage",ClassGridName:"",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol histCol1",title:"תאריך",transKey:"grid.fundsHistoryTpl.TradeDate",fieldName:"TradeDate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol2",title:"מחיר קניה",transKey:"grid.fundsHistoryTpl.PurchasePrice",fieldName:"PurchasePrice",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol3",title:"מחיר פדיון",transKey:"grid.fundsHistoryTpl.SellPrice",fieldName:"SellPrice",isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("HedgeFundHistoryTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"funds",ToolTipHebText:"נתונים נוספים",ToolTipEngText:"Additional data",ToolTipIsOpen:!1},Export:{Display:!0,Name:"Funds",ProxyFactory:{Proxy:"fundProxy",Method:"getFileFundListDetails",Args:[]}},Legend:{Display:!0,HtmlTemplate:"src/templates/fund-manager-legend.html"},Info:{Display:!1,Text:"למרקוח איבן איף, ברומץ כלרשט מיחוצים. קלאצי סחטיר בלובק"},LastFundManagerReport:{Display:!1}},GridTitle:"רשימת קרנות",ClassPageName:"fundsInnerPage",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",sortKey:"FSN",title:"שם הקרן",transKey:"grid.fundsTpl.FLN",fieldName:"FLN",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_2",sortKey:"FId",title:"מס' קרן",transKey:"grid.fundsTpl.FId",fieldName:"FId",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3",sortKey:"EP",title:"פרופיל חשיפה",transKey:"grid.fundsTpl.EP",fieldName:"EP",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"Cl",title:"סיווג הקרן",transKey:"grid.fundsTpl.Cl",fieldName:"Cl",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_5",sortKey:"PI",title:"מאפייני הקרן",transKey:"grid.fundsTpl.PI",fieldName:"PI",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_5",sortKey:"FCN",title:"קרן להשקעות חוץ מטבע עיקרי",transKey:"grid.fundsTpl.FCN",fieldName:"FCN",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"MSN",title:"מנהל קרן",transKey:"grid.fundsTpl.MSN",fieldName:"MSN",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"TSN",title:"נאמן",transKey:"grid.fundsTpl.TSN",fieldName:"TSN",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_5",sortKey:"TRD",title:"מעמד מס",transKey:"grid.fundsTpl.TRD",fieldName:"TRD",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"TFee",title:"סיווג עמלת הפצה",transKey:"grid.fundsTpl.ClD",fieldName:"ClD",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"MFee",title:"דמי ניהול",transKey:"grid.fundsTpl.MFee",fieldName:"MFee",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"TFee",title:"דמי נאמנות",transKey:"grid.fundsTpl.TFee",fieldName:"TFee",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"AV",title:"שווי נכסי הקרן",transKey:"grid.fundsTpl.AV",fieldName:"AV",isExport:!0,isExtended:!1,info:"במיליוני ₪"},{columnHeaderTemplate:"",className:"tableCol col_7",sortKey:"RD",title:"תאריך נכונות מחירים ותשואות",transKey:"grid.fundsTpl.RD",fieldName:"RD",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_7",sortKey:"PP",title:"מחיר קניה",transKey:"grid.fundsTpl.PP",fieldName:"PP",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_8",sortKey:"SP",title:"מחיר פדיון",transKey:"grid.fundsTpl.SP",fieldName:"SP",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_9",sortKey:"DY",title:"שינוי יומי %",transKey:"grid.fundsTpl.DY",fieldName:"DY",isExport:!0,isExtended:!1,printDir:!0},{columnHeaderTemplate:"",className:"tableCol col_10",sortKey:"MY",title:"תשואות מתחילת החודש",transKey:"grid.fundsTpl.MY",fieldName:"MY",isExport:!0,isExtended:!1,printDir:!0},{columnHeaderTemplate:"",className:"tableCol col_11",sortKey:"YY",title:"תשואות מתחילת השנה",transKey:"grid.fundsTpl.YY",fieldName:"YY",isExport:!0,isExtended:!1,printDir:!0},{columnHeaderTemplate:"",className:"tableCol col_11",sortKey:"L12SY",title:"תשואות 12 חודשים",transKey:"grid.fundsTpl.L12SY",fieldName:"L12SY",isExport:!0,isExtended:!0,printDir:!0},{columnHeaderTemplate:"",className:"tableCol col_12",sortKey:"SD",title:"סטיית תקן",transKey:"grid.fundsTpl.SD",fieldName:"SD",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"ARS",title:"נכס הייחוס",transKey:"grid.fundsTpl.ARS",fieldName:"ARS",isExport:!0,isExtended:!0}]};gridTemplatesProvider.setTemplate("FundsTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"funds",ToolTipHebText:"נתונים נוספים",ToolTipEngText:"Additional data",ToolTipIsOpen:!1},Export:{Display:!0,Name:"Funds",ProxyFactory:{Proxy:"fundProxy",Method:"getFileFundListDetails",Args:[]}},Legend:{Display:!0,HtmlTemplate:"src/templates/fund-manager-legend.html"},Info:{Display:!1,Text:"למרקוח איבן איף, ברומץ כלרשט מיחוצים. קלאצי סחטיר בלובק"},LastFundManagerReport:{Display:!1}},GridTitle:"רשימת קרנות",ClassPageName:"hedgefundInnerPage",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",sortKey:"FSN",title:"שם הקרן",transKey:"grid.fundsTpl.FLN",fieldName:"FLN",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_2",sortKey:"FId",title:"מס' קרן",transKey:"grid.fundsTpl.FId",fieldName:"FId",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3",sortKey:"EP",title:"פרופיל חשיפה",transKey:"grid.fundsTpl.EP",fieldName:"EP",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"Cl",title:"סיווג הקרן",transKey:"grid.fundsTpl.Cl",fieldName:"Cl",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_5",sortKey:"PI",title:"מאפייני הקרן",transKey:"grid.fundsTpl.PI",fieldName:"PI",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"AV",title:"שווי נכסי הקרן",transKey:"grid.fundsTpl.AV",fieldName:"AV",isExport:!0,isExtended:!1,info:"במיליוני ₪"},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"MSN",title:"מנהל קרן",transKey:"grid.fundsTpl.MSN",fieldName:"MSN",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"TSN",title:"נאמן",transKey:"grid.fundsTpl.TSN",fieldName:"TSN",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_5",sortKey:"TRD",title:"מעמד מס",transKey:"grid.fundsTpl.TRD",fieldName:"TRD",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"TFee",title:"סיווג עמלת הפצה",transKey:"grid.fundsTpl.ClD",fieldName:"ClD",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"MFee",title:"דמי ניהול",transKey:"grid.fundsTpl.MFee",fieldName:"MFee",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"SFee",title:"דמי הצלחה",transKey:"grid.fundsTpl.SFee",fieldName:"SFee",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"TFee",title:"דמי נאמנות",transKey:"grid.fundsTpl.TFee",fieldName:"TFee",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"ARS",title:"נכס הייחוס",transKey:"grid.fundsTpl.ARS",fieldName:"ARS",isExport:!0,isExtended:!0}]};gridTemplatesProvider.setTemplate("HedgeFundsTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"funds",ToolTipHebText:"נתונים נוספים",ToolTipEngText:"Additional data",ToolTipIsOpen:!1},Export:{Display:!0,Name:"Funds",ProxyFactory:{Proxy:"fundProxy",Method:"getFileFundListDetails",Args:[]}},Legend:{Display:!0,HtmlTemplate:"src/templates/fund-manager-legend.html"},Info:{Display:!0,Text:'החל מיום 25.8.19, תפסיק הבורסה להציג, באתריה (אתר הבורסה הבורסה ואתר "המאיה"), את נתוני התשואות השונות של קרנות הסל. הנתונים שתופסק הצגתם הינם: "תשואה מתחילת החודש", "תשואה מתחילת השנה", "תשואה 12 חודשים", ו"תשואות לפי מחירי פדיון" . לא יחול שינוי באופן הצגת התשואות בכל שאר הניירות הנסחרים בבורסה ובקרנות הנאמנות הפתוחות.'},LastFundManagerReport:{Display:!1}},GridTitle:"רשימת קרנות",ClassPageName:"fundsInnerPage",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",sortKey:"FSN",title:"שם הקרן",transKey:"grid.etfTpl.FSN",fieldName:"FSN",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_8",sortKey:"FId",title:"מס' קרן",transKey:"grid.etfTpl.FId",fieldName:"FId",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_w",sortKey:"ARS",title:"נכס הייחוס",transKey:"grid.etfTpl.ARS",fieldName:"ARS",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s",sortKey:"EP",title:"פרופיל חשיפה",transKey:"grid.etfTpl.EP",fieldName:"EP",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"Cl",title:"סיווג הקרן",transKey:"grid.etfTpl.Cl",fieldName:"Cl",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s",sortKey:"PI",title:"מאפייני הקרן",transKey:"grid.etfTpl.PI",fieldName:"PI",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s",sortKey:"FCN",title:"קרן להשקעות חוץ מטבע עיקרי",transKey:"grid.etfTpl.FCN",fieldName:"FCN",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_14",sortKey:"CR",title:"שער אחרון (באגורות)",transKey:"grid.etfTpl.CR",fieldName:"CR",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_8 hcenter",sortKey:"PC",title:"שינוי (%)",transKey:"grid.etfTpl.PC",fieldName:"PC",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_l",sortKey:"TOVS",title:'מחזור (באלפי ש"ח)',transKey:"grid.etfTpl.TOVS",fieldName:"TOVS",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"LUD",title:"זמן עסקה אחרונה",transKey:"grid.etfTpl.LUD",fieldName:"LUD",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_l",sortKey:"UVP",title:"שווי יחידה",transKey:"grid.etfTpl.UVP",fieldName:"UVP",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_l",sortKey:"CP",title:"מחיר קניה(יצירה)",transKey:"grid.etfTpl.CP",fieldName:"CP",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_l",sortKey:"SP",title:"מחיר פדיון",transKey:"grid.etfTpl.SP",fieldName:"SP",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_l",sortKey:"LUR",title:"ת. עדכון אחרון",transKey:"grid.etfTpl.CTD",fieldName:"CTD",isExport:!0,isExtended:!0,info:"שערי קרן"},{columnHeaderTemplate:"",className:"tableCol col_7",sortKey:"BR",title:"שער בסיס",transKey:"grid.etfTpl.BR",fieldName:"BR",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_7",sortKey:"OR",title:"שער פתיחה",transKey:"grid.etfTpl.OR",fieldName:"OR",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_7",sortKey:"LR",title:"שער נמוך",transKey:"grid.etfTpl.LR",fieldName:"LR",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_7",sortKey:"HR",title:"שער גבוה",transKey:"grid.etfTpl.HR",fieldName:"HR",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_l",sortKey:"DN",title:"מספר עסקאות",transKey:"grid.etfTpl.DN",fieldName:"DN",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_l",sortKey:"OTOU",title:"מחזור ביחידות",transKey:"grid.etfTpl.OTOU",fieldName:"OTOU",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_m",sortKey:"MV",title:"שווי שוק",transKey:"grid.etfTpl.MV",fieldName:"MV",isExport:!0,isExtended:!0,info:'באלפי ש"ח'},{columnHeaderTemplate:"",className:"tableCol col_5",sortKey:"TRD",title:"מעמד מס",transKey:"grid.etfTpl.TRD",fieldName:"TRD",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"MFee",title:"דמי ניהול",transKey:"grid.etfTpl.MFee",fieldName:"MFee",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"MFee",title:"דמי ניהול משתנים",transKey:"grid.etfTpl.VFee",fieldName:"VFee",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"TFee",title:"דמי נאמנות",transKey:"grid.etfTpl.TFee",fieldName:"TFee",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"TFee",title:"סיווג עמלת הפצה",transKey:"grid.etfTpl.ClD",fieldName:"ClD",isExport:!0,isExtended:!0,isUnextended:!0}]};gridTemplatesProvider.setTemplate("ETFTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"funds",ToolTipHebText:"נתונים נוספים",ToolTipEngText:"Additional data",ToolTipIsOpen:!1},Export:{Display:!0,Name:"Funds",ProxyFactory:{Proxy:"fundProxy",Method:"getFileFundListDetails",Args:[]}},Legend:{Display:!1,HtmlTemplate:""},Info:{Display:!1,Text:""},LastFundManagerReport:{Display:!1}},GridTitle:"רשימת קרנות",ClassPageName:"fundsInnerPage",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_15",sortKey:"FSN",title:"שם הקרן",transKey:"grid.foriegnEtfTpl.FSN",fieldName:"FSN",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_8",sortKey:"FId",title:"מס' קרן",transKey:"grid.foriegnEtfTpl.FId",fieldName:"FId",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"Cl",title:"סיווג הקרן",transKey:"grid.foriegnEtfTpl.Cl",fieldName:"Cl",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"MFee",title:"דמי ניהול",fieldName:"MFee",transKey:"grid.foriegnEtfTpl.MFee",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_14",sortKey:"CR",title:"שער אחרון (באגורות)",fieldName:"CR",transKey:"grid.foriegnEtfTpl.CR",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_8 hcenter",sortKey:"PC",title:"שינוי (%)",fieldName:"PC",transKey:"grid.foriegnEtfTpl.PC",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_l",sortKey:"TOVS",title:'מחזור (באלפי ש"ח)',fieldName:"TOVS",transKey:"grid.foriegnEtfTpl.TOVS",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"LUD",title:"זמן עסקה אחרונה",fieldName:"LUD",transKey:"grid.foriegnEtfTpl.LUD",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_7",sortKey:"BR",title:"שער בסיס",fieldName:"BR",transKey:"grid.foriegnEtfTpl.BR",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_7",sortKey:"OR",title:"שער פתיחה",fieldName:"OR",transKey:"grid.foriegnEtfTpl.OR",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_7",sortKey:"LR",title:"שער נמוך",fieldName:"LR",transKey:"grid.foriegnEtfTpl.LR",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_7",sortKey:"HR",title:"שער גבוה",fieldName:"HR",transKey:"grid.foriegnEtfTpl.HR",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_7",sortKey:"DN",title:"שינוי באגורות",fieldName:"POC",transKey:"grid.foriegnEtfTpl.POC",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_4_ext",title:"יתרה בחשבון מסלקת הבורסה ביורוקליר",titleEng:"Capital Listed for Trading",fieldName:"RCP",transKey:"grid.foriegnEtfTpl.RCP",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_4_ext",title:"שווי אחזקות בחשבון מסלקת הבורסה ביורוקליר במיליוני ₪",titleEng:"Market Value",fieldName:"FMV",transKey:"grid.foriegnEtfTpl.FMV",isExport:!0,isExtended:!0}]};gridTemplatesProvider.setTemplate("ForeignETFTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"funds",ToolTipHebText:"נתונים נוספים",ToolTipEngText:"Additional data",ToolTipIsOpen:!1},Export:{Display:!0,Name:"Funds",ProxyFactory:{Proxy:"fundProxy",Method:"getFileFundListDetails",Args:[]}},Legend:{Display:!0,HtmlTemplate:"src/templates/fund-manager-legend.html"},Info:{Display:!0,Text:'החל מיום 25.8.19, תפסיק הבורסה להציג, באתריה (אתר הבורסה הבורסה ואתר "המאיה"), את נתוני התשואות השונות של קרנות הסל. הנתונים שתופסק הצגתם הינם: "תשואה מתחילת החודש", "תשואה מתחילת השנה", "תשואה 12 חודשים", ו"תשואות לפי מחירי פדיון" . לא יחול שינוי באופן הצגת התשואות בכל שאר הניירות הנסחרים בבורסה ובקרנות הנאמנות הפתוחות.'},LastFundManagerReport:{Display:!1}},GridTitle:"רשימת קרנות",ClassPageName:"fundsInnerPage",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_1",sortKey:"FSN",title:"שם הקרן",transKey:"grid.allFundsTpl.FSN",fieldName:"FSN",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_8",sortKey:"FTD",title:'סוג ני"ע',transKey:"grid.allFundsTpl.FTD",fieldName:"FTD",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_8",sortKey:"FId",title:"מס' קרן",transKey:"grid.allFundsTpl.FId",fieldName:"FId",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"ARS",title:"נכס הייחוס",transKey:"grid.allFundsTpl.ARS",fieldName:"ARS",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s",sortKey:"EP",title:"פרופיל חשיפה",transKey:"grid.allFundsTpl.EP",fieldName:"EP",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_4",sortKey:"Cl",title:"סיווג הקרן",transKey:"grid.allFundsTpl.Cl",fieldName:"Cl",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s",sortKey:"PI",title:"מאפייני הקרן",transKey:"grid.allFundsTpl.PI",fieldName:"PI",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_5",sortKey:"FCN",title:"קרן להשקעות חוץ מטבע עיקרי",transKey:"grid.allFundsTpl.FSN",fieldName:"FCN",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_14",sortKey:"CR",title:"שער אחרון (באגורות)",transKey:"grid.allFundsTpl.CR",fieldName:"CR",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_3",sortKey:"PC",title:"שינוי (%)",transKey:"grid.allFundsTpl.PC",fieldName:"PC",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_14",sortKey:"TOVS",title:'מחזור (באלפי ש"ח)',transKey:"grid.allFundsTpl.TOVS",fieldName:"TOVS",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_l",sortKey:"LUD",title:"זמן עסקה אחרונה",transKey:"grid.allFundsTpl.LUD",fieldName:"LUD",isExport:!0,isExtended:!0,info:"תאריך נכונות סוף יום"},{columnHeaderTemplate:"",className:"tableCol col_8",sortKey:"UVP",title:"שווי יחידה",transKey:"grid.allFundsTpl.UVP",fieldName:"UVP",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_8",sortKey:"PP",title:"מחיר קניה (יצירה)",transKey:"grid.allFundsTpl.PP",fieldName:"PP",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_8",sortKey:"SP",title:"מחיר פדיון",transKey:"grid.allFundsTpl.SP",fieldName:"SP",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_m",sortKey:"LUR",title:"ת. עדכון אחרון",transKey:"grid.allFundsTpl.CTD",fieldName:"CTD",isExport:!0,isExtended:!0,info:"שערי קרן"},{columnHeaderTemplate:"",className:"tableCol col_m",sortKey:"DY",title:"שינוי מיום קודם %",transKey:"grid.allFundsTpl.DY",fieldName:"DY",isExport:!0,isExtended:!0,printDir:!0,info:"לפי מחיר הקרן"},{columnHeaderTemplate:"",className:"tableCol col_10",sortKey:"MY",title:"תשואות מתחילת החודש",transKey:"grid.allFundsTpl.MY",fieldName:"MY",isExport:!0,isExtended:!0,printDir:!0},{columnHeaderTemplate:"",className:"tableCol col_m",sortKey:"YY",title:"תשואה מתחילת השנה",transKey:"grid.allFundsTpl.YY",fieldName:"YY",isExport:!0,isExtended:!0,printDir:!0,info:"לפי מחירי פדיון הקרן"},{columnHeaderTemplate:"",className:"tableCol col_l",sortKey:"L12SY",title:"תשואה מתחילת 12 חודשים",fieldName:"L12SY",transKey:"grid.allFundsTpl.L12SY",isExport:!0,isExtended:!0,printDir:!0,info:"לפי מחירי פדיון הקרן"},{columnHeaderTemplate:"",className:"tableCol col_5",sortKey:"TRD",title:"מסלול מס",fieldName:"TRD",transKey:"grid.allFundsTpl.TRD",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_5",sortKey:"THD",title:"קוד הגבלת פעילות",transKey:"grid.allFundsTpl.THD",fieldName:"THD",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_l",sortKey:"MSN",title:"מנהל הקרן",transKey:"grid.allFundsTpl.MSN",fieldName:"MSN",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_l",sortKey:"TSN",title:"נאמן הקרן",transKey:"grid.allFundsTpl.TSN",fieldName:"TSN",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_5",sortKey:"TRD",title:"מעמד מס",transKey:"grid.allFundsTpl.TRD2",fieldName:"TRD",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"MFee",title:"דמי ניהול",transKey:"grid.allFundsTpl.MFee",fieldName:"MFee",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"TFee",title:"דמי נאמנות",transKey:"grid.allFundsTpl.TFee",fieldName:"TFee",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol col_6",sortKey:"TFee",title:"סיווג עמלת הפצה",transKey:"grid.allFundsTpl.ClD",fieldName:"ClD",isExport:!0,isExtended:!0,isUnextended:!0}]};gridTemplatesProvider.setTemplate("AllFundsTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"hedgeFundSecurityRedemption",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"SecurityRedemption",ProxyFactory:{Proxy:"hedgefundProxy",Method:"getSecurityRedemptionCSV",Args:[]}},Legend:{Display:!1},Info:{Display:!1,Text:""},LastFundManagerReport:{Display:!1}},GridTitle:"ניירות לפדיון",ClassPageName:"fundInnerPage",ClassGridName:"",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol secRedemptionCol1",title:"מס' הנייר",transKey:"grid.hedgeFundSecurityRedemptionTpl.SecurityCd",fieldName:"SecurityCd",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol secRedemptionCol2",title:"שם הנייר",transKey:"grid.hedgeFundSecurityRedemptionTpl.SecurityName",fieldName:"SecurityName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol secRedemptionCol3",title:"מועד יצירה",transKey:"grid.hedgeFundSecurityRedemptionTpl.BeginDate",fieldName:"BeginDate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol secRedemptionCol4",title:"המועד הקבוע הקרוב לפדיון",transKey:"grid.hedgeFundSecurityRedemptionTpl.EndDate",fieldName:"EndDate",isExport:!0,isExtended:!1,info:"grid.hedgeFundSecurityRedemptionTpl.endDateInfo"},{columnHeaderTemplate:"",className:"tableCol secRedemptionCol4",title:"המועד האחרון להגשת הוראות לפדיון",transKey:"grid.hedgeFundSecurityRedemptionTpl.SendingMessageDeadline",fieldName:"SendingMessageDeadline",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol secRedemptionCol5",title:"שער יחידה נטו",transKey:"grid.hedgeFundSecurityRedemptionTpl.NAV",fieldName:"Nav",isExport:!0,isExtended:!1,info:"grid.hedgeFundSecurityRedemptionTpl.navInfo"},{columnHeaderTemplate:"",className:"tableCol secRedemptionCol5",title:"שער יחידה ברוטו",transKey:"grid.hedgeFundSecurityRedemptionTpl.GAV",fieldName:"Gav",isExport:!0,isExtended:!1,info:"grid.hedgeFundSecurityRedemptionTpl.gavInfo"}]};gridTemplatesProvider.setTemplate("HedgeFundSecurityRedemptionTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"etf/history?type=inday",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"InDayHistory",ProxyFactory:{Proxy:"etfProxy",Method:"getInDayHistoryDetails",Args:[]}},Legend:{Display:!1},Info:{Display:!1,Text:""},LastFundManagerReport:{Display:!1}},GridTitle:"נתונים תוך-יומיים",ClassPageName:"etfFundInnerPage",ClassGridName:"",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol histCol8 histCenter",title:"תאריך",transKey:"grid.etfInDayHistoryTpl.DealDate",fieldName:"DealDate",isExport:!0},{columnHeaderTemplate:"",className:"tableCol histCol5 histCenter",transKey:"grid.etfInDayHistoryTpl.DealTime",title:"שעה",fieldName:"DealTime",isExport:!0},{columnHeaderTemplate:"",className:"tableCol histCol5 histCenter",title:"שער עסקה",transKey:"grid.etfInDayHistoryTpl.LastRate",fieldName:"LastRate",isExport:!0},{columnHeaderTemplate:"",className:"tableCol histCol5 histCenter",title:"שינוי(%)",transKey:"grid.etfInDayHistoryTpl.Change",fieldName:"Change",isExport:!0,printDir:!0},{columnHeaderTemplate:"",className:"tableCol histCol8 histCenter",title:"מחזור ביחידות",transKey:"grid.etfInDayHistoryTpl.TurnOverUnits",fieldName:"TurnOverUnits",isExport:!0},{columnHeaderTemplate:"",className:"tableCol histCol8 histCenter",title:"מחזור מסחר",transKey:"grid.etfInDayHistoryTpl.TurnOverValue",fieldName:"TurnOverValue",isExport:!0},{columnHeaderTemplate:"",className:"tableCol histCol8 histCenter",title:"מחזור מצטבר",transKey:"grid.etfInDayHistoryTpl.OverallTurnOverValue",fieldName:"OverallTurnOverValue",isExport:!0}]};gridTemplatesProvider.setTemplate("EtfInDayHistoryTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"etf/history?type=endday",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"EndDayHistory",ProxyFactory:{Proxy:"etfProxy",Method:"getEndDayHistoryDetails",Args:[]}},Legend:{Display:!1},Info:{Display:!1,Text:""},LastFundManagerReport:{Display:!1}},GridTitle:"נתונים היסטוריים סוף יום",ClassPageName:"etfFundInnerPage",ClassGridName:"",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol histCol2",title:"תאריך נכונות",transKey:"grid.etfEndOfDayHistoryTpl.TradeDate",fieldName:"TradeDate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol3",title:"שער נעילה",transKey:"grid.etfEndOfDayHistoryTpl.CloseRate",fieldName:"CloseRate",isExport:!0,isExtended:!1,info:"באגורות"},{columnHeaderTemplate:"",className:"tableCol histCol0 hcenter",title:"שינוי (%)",transKey:"grid.etfEndOfDayHistoryTpl.Change",fieldName:"Change",isExport:!0,isExtended:!1,printDir:!0},{columnHeaderTemplate:"",className:"tableCol histCol3",title:"מחזור",transKey:"grid.etfEndOfDayHistoryTpl.MonetaryTurnOver1000",fieldName:"MonetaryTurnOver1000",isExport:!0,isExtended:!1,smalltitle:'(באלפי ש"ח)'},{columnHeaderTemplate:"",className:"tableCol histCol3",title:"מחיר קניה (יצירה)",transKey:"grid.etfEndOfDayHistoryTpl.CreationPrice",fieldName:"CreationPrice",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol1",title:"מחיר פדיון",transKey:"grid.etfEndOfDayHistoryTpl.SellPrice",fieldName:"SellPrice",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol1",title:"שווי יחידה",transKey:"grid.etfEndOfDayHistoryTpl.UnitPrice",fieldName:"UnitPrice",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol2",title:"ת. עדכון של שערי קרנות",transKey:"grid.etfEndOfDayHistoryTpl.FundsLastUpdateDate",fieldName:"FundsLastUpdateDate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol1",title:"שער בסיס",transKey:"grid.etfEndOfDayHistoryTpl.BaseRate",fieldName:"BaseRate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol1",title:"שער פתיחה",transKey:"grid.etfEndOfDayHistoryTpl.OpenRate",fieldName:"OpenRate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol1",title:"שער נמוך",transKey:"grid.etfEndOfDayHistoryTpl.LowRate",fieldName:"LowRate",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol histCol1",title:"שער גבוה",transKey:"grid.etfEndOfDayHistoryTpl.HighRate",fieldName:"HighRate",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"שינוי ",transKey:"grid.etfEndOfDayHistoryTpl.PointsChange",fieldName:"PointsChange",isExport:!0,isExtended:!0,smalltitle:"(באגורות)",printDir:!0},{columnHeaderTemplate:"",className:"tableCol histCol2",title:"מחזור",transKey:"grid.etfEndOfDayHistoryTpl.TurnOverVolume",fieldName:"TurnOverVolume",isExport:!0,isExtended:!0,smalltitle:"(ביחידות)"},{columnHeaderTemplate:"",className:"tableCol histCol3",title:"מספר עסקאות",fieldName:"DealsNo",transKey:"grid.etfEndOfDayHistoryTpl.DealsNo",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol histCol2",title:"שווי שוק",fieldName:"MarketValue",transKey:"grid.etfEndOfDayHistoryTpl.MarketValue",isExport:!0,isExtended:!0,smalltitle:'(באלפי ש"ח)'},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"סוג האקס",transKey:"grid.etfEndOfDayHistoryTpl.ExeText",fieldName:"ExeText",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol histCol2",title:"הון רשום למסחר",transKey:"grid.etfEndOfDayHistoryTpl.RegisteredCapital",fieldName:"RegisteredCapital",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol histCol3",title:"דמי ניהול (%)",transKey:"grid.etfEndOfDayHistoryTpl.ManagmentFee",fieldName:"ManagmentFee",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol histCol3",title:"דמי נאמנות (%)",transKey:"grid.etfEndOfDayHistoryTpl.TrustedFee",fieldName:"TrustedFee",isExport:!0,isExtended:!0}]};gridTemplatesProvider.setTemplate("EtfEndDayHistoryTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"etf/history?type=endday",ToolTipHebText:"לפתיחה במסך מלא",ToolTipEngText:"Open in new window",ToolTipIsOpen:!1},Export:{Display:!0,Name:"EndDayHistory",ProxyFactory:{Proxy:"foreignETFProxy",Method:"getEndDayHistoryDetails",Args:[]}},Legend:{Display:!1},Info:{Display:!1,Text:""},LastFundManagerReport:{Display:!1}},GridTitle:"נתונים היסטוריים סוף יום",ClassPageName:"foreignEtfInner",ClassGridName:"",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol histCol1",title:"תאריך",transKey:"grid.foriegnEtfEndOfDayHistory.TradeDate",fieldName:"TradeDate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol1",title:"אינדיקציה",transKey:"grid.foriegnEtfEndOfDayHistory.ShareStatus",fieldName:"ShareStatus",isExport:!0,isExtended:!0,isUnextended:!0},{columnHeaderTemplate:"",className:"tableCol histCol2",title:"שער נעילה מתואם",transKey:"grid.foriegnEtfEndOfDayHistory.AdjustmentRate",fieldName:"AdjustmentRate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol2",title:"שער נעילה",transKey:"grid.foriegnEtfEndOfDayHistory.CloseRate",fieldName:"CloseRate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol3 hcenter",title:"שינוי (%)",transKey:"grid.foriegnEtfEndOfDayHistory.Change",fieldName:"Change",isExport:!0,isExtended:!1,printDir:!0},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"שער פתיחה",transKey:"grid.foriegnEtfEndOfDayHistory.OpenRate",fieldName:"OpenRate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"שער בסיס",transKey:"grid.foriegnEtfEndOfDayHistory.BaseRate",fieldName:"BaseRate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"שער גבוה",transKey:"grid.foriegnEtfEndOfDayHistory.HighRate",fieldName:"HighRate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"שער נמוך",transKey:"grid.foriegnEtfEndOfDayHistory.LowRate",fieldName:"LowRate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol2",title:"הון רשום למסחר",transKey:"grid.foriegnEtfEndOfDayHistory.RegisteredCapital",fieldName:"RegisteredCapital",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"שווי שוק",transKey:"grid.foriegnEtfEndOfDayHistory.MarketValue",fieldName:"MarketValue",isExport:!0,isExtended:!0,smalltitle:'(באלפי ש"ח)'},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"מחזור המסחר",transKey:"grid.foriegnEtfEndOfDayHistory.MonetaryTurnOver",fieldName:"MonetaryTurnOver",isExport:!0,isExtended:!0,smalltitle:'(ש"ח)'},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"מחזור ביחידות",transKey:"grid.foriegnEtfEndOfDayHistory.TurnOverVolume",fieldName:"TurnOverVolume",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"מספר עסקאות",transKey:"grid.foriegnEtfEndOfDayHistory.DealsNo",fieldName:"DealsNo",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"סוג האקס",transKey:"grid.foriegnEtfEndOfDayHistory.ExeText",fieldName:"ExeText",isExport:!0,isExtended:!0,info:"נכון לתחילת יום הסמחר"},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"מקדם אקס",transKey:"grid.foriegnEtfEndOfDayHistory.AdjustmentCoefficient",fieldName:"AdjustmentCoefficient",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol histCol0",title:'ממ"מ',transKey:"grid.foriegnEtfEndOfDayHistory.MMM",fieldName:"MMM",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol histCol0",title:"אחוז החזקות הציבור למדד",transKey:"grid.foriegnEtfEndOfDayHistory.FreeFloatPercent",fieldName:"FreeFloatPercent",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol histCol0",title:'מועד עדכון ממ"מ אחרון',transKey:"grid.foriegnEtfEndOfDayHistory.LastUpdateDate",fieldName:"LastUpdateDate",isExport:!0,isExtended:!0}]};gridTemplatesProvider.setTemplate("ForeignEtfEndDayHistoryTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"issuance",ToolTipHebText:"נתונים נוספים",ToolTipEngText:"Additional data",ToolTipIsOpen:!1},Export:{Display:!0,Name:"Issuance",ProxyFactory:{Proxy:"issuanceProxy",Method:"getFileOpenTender",Args:[]}},Legend:{Display:!1},Info:{Display:!0,Text:'בלוח ההנפקות מתפרסמות הצעות המיועדות לכלל ציבור המשקיעים. הוא אינו כולל הצעות המיועדות לחלק מציבור המשקיעים כגון – הצעה בדרך של זכויות או הצעת רכש.</br>מבלי לגרוע מתנאי <a href="https://info.tase.co.il/heb/about_tase/disclaimer/Pages/terms_of_service.aspx" title="הסכם שימוש" target="_blank">הסכם שימוש</a> יודגש כי:<ol class="list-number"><li>הנתונים הנכללים בלוח ההנפקות נלקחו מתוך הדיווחים הפומביים של התאגידים והאחריות המלאה לאמיתותם של הנתונים ושלמותם מוטלת על התאגיד המדווח.</li><li>הנתונים המתפרסמים כאן הם נתונים חלקיים בלבד. המידע המלא מצוי בדיווחים כפי שנמסרו על ידי התאגידים המדווחים.</li><li>הנתונים הנכללים בלוח ההנפקות עשויים להשתנות מעת לעת בהתאם לדיווחי התאגיד. לשימת לב - עשוי להיווצר פער בין מועד הדיווח של התאגיד לבין מועד עדכון הנתונים, כולם או חלקם,  בלוח ההנפקות.</li><li>אין במידע הנכלל בלוח ההנפקות או בכל חלק ממנו משום הבעת דעה ו/או המלצה כלשהי לגבי ניירות הערך הנזכרים בו או לגבי התאגידים המבקשים להנפיק את ניירות הערך.</li><li>אין לראות במידע הנכלל בלוח ההנפקות או בכל חלק ממנו משום המלצה או עצה לנהוג בדרך זו או אחרת בכל הקשור לקבלת החלטות בתחום ההשקעות, בתחום המיסוי או בתחום המשפטי.</li><li>הנתונים מתייחסים להנפקות צפויות שייתכן כי לא ייצאו אל הפועל.</li></ol>',TextEng:'The issuance schedule presents offers to the general public of investors. It does not present offers to limited groups of investors, such as an offer by way of rights or a tender offer.Without detracting from the <a href="https://info.tase.co.il/eng/about_tase/disclaimer/Pages/terms_of_service.aspx" title="terms of the Use" target="_blank">terms of the Use</a> Agreement, it is hereby emphasized that:<ol  class="list-number"><li>The data included in the issuance schedule were taken from the public reports of the entities, and the reporting entity bears sole responsibility for the accuracy and integrity of the data.</li><li>The data published herein are incomplete. The complete information is available in the reports as provided by the reporting entities.</li><li>The data included in the issuance schedule may change from time to time based on the entities’ reports. Please be advised that there may be a time gap between the date of the entity’s report and the updating of all or part of the data in the issuance schedule.</li><li>The information included in the issuance schedule or any part thereof should not be construed as the expression of an opinion and/or a recommendation with respect to any of the securities mentioned therein or with respect to the entities pursuing issuance of the securities.</li><li>\tThe information included in the issuance schedule or any part thereof should not be construed as a recommendation or an advice to act in one manner or another as regarding decision-making on investments, taxation or legal matters.</li><li>The data relates to planned issuances that may not come to pass.</li></ol>'},LastFundManagerReport:{Display:!1}},GridTitle:"הנפקות פתוחות",GridTitleEng:"Open Offerings",transKey:"grid.issuanceOpenTenderTpl.title",ClassPageName:"issuancePage",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_s",title:"מספר מכרז",transKey:"grid.issuanceOpenTenderTpl.TenderNbr",fieldName:"OfferNumber",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s",title:"מועד תחילת מכרז",transKey:"grid.issuanceOpenTenderTpl.SubmissionOfOrdersStartDate",fieldName:"BeginAt",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s",title:"מועד סיום מכרז",transKey:"grid.issuanceOpenTenderTpl.SubmissionOfOrdersEndDate",fieldName:"EndAt",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_m1",title:"שם החברה",transKey:"grid.issuanceOpenTenderTpl.CompanyNm",fieldName:"CompanyName",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_m1",title:"כמות היחידות המוצעת",transKey:"grid.issuanceOpenTenderTpl.UnitComposition",fieldName:"MinOfferedUnits",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_mm sec-name",title:'שם ני"ע ביחידה',transKey:"grid.issuanceOpenTenderTpl.SecurityNm",fieldName:"SecurityName",tooltipClass:"new-sec-info",info:"grid.issuanceOpenTenderTpl.newStockInfo",dynamicI:"mf mf-star",dynamicContent:"grid.issuanceOpenTenderTpl.newSec",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s mobile_col_ss",title:'כמות ני"ע ביחידה',transKey:"grid.issuanceOpenTenderTpl.SecurityQuantityInUnit",fieldName:"QuantityPerUnit",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s1",title:"סוג מכרז",transKey:"grid.issuanceOpenTenderTpl.TenderType",fieldName:"OfferTypeName",isExport:!0,isExtended:!1,tooltipClass:"infoTender",info:"grid.issuanceOpenTenderTpl.tooltipTenderType"},{columnHeaderTemplate:"",className:"tableCol col_s",title:"ריבית",transKey:"grid.issuanceOpenTenderTpl.MaxInterest",fieldName:"Interest",isExport:!0,isExtended:!1,tooltipClass:"infoMaxInterest",info:"grid.issuanceOpenTenderTpl.tooltipMaxInterest"},{columnHeaderTemplate:"",className:"tableCol col_s mobile_col_ss",title:"סוג הצמדה",transKey:"grid.issuanceOpenTenderTpl.LinkageType",fieldName:"LinkageType",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s",title:"מחיר (₪) ליחידה",transKey:"grid.issuanceOpenTenderTpl.MinimumPrice",fieldName:"PricdPerUnit",isExport:!0,isExtended:!1,tooltipClass:"infoMinimumPrice",info:"grid.issuanceOpenTenderTpl.tooltipMinimumPrice"},{columnHeaderTemplate:"",className:"tableCol col_ss",title:"דירוג מעלות",transKey:"grid.issuanceOpenTenderTpl.MaalotRate",fieldName:"MaalotRating",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_ss",title:"דירוג מדרוג",transKey:"grid.issuanceOpenTenderTpl.MidrugRate",fieldName:"MidrugRating",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_ss hidden-eng",title:'דו"ח ההצעה',transKey:"grid.issuanceOpenTenderTpl.RptCd",fieldName:"RptCd",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s",title:"% מרווח ריבית",transKey:"grid.issuanceOpenTenderTpl.SpaciousRate",fieldName:"InterestMargin",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_s",title:"מרווח מחיר (₪)",transKey:"grid.issuanceOpenTenderTpl.SpaciousPrice",fieldName:"PriceMargin",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_m",title:"סוג הצעה",transKey:"grid.issuanceOpenTenderTpl.UniformProposal",fieldName:"OfferingType",isExport:!0,isExtended:!0},{columnHeaderTemplate:"",className:"tableCol col_ss new_issuance hidden-eng",title:"להזמנה",transKey:"grid.issuanceOpenTenderTpl.ARS",fieldName:"",isExport:!1,isExtended:!1,isUnextended:!0}]};gridTemplatesProvider.setTemplate("IssuanceOpenTenderTpl",data);data={Toolbar:{Print:{Display:!0},OpenNew:{Display:!0,View:"issuance",ToolTipHebText:"פתיחה במסך מלא",ToolTipEngText:"Additional data",ToolTipIsOpen:!1},Export:{Display:!0,Name:"Issuance",ProxyFactory:{Proxy:"issuanceProxy",Method:"getFileUpComing",Args:[]}},Legend:{Display:!1},Info:{Display:!0,Text:'בלוח ההנפקות מתפרסמות הצעות המיועדות לכלל ציבור המשקיעים. הוא אינו כולל הצעות המיועדות לחלק מציבור המשקיעים כגון – הצעה בדרך של זכויות או הצעת רכש.</br>מבלי לגרוע מתנאי <a href="https://info.tase.co.il/heb/about_tase/disclaimer/Pages/terms_of_service.aspx" title="הסכם שימוש" target="_blank">הסכם שימוש</a> יודגש כי:<ol class="list-number"><li>הנתונים הנכללים בלוח ההנפקות נלקחו מתוך הדיווחים הפומביים של התאגידים והאחריות המלאה לאמיתותם של הנתונים ושלמותם מוטלת על התאגיד המדווח.</li><li>הנתונים המתפרסמים כאן הם נתונים חלקיים בלבד. המידע המלא מצוי בדיווחים כפי שנמסרו על ידי התאגידים המדווחים.</li><li>הנתונים הנכללים בלוח ההנפקות עשויים להשתנות מעת לעת בהתאם לדיווחי התאגיד. לשימת לב - עשוי להיווצר פער בין מועד הדיווח של התאגיד לבין מועד עדכון הנתונים, כולם או חלקם,  בלוח ההנפקות.</li><li>אין במידע הנכלל בלוח ההנפקות או בכל חלק ממנו משום הבעת דעה ו/או המלצה כלשהי לגבי ניירות הערך הנזכרים בו או לגבי התאגידים המבקשים להנפיק את ניירות הערך.</li><li>אין לראות במידע הנכלל בלוח ההנפקות או בכל חלק ממנו משום המלצה או עצה לנהוג בדרך זו או אחרת בכל הקשור לקבלת החלטות בתחום ההשקעות, בתחום המיסוי או בתחום המשפטי.</li><li>הנתונים מתייחסים להנפקות צפויות שייתכן כי לא ייצאו אל הפועל.</li></ol>',TextEng:'The issuance schedule presents offers to the general public of investors. It does not present offers to limited groups of investors, such as an offer by way of rights or a tender offer.Without detracting from the <a href="https://info.tase.co.il/eng/about_tase/disclaimer/Pages/terms_of_service.aspx" title="terms of the Use" target="_blank">terms of the Use</a> Agreement, it is hereby emphasized that:<ol  class="list-number"><li>The data included in the issuance schedule were taken from the public reports of the entities, and the reporting entity bears sole responsibility for the accuracy and integrity of the data.</li><li>The data published herein are incomplete. The complete information is available in the reports as provided by the reporting entities.</li><li>The data included in the issuance schedule may change from time to time based on the entities’ reports. Please be advised that there may be a time gap between the date of the entity’s report and the updating of all or part of the data in the issuance schedule.</li><li>The information included in the issuance schedule or any part thereof should not be construed as the expression of an opinion and/or a recommendation with respect to any of the securities mentioned therein or with respect to the entities pursuing issuance of the securities.</li><li>\tThe information included in the issuance schedule or any part thereof should not be construed as a recommendation or an advice to act in one manner or another as regarding decision-making on investments, taxation or legal matters.</li><li>The data relates to planned issuances that may not come to pass.</li></ol>'},LastFundManagerReport:{Display:!1}},GridTitle:"הנפקות עתידיות",GridTitleEng:"Future Public Offerings",ClassPageName:"issuancePage",ColumnItems:[{columnHeaderTemplate:"",className:"tableCol col_l",title:"שם חברה",transKey:"grid.issuanceUpComingTenderTpl.CompanyNm",fieldName:"CompanyNm",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_l",title:"חברה חדשה",transKey:"grid.issuanceUpComingTenderTpl.CompanyTypeDesc",fieldName:"CompanyTypeDesc",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_l",title:'סוגי ני"ע מוצעים',transKey:"grid.issuanceUpComingTenderTpl.SecurityType",fieldName:"SecurityType",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_l hidden-eng hideInPrint",title:"קישור למצגת החברה",transKey:"grid.issuanceUpComingTenderTpl.ReportPresentationLink",fieldName:"ReportPresentationLink",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_ll hidden-eng",title:"קישור לטיוטת תשקיף / תשקיף / טיוטת דוח ההצעה",transKey:"grid.issuanceUpComingTenderTpl.DraftTitle",fieldName:"DraftTitle",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_m hidden-eng hideInPrint",title:"קישור לשטר נאמנות",transKey:"grid.issuanceUpComingTenderTpl.ReportTrustDeedLink",fieldName:"ReportTrustDeedLink",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s",title:"דירוג מעלות",transKey:"grid.issuanceUpComingTenderTpl.MaalotRate",fieldName:"MaalotRate",isExport:!0,isExtended:!1},{columnHeaderTemplate:"",className:"tableCol col_s",title:"דירוג מדרוג",transKey:"grid.issuanceUpComingTenderTpl.MidrugRate",fieldName:"MidrugRate",isExport:!0,isExtended:!1}]};gridTemplatesProvider.setTemplate("IssuanceUpComingTpl",data);
var globalTrans={"he-IL":{index:"מדד",alertOn:"הפעל חלון קופץ עבור הודעות מתפרצות",alertOff:"הפסק חלון קופץ עבור הודעות מתפרצות",popupNew:{subHeader:"שינויים באתרי הבורסה",text1:'החל מה-5 בדצמבר, 2021, חלק מדפי המידע באתרי הבורסה יתאפשרו לצפייה בדפדפן בלבד. משתמשים שמעוניינים לבצע עיבודים על המידע במערכותיהם, יוכלו לפעול באמצעות שירות המידע החדש של הבורסה TASE Data Hub, המאפשר קבלת מגוון נתוני שוק בקבצים, דו"חות או ישירות ב- API, חלק מהשירותים כרוכים בתשלום.',text2:"למידע נוסף",text3:"משתמשים קיימים",text4:"משתמשים חדשים - לחצו כאן להרשמה",text5:"שאלות ותשובות נפוצות על האזור האישי המאוחד"},enterToPrivateArea:"כניסה לאזור האישי",newUser:"משתמש חדש",resetPassword:"לאיפוס סיסמא",signup:"להרשמה",login:"להתחברות",search:"חפש",populrSearch:"חיפושים פופלאריים",sector:"לפי ענף",tags:"תגיות",missedWord:"חסר",version:"גרסה",linkToTradindgData:"לנתוני מסחר",linkToCompPage:"לדף חברה",MAYA:"מאיה",logoMAYA:"לוגו מאיה",logoTASE:"לוגו בורסה",reportMoreTxt:"(לפירוט ההודעה)",backBtn:"חזרה>>",companySiteTitle:"לאתר החברה",messages:"הודעות",fundReports:"דיווחי קרנות",wight:"משקל",factor:"פקטור",termsOfUse:"הסכם שימוש",aboutMAYA:"אודות מאיה",aboutTASE:"אודות הבורסה",contact:"פניות הציבור",max:"מקס",min:"מינ",changes:"משתנה",priorityDisclosure:"הודעה מתפרצת",mayaNav:"ניווט במאיה",filterEventDate:"האירוע פעיל מתאריך - {{x}}",continueToAllRes:"המשך לחיפוש בדיווחים",smartAgentMenu:{helloTitle:"שלום,",personalAreaBtn:"לאזור האישי",TASEProfilioBtn:"תיק אישי",smartAgentBtn:"סוכן חכם",myTaseBtn:"אזור אישי",savedReportsBtn:"דיווחים שמורים",setSmartAgent:"הגדרת התראות",profileBtn:"פרופיל",exitBtn:"יציאה"},accessabilityMenu:{btn:"תפריט נגישות",info:"מידע",statement:"הצהרת נגישות",colors:"תצוגת צבעי האתר",browsers:"(* פועל בדפדפנים מתקדמים מסוג Chrome ו- Firefox)",regular:"תצוגה רגילה",colorBlind:"מותאם לעיוורי צבעים",blind:"מותאם לכבדי ראייה",skipToMain:"(m דלג לתוכן ראשי (מקש קיצור",skipToHome:"(s מעבר לעמוד הבית (מקש קיצור",skipToSitemap:"(1 מעבר למפת אתר (מקש קיצור",openContact:"(2 פתיחה של טופס צור קשר (מקש קיצור",largeFont:"(0 הגדלת גופנים (מקש קיצור",smallFont:"(9 הקטנת גופנים (מקש קיצור",closeBtn:"סגירה",sitemap:"מפת אתר",mayaRep:"מאיה דיווחים",smartAgent:"סוכן חכם",smartMassage:"הודעות סוכן חכם",savedMassages:"הודעות שמורות",registerSmart:"רישום לסוכן חכם",moreInf:"מידע נוסף"},fundTypes:{fund:"קרנות פתוחות",etf:"קרנות סל והייטק",foreignetf:"קרנות חוץ נסחרות",hedgefund:"קרנות גידור בנאמנות",all:"כל הקרנות"},queryType:{1:"תשקיפים",2:"דיווחי בעלי עניין",3:"טיוטות תשקיפים"},ReportHeaderInfo:{25:{remark:"אופן הצבעה באסיפה מוצג בנפרד",link:"reports/assemblyvotes?q=%7B%22events%22:%5B5900%5D,%22subevents%22:%5B5301%5D%7D"},4:{remark:"אופן הצבעה באסיפה מוצג בנפרד",link:"reports/assemblyvotes?q=%7B%22events%22:%5B5900%5D,%22subevents%22:%5B5301%5D%7D"},31:{remark:"אופן הצבעה באסיפה מוצג בנפרד",link:"reports/assemblyvotes?q=%7B%22events%22:%5B5900%5D,%22subevents%22:%5B5301%5D%7D"}},ChartAssetTitle:{1:{title:"היסטוריית שווי אחזקות מנהל הקרן בנכס",fldName:"מנהל הקרן",ySecondaryTitle:"כמות",secondaryFormat:"{value:,.0f}",secondaryChar:""},2:{title:"היסטוריית שווי אחזקות הקרן בנכס",fldName:"שם הקרן",ySecondaryTitle:"אחוז מנכסי הקרן",secondaryFormat:"{value}%",secondaryChar:"%"}},mayaStrings:{clickForMore:"לחץ כאן להרחבה",IndexMainPageLink:"IndexMainPageLink",NotificationPageTitle:"הגדרת התראות",MayaSystemTitle:"מאיה – הבורסה לניירות ערך",MayaSystemTitleShort:"מאיה – הבורסה",ReportTitle:"מערכת הודעות",SearchResult:"תוצאות חיפוש",NoChartData:"אין נתונים לתצוגה",NotAlertName:"התראה",HomePageDescription:'מאי"ה היא מערכת אינטרנט להודעות החברות, המהווה כלי עבודה מרכזי לציבור המשקיעים, לחברות הבורסאיות ולכל קהילת שוק ההון. מאי"ה מאפשרת לקבל מידע מקיף על החברות הבורסאיות ועל ניירות הערך הנסחרים בבורסה',HomePageKeywords:'בורסה, ישראל, מסחר, נתוני מסחר, שוק ההון, פיננסי, פיננסים, מאי"ה, מאיה, סוכן חכם, הודעות הבורסה, דיווחי חברות,  הודעות מתפרצות, דיווחים כספיים, חברות בורסאיות, חברות ציבוריות, מניות, איגרות חוב, אג"ח, אג"ח להמרה, כתבי אופציה, תעודות סל, תעודות מדד, תעודות בחסר, תעודות סחורה, תעודות על מטבע, קרנות נאמנות, מנהל קרן, נאמן קרן, מועדים, תשלומים',RegistrationSuccessMessage:'תודה על הרישום לשירות הסוכן החכם במערכת מאיה של הבורסה לנ"ע בתל אביב.<br/> ברגעים אלה נשלחת הודעה לדואר האלקטרוני שלך עם קישור לצורך אימות פרטיך.<br/> יש ללחוץ על הקישור על מנת לאמת את הפרטים.',UnsubscribeSuccessMessage:"הסרת המנוי מרשימת התפוצה בוצעה בהצלחה!",MayaMainPageTitle:"מאיה - מערכת אינטרנט להודעות החברות",MayaSiteTitle:"אתר מאיה",HomePageTitle:"דף הבית",CompanyDetailsTitle:"פרטי חברה",MessageDetailTitle:"פרטי הודעה",CorpActionEventsTitle:"מועדים ותשלומים",CorpActionPaymentsTitle:"תשלומים",CorpActionFinancialStatemntReportingDateTitle:"מועדי פרסום דוחות",FundReportsTitle:"דיווחי קרן",FundEventsTitle:"הרכב הקרן",FundDetailsTitle:"פרטי קרן",FundHistoryTitle:"נתוני קרן היסטוריים",EndDayHistoryTitle:"נתונים היסטוריים סוף יום",EtfInDayHistoryTitle:"תוך יומי",HistoryTitle:"היסטוריה",EventsTitle:"מועדים",FundAssetsTitle:"הרכב נכסי הקרן",FundHitechDetailsTitle:"פרטי קרן הייטק",FundEtfDetailsTitle:"פרטי קרן סל",FundManagerTitle:"פרטי מנהל קרן",FundManagerAssets:"הרכב נכסי המנהל","ETF List":"רשימת קרנות פתוחות","Open Fund List":"רשימת קרנות סל והייטק",FinanceReportTitle:"דוחות כספיים",AnalysisTitle:"אנליזה",FundListTitle:"נתוני קרנות",IssuanceListTitle:"רשימת דברים",MessageTitle:"דיווחים",ReportPageURL:"reports/details/",ConfrimEmailSuccessMessage:"אימות סיסמה עבר בהצלחה",ConfrimEmailInvalidTokenMessage:"טוקן שגוי או פג תוקפו",ConfrimEmailTitle:"אימות סיסמה",ConfrimEmailFieldRequireError:"שם משתמש או קוד משתמש שדה חובה",ConfrimEmailStatusNotFound:"שגיאה כללית",ShareTitleMessage:"הודעה מאתר מאיה:",SharePicture:"content/images/generic_maya_post.jpg",FavoriteNotLoginTitle:"שמירה ברשימת המועדפים",FavoriteNotLoginTitleMessage:"לשמירה ברשימת המועדפים יש לבצע כניסה למערכת",EmailNotVerifiedTitleMessage:"אימות דואר אלקטרוני",EmailNotVerifiedMessage:' הדוא"ל של המשתמש לא מאומת, יש לאמת בהודעה שנשלחה אל הדוא"ל: ',DownloadNotLoginTitle:"הורדת נתונים",DownloadNotLoginTitleMessage:"להורדת נתונים יש לבצע כניסה למערכת",ManagementAndSeniorGridSubtitle:'הרכב הנהלה ונושאי משרה עפ"י דיווח מיום',ResetPasswordSuccessMessage:"איפוס הסיסמה בוצע בהצלחה!",ResetPasswordTokenExpireMessage:"טוקן שגוי או פג תוקפו",ResetPasswordTitle:"איפוס סיסמה",GeneralTitle:"הודעת מערכת",GeneralMessage:"אירעה שגיאה כללית במערכת",InThousandsNIS:'באלפי ש"ח',LoginEnterTitle:"עליך לבצע כניסה למערכת.",LoginEnterEmptyFavTitle:"אין הודעות שמורות",ReportsTitle:"דיווחים",FundsListTitle:"רשימת קרנות",FundsAssetHeader:"קרנות מחזיקות בנכס",CompanySecuritiesTitle:"ניירות ערך",CompanyIndicesTitle:"מדדים בהם נכללים ני”ע החברה",CompanyManagementAndSeniorExecutivesTitle:"הנהלה ונושאי משרה",CompanyFinanceRptsTitle:"נתונים כספיים",CompanyShareHoldersTitle:"בעלי עניין",FinanceRptsByPeriodTitle:"דוחות כספיים",LastFinanceRptsTitle:"דיווחים כספיים אחרונים",ViewMore:"הצג עוד",ViewMoreToolTip:"לחץ כאן להצגת כל החברות",HideMore:"הסתר",NotificationTitlePagingErrorTitle:"הגדרת התראות",NotificationTitlePagingErrorDesc:"יש לבחור את כל השדות הרלבנטיים",NotificationDisconnectTitle:"שגיאה בהתחברות",NotificationDisconnectDesc:"עקב התנתקות יש לבצע התחברות מחדש",NotificationOkCancelDialogTitle:"הודעות מערכת",NotChangeDialogTitle:"מעבר בין הלשוניות ימחק בחירה קודמת",Continue:"האם להמשיך?",NotificationOkCancelDialogDesc:"האם למחוק?",NotificationSettingsTitle:"הגדרת התראות",NotificationSaveFailedTitle:"הגדרת התראות",NotificationSaveFailedDesc:"NotificationSaveFailedDesc",NotificationMaxAlertLimitExceeded:"NotificationMaxAlertLimitExceeded",ChartAssetTitle:"ChartAssetTitle",ReportHeaderInfo:"ReportHeaderInfo",PaymentExportLimitTitle:"ייצוא נתונים",PaymentExportLimitDesc:"ניתן לייצא עד 2000 רשומות",queryType:"queryType",fundTypes:"fundTypes",UpdDetailsSuccessMessage:"עדכון הפרטים הסתיים בהצלחה",UpdDetailsSuccessTitle:"עדכון פרטים",UpdSuccMsg:"הפעולה בוצעה בהצלחה.",UpdSuccTitle:"הודעת מערכת",UpdErrMsg:"פעולת העדכון נכשלה",UpdErrTitle:"שגיאת עדכון",NoReportsForPrint:"לא נבחרו דיווחים להדפסה",ReportsForPrintTitle:"הדפסה",ReportsForPrintError:"אירעה שגיאה בהדפסה",SearchTitle:"חיפוש",SendUnsubscribeTitle:"הסרת מנוי מרשימת תפוצה",SendUnsubscribeMessage:"ברגעים אלה נשלחת הודעה לדואר האלקטרוני שלך עם קישור לדף בו תוכל להסיר את המנוי",MoreThenYearRange:"נא לצמצם את טווח השנים",MoreThenYearRangeTitle:'לא ניתן להציג את הדו"ח',IssuanceOpenTenderTitle:"הנפקות פתוחות",IssuanceUncomingTitle:"הנפקות עתידיות",OpenTenderNoResult:'אין הנפקות פתוחות <br />להנפקות עתידיות <a href="issuance?view=upcoming">לחצו כאן</a>',UncomingNoResult:'אין הנפקות עתידיות<br />להנפקות פתוחות <a href="issuance?view=opentender">לחצו כאן</a>',NoResult:"לא נמצאו תוצאות העונות לחיפוש שלך",breakingAnnouncement:"הודעות מתפרצות",issuance:"הנפקות פתוחות",firstTrade:"יום מסחר ראשון",EventSelectNotLoginTitleMessage:"שמירה ברשימת התראות",EventSelectNotLoginTitle:"שמירה ברשימת התראות",blocked:"חסום",IncorrectDateRange:"Please narrow your search."},tooltips:{taseAnnoucement:"דף זה כולל הודעות המתפרסמות על ידי הבורסה בנושאי בורסה כלליים כגון תיקון תקנון הבורסה וההנחיות על פיו, אישורים לרישום ניע למסחר, מדדים, אירועי מסחר, חברי בורסה וכיוב. לדיווחים מיידיים ואחרים של  חברת הבורסה לניע בתא כחברה ציבורית ראה הבורסה לניע בתא ",company:"The MAYA website in the English Language (here after-“MAYA English”) opens a window for English speakers into the Israeli capital market. Notwithstanding the aforesaid, please acknowledge the following matters: 1.The Israeli Securities Law (here after - the “Securities Law”) requires entities whose shares are listed on the TASE (here after - the “Listed Entities”), other than Foreign Companies (see section 4 below), to publish their reports in the Hebrew language only. The complete and binding version of reports  submitted by Listed Entities is available in Hebrew at https:\\tase.maya.co.il, which is the official reporting website of TASE (hereafter - the “Official Website”). 2.\tAccordingly, MAYA English does not contain all of the mandatory reports of the Listed Entities, but only those reports that some of the Listed Entities have elected, at their discretion, to publish in English. 3.\tThe English translations of the reports of Listed Entities that are published on MAYA English are prepared by the Listed Entities independently, and they alone are responsible for the quality, integrity and accuracy of the translation. It is hereby emphasized that the binding version of the Listed Entities’ reports is exclusively the version published on the Official Website in Hebrew. It is further stressed that TASE does not compare the binding version in Hebrew against the translated English version.4.\tThe stated above does not apply to reports submitted  by companies whose securities are or will be listed on TASE under the provisions of Chapter E.3 of the Securities Law (hereafter - “Foreign Companies”), which pursuant to the Securities Law are allowed  to submit reports in the English language only. Those reports are published on MAYA English in the same manner and scope and on the same time as the publication on the Official Website. "},mainMenu:{pDisc:"מתפרצות",companies:"דיווחי חברות",breakingannouncement:"מתפרצות",company:"דיווחי חברות מהיום",fund:"דיווחי קרנות פתוחות",etf:"דיווחי קרנות סל והייטק",foreignetf:"דיווחי קרנות חוץ נסחרות",financialRpt:" דוחות כספיים",financialRptSch:"מועדי פרסום דוחות",tase:"הודעות בורסה",corporateaction:"מועדים ותשלומים",incomePay:"תשלומים",corporateEvents:"מועדים",assem:"אסיפות",analysisMain:"אנליזה ודירוג",analysis:"אנליזה",rate:"דירוג",issuanceMain:"הנפקות צפויות",issuanceOpenTender:"הנפקות פתוחות",issuanceUpcoming:"הנפקות עתידיות",prospectus:"תשקיפים",drafts:"טיוטות תשקיפים",companyDetail:"פרטי חברה",shareHoldersRpt:"דיווחי בעלי עניין",funds:"קרנות",assembliesVote:"אופן הצבעה באסיפה"},cokiisPopupMessage:"לידיעתך, האתר עושה שימוש בקוקיות (cookies) כמפורט במסמך מדיניות הפרטיות שלנו.",doNotShowMessage:"אל תציג מסך זה בעתיד",Iapprove:"אני מאשר/ת",moreInf:"למידע נוסף",maya:"מאיה",mayaSite:"אתר מאיה",mayaLinkTitle:"מערכת מאיה",taseSite:"אתר הבורסה לניירות ערך",Error404:"הדף לא נמצא",YES:"כן",NO:"לא",inThousands:"באלפי ₪",Thousands:"אלפי ₪",Nis:"₪",CORP_PAYMENT_HEADER_PAYMENT_TYPE:"בלה בלה",CHNAGE_LANG_HREF:"English",totalCount:'סה"כ דיווחים: {{x}}',totalRec:'סה"כ רשומות: {{x}}',totalSearchCount:"{{x}} תוצאות",mayaTitle:"מאיה-מערכת אינטרנט להודעות החברות",companyNumber:"מספר מנפיק",corporateNumber:"מספר תאגיד",about:"אודות",phoneNum:"טלפון",faxNum:"פקס",eMail:'דוא"ל',Website:"אתר",gathPlace:"מקום התאגדות",address:"כתובת",sendEmail:"שליחת מייל",closeBtn:"סגור",emailSuccess:"המייל נשלח בהצלחה",senderName:"שם השולח",senderNameErr2:"שם השולח לא תקין",senderNameErr1:"נא למלא את שם השולח",recieverName:"שם הנמען",recieverNameErr1:"נא למלא את שם הנמען",recieverNameErr2:"שם הנמען לא תקין",eMailErr1:"נא למלא דואר אלקטרוני",eMailErr2:"דואר אלקטרוני לא תקין",remarks:"הערות",remarksErr1:"נא למלא שדה הערות",remarksErr2:"שדה הערות מכיל תווים לא חוקיים",securityCode:" קוד אימות אבטחה",autoCompltplchldr:"חיפוש באתר מאיה",mapEntitiesTitle:{1:"Company",2:"מנפיק תעודת סל",3:"מנהל קרן",4:"Fund",5:'ני"ע',6:"Event",7:"תת אירוע",8:"ענף על",9:"Branch",10:"תת ענף",14:"קרן סל",15:"קרן הייטק",16:"נאמן"},companyDetails:{pageInfo:"מידע בדף",cmpnyWorth:"שווי שוק חברה:",compDet:"פרטי חברה",reports:"דיווחים",finData:"נתונים כספיים",eventsPayments:"מועדים ותשלומים",analysis:"אנליזה",securitiesTitle:"ניירות ערך",shareHolders:"בעלי עניין",management:"נושאי משרה",branchInTase:"ענף בבורסה",branchInTaseTitle:"שיוך ני”ע למדדים",sharetabPage1:"מניות והמירים בלבד",sharetabPage2:"כל ניירות הערך",deletedCompanyRemark:"כל הנתונים המוצגים נכונים ליום מחיקת החברה מהרישום למסחר בבורסה",ShareHoldersChartDataMainTitle:"התפלגויות  במניות החברה - סך הכל 100%",ShareHoldersChartDataTitle:"התפלגות החזקות לפי בעלי עניין ליום- {{x}}",controlerHoldersChartDataTitle:"התפלגות החזקות לפי בעלי שליטה ליום- {{x}}",tradingData:"נתוני עסקאות",tradingDataHistory:"ימי מסחר אחרונים"},companySecuritiesLegend:{legend:"מקרא",nonTradeable:" לא סחיר",marketMakerAppointedForSecurity:" לנייר מונה עושה שוק"},popUpNoResults:{close:"סגור חלון",approve:"אישור",title:"חיפוש"},reportActions:{filesAction:"קבצים",saveFav:"שמירת הודעה במועדפים",share:"שיתוף",save:"שמור",openNewWin:"פתח בחלון נפרד",markPrnt:"סמן להדפסה",prnt:"הדפסה",prntBtn:"לחץ כאן להדפסה",sndPrint:"הדפסה",prntView:"הצג לפני הדפסה",selectAll:"הכל",noResults:"לא נמצאו תוצאות העונות לחיפוש שלך",clearSelection:"נקה בחירה",timeFilter:"חפש לפי זמן ",indicesFilter:"חפש לפי מדדים ",TA35:'ת"א 35',TA125:'ת"א 125',byTime:"לפי תקופה",byIndices:"לפי קבוצת מדדים",shareOptions:{twtr:"שתף בטוויטר",fb:"שתף בפייסבוק",ggl:"שתף בגוגל+",wtsap:"שתף וואטסאפ",Email:'שלח דוא"ל'}},report:{charts:{showTradeData:"לצפייה בנתוני מסחר",oneD:"יום",oneW:"שבוע",oneM:"חודש",oneY:"שנתי",threeM:"3 חודשים",sixM:"חצי שנה","1Year":"שנה",oneDshort:"יומי",oneWshort:"שבועי",oneMshort:"חודשי",oneYshort:"שנתי",threeMshort:"3 חודשים",sixMshort:"חצי שנה","1Yearshort":"שנה",more:"למערכת גרפים",securityType:'סוג ני"ע',lastPrice:"שער אחרון",Ag:"אג'",change:"שינוי",turnOver:"מחזור מסחר",marketVal:"שווי שוק",securityDetail:"פרטי חברה",tradeDetail:"נתוני מסחר",historyData:"נתונים היסטוריים",rightTo:"נכון ל",timeDelay:"15 דק' השהייה",tousends:"אלפי ₪",agurutShort:"אג'",nis:"₪"},details:{reportList:"רשימת דיווחים",dual:"(דואלי)",deleted:"(מחוקה)",intrested:"(עניינית)",cmpnyRptBtn:"לדיווחי חברה",fndMgrBtn:"לדף מנהל הקרן",tradeDetailOfBtn:"לחץ כאן לפתיחת נתוני מסחר של"}},issuance:{future:"הנפקות עתידיות",open:"הנפקות פתוחות",predict:"הנפקות צפויות לציבור"},printGrid:{printTitle:"מאיה - הדפסה"},grid:{sortAscTitle:"מיון עולה לפי",sortDescTitle:"מיון יורד לפי",exportDataDisplay:"ייצוא נתונים מהטבלה",printData:"הדפסה",infoBtn:"מקרא",lastFundManagerReport:"דיווחים כספיים אחרונים",allFundsTpl:{FSN:"שם הקרן",FTD:'סוג ני"ע',FId:"מס' קרן",ARS:"נכס הייחוס",EP:"פרופיל חשיפה",Cl:"סיווג הקרן",PI:"מאפייני הקרן",FCN:"קרן להשקעות חוץ מטבע עיקרי",CR:"שער אחרון (באגורות)",PC:"שינוי (%)",TOVS:'מחזור (באלפי ש"ח)',LUD:"זמן עסקה אחרונה",PP:"מחיר קניה (יצירה)",UVP:"שווי יחידה",SP:"מחיר פדיון",CTD:"ת. עדכון אחרון",DY:"שינוי מיום קודם %",MY:"תשואות מתחילת החודש",YY:"תשואה מתחילת השנה",L12SY:"תשואה מתחילת 12 חודשים",TRD:"מסלול מס",THD:"קוד הגבלת פעילות",MSN:"מנהל הקרן",TSN:"נאמן הקרן",TRD2:"מעמד מס",MFee:"דמי ניהול",TFee:"דמי נאמנות",ClD:"סיווג עמלת הפצה"},companyFinanceReportTpl:{tooltip1:'בחישוב היחסים הפיננסיים:שווי שוק החברה – ליום מסחר אחרון, בחברות המדווחות במט"ח – מתורגם למטבע הדיווח לפי השער היציג ביום המסחר האחרון בבורסה; "שוק להון" ו"הון למאזן" - הון עצמי מיוחס לבעלי המניות וסך מאזן, כמפורט בדוחות הכספיים האחרונים של החברה ;"מכפיל" ו"תשואה להון" - רווח נקי מיוחס לבעלי המניות(12 חודשים אחרונים) והון עצמי מיוחס לבעלי המניות(ממוצע 12 חודשים תחילת וסוף תקופה), כמפורט בדוחות הכספיים של החברה.',Name:"שם",info:"הון רשום למסחר = הון מונפק ונפרע בניכוי הון מניות רדומות",infoTaseUp:"כמות ניירות הערך המוצגת בעמודת הון מונפק ונפרע והון רשום למסחר, משקפת אך ורק את הכמות שהחברה ביקשה כי תיסחר במסגרת מערכת TASE-UP . כמות זו אינה משקפת בהכרח את מלוא כמות ניירות הערך שהחברה היקצתה.",IFRSRemark:"הדוח הכספי על פי כללי התקינה החשבונאית הבינלאומית (IFRS)",lgendMap:{markTooltip1:"מקרא סימולי ניירות ערך רשומים",markTooltip2:"להלן מקרא לסימול ניירות ערך: Z-YY.XXXX",markTooltip3:"XXXX אותיות מימין לנקודה הינן קיצור לשם החברה",markTooltip4:" YY אותיות משמאל לנקודה מציינות סוג נייר ערך",markTooltip5:"Z אותיות משמאל למקף מציינות ניירות ברשימות מסחר מיוחדות או הגבלות מסחר",markMainTitle:"סימון",mainExplain:"סוג נייר ערך",mark1:".א",mark1A:"אופציות",mark2:".אר",mark2A:"אופציות רכישה",mark3:".אק",mark3A:"אופציות לאגח קונצרני",mark4:".אה",mark4A:"אופציות לאגח להמרה",mark5:".ה",mark5A:"אגח להמרה",mark6:".ק",mark6A:"אגח קונצרני",mark7:".רד",mark7A:"מניות רדומות",mark8:".רדב",mark8A:"מניות ללא זכויות הצבעה",mark9:".קט",mark9A:"קרן הייטק",mark10:".ס",mark10A:"קרן סל במניות",mark11:".ס",mark11A:'קרן סל באג"ח',mark12:".סז",mark12A:"קרן חוץ נסחרת מניות",mark13:".נמ",mark13A:"ניירות ערך מסחריים",mark14:"-ש",mark14A:"נסחר ברשימת השימור",mark15:".ל",mark15A:"נייר ערך רשום במסלקה שלא נסחר",mark16:"-רמ",mark16A:"נייר ערך למוסדיים שנסחר ברצף מוסדיים",mark17:".סז",mark17A:"קרן חוץ נסחרת אגח",mark18:"-ס",mark18A:"דל סחירות",mark19:".ק",mark19A:"אגח הוני להמרה כפויה",mark20:".ק",mark20A:"אגח הוני ניתן למחיקה"}},companyIndicesTpl:{title:"מדדים בהם נכללים ני”ע החברה",SecurityName:"שם",Symbol:"סימול",SecurityId:'מספר ני"ע',IndexName:"מדד",Weight:"% משקל",FactorWeight:"פקטור משקל"},companySecuritiesTpl:{securityName:"שם",shareType:"סוג נייר",symbol:"סימול",securityId:'מספר ני"ע',isin:"ISIN",issuedCapital:"הון מונפק ונפרע",registredCapital:"הון רשום למסחר",dispositivePower:"% בהון",votingPower:"% בהצבעה",marketValue:"שווי שוק במיליוני ₪",indicesWeight:"מדדים",isFundHolding:"קרנות מחזיקות"},companyManagmentTpl:{Title:"הנהלה ונושאי משרה",subTitle:'הרכב הנהלה ונושאי משרה עפ"י דיווח מיום',tooltip:"יתכנו הבדלים בין הנתונים המתפרסמים על ידי הבורסה לבין הנתונים המתפרסמים על ידי החברה, הנובעים בעיקר מתדירות שונה של עדכון הנתונים.",Name:"שם",RoleType:"תפקיד",SecurityName:'שם ני"ע',EndBalance:"יתרה",LastBalanceDate:"ת. יתרה",CapitalPercent:"% בהון",VoteCapital:"% בהצבעה ",IsFinancialExpert:"מומחיות פיננסית",IsInspectionComitee:"ועדת ביקורת"},companySharedHoldersTpl:{HolderName:"שם",Remark:"הערות",LastUpdateDate:"תאריך היתרה",SecurityName:'שם ני"ע',EndBalance:"יתרה",CapitalPercent:"% בהון",VoteCapital:"% בהצבעה",MarketValue:"שווי שוק במיליוני ₪"},etfAssetsTpl:{AssetName:"שם הנכס",FundPercentage:"מהקרן %",NisValue:'שווי באלפי ש"ח',Price:"מחיר",Quantity:'כמות ני"ע',AssetTypeName:"סוג",BondRank:"דירוג",Graph:"גרף שווי אחזקות לתקופה"},etfEndOfDayHistoryTpl:{tooltip1:'שער רישום למסחר הינו אחד מהמקרים הבאים: מניה דואלית / קרן חוץ סחירה – שער אחרון מחו"ל. נייר שעבר מ-TASE UP לרשימה הראשית – שער נעילה ב-TASE UP. החלפת תעודת התחייבות ישנה בתעודת התחייבות חדשה – שער הנעילה של ני"ע שהוחלף. יתר ני"ע – שער הנפקה',TradeDate:"תאריך נכונות",CloseRate:"שער נעילה",Change:"שינוי (%)",MonetaryTurnOver1000:"מחזור",CreationPrice:"מחיר קניה (יצירה)",SellPrice:"מחיר פדיון",UnitPrice:"שווי יחידה",FundsLastUpdateDate:"ת. עדכון של שערי קרנות",BaseRate:"שער בסיס",OpenRate:"שער פתיחה",LowRate:"שער נמוך",HighRate:"שער גבוה",PointsChange:"שינוי",TurnOverVolume:"מחזור",DealsNo:"מספר עסקאות",MarketValue:"שווי שוק",ExeText:"סוג האקס",RegisteredCapital:"הון רשום למסחר",ManagmentFee:"דמי ניהול (%)",TrustedFee:"דמי נאמנות (%)"},etfInDayHistoryTpl:{DealDate:"תאריך",DealTime:"שעה",LastRate:"שער עסקה",Change:"שינוי(%)",TurnOverUnits:"מחזור ביחידות",TurnOverValue:"מחזור מסחר",OverallTurnOverValue:"מחזור מצטבר"},etfManagerSecurity:{SecurityName:"שם",Symbol:"סימול",SecurityId:'מספר ני"ע',ISIN:"ISIN",RegistredCapital:"יתרה בחשבון מסלקת הבורסה ביורוקליר",MarketValue:"שווי אחזקות בחשבון מסלקת הבורסה ביורוקליר במיליוני ₪"},etfTpl:{FSN:"שם הקרן",FId:"מס' קרן",ARS:"נכס הייחוס",EP:"פרופיל חשיפה",Cl:"סיווג הקרן",PI:"מאפייני הקרן",FCN:"קרן להשקעות חוץ מטבע עיקרי",CR:"שער אחרון (באגורות)",PC:"שינוי (%)",TOVS:'מחזור (באלפי ש"ח)',LUD:"זמן עסקה אחרונה",UVP:"שווי יחידה",CP:"מחיר קניה(יצירה)",SP:"מחיר פדיון",CTD:"ת. עדכון אחרון",BR:"שער בסיס",OR:"שער פתיחה",LR:"שער נמוך",HR:"שער גבוה",DN:"מספר עסקאות",OTOU:"מחזור ביחידות",MV:"שווי שוק",TRD:"מעמד מס",MFee:"דמי ניהול",VFee:"דמי ניהול משתנים",TFee:"דמי נאמנות",ClD:"סיווג עמלת הפצה"},financeReportTpl:{title:"דוחות כספיים",PubDate:"תאריך פרסום",CompanyName:"שם החברה",ReportPeriod:'תקופת הדו"ח',Files:'קישור לדו"ח',TradeHalt:"הפסקת מסחר",htmlFile:"קובץ HTML",pdfFile:"PDF",xbrFile:"XBRL קובץ"},foriegnEtfEndOfDayHistory:{TradeDate:"תאריך",ShareStatus:"אינדיקציה",AdjustmentRate:"שער נעילה מתואם",CloseRate:"שער נעילה",Change:"שינוי (%)",OpenRate:"שער פתיחה",BaseRate:"שער בסיס",HighRate:"שער גבוה",LowRate:"שער נמוך",RegisteredCapital:"הון רשום למסחר",MarketValue:"שווי שוק",MonetaryTurnOver:"מחזור המסחר",TurnOverVolume:"מחזור ביחידות",DealsNo:"מספר עסקאות",ExeText:"סוג האקס",AdjustmentCoefficient:"מקדם אקס",MMM:'ממ"מ',FreeFloatPercent:"אחוז החזקות הציבור למדד",LastUpdateDate:'מועד עדכון ממ"מ אחרון'},foriegnEtfTpl:{FSN:"שם הקרן",FId:"מס' קרן",Cl:"סיווג הקרן",MFee:"דמי ניהול",CR:"שער אחרון (באגורות)",PC:"שינוי (%)",TOVS:'מחזור (באלפי ש"ח)',LUD:"זמן עסקה אחרונה",BR:"שער בסיס",OR:"שער פתיחה",LR:"שער נמוך",HR:"שער גבוה",POC:"שינוי באגורות",RCP:"יתרה בחשבון מסלקת הבורסה ביורוקליר",FMV:"שווי אחזקות בחשבון מסלקת הבורסה ביורוקליר במיליוני ₪"},fundsAssetTpl:{AssetName:"שם הנכס",FundPercentage:"מהקרן %",NisValue:'שווי באלפי ש"ח',Price:"מחיר",Quantity:'כמות ני"ע',AssetTypeName:"סוג",BondRank:"דירוג",Graph:"גרף שווי אחזקות לתקופה"},fundsHistoryTpl:{TradeDate:"תאריך",PurchasePrice:"מחיר קניה",SellPrice:"מחיר פדיון",Rate:"שיעור הוספה (%)",ManagmentFee:"דמי ניהול (%)",AssetValue:"שווי נכסים במיל' ₪",TrusteeFee:"דמי נאמנות"},fundsManagerAssetsTpl:{AssetName:"שם הנכס",NisValue:'שווי באלפי ש"ח',Quantity:'כמות ני"ע',AssetTypeName:"סוג",BondRank:"דירוג",Graph:"גרף שווי אחזקות לתקופה"},fundsManagerTpl:{FundShortName:"שם הקרן",FundTypeDesc:'סוג ני"ע',FundId:"מס' קרן",ExposureProfile:"פרופיל חשיפה",Classification:"סיווג הקרן",TaxRouteDesc:"מעמד מס",ManagementFee:"דמי ניהול",TrusteeFee:"דמי נאמנות",AssetValue:"שווי נכסי הקרן",PurchasePrice:"מחיר קניה",SellPrice:"מחיר פדיון",DayYield:"% שינוי יומי",MonthYield:"תשואות מתחילת החודש",YearYield:"תשואות מתחילת השנה",StandardDeviation:"סטיית תקן"},fundsMonthlyReportTpl:{FundId:"מספר קרן",FundNm:"שם קרן",AssetNm:"שם נכס",AssetType:"סוג נכס",IdentificationNumber:"מספר מזהה",IdentificationType:"סוג מזהה",Amount:"כמות",PriceValueInNis:"שווי בשקלים\tמחיר",Price:"מחיר",TradingCurrencyValue:"שווי במטבע מסחר",PercentageFund:"% מקרן",AmountBorrwed:"כמות שהושאלה",PriceType:"סוג מחיר",TradingPlace:"מקום מסחר",TradingMarket:"שוק מסחר"},fundsAssetsTpl:{FundId:"מספר קרן",FundName:"שם קרן",FundPercentage:"% מהקרן",NisValue:'שווי באלפי ש"ח',Price:"מחיר",Quantity:'כמות ני"ע'},fundsTpl:{FLN:"שם הקרן",FId:"מס' קרן",EP:"פרופיל חשיפה",MSN:"מנהל קרן",Cl:"סיווג הקרן",PI:"מאפייני הקרן",FCN:"קרן להשקעות חוץ מטבע עיקרי",TSN:"נאמן",TRD:"מעמד מס",ClD:"סיווג עמלת הפצה",SFee:"דמי הצלחה",MFee:"דמי ניהול",TFee:"דמי נאמנות",AV:"שווי נכסי הקרן",RD:"תאריך נכונות מחירים ותשואות",PP:"מחיר קניה",SP:"מחיר פדיון",DY:"שינוי יומי %",MY:"תשואות מתחילת החודש",YY:"תשואות מתחילת השנה",L12SY:"תשואות 12 חודשים",SD:"סטיית תקן",ARS:"נכס הייחוס"},hedgeFundSecurityRedemptionTpl:{SecurityCd:"מספר נייר",SecurityName:"שם נייר",BeginDate:"המועד הראשון להגשת הוראות לפדיון",EndDate:"המועד הקבוע הקרוב לפדיון",SendingMessageDeadline:"המועד האחרון להגשת הוראות לפדיון",NAV:"שער יחידה נטו",GAV:"שער יחידה ברוטו",endDateInfo:"המועד הקבוע הקרוב לסליקה הוראות פדיון. הגשת הוראות לפדיון לביצוע במועד הקבוע הקרוב תתאפשר עד המועד האחרון להגשת הוראות שהנו בסמוך לפני המועד הקבוע",navInfo:"שער היחידה של הקרן לאחר מרכיב הפרשה לתשלום דמי ההצלחה המגיעים למנהל הקרן בהתאם לתשקיף הקרן",gavInfo:"שער היחידה של הקרן לפני מרכיב הפרשה לתשלום דמי ההצלחה המגיעים למנהל הקרן בהתאם לתשקיף הקרן"},issuanceOpenTenderTpl:{title:"הנפקות פתוחות",newStockInfo:"נייר חדש",TenderNbr:"מספר מכרז",SubmissionOfOrdersStartDate:"מועד תחילת מכרז",SubmissionOfOrdersEndDate:"מועד סיום מכרז",CompanyNm:"שם החברה",UnitComposition:"כמות היחידות המוצעת",SecurityNm:'שם ני"ע ביחידה',SecurityQuantityInUnit:'כמות ני"ע ביחידה',TenderType:"סוג מכרז",MaxInterest:"ריבית",LinkageType:"סוג הצמדה",MinimumPrice:"מחיר (₪) ליחידה",MaalotRate:"דירוג מעלות",MidrugRate:"דירוג מדרוג",RptCd:'דו"ח ההצעה',SpaciousRate:"% מרווח ריבית",SpaciousPrice:"מרווח מחיר (₪)",UniformProposal:"סוג הצעה",ARS:"להזמנה",newSec:"= נייר חדש",tooltipTenderType:"כאשר המכרז הינו על מחיר, הנתון בעמודה מחיר מסמל את המחיר המינימלי בהצעה. כאשר המכרז הינו על ריבית, הנתון בעמודה ריבית מסמל את הריבית המקסימלית בהצעה וכאשר המכרז הינו על כמות, הריבית והמחיר הינם קבועים בהצעה.  ",tooltipMaxInterest:'כאשר המכרז הינו על המחיר, מוצגת הריבית השנתית הקבועה בתנאי האג"ח',tooltipMinimumPrice:'כאשר המכרז הינו על הריבית, מוצג מחיר האג"ח כפי שנקבע בהנפקה'},issuanceUpComingTenderTpl:{title:"הנפקות עתידיות",CompanyNm:"שם חברה",CompanyTypeDesc:"חברה חדשה",SecurityType:'סוגי ני"ע מוצעים',ReportPresentationLink:"קישור למצגת החברה",DraftTitle:"קישור לטיוטת תשקיף / תשקיף / טיוטת דוח ההצעה",ReportTrustDeedLink:"קישור לשטר נאמנות",MaalotRate:"דירוג מעלות",MidrugRate:"דירוג מדרוג"}},paging:{prevAlt:"לעמוד הקודם",prevTitle:"הקודם",nextAlt:"לעמוד הבא",nextTitle:"הבא",nexpPage:"לעמוד",loadMore:"טען עוד"},filter:{filterOptionTitle:"אפשרויות סינון",filterTitle:"סינון",filterBtnTitle:"סינון",fromDateTitle:"מתאריך",fromYearTitle:"בחר שנה",fromYear:"משנה",toYear:"עד שנה",toDateTitle:"עד תאריך",eventsGroupTitle:"קבוצת אירועים",eventsGroupTitle2:"הרחבת אפשרויות",cmpnyGroupBtn:"פירוט חברות",eventsGroupBtn:"פירוט ארועים",selectFundManager:"בחר מנהל קרן",fundOption:"----- בחר מנהל קרן -----",selectFund:"בחר קרן",selectFundOption:"----- בחר שם/מספר קרן -----",cmpnyrdio1:"לפי קבוצת חברות",cmpnyrdio2:"לפי חברה",fundrdio1:"לפי מנהל קרן",fundrdio2:"לפי קרן",companyGroupTitle:"בחר קבוצת חברות",companyGroupOption1:"----- בחר קבוצה -----",companyGroupOption2:"----- בחר מרשימה -----",allMessages:"כל ההודעות",companyTitle:"בחר חברה",companyOption:"----- בחר חברה -----",securityTitle:"שם נייר/מספר נייר",securityOption:"----- בחר שם/מספר נייר -----",sectorOption:"בחר ענף",onlyBreakingNews:"מתפרצות בלבד",onlyTradeHalt:"הפסקות מסחר",closeSideBar:"סגור","More Events":"More Events",clearAllBtn:"נקה הכל",quaterTitle:"בחר רבעון",quaterOption1:"פורסמו היום",quaterOption2:"רבעון 1",quaterOption3:"רבעון 2",quaterOption4:"רבעון 3",quaterOption5:"שנתי",quaterOption6:"בחר הכל",reportPeriodTitle:"בחר תקופת דוח",specificReports:"דיווחים ספציפיים",meesageToClients:"הודעות ללקוחות",clientsMessages:"ללקוחות ההודעות",freeText:{header:"טקסט חופשי",option1:"ביטוי מדויק",option2:"לפחות אחת מהמילים",option3:"כולל כל המילים",placeholder:"------------טקסט חופשי----------"}},filterAdvancedCorp:{title:"קבוצות אירועים",closeDialogBtn:"סגור חלון",header:"אירועים",clearBtn:"נקה הכל",selectAllBtn:"בחר הכל",removeFilter:"הסר סינון",removeEvent:"הסר אירוע",placeHolder:"חפש ארוע",filterBtn:"סינון",cancelBtn:"ביטול",activeFilter:"סינון פעיל"},filteredCompaniesPopUp:{complexTitle:"לפי  - {{x}}"},corporateactions:{mainTitle:"מועדים ותשלומים",paymentTab:"תשלומים",eventsTab:"מועדים",publishDateTab:"מועדי פרסום דוחות",gatheringTab:"אסיפות",timezoneInfo:"חלק מהשעות המופיעות אינן על פי זמן ישראל. יש לוודא בתוכן הדיווח את אזור הזמן אליו מתייחסת השעה.",payments:{gridTitle:"תשלומים",beginningOfPeriod:"יום אקס",endOfPeriod:"יום תשלום",paymentType:"סוג תשלום",securityCd:'מספר ני"ע',securityName:"שם נייר",payment:"תשלום",corporateTax:"% מס חברות",personalTax:"% מס יחידים",receivableAmount:"כמות מקבלת",receivedSecurity:'ני"ע מתקבל',receivedAmount:"כמות מתקבלת",exercisePrice:"מחיר מימוש",linkageRate:"שיעור הצמדה",remarks:"הערות"},events:{gridTitle:"מועדים ותשלומים",beginningOfPeriod:"תאריך",eventType:"סוג מועד",securityCd:'מספר ני"ע',securityName:"שם נייר",remarks:"פרטים נוספים"},financereportingdate:{gridTitle:"מועדי פרסום דוחות",beginningOfPeriod:"תאריך",securityCd:'מספר ני"ע',securityName:"שם נייר",remarks:"פרטים נוספים",tooltipinfo:"המועדים הצפויים לפרסום הדוחות הכספיים התקבלו בבורסה ממקורות שונים לרבות, החברות עצמן, חברות קשרי משקיעים ואתרי הפצת מידע שונים. הנתונים לא נבדקו ולא בוקרו על ידי הבורסה והיא אינה אחראית לתוכנם או עדכניותם. מועדים שהתקבלו מהחברות בדיווח המידי כוללים קישור לדיווח. </br>מובהר כי דיווח על המועד הצפוי לפרסום הדוחות הכספיים הינו וולונטרי. לפיכך, דף זה כולל אך ורק את המועדים הצפויים לפרסום הדוחות הכספיים של החברות שבחרו לפרסם מועדים אלה."},assembly:{gridTitle:"אסיפות",beginningOfPeriod:"יום קובע",conventionDate:"יום כינוס",assemblyTime:"שעת האסיפה",securityCd:'מספר ני"ע',securityName:"שם נייר",rptCode:"קישור לדיווח",remarks:"פרטים נוספים"}}},"en-US":{index:"Index",alertOn:"Enable pop-up for priority disclosures",alertOff:"Disable pop-up for priority disclosures",popupNew:{subHeader:"Changes in the TASE website",text1:"As of December 5, 2021, some of the pages on the TASE websites will be available for view only. Users who want to process the data in their systems will be able to receive it through TASE Data Hub. Some of these services are fee liable.",text2:"For additional information ",text3:"Existing users",text4:"New users - click here to register",text5:"FAQ – TASE New Unified Personal Area"},enterToPrivateArea:"Sign In",newUser:"Register",resetPassword:"Reset password",signup:"Register",login:"Login",search:"Search",populrSearch:"Popular search",sector:"By Sector",tags:"Tags",missedWord:"missing",version:"Version",linkToTradindgData:"Trading data",linkToCompPage:"Company details",MAYA:"MAYA",logoMAYA:"MAYA Logo",logoTASE:"TASE Logo",reportMoreTxt:"(More Details)",backBtn:"Back>>",companySiteTitle:"Company's site",messages:"Messages",fundReports:"Fund reports",wight:"Weight",factor:"Factor",termsOfUse:"Terms Of Use",aboutMAYA:"About MAYA",aboutTASE:"About TASE",contact:"Contact Us",max:"Max",min:"Min",changes:"Variable",priorityDisclosure:"Priority Disclosure",mayaNav:"MAYA Navigation",filterEventDate:"The event is active from - {{x}}",continueToAllRes:"Continue to search",smartAgentMenu:{helloTitle:"Hello,",personalAreaBtn:"Personal Area",TASEProfilioBtn:"Personal Protfolio",smartAgentBtn:"Smart Agent",myTaseBtn:"My TASE",savedReportsBtn:"Saved",setSmartAgent:"הגדרת התראות",profileBtn:"Profile",exitBtn:"LogOut"},accessabilityMenu:{btn:"Accessibility Menu",info:"Information",statement:"Accessibility statement",colors:"Site color display",browsers:"(*Operates in advanced browsers such as  Chrome and Firefox)",regular:"Regular display",colorBlind:"Adapted for the color blind",blind:"Adapted for the visually impaired",skipToMain:"Skip to main content (shortcut key m)",skipToHome:"Switch to home page (shortcut key s)",skipToSitemap:"Switch to site map (shortcut key 1)",openContact:"Open Contact Us form (shortcut key 2)",largeFont:"Increase font size (shortcut key 0)",smallFont:"Decrease font size (shortcut key 9)",closeBtn:"Close",sitemap:"Sitemap",mayaRep:"MAYA Reports",smartAgent:"Smart Agent",smartMassage:"Smart Agent Massages",savedMassages:"Saved Massages",registerSmart:"Smart Agent Registration",moreInf:"More Information"},fundTypes:{fund:"קרנות פתוחות",etf:"קרנות סל והייטק",foreignetf:"קרנות חוץ נסחרות",hedgefund:"קרנות גידור בנאמנות",all:"כל הקרנות"},ReportHeaderInfo:{25:{remark:"אופן הצבעה באסיפה מוצג בנפרד",link:"reports/assemblyvotes?q=%7B%22events%22:%5B5900%5D,%22subevents%22:%5B5301%5D%7D"},4:{remark:"אופן הצבעה באסיפה מוצג בנפרד",link:"reports/assemblyvotes?q=%7B%22events%22:%5B5900%5D,%22subevents%22:%5B5301%5D%7D"},31:{remark:"אופן הצבעה באסיפה מוצג בנפרד",link:"reports/assemblyvotes?q=%7B%22events%22:%5B5900%5D,%22subevents%22:%5B5301%5D%7D"}},queryType:{1:"תשקיפים",2:"דיווחי בעלי עניין",3:"טיוטות תשקיפים"},mayaStrings:{clickForMore:"More Details",ChartAssetTitle:"ChartAssetTitle",IndexMainPageLink:"IndexMainPageLink",NotificationPageTitle:"הגדרת התראות",MayaSystemTitle:"MAYA - Tel Aviv Stock Exchange Site",MayaSystemTitleShort:"MAYA - Tase",ReportTitle:"Disclosures System",SearchResult:"Search Results",NoChartData:"אין נתונים לתצוגה",NotAlertName:"התראה",HomePageDescription:"The MAYA website in English serves as a central website for investors,  includes information such as companies disclosures of companies choosing to file in English, corporate fact sheet, events and payment dates of corporate actions, information of public offerings, Financial Reports Schedule, TASE announcements and more.",HomePageKeywords:'בורסה, ישראל, מסחר, נתוני מסחר, שוק ההון, פיננסי, פיננסים, מאי"ה, מאיה, סוכן חכם, הודעות הבורסה, דיווחי חברות,  הודעות מתפרצות, דיווחים כספיים, חברות בורסאיות, חברות ציבוריות, מניות, איגרות חוב, אג"ח, אג"ח להמרה, כתבי אופציה, תעודות סל, תעודות מדד, תעודות בחסר, תעודות סחורה, תעודות על מטבע, קרנות נאמנות, מנהל קרן, נאמן קרן, מועדים, תשלומים אג&quot;ח, הנפקת אג&quot;ח, תשקיף, דוח הצעה, דוח הצעת מדף, טיוטת דוח הצעת מדף, טיוטת דוח הצעה, תשקיף מדף, טיוטת תשקיף, הודעה משלימה, תשקיף להשלמה, טיוטת תשקיף להשלמה, הנפקת מניות, חברה חדשה, חברת אג&quot;ח חדשה, חברת מניות חדשה, הרחבת סדרה, הרחבת אג&quot;ח, הנפקת אופציות, הנפקה ראשונית לציבור, גיוס חוב, גיוס הון, דירוג, הצעה אחידה, דוח הצעה, מצגת, שטר נאמנות, טיוטת שטר נאמנות, הקצאה לציבור, מידע על הנפקות, נתוני הנפקות, Issue Calendar, Issue, open issues, Expected Issue, Future Issues, Emission, capital Issue, Debt Issue, public offering, IPO, prospectus, Prospectus supplement, prospectus draft, shelf offering, New company, New debt company, New series expansion, bond expansion, Initial public offering, Debt raising, raising debt, Issuance of options, raising, bond rating, presentation, Trust deed, deed of trust, shelf prospectus, uniform proposal, public proposal',UnsubscribeSuccessMessage:"הסרת המנוי מרשימת התפוצה בוצעה בהצלחה!",MayaMainPageTitle:"מאיה - מערכת אינטרנט להודעות החברות",MayaSiteTitle:"MAYA Website",HomePageTitle:"HomePage",CompanyDetailsTitle:"Company Details",MessageDetailTitle:"Report Details",CorpActionEventsTitle:"Corporate Events",CorpActionPaymentsTitle:"Income Payments",CorpActionFinancialStatemntReportingDateTitle:"Financial Reports Schedule",FundReportsTitle:"דיווחי קרן",FundEventsTitle:"מועדים ותשלומים",FundDetailsTitle:"פרטי קרן",FundHistoryTitle:"נתוני קרן היסטוריים",EndDayHistoryTitle:"נתונים היסטוריים סוף יום",HistoryTitle:"היסטוריה",EventsTitle:"מועדים",FundAssetsTitle:"הרכב נכסי הקרן",FundHitechDetailsTitle:"פרטי קרן הייטק",FundEtfDetailsTitle:"פרטי קרן סל",FundManagerTitle:"פרטי מנהל קרן",FundManagerAssets:"הרכב נכסי המנהל","ETF List":"רשימת קרנות פתוחות","Open Fund List":"רשימת קרנות סל והייטק",FinanceReportTitle:"Financial Statements",AnalysisTitle:"Analysis",FundListTitle:"נתוני קרנות",IssuanceListTitle:"Issuance Reports",MessageTitle:"Reports",ReportPageURL:"reports/details/",ConfrimEmailSuccessMessage:"אימות סיסמה עבר בהצלחה",ConfrimEmailInvalidTokenMessage:"טוקן שגוי או פג תוקפו",ConfrimEmailTitle:"אימות סיסמה",ConfrimEmailFieldRequireError:"שם משתמש או קוד משתמש שדה חובה",ConfrimEmailStatusNotFound:"שגיאה כללית",ShareTitleMessage:"Message from MAYA website:",SharePicture:"content/images/generic_maya_post.jpg",FavoriteNotLoginTitle:"Add to favorites",FavoriteNotLoginTitleMessage:"To add to favorites please login first",EmailNotVerifiedTitleMessage:"Email verification issue",EmailNotVerifiedMessage:"Please verify your email, Verification Email sent to : ",DownloadNotLoginTitle:"Download Data",DownloadNotLoginTitleMessage:"Downloading data requires login to the system",ManagementAndSeniorGridSubtitle:"omposition of management and executive officers as per report dated",ResetPasswordSuccessMessage:"איפוס הסיסמה בוצע בהצלחה!",ResetPasswordTokenExpireMessage:"טוקן שגוי או פג תוקפו",ResetPasswordTitle:"איפוס סיסמה",GeneralTitle:"Information",GeneralMessage:"אירעה שגיאה כללית במערכת",InThousandsNIS:"NIS In Thousands",LoginEnterTitle:"עליך לבצע כניסה למערכת.",LoginEnterEmptyFavTitle:"אין הודעות שמורות",ReportsTitle:"דיווחים",FundsListTitle:"רשימת קרנות",FundsAssetHeader:"קרנות מחזיקות בנכס",CompanySecuritiesTitle:"ניירות ערך",CompanyIndicesTitle:"מדדים בהם נכללים ני”ע החברה",CompanyManagementAndSeniorExecutivesTitle:"הנהלה ונושאי משרה",CompanyFinanceRptsTitle:"נתונים מדוחות כספיים",CompanyShareHoldersTitle:"בעלי עניין",FinanceRptsByPeriodTitle:"Financial Statements",LastFinanceRptsTitle:"דיווחים כספיים אחרונים",ViewMore:"More Details",ViewMoreToolTip:"לחץ כאן להצגת כל החברות",HideMore:"Hide",NotificationTitlePagingErrorTitle:"הגדרת התראות",NotificationTitlePagingErrorDesc:"יש לבחור את כל השדות הרלבנטיים",NotificationDisconnectTitle:"שגיאה בהתחברות",NotificationDisconnectDesc:"עקב התנתקות יש לבצע התחברות מחדש",NotificationOkCancelDialogTitle:"הודעות מערכת",NotChangeDialogTitle:"מעבר בין הלשוניות ימחק בחירה קודמת",Continue:"האם להמשיך?",NotificationOkCancelDialogDesc:"האם למחוק?",NotificationSettingsTitle:"הגדרת התראות",NotificationSaveFailedTitle:"הגדרת התראות",NotificationSaveFailedDesc:"NotificationSaveFailedDesc",NotificationMaxAlertLimitExceeded:"NotificationMaxAlertLimitExceeded",ReportHeaderInfo:"ReportHeaderInfo",PaymentExportLimitTitle:"ייצוא נתונים",PaymentExportLimitDesc:"ניתן לייצא עד 2000 רשומות",queryType:"queryType",fundTypes:"fundTypes",UpdDetailsSuccessMessage:"עדכון הפרטים הסתיים בהצלחה",UpdDetailsSuccessTitle:"עדכון פרטים",UpdSuccMsg:"הפעולה בוצעה בהצלחה.",UpdSuccTitle:"הודעת מערכת",UpdErrMsg:"פעולת העדכון נכשלה",UpdErrTitle:"שגיאת עדכון",NoReportsForPrint:"No reports selected for printing",ReportsForPrintTitle:"Print",ReportsForPrintError:"אירעה שגיאה בהדפסה",SearchTitle:"Search",SendUnsubscribeTitle:"הסרת מנוי מרשימת תפוצה",SendUnsubscribeMessage:"ברגעים אלה נשלחת הודעה לדואר האלקטרוני שלך עם קישור לדף בו תוכל להסיר את המנוי",MoreThenYearRange:"Please narrow your search",MoreThenYearRangeTitle:"Search",IssuanceOpenTenderTitle:"Real-time Offerings",IssuanceUncomingTitle:"Future Public Offering",OpenTenderNoResult:'No Real-time Offering <br />For Upcoming Offerings <a href="en/issuance?view=upcoming">Click Here</a>',UncomingNoResult:'No Upcoming Offerings <br />For Real-time Offering <a href="en/issuance?view=opentender">Click Here</a>',NoResult:"No results found for your search",breakingAnnouncement:"Breaking Announcement",issuance:"Issuance",firstTrade:"First Trade Date",EventSelectNotLoginTitleMessage:"Cannot select event when not logged in. Please log in and try again",EventSelectNotLoginTitle:"Cannot select event when not logged in. Please log in and try again",blocked:"Locked-Up",IncorrectDateRange:"Please narrow your search."},mainMenu:{pDisc:"Priority Disclosures",breakingannouncement:"Priority Disclosures",companies:"Disclosures",company:"Today Companies Disclosures",financialRpt:"Financial Reports",financialRptSch:"Financial Reports Schedule",tase:"TASE Notices",corporateaction:"Payments & Dates",incomePay:"Income Payments",corporateEvents:"Corporate Actions",assem:"General Meetings",analysisMain:"Analysis",analysis:"Analysis",issuanceMain:"Public Offerings",issuanceOpenTender:"Real-time Offerings",issuanceUpcoming:"Upcoming Offerings",prospectus:"Prospectus",drafts:"Drafts",companyDetail:"Company Details",shareHoldersRpt:"Interested Parties Reports",funds:"Funds",assembliesVote:"אופן הצבעה באסיפה",fund:"דיווחי קרנות פתוחות",etf:"דיווחי קרנות סל והייטק",foreignetf:"דיווחי קרנות חוץ נסחרות",rate:"Rate"},cokiisPopupMessage:"The TASE website uses cookies. For more details please see our privacy policy.",doNotShowMessage:"Don't show again",Iapprove:"I Approve",moreInf:"More info",maya:"MAYA",mayaSite:"MAYA Website",mayaLinkTitle:"MAYA by TASE",taseSite:"Tel Aviv Stock Exchange Website",Error404:"Page not found",CORP_PAYMENT_HEADER_PAYMENT_TYPE:"aaa",CHNAGE_LANG_HREF:"Hebrew",YES:"Yes",NO:"No",inThousands:"NIS In Thousands",Thousands:"Thousands NIS",Nis:"NIS",totalCount:"Total Disclosures: {{x}}",totalRec:"Total Records: {{x}}",totalSearchCount:"{{x}} Results",mayaTitle:"MAYA Website",companyNumber:"Issuer No.",about:"About",corporateNumber:"Corporate No",phoneNum:"Phone",faxNum:"Fax",eMail:"Email",Website:"Website",gathPlace:"Incorporation",address:"Address",sendEmail:"שליחת מייל",closeBtn:"Close",emailSuccess:"המייל נשלח בהצלחה",senderName:"שם השולח",senderNameErr2:"שם השולח לא תקין",senderNameErr1:"נא למלא את שם השולח",recieverName:"שם הנמען",recieverNameErr1:"נא למלא את שם הנמען",recieverNameErr2:"שם הנמען לא תקין",eMailErr1:"נא למלא דואר אלקטרוני",eMailErr2:"דואר אלקטרוני לא תקין",remarks:"הערות",remarksErr1:"נא למלא שדה הערות",remarksErr2:"שדה הערות מכיל תווים לא חוקיים",securityCode:"קוד אימות אבטחה",autoCompltplchldr:"Search MAYA website",mapEntitiesTitle:{1:"חברה",2:"מנפיק תעודת סל",3:"מנהל קרן",4:"קרן",5:'ני"ע',6:"אירוע",7:"תת אירוע",8:"ענף על",9:"ענף",10:"תת ענף",14:"קרן סל",15:"קרן הייטק",16:"נאמן"},companyDetails:{cmpnyWorth:"Market Cap:",compDet:"Details",reports:"Disclosures",finData:"Financial Data",eventsPayments:"Corporate Events",analysis:"Analysis",securitiesTitle:"Securities",shareHolders:"Interested Parties",management:"נושאי משרה",pageInfo:"Page Information",branchInTase:"TASE Sector",branchInTaseTitle:"Security included indices :",sharetabPage1:"Equities",sharetabPage2:"All Securities",ShareHoldersChartData:"Distribution Of Company Holdings - 100%",deletedCompanyRemark:"כל הנתונים המוצגים נכונים ליום מחיקת החברה מהרישום למסחר בבורסה",ShareHoldersChartDataMainTitle:"Distributions of the Companys Holdings- 100%",ShareHoldersChartDataTitle:"Distributions of the Companys Interested Parties as of- {{x}}",controlerHoldersChartDataTitle:"Distributions of the Companys Controllers as of- {{x}}",tradingData:"Transactions Data",tradingDataHistory:"Previous Trading Days"},companySecuritiesLegend:{legend:"legend",nonTradeable:" Non Tradeable",marketMakerAppointedForSecurity:" Market Make Appointed For Security"},popUpNoResults:{close:"Close window",approve:"OK",title:"Search"},reportActions:{filesAction:"Files",saveFav:"Save in favorites",share:"Share",save:"Save",openNewWin:"Open in New Window",prnt:"Print",markPrnt:"Select for Printing",prntBtn:"",sndPrint:"Print",prntView:"Print Preview",markAll:"Select All",selectAll:"Select all",noResults:"No English reports were found",clearSelection:"Clear selection",TA35:"TA 35",TA125:"TA 125",byTime:"By Period",byIndices:"By Indices",shareOptions:{twtr:"Share on Twitter",fb:"Share on Facebook",wtsap:"Share on Whatsapp",Email:"Send Mail"}},report:{charts:{showTradeData:"View Market Data",oneD:"Day",oneW:"Week",oneM:"Month",threeM:"3 Months",sixM:"Half Year",oneY:"Year",oneDshort:"1D",oneWshort:"1W",oneMshort:"1M",oneYshort:"1Y",threeMshort:"3M",sixMshort:"6M","1Yearshort":"1Y",more:"Charts",securityType:"Security Type",lastPrice:"Last Price",Ag:"(0.01 NIS)",change:"Change",turnOver:"Turnover",marketVal:"Market Cap.",securityDetail:"Company Profile",tradeDetail:"Market Data",historyData:"Historical Data",rightTo:"As of",timeDelay:"15 min. delay",tousends:"NIS Thousands",agurutShort:"(0.01 NIS)",nis:"NIS"},details:{companyReports:"Company Disclosures",reportList:"Disclosures List",dual:"(Dual Listed)",deleted:"(Deleted)",intrested:"(Related)",cmpnyRptBtn:"To company disclosures",fndMgrBtn:"Fund manager webpage",tradeDetailOfBtn:"View Market Data for"}},printGrid:{printTitle:"MAYA - Print"},issuance:{future:"Upcoming Offerings",open:"Real-time Offerings",predict:"Public Offerings"},grid:{exportDataDisplay:"Download Data",printData:"Print",infoBtn:"Legend",sortAscTitle:"Sort ASC By",sortDescTitle:"Sort DESC By",lastFundManagerReport:"דיווחים כספיים אחרונים",allFundsTpl:{FSN:"שם הקרן",FTD:'"סוג ני"ע',FId:"מס' קרן",ARS:"נכס הייחוס",EP:"פרופיל חשיפה",Cl:"סיווג הקרן",PI:"מאפייני הקרן",FCN:"קרן להשקעות חוץ מטבע עיקרי",CR:"שער אחרון (באגורות)",PC:"שינוי (%)",TOVS:'מחזור (באלפי ש"ח)',LUD:"זמן עסקה אחרונה",PP:"מחיר קניה (יצירה)",UVP:"שווי יחידה",SP:"מחיר פדיון",CTD:"ת. עדכון אחרון",DY:"שינוי מיום קודם %",MY:"תשואות מתחילת החודש",YY:"תשואה מתחילת השנה",L12SY:"תשואה מתחילת 12 חודשים",TRD:"מסלול מס",THD:"קוד הגבלת פעילות",MSN:"מנהל הקרן",TSN:"נאמן הקרן",TRD2:"מעמד מס",MFee:"דמי ניהול",TFee:"דמי נאמנות",ClD:"סיווג עמלת הפצה"},companyFinanceReportTpl:{tooltip1:'Financial Ratios:"Market Capitalization"- as of end of previous trading day, In companies reporting in other currency than NIS – Translated to the reported currency by division to the exchange rate on the last TASE trading day; "Market to book value" & " Equity-Assets Ratio" - Shareholders Equity attributable to the Shareholders & Total assets, as reported in the last financial reports of the company; "Price-Earning Ratio" & "Return on Equity"- Net income attributable to the Shareholders (Trailing Twelve Months) & Shareholders Equity attributable to the Shareholders(average 12 months start and end of period), as reported in the financial reports of the company.',Name:"Name",info:"Capital listed for trading = issued and paid-up capital less dormant shares",infoTaseUp:"The number of securities shown in the Issued and Paid-Up Securities and in the Capital Listed for Trading columns, reflects only the quantity that the company requested to be traded within the TASE-UP system. This quantity does not necessarily reflect the full amount of securities that the company allotted.",IFRSRemark:"International Financial Reporting Standard",lgendMap:{markTooltip1:"Legend of listed securities symbols",markTooltip2:"להלן מקרא לסימול ניירות ערך: Z-YY.XXXX",markTooltip3:"XXXX אותיות מימין לנקודה הינן קיצור לשם החברה",markTooltip4:" YY אותיות משמאל לנקודה מציינות סוג נייר ערך",markTooltip5:"Z אותיות משמאל למקף מציינות ניירות ברשימות מסחר מיוחדות או הגבלות מסחר",markMainTitle:"Symbol",mainExplain:"Security type",mark1:".W",mark1A:"Warrant for share",mark2:".O",mark2A:"Purchase warrant",mark3:".WB",mark3A:"warrant for corporate bond",mark4:".WC",mark4A:"warrant for convertible bond",mark5:".C",mark5A:"Convertible Bond",mark6:".B",mark6A:"Corporate bond",mark7:".D",mark7A:"Treasury shares",mark8:".DS",mark8A:"securities held by a subsidiary",mark9:".F",mark9A:"High Tech Fund",mark10:".F",mark10A:"ETF equity",mark11:".F",mark11A:"ETFbonds",mark12:".FF",mark12A:"Traded foreign fund Equity",mark13:".P",mark13A:"Commercial Papers",mark14:"-M",mark14A:" Maintenance list",mark15:"-BI",mark15A:"trated for Institutioed only",mark16:".FF",mark16A:"Traded foreign fund Bonds",mark17:".L",mark17A:"illiquid list",mark18:".B",mark18A:"Equity Bond to be Converted",mark19:".B",mark19A:"Equity Bond to be Deleted",mark20:" ",mark20A:" "}},companyIndicesTpl:{title:"Indices",SecurityName:"Name",Symbol:"Symbol",SecurityId:"ISIN",IndexName:"Index",Weight:"% Weight",FactorWeight:"Weight Factor"},companySecuritiesTpl:{securityName:"Name",shareType:"Security Type",symbol:"Symbol",securityId:"securityId",isin:"ISIN",issuedCapital:"Issued and Paid-Up Securities",registredCapital:"Securities Listed for Trading",dispositivePower:"% Capital",votingPower:"% Voting",marketValue:"Market Cap (NIS millions)",indicesWeight:"Indices",isFundHolding:"Capital Listed for Trading"},companyManagmentTpl:{Title:"Board & Management",tooltip:"There may be differences between the published data to the data disseminated by the Company, due to frequency of update.",subTitle:"Composition of management and executive officers as per report dated",Name:"Name",RoleType:"Position",SecurityName:"Security Name",EndBalance:"Balance",LastBalanceDate:"Balance Date",CapitalPercent:"% Capital",VoteCapital:"% Voting",IsFinancialExpert:"Financial Expert",IsInspectionComitee:"Audit Committee"},companySharedHoldersTpl:{HolderName:"Name",Remark:"Remarks",LastUpdateDate:"Balance Date",SecurityName:"Symbol",EndBalance:"Balance",CapitalPercent:"% Capital",VoteCapital:"% Voting",MarketValue:"Market Cap (NIS millions)"},etfAssetsTpl:{AssetName:"שם הנכס",FundPercentage:"מהקרן %",NisValue:'שווי באלפי ש"ח',Price:"מחיר",Quantity:'"כמות ני"ע',AssetTypeName:"סוג",BondRank:"דירוג",Graph:"גרף שווי אחזקות לתקופה"},etfEndOfDayHistoryTpl:{TradeDate:"תאריך נכונות",CloseRate:"שער נעילה",Change:"שינוי (%)",MonetaryTurnOver1000:"מחזור",CreationPrice:"מחיר קניה (יצירה)",SellPrice:"מחיר פדיון",UnitPrice:"שווי יחידה",FundsLastUpdateDate:"ת. עדכון של שערי קרנות",BaseRate:"שער בסיס",OpenRate:"שער פתיחה",LowRate:"שער נמוך",HighRate:"שער גבוה",PointsChange:"שינוי",TurnOverVolume:"מחזור",DealsNo:"מספר עסקאות",MarketValue:"שווי שוק",ExeText:"סוג האקס",RegisteredCapital:"הון רשום למסחר",ManagmentFee:"דמי ניהול (%)",TrustedFee:"דמי נאמנות (%)"},etfInDayHistoryTpl:{DealDate:"תאריך",DealTime:"שעה",LastRate:"שער עסקה",Change:"שינוי(%)",TurnOverUnits:"מחזור ביחידות",TurnOverValue:"מחזור מסחר",OverallTurnOverValue:"מחזור מצטבר"},etfManagerSecurity:{SecurityName:"שם",Symbol:"סימול",SecurityId:'מספר ני"ע',ISIN:"ISIN",RegistredCapital:"יתרה בחשבון מסלקת הבורסה ביורוקליר",MarketValue:"שווי אחזקות בחשבון מסלקת הבורסה ביורוקליר במיליוני ₪"},etfTpl:{FSN:"שם הקרן",FId:"מס' קרן",ARS:"נכס הייחוס",EP:"פרופיל חשיפה",Cl:"סיווג הקרן",PI:"מאפייני הקרן",FCN:"קרן להשקעות חוץ מטבע עיקרי",CR:"שער אחרון (באגורות)",PC:"שינוי (%)",TOVS:'מחזור (באלפי ש"ח)',LUD:"זמן עסקה אחרונה",UVP:"שווי יחידה",CP:"מחיר קניה(יצירה)",SP:"מחיר פדיון",CTD:"ת. עדכון אחרון",BR:"שער בסיס",OR:"שער פתיחה",LR:"שער נמוך",HR:"שער גבוה",DN:"מספר עסקאות",OTOU:"מחזור ביחידות",MV:"שווי שוק",TRD:"מעמד מס",MFee:"דמי ניהול",VFee:"דמי ניהול משתנים",TFee:"דמי נאמנות",ClD:"סיווג עמלת הפצה"},financeReportTpl:{title:"Financial Statements",PubDate:"Publish date",CompanyName:"Company name",ReportPeriod:"Report period",Files:"Report hyperlink",TradeHalt:"Trade stop",htmlFile:"html File",pdfFile:"PDF",xbrFile:"XBRL File"},foriegnEtfEndOfDayHistory:{TradeDate:"תאריך",ShareStatus:"אינדיקציה",AdjustmentRate:"שער נעילה מתואם",CloseRate:"שער נעילה",Change:"שינוי (%)",OpenRate:"שער פתיחה",BaseRate:"שער בסיס",HighRate:"שער גבוה",LowRate:"שער נמוך",RegisteredCapital:"הון רשום למסחר",MarketValue:"שווי שוק",MonetaryTurnOver:"מחזור המסחר",TurnOverVolume:"מחזור ביחידות",DealsNo:"מספר עסקאות",ExeText:"סוג האקס",AdjustmentCoefficient:"מקדם אקס",MMM:'ממ"מ',FreeFloatPercent:"אחוז החזקות הציבור למדד",LastUpdateDate:'מועד עדכון ממ"מ אחרון'},foriegnEtfTpl:{FSN:"שם הקרן",FId:"מס' קרן",Cl:"סיווג הקרן",MFee:"דמי ניהול",CR:"שער אחרון (באגורות)",PC:"שינוי (%)",TOVS:'מחזור (באלפי ש"ח)',LUD:"זמן עסקה אחרונה",BR:"שער בסיס",OR:"שער פתיחה",LR:"שער נמוך",HR:"שער גבוה",POC:"שינוי באגורות",RCP:"יתרה בחשבון מסלקת הבורסה ביורוקליר",FMV:"שווי אחזקות בחשבון מסלקת הבורסה ביורוקליר במיליוני ₪"},fundsAssetTpl:{AssetName:"שם הנכס",FundPercentage:"מהקרן %",NisValue:'שווי באלפי ש"ח',Price:"מחיר",Quantity:'כמות ני"ע',AssetTypeName:"סוג",BondRank:"דירוג",Graph:"גרף שווי אחזקות לתקופה"},fundsHistoryTpl:{TradeDate:"תאריך",PurchasePrice:"מחיר קניה",SellPrice:"מחיר פדיון",Rate:"שיעור הוספה (%)",ManagmentFee:"דמי ניהול (%)",AssetValue:"שווי נכסים במיל' ₪",TrusteeFee:"דמי נאמנות"},fundsManagerAssetsTpl:{AssetName:"שם הנכס",NisValue:'שווי באלפי ש"ח',Quantity:'כמות ני"ע',AssetTypeName:"סוג",BondRank:"דירוג",Graph:"גרף שווי אחזקות לתקופה"},fundsManagerTpl:{FundShortName:"שם הקרן",FundTypeDesc:'סוג ני"ע',FundId:"מס' קרן",ExposureProfile:"פרופיל חשיפה",Classification:"סיווג הקרן",TaxRouteDesc:"מעמד מס",ManagementFee:"דמי ניהול",TrusteeFee:"דמי נאמנות",AssetValue:"שווי נכסי הקרן",PurchasePrice:"מחיר קניה",SellPrice:"מחיר פדיון",DayYield:"% שינוי יומי",MonthYield:"תשואות מתחילת החודש",YearYield:"תשואות מתחילת השנה",StandardDeviation:"סטיית תקן"},fundsMonthlyReportTpl:{FundId:"מספר קרן",FundNm:"שם קרן",AssetNm:"שם נכס",AssetType:"סוג נכס",IdentificationNumber:"מספר מזהה",IdentificationType:"סוג מזהה",Amount:"כמות",PriceValueInNis:"שווי בשקלים\tמחיר",Price:"מחיר",TradingCurrencyValue:"שווי במטבע מסחר",PercentageFund:"% מקרן",AmountBorrwed:"כמות שהושאלה",PriceType:"סוג מחיר",TradingPlace:"מקום מסחר",TradingMarket:"שוק מסחר"},fundsAssetsTpl:{FundName:"מספר קרן",FundId:"שם קרן",FundPercentage:"שם נכס",NisValue:"סוג נכס",Price:"מספר מזהה",Quantity:"סוג מזהה"},fundsTpl:{FLN:"שם הקרן",FId:"מס' קרן",EP:"פרופיל חשיפה",MSN:"מנהל קרן",Cl:"סיווג הקרן",PI:"מאפייני הקרן",FCN:"קרן להשקעות חוץ מטבע עיקרי",TSN:"נאמן",TRD:"מעמד מס",ClD:"סיווג עמלת הפצה",SFee:"דמי הצלחה",MFee:"דמי ניהול",TFee:"דמי נאמנות",AV:"שווי נכסי הקרן",PP:"מחיר קניה",SP:"מחיר פדיון",DY:"שינוי יומי %",MY:"תשואות מתחילת החודש",YY:"תשואות מתחילת השנה",L12SY:"תשואות 12 חודשים",SD:"סטיית תקן",ARS:"נכס הייחוס"},issuanceOpenTenderTpl:{title:"Real-time Offerings",newStockInfo:"New security",TenderNbr:"Offer No.",SubmissionOfOrdersStartDate:"Begins at",SubmissionOfOrdersEndDate:"Ends at",CompanyNm:"Company Name",UnitComposition:"Quantity of Offered Units",SecurityNm:"Security Name",SecurityQuantityInUnit:"Quantity per Unit",TenderType:"Offer Type",MaxInterest:"Interest",LinkageType:"Linkage Type",MinimumPrice:"Price per Unit (NIS)",MaalotRate:"Maalot Rating",MidrugRate:"Midroog Rating",RptCd:"Offering Report",SpaciousRate:"Interest Margin %",SpaciousPrice:"Price Margin (NIS)",UniformProposal:"Offering Type",ARS:"להזמנה",newSec:"= New security",tooltipTenderType:"For price tenders, the figure in the “price” column represents the minimum price bid. For interest tenders, the figure in the “interest” column represents the maximum interest bid, while in quantity tenders the interest and the price  are as set out in the offer.",tooltipMaxInterest:"For price tenders, the annual interest rate set out in the terms of the bond is presented.",tooltipMinimumPrice:"For interest tenders, the bond price prescribed for the issuance is presented."},issuanceUpComingTenderTpl:{title:"Upcoming Offerings",CompanyNm:"Company Name",CompanyTypeDesc:"New Company",SecurityType:"Offered Security Types",ReportPresentationLink:"Company Presentation",DraftTitle:"Draft Prospectus/Prospectus/Draft Offering Report",ReportTrustDeedLink:"Trust Deed",MaalotRate:"Maalot Rating",MidrugRate:"Midroog Rating"}},paging:{prevAlt:"To Previous Page",prevTitle:"Previous",nextAlt:"To next page",nextTitle:"Next",nexpPage:"To Page",loadMore:"Load More"},filter:{filterOptionTitle:"Filtering Options",filterTitle:"Filtering Options",filterBtnTitle:"Filter",fromDateTitle:"From",toDateTitle:"To",fromYearTitle:"Choose year",fromYear:"From year",toYear:"To year",eventsGroupTitle:"Events Groups",eventsGroupTitle2:"הרחבת אפשרויות",cmpnyGroupBtn:"Companies list",eventsGroupBtn:"Events Details",fundOption:"-----Select ETF Manager-----",selectFund:"Select ETF ",selectFundOption:"----- Select ETF -----",companyGroupOption1:"----- Select Group -----",companyGroupOption2:"----- Select List -----",selectFundManager:"Select ETF Manager",allMessages:"All messages",companyGroupTitle:"Select Group",companyTitle:"Select Company",companyOption:"----- Select Company -----",cmpnyrdio1:"By Group",cmpnyrdio2:"By Company",securityTitle:"Security/ISIN",securityOption:"--- Choose Security Number/Name ---",sectorOption:"All Sectors",onlyBreakingNews:"Priority Disclosures",onlyTradeHalt:"Trade Halts",closeSideBar:"Close","More Events":"More Events",clearAllBtn:"Clear All",quaterTitle:"Choose quater",quaterOption1:"Published today",quaterOption2:"Q1",quaterOption3:"Q2",quaterOption4:"Q3",quaterOption5:"Annual",quaterOption6:"Choose all",meesageToClients:"Disclosures to Customers",clientsMessages:"ללקוחות ההודעות",specificReports:"Specific Disclosures",reportPeriodTitle:"Chose report period",freeText:{header:"Find annoucement with",option1:"Exact phrase",option2:"At least one word",option3:"Include all words",placeholder:"------------ Free Text Search ----------"}},filterAdvancedCorp:{title:"Event Groups",closeDialogBtn:"CLose",header:"Events",placeHolder:"Search Events",clearBtn:"Clear",selectAllBtn:"Select all",removeFilter:"Remove filter",removeEvent:"Remove event",filterBtn:"Filter",cancelBtn:"Cancel",activeFilter:"Active Filter"},filteredCompaniesPopUp:{complexTitle:"By - {{x}}"},corporateactions:{mainTitle:"Corporate Actions",paymentTab:"Income Payments",eventsTab:"Events",publishDateTab:"Financial Reports",gatheringTab:"General Meetings",timezoneInfo:"Some of the hours in this table are not according to Israeli time. the time zone must be verified in the content of the report.",payments:{gridTitle:"Income Payments",beginningOfPeriod:"EX-Date",endOfPeriod:"Payment Date",paymentType:"Type of Payment",securityCd:"Security Number",securityName:"Security Name",payment:"Payment",corporateTax:"Beginning of Period EX-Date",personalTax:"End of Period Payment Date",receivableAmount:"Beginning of Period EX-Date",receivedSecurity:"End of Period Payment Date",receivedAmount:"Beginning of Period EX-Date",exercisePrice:"End of Period Payment Date",linkageRate:"Linkage Rate",remarks:"Remarks"},events:{gridTitle:"Corporate Events",beginningOfPeriod:"Date",eventType:"Type of Event",securityCd:"Security No.",securityName:"Security Name",remarks:"More Details"},financereportingdate:{gridTitle:"Financial Reports Schedule",beginningOfPeriod:"Date",securityCd:"Security No.",securityName:"Security Name",remarks:"More Details",tooltipinfo:"TASE has received the expected dates for the publication of the financial reports from various sources, including  the listed companies themselves, IR companies and financial websites.\nTASE has not checked or reviewed the data and shall not be held liable nor for its content neither for it being updated.\nwhere the source of the information is an immediate report,  a link to the report itself is provided."},assembly:{gridTitle:"General Meetings",beginningOfPeriod:"Record Date",conventionDate:"Meeting Date",assemblyTime:"Time",securityCd:"Security No.",securityName:"Security Name",rptCode:"Report Link",remarks:"More Details"}}}};